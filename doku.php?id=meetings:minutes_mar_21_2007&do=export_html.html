<html>
<head>
  <meta name="generator" content="DokuWiki Release 2005-09-22e" />
  <link rel="start" href="index.html" />
  <link rel="contents" href="doku.php%3Fid=meetings:minutes_mar_21_2007&amp;do=index.html" title="" />
  <link rel="alternate" type="application/rss+xml" title="Recent Changes" href="feed.php" />
  <link rel="alternate" type="application/rss+xml" title="Current Namespace" href="feed.php%3Fmode=list&amp;ns=meetings" />
  <link rel="alternate" type="text/html" title="Plain HTML" href="doku.php%3Fid=meetings:minutes_mar_21_2007&amp;do=export_html.html" />
  <link rel="alternate" type="text/plain" title="Wiki Markup" href="doku.php%3Fid=meetings:minutes_mar_21_2007&amp;do=export_raw" />
  <link rel="stylesheet" media="screen" type="text/css" href="lib/styles/style.css" />
  <meta name="robots" content="noindex,nofollow" />
  <script language="javascript" type="text/javascript" charset="utf-8">
    var alertText   = 'Please enter the text you want to format.\nIt will be appended to the end of the document.'
    var notSavedYet = 'Unsaved changes will be lost.\nReally continue?'
    var DOKU_BASE   = '/'
  </script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/script.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/tw-sack.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/ajax.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/domLib.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/domTT.js"></script>
  <link rel="stylesheet" type="text/css" href="lib/plugins/plugin/style.css" />
</head>
<body>
<div class="toc">
<div class="tocheader"> <script type="text/javascript">showTocToggle("+","-")</script>Table of Contents</div>
<div id="tocinside">
<ul class="toc">
<li class="level1"><span class="li"><a href="doku.php%3Fid=meetings:minutes_mar_21_2007&amp;do=export_html.html#location" class="toc">Location</a></span></li>
<li class="level1"><span class="li"><a href="doku.php%3Fid=meetings:minutes_mar_21_2007&amp;do=export_html.html#attendees" class="toc">Attendees</a></span></li>
<li class="level1"><span class="li"><a href="doku.php%3Fid=meetings:minutes_mar_21_2007&amp;do=export_html.html#agenda_items" class="toc">Agenda items</a></span></li>
<li class="level1"><span class="li"><a href="doku.php%3Fid=meetings:minutes_mar_21_2007&amp;do=export_html.html#discussion_-_day_1" class="toc">Discussion - Day 1</a></span><ul class="toc">
<li class="clear"><ul class="toc">
<li class="level3"><span class="li"><a href="doku.php%3Fid=meetings:minutes_mar_21_2007&amp;do=export_html.html#morning" class="toc">Morning</a></span></li>
<li class="level3"><span class="li"><a href="doku.php%3Fid=meetings:minutes_mar_21_2007&amp;do=export_html.html#afternoon" class="toc">Afternoon</a></span></li>
</ul>
</li>
</ul>
</li>
<li class="level1"><span class="li"><a href="doku.php%3Fid=meetings:minutes_mar_21_2007&amp;do=export_html.html#discussion_-_day_2" class="toc">Discussion - Day 2</a></span><ul class="toc">
<li class="level2"><span class="li"><a href="doku.php%3Fid=meetings:minutes_mar_21_2007&amp;do=export_html.html#brendan_s_agenda_annotated" class="toc">Brendan's agenda (annotated)</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=meetings:minutes_mar_21_2007&amp;do=export_html.html#discussion_around_the_agenda" class="toc">Discussion around the agenda</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=meetings:minutes_mar_21_2007&amp;do=export_html.html#outcomes" class="toc">Outcomes</a></span></li>
</ul>
</li>
<li class="level1"><span class="li"><a href="doku.php%3Fid=meetings:minutes_mar_21_2007&amp;do=export_html.html#discussion_-_day_3" class="toc">Discussion - Day 3</a></span><ul class="toc">
<li class="level2"><span class="li"><a href="doku.php%3Fid=meetings:minutes_mar_21_2007&amp;do=export_html.html#spec_issues" class="toc">Spec issues</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=meetings:minutes_mar_21_2007&amp;do=export_html.html#venue" class="toc">Venue</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=meetings:minutes_mar_21_2007&amp;do=export_html.html#schedule_and_worklist" class="toc">Schedule and worklist</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=meetings:minutes_mar_21_2007&amp;do=export_html.html#detailed_items" class="toc">Detailed items</a></span></li>
</ul>
</li>
</ul>
</div>
</div>

<a name="location"></a><h1>Location</h1>
<div class="level1">
<ul>
<li class="level1"><div class="li"> Wednesday, 21 March: building 41, room 3731</div>
</li>
<li class="level1"><div class="li"> Thursday, 22 March: building 41, room 3731</div>
</li>
<li class="level1"><div class="li"> Friday, 23 March: building 41, room 5731</div>
</li>
</ul>

<p>
 Microsoft Corporation, One Microsoft Way, Redmond, WA 98102
</p>

<p>
<strong>Timing</strong>
</p>

<p>
10 AM to 5 PM Pacific Time
</p>

<p>
Lunch and Snacks provided; dinner on Wednesday and Thursday.
</p>

<p>
<strong>Directions from Airport</strong> 
</p>
<ul>
<li class="level1"><div class="li"> Follow signs to freeways; this will put you on SR 518 eastbound, and you&rsquo;ll want to merge carefully.</div>
</li>
<li class="level1"><div class="li"> Follow signs to I-5 and I-405.</div>
</li>
<li class="level1"><div class="li"> Take the I-405 North-Renton exit (exits from center lane).</div>
</li>
<li class="level1"><div class="li"> Continue on north I-405 through Renton and Bellevue (approx. 14 miles).</div>
</li>
<li class="level1"><div class="li"> Take SR-520 east exit toward Redmond.</div>
</li>
<li class="level1"><div class="li"> Exit SR-520 at the NE 40th St. exit.</div>
</li>
<li class="level1"><div class="li"> Turn right at end of ramp onto NE 40th St.</div>
</li>
<li class="level1"><div class="li"> Turn right at light onto 156th Ave. NE.</div>
</li>
<li class="level1"><div class="li"> Turn right at second light, NE 31st St.</div>
</li>
<li class="level1"><div class="li"> Turn left into building 40/41 complex (6 story buildings).</div>
</li>
</ul>

<p>
 Visitor parking is in parking garage to the right. Receptionist will give you a parking pass and contact the conference room.
</p>

<p>
<strong>Contacts</strong> 
</p>
<ul>
<li class="level1"><div class="li"> Pratap Lakshman: pratapl@microsoft.com, ph: 425 703 2903</div>
</li>
<li class="level1"><div class="li"> Allen Wirfs-Brock: allenwb@microsoft.com, ph: 425 705 5361</div>
</li>
</ul>

</div>
<!-- SECTION [1-1189] -->
<a name="attendees"></a><h1>Attendees</h1>
<div class="level1">
<ul>
<li class="level1"><div class="li"> Jeff Dyer, Adobe Systems</div>
</li>
<li class="level1"><div class="li"> Dan Smith, Adobe Systems</div>
</li>
<li class="level1"><div class="li"> Brendan Eich, Mozilla</div>
</li>
<li class="level1"><div class="li"> Graydon Hoare, Mozilla</div>
</li>
<li class="level1"><div class="li"> Mike Shaver, Mozilla (Thursday)</div>
</li>
<li class="level1"><div class="li"> Douglas Crockford, Yahoo! (Thursday and Friday)</div>
</li>
<li class="level1"><div class="li"> Chris Pine, Opera</div>
</li>
<li class="level1"><div class="li"> Lars Hansen</div>
</li>
<li class="level1"><div class="li"> Allen Wirfs-Brock, Microsoft</div>
</li>
<li class="level1"><div class="li"> Pratap Lakshman, Microsoft</div>
</li>
<li class="level1"><div class="li"> David Simmons, Microsoft (Friday)</div>
</li>
<li class="level1"><div class="li"> Dave Herman, Northeastern (Thursday and Friday)</div>
</li>
<li class="level1"><div class="li"> Michael Oâ€™Brien, mbedthis (Thursday)</div>
</li>
<li class="level1"><div class="li"> Chris Wilson, Microsoft (Thursday)</div>
</li>
<li class="level1"><div class="li"> Scott Isaacs, Microsoft (Thursday)</div>
</li>
<li class="level1"><div class="li"> Mike Cowlishaw, IBM (Thursday) (on the phone)</div>
</li>
<li class="level1"><div class="li"> Brian Crowder, Mozilla (on the phone)</div>
</li>
<li class="level1"><div class="li"> Cormac Flanagan, UCSC (Thursday morning) (on the phone)</div>
</li>
</ul>

</div>
<!-- SECTION [1190-1881] -->
<a name="agenda_items"></a><h1>Agenda items</h1>
<div class="level1">
<ul>
<li class="level1"><div class="li"> <a href="doku.php%3Fid=proposals:documentation.html" class="wikilink1" title="proposals:documentation" onclick="return svchk()" onkeypress="return svchk()">proposals:documentation</a>: we have two competing proposals and several loose ends</div>
</li>
<li class="level1"><div class="li"> <a href="doku.php%3Fid=proposals:meta_objects.html" class="wikilink1" title="proposals:meta_objects" onclick="return svchk()" onkeypress="return svchk()">proposals:meta_objects</a>: uses structural types for some data, not obvious that this is a good idea</div>
</li>
<li class="level1"><div class="li"> Implementation of type checks</div>
</li>
<li class="level1"><div class="li"> Tracking refimpl and spec completness</div>
</li>
<li class="level1"><div class="li"> Tracking bugs</div>
</li>
</ul>

<p>
 <u>Day 2</u>
</p>
<ul>
<li class="level1"><div class="li"> Discussion on the proposal for incremental evolution of ES3 (forenoon).</div>
</li>
</ul>

<p>
 <u>Day 3</u>
</p>
<ul>
<li class="level1"><div class="li"> Spec issues</div>
<ul>
<li class="level2"><div class="li"> informative vs. normative</div>
<ul>
<li class="level3"><div class="li"> can SML be pretty-printed as normative spec language?</div>
</li>
<li class="level3"><div class="li"> typographic and presentation separation ideas</div>
</li>
</ul>
</li>
<li class="level2"><div class="li"> generate <acronym title="HyperText Markup Language">HTML</acronym>+<acronym title="Cascading Style Sheets">CSS</acronym> in addition to Word</div>
<ul>
<li class="level3"><div class="li"> or first, then to Word?</div>
</li>
</ul>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Schedule/Venue</div>
<ul>
<li class="level2"><div class="li"> face to face calendar</div>
</li>
<li class="level2"><div class="li"> bug tracking</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Detailed Work Items</div>
<ul>
<li class="level2"><div class="li"> ListExpr vs. AssignExpr for (let,yield,function) expression body-forms</div>
</li>
<li class="level2"><div class="li"> expression closure syntax, otherwise</div>
</li>
<li class="level2"><div class="li"> Dictionary</div>
</li>
<li class="level2"><div class="li"> MOP function naming, at last</div>
</li>
<li class="level2"><div class="li"> ISSUE from iterators</div>
</li>
<li class="level2"><div class="li"> <a href="doku.php%3Fid=proposals:enumeration_type.html" class="wikilink1" title="proposals:enumeration_type" onclick="return svchk()" onkeypress="return svchk()">enumeration type</a></div>
</li>
<li class="level2"><div class="li"> <a href="doku.php%3Fid=proposals:versioning.html" class="wikilink1" title="proposals:versioning" onclick="return svchk()" onkeypress="return svchk()">versioning</a></div>
</li>
<li class="level2"><div class="li"> <a href="doku.php%3Fid=proposals:catchalls.html" class="wikilink1" title="proposals:catchalls" onclick="return svchk()" onkeypress="return svchk()">catchalls</a></div>
</li>
<li class="level2"><div class="li"> <a href="doku.php%3Fid=proposals:name_objects.html" class="wikilink1" title="proposals:name_objects" onclick="return svchk()" onkeypress="return svchk()">name objects</a></div>
</li>
</ul>
</li>
</ul>

</div>
<!-- SECTION [1882-3003] -->
<a name="discussion_-_day_1"></a><h1>Discussion - Day 1</h1>
<div class="level1">

</div>
<!-- SECTION [3004-3037] -->
<a name="morning"></a><h3>Morning</h3>
<div class="level3">

<p>
 <strong>Issue</strong>: There is no way to indicate certain attributes of the MOP using structural type, as specified
</p>

<p>
<strong>Resolution</strong>: we will rewrite them using interfaces rather than structural types
</p>

<p>
<strong>Issue</strong>: the MOP allows for reflection of subtypes
</p>

<p>
<strong>Resolution</strong>: this was discussed and thought to be removed. If desired implementations can extend the MOP as defined
</p>

<p>
<strong>Issue</strong>: are nominal types always named?
</p>

<p>
<strong>Resolution</strong>: yes, but what we need to be aware of future extensions
</p>

<p>
<strong>Issue</strong>: the name NominalType maybe obscure for some uses (on the left side of the bell curve of user ability)
</p>

<p>
<strong>Resolution</strong>: none yet
</p>

<p>
<strong>Commentary</strong>: Brendan notes that we are targeting users in the center of the bell curve at the middle  of the graph of usability
</p>

<p>
<strong>Issue</strong>: documentation comments need to be better defined
</p>

<p>
<strong>Resolution</strong>: we have higher priority things to think about. feature is deferred
</p>

<p>
<strong>Issue</strong>: implementation of type checks. graydon is looking for guidance on how to implement runtime type checks. We want to wait until Dave and Cormac are in the room. At the Feb-27 meeting there was some discussion, but the details are not clear.
</p>

<p>
<strong>Resolution</strong>: None, yet. we will discuss with use cases in mind and dave and cormac in the room.
</p>

</div>
<!-- SECTION [3038-4305] -->
<a name="afternoon"></a><h3>Afternoon</h3>
<div class="level3">

<p>
 <strong>ISSUE</strong>: what are the nullabliity, default values and finality of &lsquo;string&rsquo;, &lsquo;String&rsquo;, &lsquo;Boolean&rsquo; and &lsquo;boolean&rsquo;?
</p>

<p>
<strong>RESOLUTION</strong>:
</p>

<p>
string &lt; String boolean &lt; Boolean
</p>

<p>
string and boolean are final and have the obvious default values
</p>

<p>
String and Boolean are not final, nullable and unsealed (for compat with ES1-3)
</p>

<p>
Catchalls are used to simulate the ES3 behavor of read and writes to primitive values.
</p>

<p>
Number.prototype.valueOf returns a Numeric value
</p>

<p>
type Numeric = (int,uint,double,decmial)
</p>

<p>
<strong>ISSUE</strong>: how do we type prototype slot. The rough idea is that they have the instance type of the class that owns it.
</p>

<p>
<strong>RESOLUTION</strong>: Lars and Brendan say Object
</p>

<p>
<strong>ISSUE</strong>: does <code>instrinsic</code> mean final. AS3 says no, but Lars wonders what its for then.
</p>

<p>
<strong>RESOLUTION</strong>: <code>intrinsic</code> is just a namespace. It allows for static type checking without shadowing their prototype counterparts. It is a builtin namespace and a reserved word so that it cannot be redefined.
</p>

<p>
<strong>ISSUE</strong>: we need to work through the builtins to see if we have valid/compatible subtyping of the intrinsics
</p>

<p>
One particular issue is that there are cases where overrides have one more param than the base method. e.g.
</p>

<p>
class Object { toString() : string } class Number extends Object { toString(...args) : string }
</p>

<p>
<strong>RESOLUTION</strong>
</p>

<p>
We want/need to allow for additional parameters to be allowed in overrides
</p>

<p>
<strong>ISSUE</strong>: what are the names of the special functions
</p>
<pre class="code">
function get p () {}
function set p (...) {}
function C() : x=y, super(x) {}
function get * (string)
function set * (string,*)
function call * (...)
</pre>

<p>
What about:
</p>
<pre class="code">
function convert
function invoke
</pre>

<p>
We need it for classes and instances. Write it like this:
</p>
<pre class="code">
meta static function invoke
meta function invoke
</pre>

<p>
Graydon asks if we need to expose this to users like this. Brendan and others say yes, there are time when users want to define them.
</p>

<p>
 <strong>RESOLUTION</strong>: But <code>construct</code> is not needed for implementing non &ldquo;normal&rdquo; behavior of <code>new</code>. This only occurs with functions, which does something specific, so we don&rsquo;t need syntax for it. function construct
</p>

<p>
<strong>ISSUE</strong>: we need to cover all these named things in the MOP
</p>

<p>
<strong>RESOLUTION</strong>: none
</p>

</div>
<!-- SECTION [4306-6546] -->
<a name="discussion_-_day_2"></a><h1>Discussion - Day 2</h1>
<div class="level1">

</div>
<!-- SECTION [6547-6582] -->
<a name="brendan_s_agenda_annotated"></a><h2>Brendan's agenda (annotated)</h2>
<div class="level2">

<p>
 (Evolved over time) 
</p>
<ul>
<li class="level1"><div class="li"> Introductions</div>
</li>
<li class="level1"><div class="li"> What users / use-cases: charter issues</div>
<ul>
<li class="level2"><div class="li"> Number of tasks?</div>
</li>
<li class="level2"><div class="li"> Dynamic</div>
<ul>
<li class="level3"><div class="li"> risk of static misreading by implementers</div>
</li>
</ul>
</li>
<li class="level2"><div class="li"> Scripting (defined as load-and-go, play-and-learn, ...)</div>
</li>
<li class="level2"><div class="li"> Evolving to address users</div>
</li>
<li class="level2"><div class="li"> Disruptive due to size or static addition</div>
<ul>
<li class="level3"><div class="li"> rushing implementations</div>
</li>
<li class="level3"><div class="li"> rushing users</div>
</li>
<li class="level3"><div class="li"> vendor value of standard </div>
</li>
</ul>
</li>
<li class="level2"><div class="li"> Profiles</div>
<ul>
<li class="level3"><div class="li"> &ldquo;ES3.1&rdquo; &rarr; ES4</div>
</li>
<li class="level3"><div class="li"> ES5</div>
</li>
</ul>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Principles to discuss</div>
<ul>
<li class="level2"><div class="li"> backward compatibility</div>
<ul>
<li class="level3"><div class="li"> bug risk</div>
</li>
<li class="level3"><div class="li"> footprint</div>
</li>
<li class="level3"><div class="li"> web standards lag web workloads</div>
<ul>
<li class="level4"><div class="li"> cross-browser compatibility w ES3 &ndash; fixes to ES3</div>
<ul>
<li class="level5"><div class="li"> errata</div>
</li>
<li class="level5"><div class="li"> ambiguities</div>
</li>
<li class="level5"><div class="li"> lacunae</div>
</li>
<li class="level5"><div class="li"> deprecation</div>
</li>
</ul>
</li>
<li class="level4"><div class="li"> stability (?)</div>
<ul>
<li class="level5"><div class="li"> MTBF</div>
</li>
<li class="level5"><div class="li"> clarity, predictability</div>
</li>
</ul>
</li>
<li class="level4"><div class="li"> security</div>
</li>
<li class="level4"><div class="li"> performance</div>
</li>
</ul>
</li>
</ul>
</li>
<li class="level2"><div class="li"> type system</div>
</li>
<li class="level2"><div class="li"> generous features / <acronym title="Application Programming Interface">API</acronym> additions</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Other issues</div>
<ul>
<li class="level2"><div class="li"> ES3 chapter 16 &ldquo;Errors&rdquo; + RFC 4329 vs Script#/GWT/Lazlo/Links/HaXe/etc vs syntax vs @if or equivalent</div>
</li>
</ul>
</li>
</ul>

<p>
 List of things not in ES3: 
</p>
<ul>
<li class="level1"><div class="li"> security</div>
</li>
<li class="level1"><div class="li"> networking, etc APIs (graphics)</div>
</li>
<li class="level1"><div class="li"> classical and other OOP inheritance</div>
</li>
<li class="level1"><div class="li"> integrity</div>
</li>
<li class="level1"><div class="li"> confidentiality</div>
</li>
</ul>

<p>
(this started as a list of things that Scott thought should be priorities in maintaining ES3, but the list evolved during the discussion)
</p>

</div>
<!-- SECTION [6583-7945] -->
<a name="discussion_around_the_agenda"></a><h2>Discussion around the agenda</h2>
<div class="level2">

<p>
 Brendan: Two languages not really credible for small systems; backwards compatibility within growth is a better choice.
</p>

<p>
Doug: Major change to the &ldquo;major language of the web&rdquo; is a hazard to the business model of the web; standards must catch up with the application, cross-browser compatibility must be improved, security is important (eg mashups).  ES4 should be a maintenance release on ES3.  There is another language that we need to consider for the future.
</p>

<p>
Scott: Forward compatibility is a big deal too.  Code in the new language should parse in the old implementations (example, defineGetter et al in Mozilla as opposed to the &ldquo;get p&rdquo; syntax).
</p>

<p>
Brendan: Every edition of ES added syntax.
</p>

<p>
Doug: New syntax does us no good at all, the web takes many years to change.
</p>

<p>
Scott: We want something that aids web programming in the context of current implementations, syntax evolution is secondary.
</p>

<p>
Shaver: We don&rsquo;t <em>have</em> to tightly couple what the programmer writes with what the browser executes.  One can still write to ES4 which is postprocessed into something current browsers can handle (by version-dependent inclusion or translation).  Mozilla has had sophisticated code for this to allow scripts to ask for eg <acronym title="JavaScript">JS</acronym> 1.2.
</p>

<p>
Scott: We don&rsquo;t do this any more.
</p>

<p>
Shaver: But it is isomorphic to what you&rsquo;re asking for.
</p>

<p>
Brendan: Note, ubiquity is not and option, revving the web neither.  There will always be some conditional hacks, and that cost will always be present.
</p>

<p>
Shaver: consider eg <code>function window.fnord()</code>, which will be with us for a long time.
</p>

<p>
Scott: Code generators are not good for performance and browser workarounds, and Windows Live does not use them.
</p>

<p>
Doug: Stability is very important, and standards provide stability.  &ldquo;Stability&rdquo; is the ability to be able to predict what is going to happen with a script when it&rsquo;s loaded in a browser, and the current situation is not good.
</p>

<p>
Shaver: What would improve stability in ES3?
</p>

<p>
Doug: Clarity can help, specs are misinterpreted.  For example, order-of-execution problems in Mozilla relative to MSIE.
</p>

<p>
Brendan: I disagree about the example, the spec is pretty clear.  But there are other aspects of the spec that could be clearer because they&rsquo;re implementation dependent (date parsing, the meaning of leading zeroes in numbers).  Many of these problems have been addressed in <a href="doku.php%3Fid=proposals:bug_fixes.html" class="wikilink1" title="proposals:bug_fixes" onclick="return svchk()" onkeypress="return svchk()">bug fixes</a>.
</p>

<p>
Doug: I&rsquo;d like to explicitly deprecate some dangerous features.
</p>

<p>
Graydon: Conceivably we could adapt the reference implementation to be a lint for things like this.
</p>

<p>
Dave: Of course this doesn&rsquo;t solve anything, unless the code goes away.
</p>

<p>
Scott: Lots of this stuff in <acronym title="HyperText Markup Language">HTML</acronym>.
</p>

<p>
Brendan: And none of it is going away.  (But for translators we can&rsquo;t provide a low-level language, either.)
</p>

<p>
Scott: There are lots of problems with web programming that are vastly more important than inheritance &ndash; every serious developer has solved that problem.  But security etc are important.  And the world does not distinguish ES from web programming.
</p>

<p>
Graydon: We do not have good proposals for security, it&rsquo;s a hard research problem.
</p>

<p>
Scott: And then there&rsquo;s JSON, and other things.  We need to be able to fix pieces of this without taking the whole ES4 package.
</p>

<p>
Allen: Our approach has been to take a simpler language and introduce some features (static typing), like into <acronym title="Visual Basic">VB</acronym>.NET.  It was a painful experience.
</p>

<p>
Brendan: But we&rsquo;re not going that route, we are maintaining compatibility.  Among other things we&rsquo;re trying to capture the type of things already in the language, both in the ES3 spec and in latent in user code.
</p>

<p>
Scott: Acid test &ndash; can the language replace the inheritance we already have?
</p>

<p>
General consensus: would be good to work through that. <strong>Update</strong>: scotti&rsquo;s live.com framework is extremely dynamic, but its integrity would be helped by types to make objects and namespaces unhackable, and explicit structural types for loosely-coupled APIs instead of code to check latent structural types.
</p>

<p>
Pratap: hard to reason about security in ES3. ES4, which is &ldquo;bigger&rdquo; and has to retain backwards compat with ES3 makes it even harder to reason about security.
</p>

<p>
Brendan: but the type system can be used to provide certain security guaranteees (invariants, immutability).
</p>

<p>
Brendan: Things like security are hard to do now.
</p>

<p>
Brendan: Let&rsquo;s move to how type systems help programmers build reliable programs.
</p>

<p>
Jeff: We&rsquo;ve found that programmers become much more rigorous when they have eg class facilities.
</p>

<p>
Doug: ES is very popular, and its strengths are underrated.  Types are not needed.  High-value features lacking might be some of the Array methods (eg map), and the typeof brokenness must be worked around by most authors.  The libraries will converge soon, into two or three libraries.
</p>

<p>
Jeff: There&rsquo;s no reliable way for that convergence to occur without a type system &ndash; no integrity.
</p>

<p>
Scott: Convergence is ongoing, people read each others&rsquo; code.  And cost can be low.
</p>

<p>
Michael O&rsquo;Brien: Cost is high when the libraries are written in <acronym title="JavaScript">JS</acronym>.
</p>

<p>
Doug: <acronym title="Document Object Model">DOM</acronym> cost dominates.
</p>

<p>
Graydon: Two caveats: Current apps are not all that big, and the <acronym title="Document Object Model">DOM</acronym> interface is bound by marshalling cost, it can&rsquo;t get much faster.  Static types might however let us improve <acronym title="Document Object Model">DOM</acronym> performance.
</p>

<p>
Brendan: And don&rsquo;t forget the cost of dynamic dispatch.
</p>

<p>
Shaver: And types (and things like tail-call optimization) allow developers to write to a predictable performance model.
</p>

<p>
Allen: But should all web development be done in ECMAScript?
</p>

<p>
Brendan: Everyone who&rsquo;s been working in TG1 share a common understanding of the user as somebody who wants to communicated about his code with types.  Maybe that consensus is not shared by Microsoft.
</p>

<p>
Brendan: ES4 may be disruptive, but people are scrambling to learn alternative technologies (GWT, Lazlo, ...) and that&rsquo;s disruptive too.  But Lazlo and HaXe can converge to ES4, and translate to ES3.  We need to evolve ES to respond to what users do.  ES4 is such a response.  It is an attempt to serve many existing users (JScript.NET, ActionScript) by merging dialects and evolving the language, rather than evolving different languages for different user groups.  My interpretation of the charter is to evolve one language, and not to stick with bugfixing.
</p>

<p>
Allen: Then how can we evolve a technology carefully that might replace ES3 in the longer term?  We&rsquo;re questioning the replacement of ES3 by the proposed ES4 at this time and would like to see an &ldquo;ES3.1&rdquo; called ES4, with some &ldquo;ES5&rdquo; called something else that does not confuse users.
</p>

<p>
Brendan: But there&rsquo;s scarcity of resources, and making the ES3 spec solid (in the sense of the current ES4 spec) is a lot of work (for little gain).  Another aspect is the public nature of the current work &ndash; there is a lot of buzz about ES4 in the community and a lot of excitement.  If <acronym title="Microsoft">MS</acronym> and Yahoo! want to force a pullback from that, it will be negative for <acronym title="Microsoft">MS</acronym> and Yahoo!.
</p>

<p>
Michael O&rsquo;Brien: the broader base of the users is much more comfortable with class-based OOP, and it&rsquo;s important to cater to these.
</p>

<p>
Brendan: what&rsquo;s being suggested is something like this: 
</p>
<pre class="code">   ES3 -+--&gt; JS1.5 - JS1.7 ----+---&gt; ES3.1 ---&gt;
        |                      |
        +--&gt; JScript in IE6+ --+
        |                      |
        +--&gt; Opera Linear B ---+</pre>
<pre class="code">                                     ES4 -----&gt;</pre>

<p>
 Divergence is easy here.  The only sound footing for ES3.1 is the type system we&rsquo;re doing for ES4.  So the argument is that even if there&rsquo;s an ES3.1, ES4 must come in sequence after it (by the same group) and the work ongoing for ES4 would necessarily form the basis for the work on ES3.1.
</p>

<p>
Jeff: Several practical problems with a 3.1 spec.  It&rsquo;s hard to circumscribe 3.1 features in the reference implementation because it would want to hide things that are not hidden in ES4.
</p>

<p>
Brendan: Will a 3.1 spec &ndash; which is a lot of work &ndash; make sense?  If based on the technology we do for ES4, the spec will be very different from the ES3 spec.
</p>

<p>
Dave: Can we factor the spec?
</p>

<p>
Brendan: Factoring is not free, and there are risks of divergence.
</p>

<p>
Jeff: We must evolve the language, but we should make concessions to needs for bugfixes.
</p>

<p>
Brendan: But it would be bad if MSIE 7.5 reverse engineered JS1.7 and implemented that.
</p>

<p>
Allen: The purpose of a standards body must be to define agreement and convergence among implementors.
</p>

<p>
... other discussion
</p>

</div>
<!-- SECTION [7946-16370] -->
<a name="outcomes"></a><h2>Outcomes</h2>
<div class="level2">

<p>
 We agreed in addition to continuing work on finishing the definition of ES4 as described by the current proposals, we will investigate the possibility of defining a smaller set of changes that encapsulate the features of current browser implementations of ES3 based languages, certain well known bug fixes (TBD) and possibly some feature deprecation. We tentatively call this ES3.1. The ES4 specification would be a superset of the ES3.1 specification. The ES3.1 specificaton should follow the form developed for the ES 4 spec and reference implementation and generally leverage completed ES 4 work. This is important to take advantage of the greater rigor and testability of the ES 4 specification and reference implementation, but also for guaranteeing compatibility with the ES4 language. There is not yet consensus on how either the ES3.1 or the ES4 specification would named or published.
</p>

<p>
The initial owners of this proposal (<a href="doku.php%3Fid=proposals:maintenance_of_es3.html" class="wikilink1" title="proposals:maintenance_of_es3" onclick="return svchk()" onkeypress="return svchk()">maintenance of es3</a>) will be Doug, Pratap, and Allen.
</p>

<p>
Open issues: 
</p>
<ul>
<li class="level1"><div class="li"> whether or not it is possible to define such a subset language given the resources available</div>
</li>
<li class="level1"><div class="li"> if we do define an maintenance subset, whether or not it would be issued as a separate document or as an integral apart of ES4</div>
<ul>
<li class="level2"><div class="li"> Microsoft still believes that the relationship between ES3.1 and ES4 is similar in concept to the relationship between C and C++ and they should be named and positioned accordingly.</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> in either case, if we agree to define such a subset, whether it is a distinguished version of the <a href="http://www.ietf.org/rfc/rfc4329.txt" class="urlextern" target="_blank" title="http://www.ietf.org/rfc/rfc4329.txt" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">standardized MIME types</a> as defined in <a href="doku.php%3Fid=proposals:versioning.html" class="wikilink1" title="proposals:versioning" onclick="return svchk()" onkeypress="return svchk()">versioning</a>, i.e. something browsers may implement.</div>
</li>
</ul>

</div>
<!-- SECTION [16371-18074] -->
<a name="discussion_-_day_3"></a><h1>Discussion - Day 3</h1>
<div class="level1">

</div>
<!-- SECTION [18075-18109] -->
<a name="spec_issues"></a><h2>Spec issues</h2>
<div class="level2">

<p>
 <strong>Issue</strong>: Informative vs normative bits.  Jim Miller asserts that SML code can&rsquo;t be normative; it&rsquo;ll be overspecified.  But we want to test that, and we can prettyprint the SML code to be English-like if the standards bodies require it.
</p>

<p>
<strong>Resolution</strong>: Jeff will follow up on this.
</p>

<p>
<strong>Issue</strong>: Generate <acronym title="HyperText Markup Language">HTML</acronym>+<acronym title="Cascading Style Sheets">CSS</acronym> instead of doc, and then generate doc from <acronym title="HyperText Markup Language">HTML</acronym>+<acronym title="Cascading Style Sheets">CSS</acronym>, or generate both from the wiki?  The advantage of web content is that it&rsquo;s interactive and can be viewed in various ways (@media).
</p>

<p>
<strong>Resolution</strong>: Francis / Jeff / Lars will look into this.
</p>

<p>
<strong>Issue</strong>: Licensing &ndash; what do we do?
</p>

<p>
<strong>Resolution</strong>: Dan should talk to ECMA, then TC members should discuss this with their legal depts.
</p>

</div>
<!-- SECTION [18110-18835] -->
<a name="venue"></a><h2>Venue</h2>
<div class="level2">

<p>
 <strong>Issue</strong>: Motion to meet in Newton in April.  Brendan&rsquo;s in favor (along with Lars, Dave, and Chris).  For the next months it&rsquo;s good to spread the travel around.
</p>

<p>
<strong>Resolution</strong>: April in Newton, May in Oslo, June in San Jose, July in Mountain View.  We&rsquo;d like to be off in August but that won&rsquo;t be possible if we have an October 1 deadline (see below).  Tentatively we would meet in Hyderabad in September (open for revision).
</p>

</div>
<!-- SECTION [18836-19285] -->
<a name="schedule_and_worklist"></a><h2>Schedule and worklist</h2>
<div class="level2">

<p>
 <strong>Issue</strong>: Schedule: Brendan thinks we&rsquo;re not schedule-driven yet, but we should cut things that seem broken beyond reasonable rescue.  Come June, things that are too hard will probably have to go.
</p>

<p>
<strong>Resolution</strong>: A goal is to have the ES3 builtins in testable shape by the April f2f, and the reference implementation should be functionally complete by June, for a public release.  We&rsquo;ll start internal nightly builds now.
</p>

<p>
<strong>Issue</strong>: Milestones and worklist.  Jeff has a draft (from <a href="doku.php%3Fid=meetings:meetings.html" class="wikilink1" title="meetings:meetings" onclick="return svchk()" onkeypress="return svchk()">meetings:meetings</a>).  &ldquo;Functionally complete&rdquo; means there are tests to run.  Beyond that there&rsquo;s QA, reading, and writing.  But how do we construct a test suite?  One possibility is to evolve a reference test suite that we share and make &ldquo;official&rdquo;.
</p>

<p>
<strong>Resolution</strong>: Brendan will tackle the test suite issue, and talk to the various representatives, with an aim toward unforking the currently forked Mozilla test suite (as an ES3 basis for an ES4 suite).
</p>

<p>
<strong>Issue</strong>: Deadline for ECMA TC39.
</p>

<p>
<strong>Resolution:</strong> Probably present a final draft for TC39 in October, so our deadline is October 1.
</p>

<p>
<strong>Issue</strong>: Bug tracking.
</p>

<p>
<strong>Resolution</strong>: We&rsquo;ll try Francis&rsquo;s structure for a while, see how it works out.
</p>

</div>
<!-- SECTION [19286-20528] -->
<a name="detailed_items"></a><h2>Detailed items</h2>
<div class="level2">

<p>
 <strong>Issue</strong>: ListExpr vs AssignExpr for let, yield, and expression closure.  Should the bodies of these expression forms allow for the comma form or not.  One important use case is for the expression closure in an argument list, which generally has to be parenthesized, which feels painfully noisy.  The following are not currently allowed: 
</p>
<pre class="code">f( a, function (x) e, c )
f( a, yield e, c )
f( a, let (x=...) e, c )</pre>

<p>
 <strong>Resolution</strong>: We leave things alone.
</p>

<p>
<strong>Issue</strong>: Expression closure syntax, these were proposed on es4-discuss: 
</p>
<pre class="code">(\ x ) e
( x ) =&gt; e</pre>

<p>
 <strong>Resolution</strong>: We will not do these, there are no really good arguments for them.
</p>

<p>
<strong>Issue</strong>: Dictionaries &ndash; should we have a dictionary class?  The only real argument in favor of putting these into the language is if they have weakly held keys (because that can&rsquo;t be done in the language).  But a weak mechanism, even if magic, is a tax on the implementation.
</p>

<p>
<strong>Resolution</strong>: We may write up the code and some prose, but it will not be in ES4 (goes into the deferred namespace with a hope that implementations can agree on it as an extension, if they want it  &ndash;  but it&rsquo;s strictly informative).
</p>

<p>
<strong>Issue</strong>: MOP function naming.  We need names for magic functions like [[Call]] in order to model the language in the language (the builtins) and to support user expansion: 
</p>
<pre class="code">       invoke
static invoke
static convert
       get*
       set*
       call*
       has* ?
       get p
       set p</pre>

<p>
 The issues are surface syntax as well as reflection of these methods in the reflection <acronym title="Application Programming Interface">API</acronym>, and secondarily implementation complexity (magic names must all be handled specially).
</p>

<p>
The case for <code>has*</code> is that <code>get*</code> can define names algorithmically, so <code>has</code> should be available to mirror that (idempotently, unlike <code>get*</code>).
</p>

<p>
<strong>Resolution</strong>: For <code>invoke</code> and <code>convert</code> we put them in a system-defined namespace called <code>meta</code>.
</p>

<p>
<strong>Resolution</strong>: For the catchalls we get rid of the <code>*</code> and use <code>meta function get(id)</code> etc.
</p>

<p>
<strong>Resolution</strong>: We will support <code>meta::has</code>, but its meaning and its interaction with <code>meta::get</code> and with [[HasProperty]] needs to be defined carefully (part of the catchalls proposal).  Brendan&rsquo;s job; see work item below.
</p>

<p>
<strong>Resolution</strong>: Name and signature of the method that is invoked by the <code>to</code> operator shall be called <code>meta::from</code> and its return type, if present, must be the name of the class within which the method is defined.
</p>

<p>
<strong>Resolution</strong>: The reflection interface to a class has a dedicated method for getting the constructor.
</p>

<p>
<strong>Resolution</strong>: The operators on a class reflect as static properties with their natural names (eg &ldquo;+&rdquo;), since their being static prevents there from being a confusion about that name.  (Any dynamic object can have a &ldquo;+&rdquo; property, but it would never be &ldquo;static&rdquo;.)
</p>

<p>
<strong>Issue</strong>: Should <code>iterator::get</code> be predefined on <code>Object.prototype</code> or should the iterator protocol, when looking for that method, pick up a global value if the method is not found?  Brendan thinks this is a philosophical point.
</p>

<p>
<strong>Work item</strong>: Lars needs to reread the proposal and ponder this.
</p>

<p>
<strong>Issue</strong>: <a href="doku.php%3Fid=proposals:enumeration_type.html" class="wikilink1" title="proposals:enumeration_type" onclick="return svchk()" onkeypress="return svchk()">enumeration type</a>
</p>

<p>
<strong>Resolution</strong>: we defer this proposal.
</p>

<p>
<strong>Issue</strong>: <a href="doku.php%3Fid=proposals:versioning.html" class="wikilink1" title="proposals:versioning" onclick="return svchk()" onkeypress="return svchk()">proposal:versioning</a>
</p>

<p>
<strong>Resolution</strong>: accepted, with future discussion about ordering of version numbers (Brendan, please elaborate).
</p>

<p>
<strong>Issue</strong>: <a href="doku.php%3Fid=proposals:catchalls.html" class="wikilink1" title="proposals:catchalls" onclick="return svchk()" onkeypress="return svchk()">proposals:catchalls</a>: Dave wonders if there are ways in which a fixture can bottom out to a getter or a setter.  This has to do with esp the length property on Arrays.  
</p>

<p>
<strong>Resolution</strong>: Several problems here having to do with how catchalls interact with array trunctation and element storage.
</p>

<p>
<strong>Work item</strong>: Brendan must clean up this proposal, including <code>meta::has</code> and maybe even <code>meta::delete</code>.
</p>

<p>
<strong>Issue</strong>: <a href="doku.php%3Fid=proposals:name_objects.html" class="wikilink1" title="proposals:name_objects" onclick="return svchk()" onkeypress="return svchk()">proposals:name objects</a>
</p>

<p>
<strong>Resolution</strong>: No objections registered.
</p>

</div>
<!-- SECTION [20529-] -->
<!-- cachefile /usr/local/www/es-lang.org/wiki/data/cache/3/399dbad53a5db8817637f81487bc6bd8.xhtml used -->
</body>
</html>
