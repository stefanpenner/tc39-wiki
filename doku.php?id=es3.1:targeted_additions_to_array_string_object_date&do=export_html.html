<html>
<head>
  <meta name="generator" content="DokuWiki Release 2005-09-22e" />
  <link rel="start" href="index.html" />
  <link rel="contents" href="doku.php%3Fid=es3.1:targeted_additions_to_array_string_object_date&amp;do=index.html" title="" />
  <link rel="alternate" type="application/rss+xml" title="Recent Changes" href="feed.php" />
  <link rel="alternate" type="application/rss+xml" title="Current Namespace" href="feed.php%3Fmode=list&amp;ns=es3.1" />
  <link rel="alternate" type="text/html" title="Plain HTML" href="doku.php%3Fid=es3.1:targeted_additions_to_array_string_object_date&amp;do=export_html.html" />
  <link rel="alternate" type="text/plain" title="Wiki Markup" href="doku.php%3Fid=es3.1:targeted_additions_to_array_string_object_date&amp;do=export_raw" />
  <link rel="stylesheet" media="screen" type="text/css" href="lib/styles/style.css" />
  <meta name="robots" content="noindex,nofollow" />
  <script language="javascript" type="text/javascript" charset="utf-8">
    var alertText   = 'Please enter the text you want to format.\nIt will be appended to the end of the document.'
    var notSavedYet = 'Unsaved changes will be lost.\nReally continue?'
    var DOKU_BASE   = '/'
  </script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/script.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/tw-sack.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/ajax.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/domLib.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/domTT.js"></script>
  <link rel="stylesheet" type="text/css" href="lib/plugins/plugin/style.css" />
</head>
<body>

<p>
Frameworks would benefit from such conveniences without too much additional complexity in engine implementations. Frameworks like <a href="http://www.ajax.asp.net/Default.aspx" class="urlextern" target="_blank" title="http://www.ajax.asp.net/Default.aspx" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">Atlas</a>, Live, <a href="http://developer.yahoo.com/yui" class="urlextern" target="_blank" title="http://developer.yahoo.com/yui" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">YUI</a>, <a href="http://www.prototypejs.org" class="urlextern" target="_blank" title="http://www.prototypejs.org" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">Prototype</a>, <a href="http://www.dojotoolkit.org" class="urlextern" target="_blank" title="http://www.dojotoolkit.org" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">Dojo</a>, etc. routinely augment the built-in types. There are various reasons for this:
</p>

<p>
(a) the built-ins are deficient and lack the “convenience” methods that have evolved out of <acronym title="Asynchronous JavaScript and XML">AJAX</acronym>
</p>

<p>
(b) these Frameworks require specialized methods on the built-in objects.
</p>

<p>
Of these, (a) contributes to unnecessary duplication and code bloat. The methods to add would be as follows.
</p>

<p>
<strong>Function Additions</strong>
</p>

<p>
<em>function</em><code>.bind(</code><em>thisValue</em><code>,</code> <em>arguments</em>...<code>)</code>
</p>

<p>
The <code>bind</code> method (<code>Function.prototype.bind</code>) creates a new function that curries <em>thisValue</em> and the optional <em>arguments</em>. <code>this</code> will be faithfully bound to <em>thisValue</em>, even if <em>thisValue</em> is <code>null</code> or <code>undefined</code>.
</p>

<p>
<del><em>function</em><code>.apply(</code><em>thisValue</em><code>,</code> <em>arguments</em><code>)</code>
<em>function</em><code>.call(</code><em>thisValue</em><code>,</code> <em>arguments</em>...<code>)</code>

The specification of the <code>apply</code> and <code>call</code> methods (<code>Function.prototype.apply</code> and <code>Function.prototype.call</code>) creates a new function that curries <em>thisValue</em> and the optional <em>arguments</em>. <code>this</code> shall be faithfully bound to <em>thisValue</em>, even if <em>thisValue is</em> <code>null</code> or <code>undefined</code>.</del>
</p>
<hr noshade="noshade" size="1" />

<p>
 <strong>Array Additions</strong>
</p>

<p>
These methods do not use JS1.6&rsquo;s troublesome and unnecessary <em>thisValue</em> parameter.
</p>

<p>
<em>array</em><code>.indexOf(</code><em>value</em><code>)</code><br/>
 <em>array</em><code>.lastIndexOf(</code><em>value</em><code>)</code><br/>
 <em>array</em><code>.every(</code><em>func</em><code>)</code><br/>
 <em>array</em><code>.filter(</code><em>func</em><code>)</code><br/>
 <em>array</em><code>.forEach(</code><em>func</em><code>)</code><br/>
 <em>array</em><code>.map(</code><em>func</em><code>)</code><br/>
 <em>array</em><code>.some(</code><em>func</em><code>)</code>
</p>

<p>
Relevant Goal: <a href="doku.php%3Fid=es3.1:es3.1_goals.html" class="wikilink1" title="es3.1:es3.1_goals" onclick="return svchk()" onkeypress="return svchk()">2, 3</a><br/>
 Relevant Design Principle: <a href="doku.php%3Fid=es3.1:design_principles.html" class="wikilink1" title="es3.1:design_principles" onclick="return svchk()" onkeypress="return svchk()">2a, 2b, 3</a><br/>
 Relevant ES4 proposal: <a href="doku.php%3Fid=proposals:static_generics.html" class="wikilink1" title="proposals:static_generics" onclick="return svchk()" onkeypress="return svchk()">static generics</a><br/>
 Relevant ES3.1 proposal: <a href="lib/exe/fetch.php%3Fid=es3.1%253Atargeted_additions_to_array_string_object_date&amp;cache=cache&amp;media=es3.1:es31_arrayobject.pdf" class="urlextern" title="es3.1:es31_arrayobject.pdf" style="background-image: url(lib/images/fileicons/pdf.png)" onclick="return svchk()" onkeypress="return svchk()">pdf</a>
</p>
<hr noshade="noshade" size="1" />

<p>
 <strong>String Additions</strong>
</p>

<p>
<em>string</em><code>.trim()</code>, <em>string</em><code>.quote()</code>
</p>

<p>
Relevant Goal: <a href="doku.php%3Fid=es3.1:es3.1_goals.html" class="wikilink1" title="es3.1:es3.1_goals" onclick="return svchk()" onkeypress="return svchk()">2, 3</a><br/>
 Relevant Design Principle: <a href="doku.php%3Fid=es3.1:design_principles.html" class="wikilink1" title="es3.1:design_principles" onclick="return svchk()" onkeypress="return svchk()">2a, 2b, 3</a><br/>
 Relevant ES4 proposal: <a href="doku.php%3Fid=proposals:static_generics.html" class="wikilink1" title="proposals:static_generics" onclick="return svchk()" onkeypress="return svchk()">static generics</a><br/>
 Relevant ES3.1 proposal: <a href="lib/exe/fetch.php%3Fid=es3.1%253Atargeted_additions_to_array_string_object_date&amp;cache=cache&amp;media=es3.1:es31_stringobject.pdf" class="urlextern" title="es3.1:es31_stringobject.pdf" style="background-image: url(lib/images/fileicons/pdf.png)" onclick="return svchk()" onkeypress="return svchk()">pdf</a>
</p>
<hr noshade="noshade" size="1" />

<p>
<strong>Object Additions</strong>
</p>

<p>
Methods are added to the global <code>Object</code> object. There would be security and reliability hazards if these were added to <code>Object.prototype</code>.
</p>

<p>
<code>Object.dontEnum(</code><em>object</em><code>,</code> <em>memberName</em><code>)</code>
</p>

<p>
The own property <em>memberName</em> of <em>object</em> is marked to be excluded for the <code>for</code> <code>in</code> enumeration.
</p>

<p>
If a new object is made that delegates to <em>object</em>, the new object may create  and change its own <em>memberName</em> property, and that property will be enumerable.
</p>

<p>
<code>Object.readOnly(</code><em>object</em><code>,</code> <em>memberName</em><code>)</code>
</p>

<p>
The own property <em>memberName</em> of <em>object</em> is marked so that it cannot be modified. Attempting to change a readOnly property will throw an exception.
</p>

<p>
If a new object is made that delegates to <em>object</em>, the new object may create and change its own <em>memberName</em> property.
</p>

<p>
<code>Object.dontDelete(</code><em>object</em><code>,</code> <em>memberName</em><code>)</code>
</p>

<p>
The own property <em>memberName</em> of <em>object</em> is marked so that it cannot be deleted by the <code>delete</code> operator. Attempting to delete a dontDelete property will throw an exception.
</p>

<p>
If a new object is made that delegates to <em>object</em>, the new object may create  and delete its own <em>memberName</em> property.
</p>

<p>
<code>Object.fix(</code><em>object</em><code>)</code>
</p>

<p>
The <code>fix</code> method fixes an object so that new properties cannot be added to it. Attempting to add a new property to a fixed object will throw an exception.
</p>

<p>
If a new object is made that delegates to <em>object</em>, the new object may create  new properties.
</p>

<p>
<code>Object.hasOwnProperty(</code><em>object</em><code>,</code> <em>memberName</em><code>)</code>
</p>

<p>
The <code>hasOwnProperty</code> method returns <code>true</code> if the <em>object</em> contains a property with the key <em>memberName</em>, ignoring the chain of delegation.
</p>

<p>
<code>Object.keys(</code><em>object</em><code>)</code>
</p>

<p>
The <code>keys</code> method produces an array containing all of the enumerable keys of the  object, in no particular order.
</p>

<p>
<code>Object.values(</code><em>object</em><code>,</code> <em>keys</em><code>)</code>
</p>

<p>
The <code>values</code> method produces an array containing the values from an object.  By default, the array is filled with the enumerable values of the object.  If a <em>keys</em> array parameter is supplied, then it provides the names of the  members whose values should be included in the result, in the order determined  by the <em>keys</em>.
</p>

<p>
<code>Object.beget(</code><em>object</em><code>)</code>
</p>

<p>
The <code>beget</code> method returns a new empty object that delegates to the original <em>object</em>.
</p>

<p>
It can be implemented as
</p>
<pre class="code">
Object.beget = function (object) {
    function F() {}
    F.prototype = object;
    return new F();
};
</pre>

<p>
<em>object</em><code>.isEmpty()</code>
</p>

<p>
The <code>isEmpty</code> method returns <code>true</code> if the <em>object</em> (ignoring its  delegation chain) has no properties.
</p>

<p>
It can be implemented as
</p>
<pre class="code">
Object.prototype.isEmpty = function () {
    var i;
    if (typeof this === 'object' || typeof this === 'function') {
        for (i in this) {
            if (Object.hasOwnProperty(this, i)) {
                return false;
            }
        }
    }
    return true;
};
</pre>

<p>
Relevant Goal: <a href="doku.php%3Fid=es3.1:es3.1_goals.html" class="wikilink1" title="es3.1:es3.1_goals" onclick="return svchk()" onkeypress="return svchk()">2, 3</a><br/>
 Relevant Design Principle: <a href="doku.php%3Fid=es3.1:design_principles.html" class="wikilink1" title="es3.1:design_principles" onclick="return svchk()" onkeypress="return svchk()">2a, 2b, 3</a><br/>
 Relevant ES4 proposal: none
</p>
<hr noshade="noshade" size="1" />

<p>
 <strong>Date Additions</strong>
</p>

<p>
<code>date.toISOString()</code>
</p>

<p>
Relevant Goal: <a href="doku.php%3Fid=es3.1:es3.1_goals.html" class="wikilink1" title="es3.1:es3.1_goals" onclick="return svchk()" onkeypress="return svchk()">2, 3</a><br/>
 Relevant Design Principle: <a href="doku.php%3Fid=es3.1:design_principles.html" class="wikilink1" title="es3.1:design_principles" onclick="return svchk()" onkeypress="return svchk()">2a, 2b, 3</a><br/>
 Relevant ES4 proposal: <a href="doku.php%3Fid=proposals:date_and_time.html" class="wikilink1" title="proposals:date_and_time" onclick="return svchk()" onkeypress="return svchk()">date and time</a>
</p>
<hr noshade="noshade" size="1" />

<p>
 &mdash; <em><a href="mailto:%26%23x70%3B%26%23x72%3B%26%23x61%3B%26%23x74%3B%26%23x61%3B%26%23x70%3B%26%23x6c%3B%26%23x40%3B%26%23x6d%3B%26%23x69%3B%26%23x63%3B%26%23x72%3B%26%23x6f%3B%26%23x73%3B%26%23x6f%3B%26%23x66%3B%26%23x74%3B%26%23x2e%3B%26%23x63%3B%26%23x6f%3B%26%23x6d%3B" class="mail" title="&#x70;&#x72;&#x61;&#x74;&#x61;&#x70;&#x6c;&#x40;&#x6d;&#x69;&#x63;&#x72;&#x6f;&#x73;&#x6f;&#x66;&#x74;&#x2e;&#x63;&#x6f;&#x6d;">Pratap Lakshman</a> 2007/04/15 02:49</em>
</p>

<p>
Most of these method additions appear to be target at the prototype objects (Array.prototype, String.prototype, etc.) However, ES4 proposal referenced is static generics which adds these methods to the actual static constructor (Array, String, etc.) I believe we should be referencing the Native Objects chapter of the specification: <a href="doku.php%3Fid=spec:chapter_19_native_objects.html" class="urlextern" target="_blank" title="http://wiki.ecmascript.org/doku.php?id=spec:chapter_19_native_objects" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">http://wiki.ecmascript.org/doku.php?id=spec:chapter_19_native_objects</a>. However, I am certainly not opposed to including static generics in ES3.1, I think there is value in that. /  &mdash; <em><a href="mailto:%26%23x63%3B%26%23x72%3B%26%23x6f%3B%26%23x63%3B%26%23x6b%3B%26%23x40%3B%26%23x79%3B%26%23x61%3B%26%23x68%3B%26%23x6f%3B%26%23x6f%3B%26%23x2d%3B%26%23x69%3B%26%23x6e%3B%26%23x63%3B%26%23x2e%3B%26%23x63%3B%26%23x6f%3B%26%23x6d%3B" class="mail" title="&#x63;&#x72;&#x6f;&#x63;&#x6b;&#x40;&#x79;&#x61;&#x68;&#x6f;&#x6f;&#x2d;&#x69;&#x6e;&#x63;&#x2e;&#x63;&#x6f;&#x6d;">Douglas Crockford</a> 2008/02/27 16:42</em>
</p>

<p>
Also, there are a number of methods listed here that are not in ES4, and so violate compatibility. I believe the &ldquo;keys&rdquo;, &ldquo;values&rdquo;, &ldquo;beget&rdquo;, &ldquo;isEmpty&rdquo;, &ldquo;toJSONString&rdquo;, and &ldquo;parseJSON&rdquo; should be removed. Also &ldquo;dontenum&rdquo; should be changed to &ldquo;propertyIsEnumerable&rdquo; where the second argument is used to set DontEnum.  &mdash; <em><a href="mailto:%26%23x6b%3B%26%23x7a%3B%26%23x79%3B%26%23x70%3B%26%23x40%3B%26%23x64%3B%26%23x6f%3B%26%23x6a%3B%26%23x6f%3B%26%23x74%3B%26%23x6f%3B%26%23x6f%3B%26%23x6c%3B%26%23x6b%3B%26%23x69%3B%26%23x74%3B%26%23x2e%3B%26%23x6f%3B%26%23x72%3B%26%23x67%3B" class="mail" title="&#x6b;&#x7a;&#x79;&#x70;&#x40;&#x64;&#x6f;&#x6a;&#x6f;&#x74;&#x6f;&#x6f;&#x6c;&#x6b;&#x69;&#x74;&#x2e;&#x6f;&#x72;&#x67;">Kris Zyp</a></em>
</p>

<p>
 Object.get has to have a well defined order. This is a requirement for web compatibility  See proposals:bug_fixes FOR.IN.LOOP.CREATION.ORDER for more info.
</p>

<p>
 &mdash; <em><a href="mailto:%26%23x61%3B%26%23x72%3B%26%23x76%3B%26%23x40%3B%26%23x67%3B%26%23x6f%3B%26%23x6f%3B%26%23x67%3B%26%23x6c%3B%26%23x65%3B%26%23x2e%3B%26%23x63%3B%26%23x6f%3B%26%23x6d%3B" class="mail" title="&#x61;&#x72;&#x76;&#x40;&#x67;&#x6f;&#x6f;&#x67;&#x6c;&#x65;&#x2e;&#x63;&#x6f;&#x6d;">Erik Arvidsson</a> 2008/03/11 06:44</em>
</p>

<p>
The changes to Function.prototype.call and Function.prototype.apply are not compatible with ES3. Even though I like the changes I think they are too dangerous to be introduced without a version flag/strict mode/alternative names.
</p>

<p>
 &mdash; <em><a href="mailto:%26%23x61%3B%26%23x72%3B%26%23x76%3B%26%23x40%3B%26%23x67%3B%26%23x6f%3B%26%23x6f%3B%26%23x67%3B%26%23x6c%3B%26%23x65%3B%26%23x2e%3B%26%23x63%3B%26%23x6f%3B%26%23x6d%3B" class="mail" title="&#x61;&#x72;&#x76;&#x40;&#x67;&#x6f;&#x6f;&#x67;&#x6c;&#x65;&#x2e;&#x63;&#x6f;&#x6d;">Erik Arvidsson</a> 2008/03/11 06:49</em>
</p>

<!-- cachefile /usr/local/www/es-lang.org/wiki/data/cache/8/816ab72584eddf35547b876c7a6230be.xhtml used -->
</body>
</html>
