<html>
<head>
  <meta name="generator" content="DokuWiki Release 2005-09-22e" />
  <link rel="start" href="index.html" />
  <link rel="contents" href="doku.php%3Fid=harmony:observe&amp;do=index.html" title="" />
  <link rel="alternate" type="application/rss+xml" title="Recent Changes" href="feed.php" />
  <link rel="alternate" type="application/rss+xml" title="Current Namespace" href="http://wiki.ecmascript.org/feed.php?mode=list&amp;ns=harmony" />
  <link rel="alternate" type="text/html" title="Plain HTML" href="doku.php%3Fid=harmony:observe&amp;do=export_html.html" />
  <link rel="alternate" type="text/plain" title="Wiki Markup" href="doku.php%3Fid=harmony:observe&amp;do=export_raw" />
  <link rel="stylesheet" media="screen" type="text/css" href="lib/styles/style.css" />
  <meta name="robots" content="noindex,nofollow" />
  <script language="javascript" type="text/javascript" charset="utf-8">
    var alertText   = 'Please enter the text you want to format.\nIt will be appended to the end of the document.'
    var notSavedYet = 'Unsaved changes will be lost.\nReally continue?'
    var DOKU_BASE   = '/'
  </script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/script.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/tw-sack.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/ajax.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/domLib.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/domTT.js"></script>
  <link rel="stylesheet" type="text/css" href="lib/plugins/plugin/style.css" />
</head>
<body>
<div class="toc">
<div class="tocheader"> <script type="text/javascript">showTocToggle("+","-")</script>Table of Contents</div>
<div id="tocinside">
<ul class="toc">
<li class="level1"><span class="li"><a href="doku.php%3Fid=harmony:observe&amp;do=export_html.html#this_page_is_no_longer_current" class="toc">THIS PAGE IS NO LONGER CURRENT</a></span></li>
<li class="level1"><span class="li"><a href="doku.php%3Fid=harmony:observe&amp;do=export_html.html#object.observe" class="toc">Object.observe</a></span><ul class="toc">
<li class="level2"><span class="li"><a href="doku.php%3Fid=harmony:observe&amp;do=export_html.html#updates" class="toc">Updates</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=harmony:observe&amp;do=export_html.html#problem" class="toc">Problem</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=harmony:observe&amp;do=export_html.html#goals" class="toc">Goals</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=harmony:observe&amp;do=export_html.html#solution" class="toc">Solution</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=harmony:observe&amp;do=export_html.html#cross-cutting_concerns_and_potential_implementation_challenges" class="toc">Cross-cutting Concerns and Potential Implementation Challenges</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=harmony:observe&amp;do=export_html.html#api_usage_examples" class="toc">API Usage Examples</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=harmony:observe&amp;do=export_html.html#key_algorithms_and_semantics" class="toc">Key Algorithms and Semantics</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=harmony:observe&amp;do=export_html.html#new_internal_properties_objects_and_algorithms" class="toc">New Internal Properties, Objects and Algorithms</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=harmony:observe&amp;do=export_html.html#new_public_api" class="toc">New Public API</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=harmony:observe&amp;do=export_html.html#modifications_to_existing_internal_algorithms" class="toc">Modifications to Existing Internal Algorithms</a></span></li>
</ul>
</li>
</ul>
</div>
</div>

<a name="this_page_is_no_longer_current"></a><h1>THIS PAGE IS NO LONGER CURRENT</h1>
<div class="level1">

<p>
 <a href="lib/exe/detail.php%3Fid=harmony%253Aobserve&amp;cache=cache&amp;media=harmony:warning.png.html" class="media" title="harmony:warning.png" onclick="return svchk()" onkeypress="return svchk()"><img src="lib/exe/fetch.php%3Fw=100&amp;h=&amp;cache=cache&amp;media=harmony:warning.png" class="media" alt="" width="100" /></a> <strong>WARNING:</strong> This page is <strong>out of date</strong>. Please see the <a href="https://github.com/arv/ecmascript-object-observe" class="urlextern" target="_blank" title="https://github.com/arv/ecmascript-object-observe" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">latest draft on GitHub</a> for up-to-date information. This page is here only as an archive.
</p>

</div>
<!-- SECTION [1-275] -->
<a name="object.observe"></a><h1>Object.observe</h1>
<div class="level1">

</div>
<!-- SECTION [276-306] -->
<a name="updates"></a><h2>Updates</h2>
<div class="level2">

<p>
 <a href="doku.php%3Fid=harmony:observe_updates.html" class="wikilink1" title="harmony:observe_updates" onclick="return svchk()" onkeypress="return svchk()">Updates</a>
</p>

</div>
<!-- SECTION [307-367] -->
<a name="problem"></a><h2>Problem</h2>
<div class="level2">

<p>
Declarative programming techniques provide leverage and power to developers. The web platform has pioneered many &ndash; not the least of which is <acronym title="HyperText Markup Language">HTML</acronym>. As the practice of application development evolves, it is important that primitives exist in the platform which allow developers to create and evolve robust declarative mechanisms independent of those provided directly by the platform.
</p>

<p>
A class of declarative mechanisms depends on discovering that ECMAScript values have changed. For example, UI frameworks often want to provide an ability to databind objects in a datamodel to UI elements. Likewise, domain objects, application logic and persistence strategies can often best be described in terms of constraints and relationships on data.
</p>

<p>
Today, ECMAScript code wishing to observe changes to objects typically either creates objects wrapping the real data or employs dirty-checking strategies for discovering changes. The first approach requires objects being observed to buy into the strategy, making the user model more complex and eroding composability of concerns. The second approach has poor algorithmic behavior, requiring work proportional to the number of objects observed to discover if any change has taken place. Both require increased working sets.
</p>

</div>
<!-- SECTION [368-1654] -->
<a name="goals"></a><h2>Goals</h2>
<div class="level2">

<p>
 The desired characteristics of a solution are: 
</p>
<ul>
<li class="level1"><div class="li"> No wrapper or proxy objects needed, providing memory efficiency and object identity </div>
</li>
<li class="level1"><div class="li"> Change notifications on add/delete of a property on an object</div>
</li>
<li class="level1"><div class="li"> Change notifications on modifications to property descriptor of properties on an object</div>
</li>
<li class="level1"><div class="li"> The ability for an object to manually indicate when an accessor property has changed</div>
</li>
<li class="level1"><div class="li"> Efficiently implementable in engines</div>
</li>
<li class="level1"><div class="li"> Simple, targeted, extension to current ES</div>
</li>
<li class="level1"><div class="li"> Asynchronous notification of changes, but allow synchronous fetching of changes pending delivery</div>
</li>
</ul>

</div>
<!-- SECTION [1655-2247] -->
<a name="solution"></a><h2>Solution</h2>
<div class="level2">

<p>
 Object.observe allows for the direct observation of changes to ECMAScript objects. It allows an observer to receive a time-ordered sequence of change records which describe the set of changes which took place to the set of observed objects.
</p>

<p>
Changes to objects are directly observable and are described in terms of 
</p>
<ul>
<li class="level1"><div class="li"> Changes in the value of data properties</div>
</li>
<li class="level1"><div class="li"> The addition, deletion, and reconfiguration of all properties visible via the reflection APIs</div>
</li>
<li class="level1"><div class="li"> Changes to the prototype and extensibility of the object itself.</div>
</li>
</ul>

<p>
 A flexible system is provided via a &ldquo;notifier&rdquo; object associated with every observable object, which allows for: 
</p>
<ul>
<li class="level1"><div class="li"> Decoupling an object&rsquo;s implementation from its observable <acronym title="Application Programming Interface">API</acronym>.</div>
</li>
<li class="level1"><div class="li"> Allowing an object to efficiently describe multiple lower-level changes as a single higher-level change.</div>
</li>
</ul>

<p>
 Lastly, Array.observe allows for the efficient description of certain changes which may affect many index-valued properties as single &ldquo;splice&rdquo; change record.
</p>

</div>
<!-- SECTION [2248-3250] -->
<a name="cross-cutting_concerns_and_potential_implementation_challenges"></a><h2>Cross-cutting Concerns and Potential Implementation Challenges</h2>
<div class="level2">

<p>
 Object.observe is a relatively significant and cross-cutting feature, as it 
</p>
<ul>
<li class="level1"><div class="li"> Affects the core object model of ECMAScript</div>
</li>
<li class="level1"><div class="li"> Makes previously unobservable behavior observable</div>
</li>
<li class="level1"><div class="li"> Requires changes to central algorithms (e.g. mutating the properties of an object)</div>
</li>
<li class="level1"><div class="li"> Must not allow for the creation of a side-channel of communication between otherwise isolated object graphs.</div>
</li>
</ul>

</div>
<!-- SECTION [3251-3706] -->
<a name="api_usage_examples"></a><h2>API Usage Examples</h2>
<div class="level2">

<p>
 <a href="doku.php%3Fid=harmony:observe_api_usage.html" class="wikilink1" title="harmony:observe_api_usage" onclick="return svchk()" onkeypress="return svchk()">Usage Examples</a>
</p>

</div>
<!-- SECTION [3707-3786] -->
<a name="key_algorithms_and_semantics"></a><h2>Key Algorithms and Semantics</h2>
<div class="level2">

<p>
 <a href="doku.php%3Fid=harmony:observe_overview.html" class="wikilink1" title="harmony:observe_overview" onclick="return svchk()" onkeypress="return svchk()">Key Algorithms and Semantics</a>
</p>

</div>
<!-- SECTION [3787-3887] -->
<a name="new_internal_properties_objects_and_algorithms"></a><h2>New Internal Properties, Objects and Algorithms</h2>
<div class="level2">

<p>
 <a href="doku.php%3Fid=harmony:observe_internals.html" class="wikilink1" title="harmony:observe_internals" onclick="return svchk()" onkeypress="return svchk()">New internals specification</a>
</p>

</div>
<!-- SECTION [3888-4007] -->
<a name="new_public_api"></a><h2>New Public API</h2>
<div class="level2">

<p>
 <a href="doku.php%3Fid=harmony:observe_public_api.html" class="wikilink1" title="harmony:observe_public_api" onclick="return svchk()" onkeypress="return svchk()">Public API Specification</a>
</p>

</div>
<!-- SECTION [4008-4094] -->
<a name="modifications_to_existing_internal_algorithms"></a><h2>Modifications to Existing Internal Algorithms</h2>
<div class="level2">

<p>
 <a href="doku.php%3Fid=harmony:observe_spec_changes.html" class="wikilink1" title="harmony:observe_spec_changes" onclick="return svchk()" onkeypress="return svchk()">Changes to the existing specification</a> 
</p>

</div>
<!-- SECTION [4095-] -->
<!-- cachefile /usr/local/www/es-lang.org/wiki/data/cache/5/502989b8217a6987a629b8302ad1d4c8.xhtml used -->
</body>
</html>
