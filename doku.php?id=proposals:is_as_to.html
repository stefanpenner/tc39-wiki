<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
 lang="en" dir="ltr">
<head>
  <title>proposals:is_as_to [ES Wiki]</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <meta name="generator" content="DokuWiki Release 2005-09-22e" />
  <link rel="start" href="index.html" />
  <link rel="contents" href="doku.php%3Fid=proposals:is_as_to&amp;do=index.html" title="" />
  <link rel="alternate" type="application/rss+xml" title="Recent Changes" href="feed.php" />
  <link rel="alternate" type="application/rss+xml" title="Current Namespace" href="feed.php%3Fmode=list&amp;ns=proposals" />
  <link rel="alternate" type="text/html" title="Plain HTML" href="doku.php%3Fid=proposals:is_as_to&amp;do=export_html.html" />
  <link rel="alternate" type="text/plain" title="Wiki Markup" href="doku.php%3Fid=proposals:is_as_to&amp;do=export_raw" />
  <link rel="stylesheet" media="screen" type="text/css" href="lib/styles/style.css" />
  <meta name="date" content="2008-07-14T18:29:51+0000" />
  <meta name="robots" content="index,follow" />
  <script language="javascript" type="text/javascript" charset="utf-8">
    var alertText   = 'Please enter the text you want to format.\nIt will be appended to the end of the document.'
    var notSavedYet = 'Unsaved changes will be lost.\nReally continue?'
    var DOKU_BASE   = '/'
  </script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/script.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/tw-sack.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/ajax.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/domLib.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/domTT.js"></script>
  <link rel="stylesheet" type="text/css" href="lib/plugins/plugin/style.css" />

  <link rel="shortcut icon" href="lib/images/favicon.ico" />
  <link rel="stylesheet" media="screen" type="text/css" href="lib/tpl/default/layout.css" />
  <link rel="stylesheet" media="screen" type="text/css" href="lib/tpl/default/design.css" />

  
  <link rel="stylesheet" media="print" type="text/css" href="lib/tpl/default/print.css" />

  <!--[if gte IE 5]>
  <style type="text/css">
    /* that IE 5+ conditional comment makes this only visible in IE 5+ */
    /* IE bugfix for transparent PNGs */
    //DISABLED   img { behavior: url("/lib/scripts/pngbehavior.htc"); }
  </style>
  <![endif]-->

  </head>

<body>
<div class="dokuwiki">
  
  <div class="stylehead">

    <div class="header">
      <div class="pagename">
        [[<a href="doku.php%3Fid=proposals:is_as_to&amp;do=backlink.html" onclick="return svchk()" onkeypress="return svchk()">proposals:is_as_to</a>]]
      </div>
      <div class="logo">
        <a href="doku.php%3Fid=.html" onclick="return svchk()" onkeypress="return svchk()" name="top" accesskey="h" title="[ALT+H]">ES Wiki</a>      </div>
    </div>
  
    
    <div class="bar" id="bar_top">
      <div class="bar-left" id="bar_topleft">
        <form class="button" method="post" action="index.html" onsubmit="return svchk()"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="" /><input type="hidden" name="id" value="proposals:is_as_to" /><input type="submit" value="Show pagesource" class="button" title="ALT+V" accesskey="v" /></form>        <form class="button" method="get" action="index.html" onsubmit="return svchk()"><input type="hidden" name="do" value="revisions" /><input type="hidden" name="id" value="proposals:is_as_to" /><input type="submit" value="Old revisions" class="button" title="ALT+O" accesskey="o" /></form>      </div>
  
      <div class="bar-right" id="bar_topright">
        <form class="button" method="get" action="index.html" onsubmit="return svchk()"><input type="hidden" name="do" value="recent" /><input type="hidden" name="id" value="" /><input type="submit" value="Recent changes" class="button" title="ALT+R" accesskey="r" /></form>        <form action="doku.php%3Fid=.html" accept-charset="utf-8" class="search" name="search" onsubmit="return svchk()"><input type="hidden" name="do" value="search" /><input type="text" id="qsearch_in" accesskey="f" name="id" class="edit" onkeyup="ajax_qsearch.call('qsearch_in','qsearch_out')" /><input type="submit" value="Search" class="button" /><div id="qsearch_out" class="ajax_qsearch" onclick="this.style.display='none'"></div></form>&nbsp;
      </div>
    </div>

        <div class="breadcrumbs">
      Trace: <span class="bcsep">&raquo;</span> <a href="doku.php%3Fid=proposals:descriptive_prose.html" onclick="return svchk()" onkeypress="return svchk()" class="breadcrumbs" title="proposals:descriptive_prose">descriptive_prose</a> <span class="bcsep">&raquo;</span> <a href="doku.php%3Fid=proposals:type_parameters.html" onclick="return svchk()" onkeypress="return svchk()" class="breadcrumbs" title="proposals:type_parameters">type_parameters</a> <span class="bcsep">&raquo;</span> <a href="doku.php%3Fid=proposals:builtin_classes.html" onclick="return svchk()" onkeypress="return svchk()" class="breadcrumbs" title="proposals:builtin_classes">builtin_classes</a> <span class="bcsep">&raquo;</span> <a href="doku.php%3Fid=proposals:structural_types_and_typing_of_initializers.html" onclick="return svchk()" onkeypress="return svchk()" class="breadcrumbs" title="proposals:structural_types_and_typing_of_initializers">structural_types_and_typing_of_initializers</a> <span class="bcsep">&raquo;</span> <span class="curid"><a href="doku.php%3Fid=proposals:is_as_to.html" onclick="return svchk()" onkeypress="return svchk()" class="breadcrumbs" title="proposals:is_as_to">is_as_to</a></span>          </div>
    
  </div>
  
  
  <div class="page">
    <!-- wikipage start -->
    
<p>
 (Also see the <a href="doku.php%3Fid=discussion:is_as_to.html" class="wikilink1" title="discussion:is_as_to" onclick="return svchk()" onkeypress="return svchk()">discussion page</a> for this proposal)
</p>

<p>
 <strong>Tickets:</strong> <a href="http://bugs.ecmascript.org/ticket/244" class="urlextern" target="_blank" title="http://bugs.ecmascript.org/ticket/244" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">#244 -- 'like' as an operator</a>
</p>

<a name="proposed_change"></a><h1>Proposed change</h1>
<div class="level1">

<p>
 The proposal is to adjust the meaning of two of the <code>is</code> and <code>to</code> operators, replace the <code>as</code> operator with a <code>cast</code> operator, and adopt a single syntactic type annotation <code>:</code>. So we would have: 
</p>
<ul>
<li class="level1"><div class="li"> Operator <code>cast T(x)</code> which returns <code>x</code> if <code>x is T</code>, else throws (subsuming and renaming operator <code>as</code>). This operator might use some more C-like notation. The important point is that it throws when the cast fails.</div>
</li>
<li class="level1"><div class="li"> Operator <code>to</code> which calls a user-provided conversion operator if it exists, else calls <code>cast</code>.</div>
<ul>
<li class="level2"><div class="li"> syntax: <code>x to T</code></div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Operator <code>is</code> which is still a boolean predicate.</div>
</li>
<li class="level1"><div class="li"> Annotations such as <code> v : T </code> only have meaning in the <em>surface syntax</em> of the language. </div>
</li>
<li class="level1"><div class="li"> Writing <code>var v : T = x</code> in the surface language produces identical runtime behavior to having written <code>var v = x to T</code>, with two qualifications:</div>
<ul>
<li class="level2"><div class="li"> The slot <code>v</code> carries runtime type information indicating that it is constrained to <code>T</code>; further assignments to <code>v</code> also perform the <code>to T</code> conversion.</div>
</li>
<li class="level2"><div class="li"> If the surface syntax is processed in the static translation path, the typechecker is obliged to prove that <code>x</code> has a type which is assignment compatible with <code>T</code>. </div>
</li>
</ul>
</li>
</ul>

</div>

<a name="strict_mode"></a><h1>Strict mode</h1>
<div class="level1">

<p>
 In strict mode, the annotation <code>x : T = y</code> represents an error unless one of the following holds: 
</p>
<ul>
<li class="level1"><div class="li"> <code>y</code> is of type <code>U</code> and <code>T</code> defines a <code>to</code> operator that has an operand type of <code>V</code> and <code>U &lt;: V</code></div>
</li>
<li class="level1"><div class="li"> <code>y</code> is of type <code>U</code> and <code>U &lt;: T</code></div>
</li>
<li class="level1"><div class="li"> <code>y</code> is of the top &ldquo;unconstrained&rdquo; type</div>
</li>
<li class="level1"><div class="li"> <code>T</code> is <code>Boolean</code> (which always gets an implicit conversion)</div>
</li>
<li class="level1"><div class="li"> <code>y</code> is of type <code>U</code> and both <code>U &lt;: Number</code> and <code>T &lt;: Number</code></div>
</li>
</ul>

<p>
 This is &ldquo;static typechecking with some implicit conversions&rdquo;. User-provided <code>to</code> operators are used to determine type compatibility for assignment.
</p>

</div>

<a name="syntax"></a><h1>Syntax</h1>
<div class="level1">

<p>
 The <code>to</code>, <code>cast</code> and <code>is</code> operators are infix binary &ldquo;type&rdquo; operators that take ordinary expression on the left side and a type expression on the right side. Here are some examples,
</p>
<pre class="code">
x to t
x is t
x cast t
</pre>

<p>
where <code>t</code> is a type expression.
</p>

<p>
An earlier version of this proposal had a prefix forms for computing types from type expressions, and infix forms for computing types from ordinary expressions. This was deemed overly general and redundant and so was simplified to have the current binary forms that compute types from a type expression.
</p>

</div>

<!-- no cachefile used, but created -->
    <!-- wikipage stop -->
  </div>

  <div class="clearer">&nbsp;</div>

  
  <div class="stylefoot">

    <div class="meta">
      <div class="user">
              </div>
      <div class="doc">
        proposals/is_as_to.txt &middot; Last modified: 2008/07/14 18:29 by jodyer      </div>
    </div>

   
    <div class="bar" id="bar_bottom">
      <div class="bar-left" id="bar_bottomleft">
        <form class="button" method="post" action="index.html" onsubmit="return svchk()"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="" /><input type="hidden" name="id" value="proposals:is_as_to" /><input type="submit" value="Show pagesource" class="button" title="ALT+V" accesskey="v" /></form>        <form class="button" method="get" action="index.html" onsubmit="return svchk()"><input type="hidden" name="do" value="revisions" /><input type="hidden" name="id" value="proposals:is_as_to" /><input type="submit" value="Old revisions" class="button" title="ALT+O" accesskey="o" /></form>      </div>
      <div class="bar-right" id="bar_bottomright">
                        <form class="button" method="get" action="index.html" onsubmit="return svchk()"><input type="hidden" name="do" value="login" /><input type="hidden" name="id" value="proposals:is_as_to" /><input type="submit" value="Login" class="button" /></form>        <form class="button" method="get" action="index.html" onsubmit="return svchk()"><input type="hidden" name="do" value="index" /><input type="hidden" name="id" value="proposals:is_as_to" /><input type="submit" value="Index" class="button" title="ALT+X" accesskey="x" /></form>        <a href="doku.php%3Fid=proposals:is_as_to.html#top"><input type="button" class="button" value="Back to top" onclick="window.scrollTo(0, 0)" /></a>&nbsp;
      </div>
    </div>

  </div>

</div>

<div align="center" class="footerinc">
  <a target="_blank" href="feed.php" title="Recent changes RSS feed"><img src="lib/tpl/default/images/button-rss.png" width="80" height="15" alt="Recent changes RSS feed" border="0" /></a>

  <a target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/2.0/" rel="license" title="Creative Commons License"><img src="lib/tpl/default/images/button-cc.gif" width="80" height="15" alt="Creative Commons License" border="0" /></a>

  <a target="_blank" href="https://www.paypal.com/xclick/business=andi%40splitbrain.org&amp;item_name=DokuWiki+Donation&amp;no_shipping=1&amp;no_note=1&amp;tax=0&amp;currency_code=EUR&amp;lc=US" title="Donate"><img src="lib/tpl/default/images/button-donate.gif" alt="Donate" border="0" /></a>

  <a target="_blank" href="http://www.php.net" title="Powered by PHP"><img src="lib/tpl/default/images/button-php.gif" width="80" height="15" alt="Powered by PHP" border="0" /></a>

  <a target="_blank" href="http://validator.w3.org/check/referer" title="Valid XHTML 1.0"><img src="lib/tpl/default/images/button-xhtml.png" width="80" height="15" alt="Valid XHTML 1.0" border="0" /></a>

  <a target="_blank" href="http://jigsaw.w3.org/css-validator/check/referer" title="Valid CSS"><img src="lib/tpl/default/images/button-css.png" width="80" height="15" alt="Valid CSS" border="0" /></a>

  <a target="_blank" href="http://wiki.splitbrain.org/wiki:dokuwiki" title="Driven by DokuWiki"><img src="lib/tpl/default/images/button-dw.png" width="80" height="15" alt="Driven by DokuWiki" border="0" /></a>



<!--

<rdf:RDF xmlns="http://web.resource.org/cc/"
    xmlns:dc="http://purl.org/dc/elements/1.1/"
    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
<Work rdf:about="">
   <dc:type rdf:resource="http://purl.org/dc/dcmitype/Text" />
   <license rdf:resource="http://creativecommons.org/licenses/by-nc-sa/2.0/" />
</Work>

<License rdf:about="http://creativecommons.org/licenses/by-nc-sa/2.0/">
   <permits rdf:resource="http://web.resource.org/cc/Reproduction" />
   <permits rdf:resource="http://web.resource.org/cc/Distribution" />
   <requires rdf:resource="http://web.resource.org/cc/Notice" />
   <requires rdf:resource="http://web.resource.org/cc/Attribution" />
   <prohibits rdf:resource="http://web.resource.org/cc/CommercialUse" />
   <permits rdf:resource="http://web.resource.org/cc/DerivativeWorks" />
   <requires rdf:resource="http://web.resource.org/cc/ShareAlike" />
</License>

</rdf:RDF>

-->
</div>

<img src="lib/exe/indexer.php%3Fid=proposals%253Ais_as_to&amp;1454275565" width="1" height="1" alt=""  /></body>
</html>
