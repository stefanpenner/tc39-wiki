<html>
<head>
  <meta name="generator" content="DokuWiki Release 2005-09-22e" />
  <link rel="start" href="index.html" />
  <link rel="contents" href="doku.php%3Fid=strawman:string_at&amp;do=index.html" title="" />
  <link rel="alternate" type="application/rss+xml" title="Recent Changes" href="feed.php" />
  <link rel="alternate" type="application/rss+xml" title="Current Namespace" href="feed.php%3Fmode=list&amp;ns=strawman" />
  <link rel="alternate" type="text/html" title="Plain HTML" href="doku.php%3Fid=strawman:string_at&amp;do=export_html.html" />
  <link rel="alternate" type="text/plain" title="Wiki Markup" href="doku.php%3Fid=strawman:string_at&amp;do=export_raw" />
  <link rel="stylesheet" media="screen" type="text/css" href="lib/styles/style.css" />
  <meta name="robots" content="noindex,nofollow" />
  <script language="javascript" type="text/javascript" charset="utf-8">
    var alertText   = 'Please enter the text you want to format.\nIt will be appended to the end of the document.'
    var notSavedYet = 'Unsaved changes will be lost.\nReally continue?'
    var DOKU_BASE   = '/'
  </script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/script.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/tw-sack.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/ajax.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/domLib.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/domTT.js"></script>
  <link rel="stylesheet" type="text/css" href="lib/plugins/plugin/style.css" />
</head>
<body>

<a name="string.prototype.at"></a><h2>String.prototype.at</h2>
<div class="level2">

<p>
 This initial proposal was drafted by <a href="mailto:%26%23x6d%3B%26%23x61%3B%26%23x74%3B%26%23x68%3B%26%23x69%3B%26%23x61%3B%26%23x73%3B%26%23x40%3B%26%23x71%3B%26%23x69%3B%26%23x77%3B%26%23x69%3B%26%23x2e%3B%26%23x62%3B%26%23x65%3B" class="mail" title="&#x6d;&#x61;&#x74;&#x68;&#x69;&#x61;&#x73;&#x40;&#x71;&#x69;&#x77;&#x69;&#x2e;&#x62;&#x65;">Mathias Bynens</a> and originally published at <a href="https://github.com/mathiasbynens/String.prototype.at" class="urlextern" target="_blank" title="https://github.com/mathiasbynens/String.prototype.at" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">mathiasbynens/String.prototype.at</a>
</p>

<p>
A robust &amp; optimized ES3-compatible polyfill for <a href="http://esdiscuss.org/topic/string-prototype-symbolat-improved-string-prototype-charat" class="urlextern" target="_blank" title="http://esdiscuss.org/topic/string-prototype-symbolat-improved-string-prototype-charat" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">the String.prototype.at proposal for ECMAScript 6</a>.
</p>

<p>
Spec bug ticket: &lt;<a href="https://bugs.ecmascript.org/show_bug.cgi?id=2073" class="urlextern" target="_blank" title="https://bugs.ecmascript.org/show_bug.cgi?id=2073" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">https://bugs.ecmascript.org/show_bug.cgi?id=2073</a>&gt;
</p>

<p>
<strong>Spec proposal for String.prototype.at(pos)</strong>
</p>

<p>
<strong>NOTE:</strong> Returns a single-element String containing the code point at element position pos in the String value resulting from converting the this object to a String. If there is no element at that position, the result is the empty String. The result is a String value, not a String object.
</p>

<p>
When the at method is called with one argument pos, the following steps are taken:
</p>

<p>
1. Let <em>O</em> be CheckObjectCoercible(this value).
</p>

<p>
2. Let <em>S</em> be ToString(O).
</p>

<p>
3. ReturnIfAbrupt(S).
</p>

<p>
4. Let <em>position</em> be ToInteger(pos).
</p>

<p>
5. ReturnIfAbrupt(position).
</p>

<p>
6. Let <em>size</em> be the number of elements in <em>S</em>.
</p>

<p>
7. If <em>position</em> &lt;  or <em>position</em> ≥ size, return the empty String.
</p>

<p>
8. Let <em>first</em> be the code unit at index <em>position</em> of <em>S</em>.
</p>

<p>
9. Let <em>cuFirst</em> be the code unit value of the element at index 0 of <em>first</em>.
</p>

<p>
10. If <em>cuFirst</em> &lt; 0xD800 or <em>cuFirst</em> &gt; 0xDBFF or <em>position</em> + 1 = <em>size</em>, then return <em>first</em>.
</p>

<p>
11. Let <em>cuSecond</em> be the code unit value of the element at index <em>position</em> + 1 of <em>S</em>.
</p>

<p>
12. If <em>cuSecond</em> &lt; 0xDC00 or <em>cuSecond</em> &gt; 0xDFFF, then return <em>first</em>.
</p>

<p>
13. Let <em>second</em> be the code unit at index <em>position</em> + 1 of <em>S</em>.
</p>

<p>
14. Let <em>cp</em> be (<em>first</em> – 0xD800) × 0&times;400 + (<em>second</em> – 0xDC00) + 0&times;10000.
</p>

<p>
15. Return the elements of the UTF-16 Encoding (clause 6) of <em>cp</em>.
</p>

<p>
<strong>NOTE:</strong> The at function is intentionally generic; it does not require that its this value be a String object. Therefore it can be transferred to other kinds of objects for use as a method. 
</p>

</div>

<!-- cachefile /usr/local/www/es-lang.org/wiki/data/cache/5/54116329147e19dd8169a764f032b541.xhtml used -->
</body>
</html>
