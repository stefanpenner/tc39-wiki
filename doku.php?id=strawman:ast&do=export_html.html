<html>
<head>
  <meta name="generator" content="DokuWiki Release 2005-09-22e" />
  <link rel="start" href="index.html" />
  <link rel="contents" href="doku.php%3Fid=strawman:ast&amp;do=index.html" title="" />
  <link rel="alternate" type="application/rss+xml" title="Recent Changes" href="feed.php" />
  <link rel="alternate" type="application/rss+xml" title="Current Namespace" href="feed.php%3Fmode=list&amp;ns=strawman" />
  <link rel="alternate" type="text/html" title="Plain HTML" href="doku.php%3Fid=strawman:ast&amp;do=export_html.html" />
  <link rel="alternate" type="text/plain" title="Wiki Markup" href="doku.php%3Fid=strawman:ast&amp;do=export_raw" />
  <link rel="stylesheet" media="screen" type="text/css" href="lib/styles/style.css" />
  <meta name="robots" content="noindex,nofollow" />
  <script language="javascript" type="text/javascript" charset="utf-8">
    var alertText   = 'Please enter the text you want to format.\nIt will be appended to the end of the document.'
    var notSavedYet = 'Unsaved changes will be lost.\nReally continue?'
    var DOKU_BASE   = '/'
  </script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/script.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/tw-sack.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/ajax.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/domLib.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/domTT.js"></script>
  <link rel="stylesheet" type="text/css" href="lib/plugins/plugin/style.css" />
</head>
<body>

<p>
This page is a placeholder for a Harmony specification for a parser which parses ECMAScript text into a standard abstract syntax tree made up of ECMAScript objects. A proposal is taking shape at <a href="http://code.google.com/p/es-lab/wiki/JsonMLASTFormat" class="urlextern" target="_blank" title="http://code.google.com/p/es-lab/wiki/JsonMLASTFormat" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">http://code.google.com/p/es-lab/wiki/JsonMLASTFormat</a>. You can play with it at <a href="http://es-lab.googlecode.com/svn/trunk/site/esparser/index.html" class="urlextern" target="_blank" title="http://es-lab.googlecode.com/svn/trunk/site/esparser/index.html" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">ES5 Parser Playground</a>.
</p>

<p>
In order for this to be practical, most of the current ECMAScript utilities that currently take program text as a string would need to be extended to accept an AST as well. Otherwise, code processors that operate on ASTs would have to render the code back to text before actually using it &ndash; which would be inconvenient and perhaps expensive. 
</p>
<hr noshade="noshade" size="1" />

<p>
I should hopefully be landing a patch soon that implements an <a href="https://developer.mozilla.org/en/SpiderMonkey/Parser_API" class="urlextern" target="_blank" title="https://developer.mozilla.org/en/SpiderMonkey/Parser_API" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">abstract syntax API</a> for SpiderMonkey. You can follow <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=533874" class="urlextern" target="_blank" title="https://bugzilla.mozilla.org/show_bug.cgi?id=533874" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">bug 533874</a> in Bugzilla to see the progress. The initial version will only be available in the offline SpiderMonkey shell, so that we can test it adequately before deciding whether to release it to the web.
</p>

<p>
I designed the AST differently from the JsonMLAST format in order to be easier to write code that destructures the AST. The JsonMLAST is not particularly friendly to <code>switch</code>-based code. It should be really easy to write conversions between the two formats.
</p>

<p>
I also plan to extend the parser library to take an optional <a href="http://en.wikipedia.org/wiki/Builder_pattern" class="urlextern" target="_blank" title="http://en.wikipedia.org/wiki/Builder_pattern" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">builder</a> argument that lets the client determine the output format. The basic structure of the underlying implementation is amenable to this, but it&rsquo;ll be a separate patch to implement.
</p>

<p>
 &mdash; <em><a href="mailto:%26%23x64%3B%26%23x68%3B%26%23x65%3B%26%23x72%3B%26%23x6d%3B%26%23x61%3B%26%23x6e%3B%26%23x40%3B%26%23x63%3B%26%23x63%3B%26%23x73%3B%26%23x2e%3B%26%23x6e%3B%26%23x65%3B%26%23x75%3B%26%23x2e%3B%26%23x65%3B%26%23x64%3B%26%23x75%3B" class="mail" title="&#x64;&#x68;&#x65;&#x72;&#x6d;&#x61;&#x6e;&#x40;&#x63;&#x63;&#x73;&#x2e;&#x6e;&#x65;&#x75;&#x2e;&#x65;&#x64;&#x75;">Dave Herman</a> 2010/06/24 21:12</em> 
</p>
<hr noshade="noshade" size="1" />

<p>
Primary reasons this has not been actively championed so far: 
</p>
<ul>
<li class="level1"><div class="li"> differences between internal AST representation of <acronym title="JavaScript">JS</acronym> engines and the external representation of the library will lead to complex/branchy parsers at best and multiple parser at worst;</div>
</li>
<li class="level1"><div class="li"> implementations&rsquo; need to remain flexible to change their internal AST representation will also add incentive to implement multiple parsers;</div>
</li>
<li class="level1"><div class="li"> the large <acronym title="Application Programming Interface">API</acronym> design space makes for a difficult standardization challenge;</div>
</li>
<li class="level1"><div class="li"> multiple existing AST formats already exist, also making for a difficult standardization challenge;</div>
</li>
<li class="level1"><div class="li"> this could all be implemented purely in <acronym title="JavaScript">JS</acronym> as a library anyway</div>
</li>
</ul>

<p>
  &mdash; <em><a href="mailto:%26%23x64%3B%26%23x68%3B%26%23x65%3B%26%23x72%3B%26%23x6d%3B%26%23x61%3B%26%23x6e%3B%26%23x40%3B%26%23x63%3B%26%23x63%3B%26%23x73%3B%26%23x2e%3B%26%23x6e%3B%26%23x65%3B%26%23x75%3B%26%23x2e%3B%26%23x65%3B%26%23x64%3B%26%23x75%3B" class="mail" title="&#x64;&#x68;&#x65;&#x72;&#x6d;&#x61;&#x6e;&#x40;&#x63;&#x63;&#x73;&#x2e;&#x6e;&#x65;&#x75;&#x2e;&#x65;&#x64;&#x75;">Dave Herman</a> 2011/07/06 21:48</em> 
</p>

<!-- cachefile /usr/local/www/es-lang.org/wiki/data/cache/5/574d0bfb1b64110f6331d033d7ca8e16.xhtml used -->
</body>
</html>
