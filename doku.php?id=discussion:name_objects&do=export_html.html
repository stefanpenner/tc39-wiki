<html>
<head>
  <meta name="generator" content="DokuWiki Release 2005-09-22e" />
  <link rel="start" href="index.html" />
  <link rel="contents" href="doku.php%3Fid=discussion:name_objects&amp;do=index.html" title="" />
  <link rel="alternate" type="application/rss+xml" title="Recent Changes" href="feed.php" />
  <link rel="alternate" type="application/rss+xml" title="Current Namespace" href="feed.php%3Fmode=list&amp;ns=discussion" />
  <link rel="alternate" type="text/html" title="Plain HTML" href="doku.php%3Fid=discussion:name_objects&amp;do=export_html.html" />
  <link rel="alternate" type="text/plain" title="Wiki Markup" href="doku.php%3Fid=discussion:name_objects&amp;do=export_raw" />
  <link rel="stylesheet" media="screen" type="text/css" href="lib/styles/style.css" />
  <meta name="robots" content="noindex,nofollow" />
  <script language="javascript" type="text/javascript" charset="utf-8">
    var alertText   = 'Please enter the text you want to format.\nIt will be appended to the end of the document.'
    var notSavedYet = 'Unsaved changes will be lost.\nReally continue?'
    var DOKU_BASE   = '/'
  </script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/script.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/tw-sack.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/ajax.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/domLib.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/domTT.js"></script>
  <link rel="stylesheet" type="text/css" href="lib/plugins/plugin/style.css" />
</head>
<body>

<p>
This is the discussion page for <a href="doku.php%3Fid=proposals:name_objects.html" class="wikilink1" title="proposals:name_objects" onclick="return svchk()" onkeypress="return svchk()">name objects</a>
</p>

<a name="discussion"></a><h1>Discussion</h1>
<div class="level1">

<p>
 ISSUE: should <code>Name</code> define a <code>toString</code> that attempts to compute a qualified name expression?
</p>

<p>
 &mdash; <em><a href="mailto:%26%23x62%3B%26%23x72%3B%26%23x65%3B%26%23x6e%3B%26%23x64%3B%26%23x61%3B%26%23x6e%3B%26%23x40%3B%26%23x6d%3B%26%23x6f%3B%26%23x7a%3B%26%23x69%3B%26%23x6c%3B%26%23x6c%3B%26%23x61%3B%26%23x2e%3B%26%23x6f%3B%26%23x72%3B%26%23x67%3B" class="mail" title="&#x62;&#x72;&#x65;&#x6e;&#x64;&#x61;&#x6e;&#x40;&#x6d;&#x6f;&#x7a;&#x69;&#x6c;&#x6c;&#x61;&#x2e;&#x6f;&#x72;&#x67;">Brendan Eich</a> 2007/02/01 00:38</em>
</p>

<p>
This is hard to do because there is no good way to express a namespace as an expression. Maybe we should just generate a descriptive string (like we do for objects). For example:
</p>
<pre class="code javascript"><span class="kw2">package</span> foo <span class="br0">&#123;</span>
    <span class="kw2">public</span> <span class="kw2">var</span> x
<span class="br0">&#125;</span>
<span class="kw2">import</span> foo.<span class="me1">x</span>
<span class="kw2">namespace</span> bar
<span class="kw2">namespace</span> baz = <span class="st0">"bazuri"</span>
bar <span class="kw2">var</span> y
baz <span class="kw2">var</span> z</pre>
<p>
Given these definitions, the following would be the translations of their names to strings 
</p>
<pre class="code">foo.x        -&gt; &quot;[namespace public foo]::x&quot;
bar::y       -&gt; &quot;[namespace user-opaque /[namespace internal ]::bar]::y&quot;
baz::z       -&gt; &quot;[namespace user bazuri]::z&quot;</pre>

<p>
  &mdash; <em><a href="mailto:%26%23x6a%3B%26%23x6f%3B%26%23x64%3B%26%23x79%3B%26%23x65%3B%26%23x72%3B%26%23x40%3B%26%23x61%3B%26%23x64%3B%26%23x6f%3B%26%23x62%3B%26%23x65%3B%26%23x2e%3B%26%23x63%3B%26%23x6f%3B%26%23x6d%3B" class="mail" title="&#x6a;&#x6f;&#x64;&#x79;&#x65;&#x72;&#x40;&#x61;&#x64;&#x6f;&#x62;&#x65;&#x2e;&#x63;&#x6f;&#x6d;">Jeff Dyer</a> 2007/02/01 13:45</em>
</p>

<p>
Cool, especially if <code>Namespace</code> has a <code>toString</code> method that produces <code>&ldquo;[namespace public foo]&rdquo;</code> already. Does it?
</p>

<p>
 &mdash; <em><a href="mailto:%26%23x62%3B%26%23x72%3B%26%23x65%3B%26%23x6e%3B%26%23x64%3B%26%23x61%3B%26%23x6e%3B%26%23x40%3B%26%23x6d%3B%26%23x6f%3B%26%23x7a%3B%26%23x69%3B%26%23x6c%3B%26%23x6c%3B%26%23x61%3B%26%23x2e%3B%26%23x6f%3B%26%23x72%3B%26%23x67%3B" class="mail" title="&#x62;&#x72;&#x65;&#x6e;&#x64;&#x61;&#x6e;&#x40;&#x6d;&#x6f;&#x7a;&#x69;&#x6c;&#x6c;&#x61;&#x2e;&#x6f;&#x72;&#x67;">Brendan Eich</a> 2007/02/01 15:13</em>
</p>

<p>
In AS3, <code>toString</code> on namespace instances just produces the namespace name (that is, the uri). Spidermonkey (e4x) does the same. The problem comes with the builtin namespaces (private, public, etc). Are we willing to break compatibility to get more descriptive strings?  &mdash; <em><a href="mailto:%26%23x6a%3B%26%23x6f%3B%26%23x64%3B%26%23x79%3B%26%23x65%3B%26%23x72%3B%26%23x40%3B%26%23x61%3B%26%23x64%3B%26%23x6f%3B%26%23x62%3B%26%23x65%3B%26%23x2e%3B%26%23x63%3B%26%23x6f%3B%26%23x6d%3B" class="mail" title="&#x6a;&#x6f;&#x64;&#x79;&#x65;&#x72;&#x40;&#x61;&#x64;&#x6f;&#x62;&#x65;&#x2e;&#x63;&#x6f;&#x6d;">Jeff Dyer</a> 2007/02/01 15:38</em>
</p>

<p>
You&rsquo;re right, this is a break from E4X (ECMA-357), which specifies <code>Namespace.prototype.toString</code>. But E4X doesn&rsquo;t have the <code>namespace foo</code> declaration, so it does not say what the result of <code>toString</code> should be for a user-defined namespace not initialized by a <acronym title="Uniform Resource Identifier">URI</acronym> string (which could be any old string). It seems we have at most three pieces of information to convey in the result of <code>toString</code>: 
</p>
<ul>
<li class="level1"><div class="li"> the declared name of the namespace (if there is one; and which itself could be namespace-qualified, right?)</div>
</li>
<li class="level1"><div class="li"> the initialising <acronym title="Uniform Resource Identifier">URI</acronym> string (any old string, we should probably not say <acronym title="Uniform Resource Identifier">URI</acronym> in the spec, or else require a well-formed <acronym title="Uniform Resource Identifier">URI</acronym>) <strong>OR</strong> the package name (<code>foo</code> in your example)</div>
</li>
<li class="level1"><div class="li"> the &ldquo;kind&rdquo; (<code>public</code>, <code>private</code>, <code>internal</code>, <code>user</code> &ndash; any others?)</div>
</li>
</ul>

<p>
 If we are going to deviate from E4X, we should probably include all of these in an easy-to-split format. Brainstorming welcome.
</p>

<p>
 &mdash; <em><a href="mailto:%26%23x62%3B%26%23x72%3B%26%23x65%3B%26%23x6e%3B%26%23x64%3B%26%23x61%3B%26%23x6e%3B%26%23x40%3B%26%23x6d%3B%26%23x6f%3B%26%23x7a%3B%26%23x69%3B%26%23x6c%3B%26%23x6c%3B%26%23x61%3B%26%23x2e%3B%26%23x6f%3B%26%23x72%3B%26%23x67%3B" class="mail" title="&#x62;&#x72;&#x65;&#x6e;&#x64;&#x61;&#x6e;&#x40;&#x6d;&#x6f;&#x7a;&#x69;&#x6c;&#x6c;&#x61;&#x2e;&#x6f;&#x72;&#x67;">Brendan Eich</a> 2007/02/01 15:52</em>
</p>

<p>
The declared name is irrelevant to the identity of the namespace, so I say we don&rsquo;t put it in the toString string. My example above that uses the binding name as the uri is misleading (I&rsquo;ve fixed it). If anything we would want to generate a fake <acronym title="Uniform Resource Identifier">URI</acronym> that is unique and recognisably associated with a particular declaration &ndash; maybe including the path of its scope and its binding name. We could also use a different kind of user namespace (<code>user-opaque</code>?). Also we need to add the <code>intrinisc</code> kind to your list of namespace kinds above.
</p>

<p>
 &mdash; <em><a href="mailto:%26%23x6a%3B%26%23x6f%3B%26%23x64%3B%26%23x79%3B%26%23x65%3B%26%23x72%3B%26%23x40%3B%26%23x61%3B%26%23x64%3B%26%23x6f%3B%26%23x62%3B%26%23x65%3B%26%23x2e%3B%26%23x63%3B%26%23x6f%3B%26%23x6d%3B" class="mail" title="&#x6a;&#x6f;&#x64;&#x79;&#x65;&#x72;&#x40;&#x61;&#x64;&#x6f;&#x62;&#x65;&#x2e;&#x63;&#x6f;&#x6d;">Jeff Dyer</a> 2007/02/02 10:38</em> 
</p>

</div>
<!-- SECTION [61-] -->
<!-- cachefile /usr/local/www/es-lang.org/wiki/data/cache/2/2013f87e50be9e2509b8aeb860413959.xhtml used -->
</body>
</html>
