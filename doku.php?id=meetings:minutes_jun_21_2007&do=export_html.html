<html>
<head>
  <meta name="generator" content="DokuWiki Release 2005-09-22e" />
  <link rel="start" href="index.html" />
  <link rel="contents" href="doku.php%3Fid=meetings:minutes_jun_21_2007&amp;do=index.html" title="" />
  <link rel="alternate" type="application/rss+xml" title="Recent Changes" href="feed.php" />
  <link rel="alternate" type="application/rss+xml" title="Current Namespace" href="feed.php%3Fmode=list&amp;ns=meetings" />
  <link rel="alternate" type="text/html" title="Plain HTML" href="doku.php%3Fid=meetings:minutes_jun_21_2007&amp;do=export_html.html" />
  <link rel="alternate" type="text/plain" title="Wiki Markup" href="doku.php%3Fid=meetings:minutes_jun_21_2007&amp;do=export_raw" />
  <link rel="stylesheet" media="screen" type="text/css" href="lib/styles/style.css" />
  <meta name="robots" content="noindex,nofollow" />
  <script language="javascript" type="text/javascript" charset="utf-8">
    var alertText   = 'Please enter the text you want to format.\nIt will be appended to the end of the document.'
    var notSavedYet = 'Unsaved changes will be lost.\nReally continue?'
    var DOKU_BASE   = '/'
  </script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/script.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/tw-sack.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/ajax.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/domLib.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/domTT.js"></script>
  <link rel="stylesheet" type="text/css" href="lib/plugins/plugin/style.css" />
</head>
<body>
<div class="toc">
<div class="tocheader"> <script type="text/javascript">showTocToggle("+","-")</script>Table of Contents</div>
<div id="tocinside">
<ul class="toc">
<li class="clear"><ul class="toc">
<li class="level2"><span class="li"><a href="doku.php%3Fid=meetings:minutes_jun_21_2007&amp;do=export_html.html#logistics" class="toc">Logistics</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=meetings:minutes_jun_21_2007&amp;do=export_html.html#attendees" class="toc">Attendees</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=meetings:minutes_jun_21_2007&amp;do=export_html.html#agenda" class="toc">Agenda</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=meetings:minutes_jun_21_2007&amp;do=export_html.html#notes" class="toc">Notes</a></span><ul class="toc">
<li class="level3"><span class="li"><a href="doku.php%3Fid=meetings:minutes_jun_21_2007&amp;do=export_html.html#open_proposals" class="toc">Open proposals</a></span><ul class="toc">
<li class="level4"><span class="li"><a href="doku.php%3Fid=meetings:minutes_jun_21_2007&amp;do=export_html.html#maintenance_of_es3" class="toc">Maintenance of ES3</a></span></li>
<li class="level4"><span class="li"><a href="doku.php%3Fid=meetings:minutes_jun_21_2007&amp;do=export_html.html#enumeration_type" class="toc">Enumeration type</a></span></li>
<li class="level4"><span class="li"><a href="doku.php%3Fid=meetings:minutes_jun_21_2007&amp;do=export_html.html#self_type" class="toc">Self Type</a></span></li>
<li class="level4"><span class="li"><a href="doku.php%3Fid=meetings:minutes_jun_21_2007&amp;do=export_html.html#remove_arguments_object" class="toc">Remove arguments object</a></span></li>
<li class="level4"><span class="li"><a href="doku.php%3Fid=meetings:minutes_jun_21_2007&amp;do=export_html.html#eval" class="toc">Eval</a></span></li>
<li class="level4"><span class="li"><a href="doku.php%3Fid=meetings:minutes_jun_21_2007&amp;do=export_html.html#program_configuration" class="toc">Program configuration</a></span></li>
<li class="level4"><span class="li"><a href="doku.php%3Fid=meetings:minutes_jun_21_2007&amp;do=export_html.html#program_units" class="toc">Program units</a></span></li>
<li class="level4"><span class="li"><a href="doku.php%3Fid=meetings:minutes_jun_21_2007&amp;do=export_html.html#issues_related_to_module_loading" class="toc">Issues related to module loading</a></span></li>
<li class="level4"><span class="li"><a href="doku.php%3Fid=meetings:minutes_jun_21_2007&amp;do=export_html.html#dictionary" class="toc">Dictionary</a></span></li>
</ul>
</li>
<li class="level3"><span class="li"><a href="doku.php%3Fid=meetings:minutes_jun_21_2007&amp;do=export_html.html#trac_issues_database" class="toc">Trac issues database</a></span></li>
</ul>
</li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=meetings:minutes_jun_21_2007&amp;do=export_html.html#friday_june_22" class="toc">Friday, June 22</a></span><ul class="toc">
<li class="level3"><span class="li"><a href="doku.php%3Fid=meetings:minutes_jun_21_2007&amp;do=export_html.html#trac_issues_database_continued" class="toc">Trac issues database continued</a></span></li>
<li class="level3"><span class="li"><a href="doku.php%3Fid=meetings:minutes_jun_21_2007&amp;do=export_html.html#review_agenda_items" class="toc">Review Agenda items</a></span><ul class="toc">
<li class="level4"><span class="li"><a href="doku.php%3Fid=meetings:minutes_jun_21_2007&amp;do=export_html.html#phone_meetings_between_now_and_the_next_f2f" class="toc">Phone meetings between now and the next f2f?</a></span></li>
<li class="level4"><span class="li"><a href="doku.php%3Fid=meetings:minutes_jun_21_2007&amp;do=export_html.html#spec_writing_process" class="toc">Spec writing process</a></span></li>
<li class="level4"><span class="li"><a href="doku.php%3Fid=meetings:minutes_jun_21_2007&amp;do=export_html.html#self_type_discussion" class="toc">Self type discussion</a></span></li>
<li class="level4"><span class="li"><a href="doku.php%3Fid=meetings:minutes_jun_21_2007&amp;do=export_html.html#packages_and_namespaces" class="toc">Packages and Namespaces</a></span></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>

<a name="logistics"></a><h2>Logistics</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> June 21, 1200-1700 PDT, with dinner at 1830, at <a href="http://local.yahoo.com/details?id=21396991" class="urlextern" target="_blank" title="http://local.yahoo.com/details?id=21396991" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">Sundance Mining Co.</a> (<a href="mailto:%26%23x6d%3B%26%23x61%3B%26%23x69%3B%26%23x6c%3B%26%23x74%3B%26%23x6f%3B%26%23x3a%3B%26%23x62%3B%26%23x72%3B%26%23x65%3B%26%23x6e%3B%26%23x64%3B%26%23x61%3B%26%23x6e%3B%26%23x40%3B%26%23x6d%3B%26%23x6f%3B%26%23x7a%3B%26%23x69%3B%26%23x6c%3B%26%23x6c%3B%26%23x61%3B%26%23x2e%3B%26%23x6f%3B%26%23x72%3B%26%23x67%3B" class="mail" title="&#x6d;&#x61;&#x69;&#x6c;&#x74;&#x6f;&#x3a;&#x62;&#x72;&#x65;&#x6e;&#x64;&#x61;&#x6e;&#x40;&#x6d;&#x6f;&#x7a;&#x69;&#x6c;&#x6c;&#x61;&#x2e;&#x6f;&#x72;&#x67;">regrets only</a>)</div>
</li>
<li class="level1"><div class="li"> June 22, 1000-1700 PDT</div>
</li>
<li class="level1"><div class="li"> Mozilla building &ldquo;S&rdquo;</div>
<ul>
<li class="level2"><div class="li"> 2121 Landings Drive, Mountain View, CA 94043 (<a href="http://maps.google.com/maps?q=37.4206N+122.0894W+(Mozilla+Office,+Building+S)&amp;ie=UTF8&amp;z=17&amp;ll=37.4206,-122.089401&amp;spn=0.005172,0.009141&amp;t=h&amp;om=1&amp;iwloc=addr" class="urlextern" target="_blank" title="http://maps.google.com/maps?q=37.4206N+122.0894W+(Mozilla+Office,+Building+S)&amp;ie=UTF8&amp;z=17&amp;ll=37.4206,-122.089401&amp;spn=0.005172,0.009141&amp;t=h&amp;om=1&amp;iwloc=addr" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">map link</a>)</div>
</li>
<li class="level2"><div class="li"> <code>&lt;script&gt;</code> conference room</div>
</li>
</ul>
</li>
</ul>

</div>
<!-- SECTION [1-508] -->
<a name="attendees"></a><h2>Attendees</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> Francis Cheng, Adobe</div>
</li>
<li class="level1"><div class="li"> Douglas Crockford, Yahoo!</div>
</li>
<li class="level1"><div class="li"> Jeff Dyer, Adobe</div>
</li>
<li class="level1"><div class="li"> Brendan Eich, Mozilla</div>
</li>
<li class="level1"><div class="li"> Cormac Flanagan, Univ. California, Santa Cruz</div>
</li>
<li class="level1"><div class="li"> Lars T Hansen, Adobe</div>
</li>
<li class="level1"><div class="li"> Graydon Hoare, Mozilla</div>
</li>
<li class="level1"><div class="li"> Blake Kaplan, Mozilla</div>
</li>
<li class="level1"><div class="li"> Jason Orendorff, Mozilla</div>
</li>
<li class="level1"><div class="li"> Chris Pine, Opera</div>
</li>
<li class="level1"><div class="li"> Alex Russell, Dojo</div>
</li>
<li class="level1"><div class="li"> Allen Wirfs-Brock, Microsoft</div>
</li>
</ul>

</div>
<!-- SECTION [509-878] -->
<a name="agenda"></a><h2>Agenda</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> <a href="doku.php%3Fid=spec:type_system.html" class="wikilink1" title="spec:type_system" onclick="return svchk()" onkeypress="return svchk()">type system</a> issue: bounded length array type, semantics and syntax</div>
</li>
<li class="level1"><div class="li"> <a href="doku.php%3Fid=proposals:self_type.html" class="wikilink1" title="proposals:self_type" onclick="return svchk()" onkeypress="return svchk()">self type</a>: at least return-this self-typing is wanted by <a href="doku.php%3Fid=proposals:iterators_and_generators.html" class="wikilink1" title="proposals:iterators_and_generators" onclick="return svchk()" onkeypress="return svchk()">iterators and generators</a></div>
</li>
<li class="level1"><div class="li"> Open <a href="doku.php%3Fid=proposals:proposals.html" class="wikilink1" title="proposals:proposals" onclick="return svchk()" onkeypress="return svchk()">proposals</a> and open proposal issues in the <a href="http://bugs.ecmascript-lang.org/" class="urlextern" target="_blank" title="http://bugs.ecmascript-lang.org/" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">es-lang.org trac</a>.</div>
</li>
<li class="level1"><div class="li"> Decision on whether to adopt an environment model of type expressions, including type closures.</div>
</li>
<li class="level1"><div class="li"> Decision on when to resolve type names to type values, and whether to treat &ldquo;strict mode&rdquo; as partial evaluation.</div>
</li>
<li class="level1"><div class="li"> Decision on how much environment to share between compilation units / modules. Reconcile <a href="doku.php%3Fid=proposals:program_units.html" class="wikilink1" title="proposals:program_units" onclick="return svchk()" onkeypress="return svchk()">program units</a> and <a href="doku.php%3Fid=clarification:multiple_compilation_units.html" class="wikilink1" title="clarification:multiple_compilation_units" onclick="return svchk()" onkeypress="return svchk()">multiple compilation units</a> (if there is any disagreement between them).</div>
</li>
<li class="level1"><div class="li"> Clean up all wiki pages and source code that disagrees on these decisions, so we have a single story!</div>
</li>
<li class="level1"><div class="li"> Need another wiki export</div>
</li>
<li class="level1"><div class="li"> Phone meetings between now and the next f2f?</div>
</li>
<li class="level1"><div class="li"> Spec writing process</div>
</li>
</ul>

</div>
<!-- SECTION [879-1854] -->
<a name="notes"></a><h2>Notes</h2>
<div class="level2">

</div>
<!-- SECTION [1855-1874] -->
<a name="open_proposals"></a><h3>Open proposals</h3>
<div class="level3">

</div>
<!-- SECTION [1875-1900] -->
<a name="maintenance_of_es3"></a><h4>Maintenance of ES3</h4>
<div class="level4">

<p>
 Ongoing, no update. We will be producing more wiki material as time goes on. The conditional compilation takes precedence.  
</p>
<ul>
<li class="level1"><div class="li"> JD: Should discuss compat issues like octal.</div>
</li>
<li class="level1"><div class="li"> BE: We decided to let octal die and place discussion of it in an informative annex. There are a few other non-standard additions, we should decide whether to make these normative.</div>
</li>
<li class="level1"><div class="li"> AWB: I can promise that the feature list will be ready by the next f2f meeting.</div>
</li>
<li class="level1"><div class="li"> BE: We can&rsquo;t change Mozilla <acronym title="JavaScript">JS</acronym> to match JScript because of incompatible control flow forking based on <code>isIE</code> tests.</div>
</li>
<li class="level1"><div class="li"> AWB: We could id those issues and say that they are impl. dependent.</div>
</li>
<li class="level1"><div class="li"> JD: Octal interesting because there is an <acronym title="International Organization for Standardization">ISO</acronym> desc, but it&rsquo;s buggy.</div>
</li>
<li class="level1"><div class="li"> BE: May be best to just say octal is impl dep.</div>
</li>
</ul>

</div>
<!-- SECTION [1901-2689] -->
<a name="enumeration_type"></a><h4>Enumeration type</h4>
<div class="level4">
<ul>
<li class="level1"><div class="li"> JD: Would like to defer this. Is the <acronym title="Internet Explorer">IE</acronym> impl what we want? Don&rsquo;t see a sum type in the proposal, which doesn&rsquo;t seem so useful.</div>
</li>
<li class="level1"><div class="li"> BE: Useful for ensuring that you don&rsquo;t miss a case statement in a switch.</div>
</li>
<li class="level1"><div class="li"> LTH: No way right now to check for missing case statement.</div>
</li>
<li class="level1"><div class="li"> GH: The switch type proposal is supposed to handle that, though it&rsquo;s a long-winded way compared to enum.</div>
</li>
</ul>

<p>
 <strong>RESOLVED</strong>: No one is opposed to deferring this, so this is now deferred.
</p>

</div>
<!-- SECTION [2690-3174] -->
<a name="self_type"></a><h4>Self Type</h4>
<div class="level4">

<p>
 On the agenda elsewhere. We&rsquo;ll save discussion for later.
</p>

</div>
<!-- SECTION [3175-3252] -->
<a name="remove_arguments_object"></a><h4>Remove arguments object</h4>
<div class="level4">

<p>
 Deprecation was discussed. Lars thinks that&rsquo;s worse than doing nothing.
</p>
<ul>
<li class="level1"><div class="li"> BE: widespread use.</div>
</li>
<li class="level1"><div class="li"> LTH: powerful statement that arg object should die. I think it&rsquo;s a good idea, but there are uncertain implications.</div>
</li>
<li class="level1"><div class="li"> BE: Still in favor of removing. Move it to  an informative annex. Would have to still be there for legacy content, but would prefer that it be non-normative.</div>
</li>
</ul>

<p>
Implementations that deal with web apps will have to continue supporting it, look for info in informative annex.
</p>
<ul>
<li class="level1"><div class="li"> JD: We should discuss whether we want to approve &lsquo;this function&rsquo; and &lsquo;this generator&rsquo;. I originally resisted because it overloads the meaning of &lsquo;this&rsquo;, but I may be willing to live with this.</div>
</li>
<li class="level1"><div class="li"> AWB: It&rsquo;s clear what it means inside a nested function, but it&rsquo;s inconsistent with &lsquo;this&rsquo; generally.</div>
</li>
<li class="level1"><div class="li"> LH: &lsquo;this&rsquo; really means &lsquo;this receiver&rsquo; in this case.</div>
</li>
<li class="level1"><div class="li"> JD: this is already a primary expression, so adding function and generator works.</div>
</li>
<li class="level1"><div class="li"> AWB: Another way is in every activ object, there&rsquo;s an implicit variable.</div>
</li>
<li class="level1"><div class="li"> LH: Problem is that you could shadow user variables.</div>
</li>
<li class="level1"><div class="li"> BE: We did something like that, <u>callee</u>, but it had non-trivial implementation costs.</div>
</li>
<li class="level1"><div class="li"> AWB: Proposal doesn&rsquo;t say what happens to the arguments object. Should explicitly state what will happen.</div>
</li>
</ul>

<p>
<strong>RESOLVED</strong>: Accepted, will move to informative annex. Clearly state the better way to do it.
</p>

</div>
<!-- SECTION [3253-4657] -->
<a name="eval"></a><h4>Eval</h4>
<div class="level4">
<ul>
<li class="level1"><div class="li"> From crunched Google web app (and other sites) scripts, paraphrasing:</div>
</li>
</ul>
<pre class="code javascript"><span class="kw2">function</span> f<span class="br0">&#40;</span>p<span class="br0">&#41;</span> <span class="br0">&#123;</span>
&nbsp;
  <span class="kw2">var</span> Da = <span class="kw1">eval</span>
  <span class="kw2">var</span> x = <span class="nu0">42</span>
   ...
   <span class="me1">Da</span><span class="br0">&#40;</span>p<span class="br0">&#41;</span>
  
 <span class="br0">&#125;</span></pre>
<p>
    p cannot refer to local variables (i.e. p cannot see x).    
</p>
<ul>
<li class="level1"><div class="li"> BE: mandate <code>EvalError</code> be thrown for indirection thru a property ref other than a window object.</div>
</li>
<li class="level1"><div class="li"> <acronym title="Internet Explorer">IE</acronym> does a dynamic scoping to activation object for nearest active function from same window! (see <a href="doku.php%3Fid=discussion:resurrected_eval.html" class="wikilink1" title="discussion:resurrected_eval" onclick="return svchk()" onkeypress="return svchk()">resurrected eval</a>)</div>
</li>
<li class="level1"><div class="li"> LH: Should be statically scoped to global object of the iframe, no dynamic scope at all, for explicitly indirect call.</div>
</li>
<li class="level1"><div class="li"> AWB: Unlikely that <acronym title="Internet Explorer">IE</acronym> would change this.</div>
</li>
<li class="level1"><div class="li"> BE: I&rsquo;ll write up the proposal so it includes the discussion about <acronym title="Internet Explorer">IE</acronym>&lsquo;s behavior. We have multiple global objects now, we&rsquo;ll discuss this later.</div>
</li>
<li class="level1"><div class="li"> AR: what about the optional second argument?</div>
</li>
<li class="level1"><div class="li"> BE: Trying to keep eval from being too impl defined. </div>
</li>
<li class="level1"><div class="li"> LH: Need to provide a stronger sandbox to support second object that specifies object.</div>
</li>
<li class="level1"><div class="li"> BE: Question is the object arg added to the scope chain, replaces scope chain or isolated?</div>
</li>
<li class="level1"><div class="li"> DC: 3.1 proposal isolates it. Makes eval also a String.prototype method.</div>
</li>
</ul>
<pre class="code javascript">String.<span class="me1">prototype</span>.<span class="kw1">eval</span><span class="br0">&#40;</span><span class="br0">&#91;</span>extra<span class="br0">&#93;</span><span class="br0">&#41;</span></pre><ul>
<li class="level1"><div class="li"> LH: Can still leak if you&rsquo;re not careful.</div>
</li>
<li class="level1"><div class="li"> DC: If you only pass in strings and numbers to the env, it should not leak.</div>
</li>
<li class="level1"><div class="li"> BE: We should consider String.prototype.eval() aside from the 3.1 proposal.</div>
</li>
<li class="level1"><div class="li"> LH: How does it work in a browser env? Does it have access to the window&rsquo;s global object or is it in a new pristine env?</div>
</li>
<li class="level1"><div class="li"> DC: It&rsquo;s in a new pristine environment.</div>
</li>
<li class="level1"><div class="li"> BE: What do people think of adding the String.prototype.eval()? Might want a different name.</div>
</li>
<li class="level1"><div class="li"> AR: So Gears isolates worker thread evaluation like this. Seems like a useful way to sandbox and get data in and out.</div>
</li>
<li class="level1"><div class="li"> LH: So Doug&rsquo;s point is that you can have communication if you pass in an object that can share data.</div>
</li>
<li class="level1"><div class="li"> JD: So the String prototype eval is a separate proposal and needs its own proposal.</div>
</li>
</ul>

<p>
   <strong>Resolved</strong>. <a href="doku.php%3Fid=proposals:resurrected_eval.html" class="wikilink1" title="proposals:resurrected_eval" onclick="return svchk()" onkeypress="return svchk()">resurrected eval</a> in the compatible-with-renamed-eval-that-can&rsquo;t-see-local-vars sense is approved.  
</p>

</div>
<!-- SECTION [4658-6804] -->
<a name="program_configuration"></a><h4>Program configuration</h4>
<div class="level4">
<ul>
<li class="level1"><div class="li"> BE: Not clear to me that you need to have diff versions of code in one script tag.</div>
</li>
<li class="level1"><div class="li"> AR: It would be useful to allow backward and forward compat code in a single file.</div>
</li>
<li class="level1"><div class="li"> DC: And lacking this it prevented us from using try/catch for five years.</div>
</li>
<li class="level1"><div class="li"> AWB: Talking to major web devs, they don&rsquo;t want to deal with new features in an unconditional way.</div>
</li>
</ul>

<p>
 Comment hiding is one way to allow web devs to shield incompat browsers from unsupported features.  Primary issue is do you have a mech that allows dev to write code for diff versions in same file.
</p>
<ul>
<li class="level1"><div class="li"> BE: Even with @if, in many cases, you would have to write your code twice, so not sure it is that useful. Good example is try-catch, you&rsquo;d have to rewrite the try-less version, you can&rsquo;t factor out exception handling syntax using functions:</div>
</li>
</ul>
<pre class="code javascript">@<span class="kw1">if</span> ES3
    <span class="kw2">use</span>  try-<span class="kw1">catch</span>
@<span class="kw1">else</span>
    ...</pre><ul>
<li class="level1"><div class="li"> JD: Would like to move program config to ed. 5.</div>
</li>
</ul>

<p>
  <strong>RESOLVED</strong>: Deferred <a href="doku.php%3Fid=proposals:program_configuration.html" class="wikilink1" title="proposals:program_configuration" onclick="return svchk()" onkeypress="return svchk()">program configuration</a> to future edition.
</p>

</div>
<!-- SECTION [6805-7841] -->
<a name="program_units"></a><h4>Program units</h4>
<div class="level4">
<ul>
<li class="level1"><div class="li"> BE: We&rsquo;ve talked about this idea for a long time. We hear from <acronym title="Asynchronous JavaScript and XML">AJAX</acronym> folks that packages don&rsquo;t give people a module system. So a lot of developers have to invent a module system.</div>
</li>
<li class="level1"><div class="li"> AR: It&rsquo;s almost all complexity and performance. I need them and I need them to go fast. I&rsquo;m conflicted about this because it makes it easy for people to shoot themselves in the foot.</div>
</li>
<li class="level1"><div class="li"> AWB: I like this but our Windows Live guys would say we won&rsquo;t use it because of existing tools in use that do it server-side.</div>
</li>
<li class="level1"><div class="li"> DC: Happening on wrong side of the network. Hazard here that it would be abused on the client side.</div>
</li>
</ul>

<p>
So we&rsquo;re developing a special server-side language that gets stripped out by the time it gets to the client.
</p>
<ul>
<li class="level1"><div class="li"> GH: Don&rsquo;t see a downside to have a canonical way to compress.</div>
</li>
<li class="level1"><div class="li"> DC: New dev is widget based pages where server won&rsquo;t know what would be loaded later. Not sure this proposal affects this.</div>
</li>
<li class="level1"><div class="li"> GH: Don&rsquo;t think so.</div>
</li>
<li class="level1"><div class="li"> GH: We have mult compl units proposal, we need to reconcile that proposal with this one, so we have a unified set of terminology.</div>
</li>
<li class="level1"><div class="li"> JD: Regardless of the syntax, we need to pin down the semantics.</div>
</li>
<li class="level1"><div class="li"> BE: JD and GH should work this out.</div>
</li>
<li class="level1"><div class="li"> GH: term module is fine with me. We also need to figure out when names get resolved.</div>
</li>
</ul>

<p>
<strong>COFFEE BREAK</strong>
</p>

</div>
<!-- SECTION [7842-9146] -->
<a name="issues_related_to_module_loading"></a><h4>Issues related to module loading</h4>
<div class="level4">
<pre class="code javascript"><span class="kw2">class</span> C <span class="kw2">extends</span> D
<span class="br0">&#123;</span>
<span class="br0">&#125;</span>
&nbsp;
&nbsp;
<span class="kw2">var</span> x:T</pre><ul>
<li class="level1"><div class="li"> GH: Some of these types of dependencies imply a load order. Other cases include:</div>
</li>
</ul>
<pre class="code javascript">ns::y
<span class="kw2">use</span> <span class="kw2">namespace</span> ns
C.&lt;T&gt; <span class="co1">// body may require T</span></pre>
<p>
 Issue is that strict and standard modes have different dependencies. Can think of strict as a partial evaluator.
</p>

<p>
Example: 
</p>
<pre class="code javascript"><span class="kw2">var</span> x:T = y; <span class="co1">// y needs to be bound</span></pre><ul>
<li class="level1"><div class="li"> CF: Should strict and std mode have same load order?</div>
</li>
<li class="level1"><div class="li"> GH: This should definitely be true.</div>
</li>
<li class="level1"><div class="li"> AWB: Is load a runtime or compile time process?</div>
</li>
<li class="level1"><div class="li"> GH: Preferred approach to static analysis in strict mode is partial evaluation.</div>
</li>
</ul>
<pre class="code javascript"><span class="kw2">use</span> module foo <span class="st0">"http://..."</span>
&nbsp;
module foo <span class="br0">&#123;</span>
   ... 
<span class="br0">&#125;</span></pre><ul>
<li class="level1"><div class="li"> GH: Does a module define a boundary that requires a certain level of static analysis or partial evaluation?</div>
</li>
</ul>

<p>
Maybe nothing but ES3 behavior.
</p>
<ul>
<li class="level1"><div class="li"> BE: Has to be at least ES3 behavior (section 10 &ldquo;Execution Contexts&rdquo; rules for binding functions, binding vars, then evaluating code).</div>
</li>
<li class="level1"><div class="li"> GH: Cyclic classes are nonsense. Two classes can reference each other but not extend each other. Verifier allows cross references.</div>
</li>
<li class="level1"><div class="li"> JD: what about across modules? AS3 chose not to allow this.</div>
</li>
<li class="level1"><div class="li"> AWB: Some would argue that two modules are dependent on each other, you really have one module.</div>
</li>
<li class="level1"><div class="li"> LH: That&rsquo;s not necessarily true, it&rsquo;s all about how you want to decompose your application.</div>
</li>
</ul>

<p>
Note: module can be the same as a file.
</p>
<ul>
<li class="level1"><div class="li"> GH: Nested modules can mutually recur.</div>
</li>
<li class="level1"><div class="li"> AWB: Modules can reference each other, but it&rsquo;s only an issue when the modules are brought together into a mutual scope and the references are bound.</div>
</li>
<li class="level1"><div class="li"> LH: Modules is not a good name because there&rsquo;s no interface. Unconvinced that this will reduce bandwidth consumption. Restriction that packages need to be at top of compilation unit should be dumped.</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> JD: So what would have to be determined at module/unit boundary?</div>
</li>
<li class="level1"><div class="li"> GH: Open for discussion, possibly all types in strict mode?</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> AWB: Given Server Side expansion, is it possible to have in some scope two uses of a unit both of which have been physically expanded? Any restriction on the binding environment being same for both?</div>
</li>
<li class="level1"><div class="li"> GH: Currently, the second one would just be ignored.</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> LH: No way to guarantee a reasonable number of expansions?</div>
</li>
<li class="level1"><div class="li"> GH: Can&rsquo;t make that guarantee.</div>
</li>
<li class="level1"><div class="li"> GH: One add&rsquo;l point: we should have a way of saying, use this module but as late as possible.</div>
</li>
<li class="level1"><div class="li"> AWB: What if we did lazy load on first use, though not sure how to do that.</div>
</li>
<li class="level1"><div class="li"> GH: example of caching issue:</div>
</li>
</ul>
<pre class="code">use unit todaystocks &quot;http://finance.yahoo.com/q?...&quot;;</pre>
<ul>
<li class="level1"><div class="li"> AR: is there a way to call &lsquo;use unit&rsquo;?</div>
</li>
<li class="level1"><div class="li"> BE: Sure, eval can do it and tack a random string on it. Have to do this unless we do no-cache.</div>
</li>
</ul>

</div>
<!-- SECTION [9147-11946] -->
<a name="dictionary"></a><h4>Dictionary</h4>
<div class="level4">

<p>
 Need to defer to next month. No work done on it recently.
</p>

</div>
<!-- SECTION [11947-12024] -->
<a name="trac_issues_database"></a><h3>Trac issues database</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> Set milestones for all issues marked as &lsquo;proposals&rsquo; issues that did have milestone set.</div>
</li>
<li class="level1"><div class="li"> Issue: Should deprecated features be implemented in the Reference Implementation (RI)? We&rsquo;ve already pulled octal out, but should we pull  arguments object out of the RI? We would have to rewrite some of the tests in the test suite.</div>
</li>
</ul>

</div>
<!-- SECTION [12025-12387] -->
<a name="friday_june_22"></a><h2>Friday, June 22</h2>
<div class="level2">

</div>
<!-- SECTION [12388-12417] -->
<a name="trac_issues_database_continued"></a><h3>Trac issues database continued</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> Continued reviewing Trac issues marked as &lsquo;proposals&rsquo;.</div>
</li>
<li class="level1"><div class="li"> <a href="http://bugs.ecmascript-lang.org/ticket/73" class="urlextern" target="_blank" title="http://bugs.ecmascript-lang.org/ticket/73" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">Ticket # 73: The meaning of null-testing for 'is', and syntax for its type expression</a>: Resolved that is, to and cast will respect null in rhs type. For example:</div>
</li>
</ul>
<pre class="code javascript"><span class="kw2">null</span> <span class="kw1">is</span> <span class="br0">&#40;</span><span class="br0">&#41;</span>  <span class="co1">// false</span>
<span class="kw2">null</span> <span class="kw1">is</span> <span class="kw2">null</span> <span class="co1">// true</span>
<span class="kw2">null</span> <span class="kw1">is</span> Object <span class="co1">// true</span>
<span class="kw2">null</span> <span class="kw1">instanceof</span> Object <span class="co1">// false because instanceof walks the prototype chain, not type hierarchy.</span>
&nbsp;
type T = int?
<span class="kw2">null</span> <span class="kw1">is</span> T         <span class="co1">// true</span></pre><ul>
<li class="level1"><div class="li"> <a href="http://bugs.ecmascript-lang.org/ticket/71" class="urlextern" target="_blank" title="http://bugs.ecmascript-lang.org/ticket/71" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">Ticket #71: Strucural object/array/function(?) types should be implicitly nullable in annotations</a>:  Resolved that types shall be implicitly nullable in annotations. In other words the following three statements are equivalent:</div>
</li>
</ul>
<pre class="code javascript"><span class="br0">&#91;</span>...<span class="br0">&#93;</span>
<span class="br0">&#91;</span>...<span class="br0">&#93;</span>?
<span class="br0">&#40;</span><span class="br0">&#91;</span>...<span class="br0">&#93;</span>, <span class="kw2">null</span><span class="br0">&#41;</span></pre>
<p>
 and you need 
</p>
<pre class="code javascript"><span class="br0">&#91;</span>...<span class="br0">&#93;</span>!</pre>
<p>
 to get non-nullable structural array type.
</p>
<ul>
<li class="level1"><div class="li"> Related discussion about structural types: users should have the option to make structural types dynamic via trailing <code>*</code> before right bracket. A ticket will be filed on this.</div>
</li>
</ul>
<table class="inline">
	<tr>
		<th class="rightalign">  </th><th> non-dynamic </th><th> dynamic </th>
	</tr>
	<tr>
		<td> Array </td><td> [int] </td><td> [int,*] </td>
	</tr>
	<tr>
		<td> Object </td><td> {p:int} </td><td> {p:int, *} </td>
	</tr>
</table>
<br />
<ul>
<li class="level1"><div class="li"> <a href="http://bugs.ecmascript-lang.org/ticket/69" class="urlextern" target="_blank" title="http://bugs.ecmascript-lang.org/ticket/69" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">Ticket #69: Support for bounded arrays</a>: </div>
</li>
</ul>

<p>
Min bound already implied by type system: 
</p>
<pre class="code javascript">x=<span class="br0">&#91;</span><span class="nu0">1</span>, <span class="st0">"x"</span><span class="br0">&#93;</span>:<span class="br0">&#91;</span>int,String,*<span class="br0">&#93;</span>;
x.<span class="me1">length</span> = <span class="nu0">1</span>; <span class="co1">// Problem here because this would subvert the type system </span>
&nbsp;</pre>
<p>
 Lars will rewrite ticket to include min bound as well as max bound. Result of Ticket 120 affects this issue, defer until 120 is resolved. 
</p>
<ul>
<li class="level1"><div class="li"> <a href="http://bugs.ecmascript-lang.org/ticket/68" class="urlextern" target="_blank" title="http://bugs.ecmascript-lang.org/ticket/68" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">Ticket #68: Intuitive syntax for the creation of monotyped arrays</a>: </div>
</li>
</ul>

<p>
JD: what about providing values to types without default value 
</p>
<pre class="code javascript"><span class="kw2">class</span> Foo! <span class="br0">&#123;</span><span class="br0">&#125;</span>
<span class="kw2">new</span> <span class="br0">&#91;</span>Foo, Foo<span class="br0">&#93;</span> <span class="co1">// should be error, no way to know what Foo is (and no default value)</span>
<span class="kw2">new</span> <span class="br0">&#91;</span>Foo, Foo<span class="br0">&#93;</span><span class="br0">&#40;</span><span class="kw2">new</span> Foo<span class="br0">&#40;</span><span class="br0">&#41;</span>, <span class="kw2">new</span> Foo<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="co1">// this would be allowed</span>
<span class="kw2">new</span> <span class="br0">&#91;</span>int, String<span class="br0">&#93;</span><span class="br0">&#40;</span><span class="nu0">10</span><span class="br0">&#41;</span> <span class="co1">// Seems like a problem, you get 0 and 9 empty strings</span>
<span class="kw2">new</span> <span class="br0">&#91;</span>int<span class="br0">&#93;</span><span class="br0">&#40;</span><span class="nu0">10</span><span class="br0">&#41;</span> <span class="co1">// get ten 0's</span></pre>
<p>
 So are we allowing arguments on this new syntax?
</p>

<p>
BE: We should move this issue to the Wiki proposals section and discuss this as part of a new proposal. 
</p>
<ul>
<li class="level1"><div class="li"> <a href="http://bugs.ecmascript-lang.org/ticket/83" class="urlextern" target="_blank" title="http://bugs.ecmascript-lang.org/ticket/83" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">Ticket #83: Adaptation of the Math object to the various numeric types</a>: </div>
</li>
</ul>

<p>
LTH: Obvious solution is to make parameter types be <code>*</code> and dispatch on the actual type encountered.
</p>

<p>
GH: Or better yet use type <code>Numeric</code> 
</p>
<ul>
<li class="level1"><div class="li"> Tangent on Numeric, Number and its subtypes. Lars will re-open <a href="http://bugs.ecmascript-lang.org/ticket/3" class="urlextern" target="_blank" title="http://bugs.ecmascript-lang.org/ticket/3" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">Ticket #3: Issues around Numeric and subtypes of Number</a> and we will discuss at a later meeting.</div>
</li>
</ul>

<p>
Resolved: int, uint, double, decimal should all delegate directly to Number.prototype. For example: 
</p>
<pre class="code javascript">int.<span class="me1">prototype</span>.<span class="me1">foo</span> = <span class="nu0">42</span>;
<span class="kw3">print</span> <span class="br0">&#40;</span><span class="nu0">1</span>.<span class="nu0">2</span><span class="br0">&#41;</span>.<span class="me1">foo</span>; <span class="co1">// prints 42 because int.prototype.foo === double.prototype.foo</span></pre>
</div>
<!-- SECTION [12418-15386] -->
<a name="review_agenda_items"></a><h3>Review Agenda items</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> Decision on whether to adopt an environment model of type expressions, including type closures.</div>
</li>
<li class="level1"><div class="li"> Decision on when to resolve type names to type values, and whether to treat &ldquo;strict mode&rdquo; as partial evaluation.</div>
</li>
<li class="level1"><div class="li"> Decision on how much environment to share between compilation units / modules. Reconcile <a href="doku.php%3Fid=proposals:program_units.html" class="wikilink1" title="proposals:program_units" onclick="return svchk()" onkeypress="return svchk()">program units</a> and <a href="doku.php%3Fid=clarification:multiple_compilation_units.html" class="wikilink1" title="clarification:multiple_compilation_units" onclick="return svchk()" onkeypress="return svchk()">multiple compilation units</a> (if there is any disagreement between them).</div>
</li>
<li class="level1"><div class="li"> Clean up all wiki pages and source code that disagrees on these decisions, so we have a single story!</div>
<ul>
<li class="level2"><div class="li"> We should divide responsibility for this</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Need another wiki export</div>
</li>
</ul>

</div>
<!-- SECTION [15387-16032] -->
<a name="phone_meetings_between_now_and_the_next_f2f"></a><h4>Phone meetings between now and the next f2f?</h4>
<div class="level4">

<p>
 Jeff and Lars will be miss next four calls, but calls will go on to discuss clean up work, etc.
</p>

</div>
<!-- SECTION [16033-16184] -->
<a name="spec_writing_process"></a><h4>Spec writing process</h4>
<div class="level4">
<ul>
<li class="level1"><div class="li"> Spec writing process should start immediately. We reworked the <acronym title="Table of Contents">TOC</acronym> to mirror the AST.</div>
</li>
<li class="level1"><div class="li"> If proposal has smiley, should start moving it over to spec namespace. Proposals should include links to any related trac issues.</div>
</li>
<li class="level1"><div class="li"> Graydon will research Dokuwiki extensions that can merge in other content.</div>
</li>
</ul>

</div>
<!-- SECTION [16185-16520] -->
<a name="self_type_discussion"></a><h4>Self type discussion</h4>
<div class="level4">
<pre class="code javascript">type T = <span class="br0">&#123;</span>f:<span class="kw2">function</span><span class="br0">&#40;</span><span class="kw1">this</span>:S,...<span class="br0">&#41;</span> : R, x:int, y:int<span class="br0">&#125;</span>  <span class="co1">// S is what type, T, this, *?</span>
y = <span class="br0">&#123;</span>...<span class="br0">&#125;</span>:T
&nbsp;
x:<span class="br0">&#123;</span>f:<span class="kw2">function</span><span class="br0">&#40;</span><span class="kw1">this</span>:this, ...<span class="br0">&#41;</span>:R,x:int<span class="br0">&#125;</span>
&nbsp;
g = x.<span class="me1">f</span> <span class="co1">// unsafe but allowed</span>
&nbsp;
g<span class="br0">&#40;</span><span class="br0">&#123;</span>f = ..., x = ...<span class="br0">&#125;</span><span class="br0">&#41;</span>
&nbsp;</pre>
<p>
A trickier case: 
</p>
<pre class="code javascript">y = <span class="br0">&#123;</span>...<span class="br0">&#125;</span>:<span class="br0">&#123;</span>f:<span class="kw2">function</span><span class="br0">&#40;</span>...<span class="br0">&#41;</span>:<span class="kw1">this</span>, x:int, y:int<span class="br0">&#125;</span>
x: <span class="br0">&#123;</span>f:<span class="kw2">function</span><span class="br0">&#40;</span>...<span class="br0">&#41;</span>:<span class="kw1">this</span>, x:int<span class="br0">&#125;</span> = y;
x.<span class="me1">f</span> = <span class="kw2">function</span><span class="br0">&#40;</span>...<span class="br0">&#41;</span>:T<span class="br0">&#123;</span>...<span class="br0">&#125;</span>;
x.<span class="me1">g</span><span class="br0">&#40;</span><span class="br0">&#41;</span>;</pre><ul>
<li class="level1"><div class="li"> <a href="doku.php%3Fid=proposals:self_types.html" class="wikilink2" title="proposals:self_types" onclick="return svchk()" onkeypress="return svchk()">self types</a> will be updated to include the &lsquo;unsafe but allowed&rsquo; issue, and we&rsquo;ll discuss this proposal further next month.</div>
</li>
<li class="level1"><div class="li"> Proposal should also include discussion of <code>this:this</code>, argument this, and return this.</div>
</li>
</ul>

</div>
<!-- SECTION [16521-17169] -->
<a name="packages_and_namespaces"></a><h4>Packages and Namespaces</h4>
<div class="level4">
<ul>
<li class="level1"><div class="li"> GH: are packages necessary? Can&rsquo;t you just use <code>use default namespace</code> instead?</div>
</li>
<li class="level1"><div class="li"> JD: packages are not strictly necessary, but they are a useful shorthand.</div>
</li>
<li class="level1"><div class="li"> JD: packages are like namespace training wheels.</div>
</li>
<li class="level1"><div class="li"> GH: So the following is not possible?</div>
</li>
</ul>
<pre class="code javascript"><span class="kw2">namespace</span> debug;
<span class="kw2">package</span> x.<span class="me1">y</span> <span class="br0">&#123;</span>
  debug <span class="kw2">var</span> x;
<span class="br0">&#125;</span></pre><ul>
<li class="level1"><div class="li"> JD: This is currently not possible, though I am not against making it legal.</div>
</li>
<li class="level1"><div class="li"> GH: Going the opposite way, what if we removed the namespace definition syntax (but left namespaces under the hood)? So <code>namespace debug</code> would not be allowed &ndash; you&rsquo;d have to use a package and allow package ids to be qualifiers.</div>
</li>
<li class="level1"><div class="li"> LTH: I don&rsquo;t see the point in re-opening discussion on this topic when this was decided over a year ago after lengthy discussion.</div>
</li>
<li class="level1"><div class="li"> JD: I&rsquo;m fine with allowing definitions before a package, and also allowing overriding of namespaces inside a package, so that the preceding example would be legal.</div>
</li>
<li class="level1"><div class="li"> GH: Given units proposal which of the following is preferable?</div>
</li>
</ul>
<pre class="code javascript">unit x <span class="br0">&#123;</span>
  com <span class="kw2">namespace</span> sun;
  <span class="kw2">use</span> <span class="kw2">default</span> <span class="kw2">namespace</span> com::sun;
<span class="br0">&#125;</span>
&nbsp;
<span class="co1">// or </span>
&nbsp;
unit x <span class="br0">&#123;</span>
  <span class="kw2">package</span> com.<span class="me1">sun</span> <span class="br0">&#123;</span>
&nbsp;
  <span class="br0">&#125;</span>
<span class="br0">&#125;</span>
&nbsp;</pre><ul>
<li class="level1"><div class="li"> JD: I would never write the second, so I&rsquo;m not opposed to this. However, there are a lot of developers with Java backgrounds who strongly prefer packages.</div>
</li>
<li class="level1"><div class="li"> GH: We could call packages syntactic sugar and leave it at that.</div>
</li>
<li class="level1"><div class="li"> BE: want to remove unnecessary restrictions (defn before pkg, no namespace qual override in pkg).</div>
</li>
<li class="level1"><div class="li"> CP: desugar packages to package-less core language.</div>
</li>
<li class="level1"><div class="li"> BE: desugaring packages means beefing up namespaces.</div>
</li>
</ul>

</div>
<!-- SECTION [17170-] -->
<!-- cachefile /usr/local/www/es-lang.org/wiki/data/cache/2/26987ed1edfdc79c63d1d1210a3c6223.xhtml used -->
</body>
</html>
