<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
 lang="en" dir="ltr">
<head>
  <title>meetings:minutes_jan_24_2007 [ES Wiki]</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <meta name="generator" content="DokuWiki Release 2005-09-22e" />
  <link rel="start" href="index.html" />
  <link rel="contents" href="doku.php%3Fid=meetings:minutes_jan_24_2007&amp;do=index.html" title="" />
  <link rel="alternate" type="application/rss+xml" title="Recent Changes" href="feed.php" />
  <link rel="alternate" type="application/rss+xml" title="Current Namespace" href="feed.php%3Fmode=list&amp;ns=meetings" />
  <link rel="alternate" type="text/html" title="Plain HTML" href="doku.php%3Fid=meetings:minutes_jan_24_2007&amp;do=export_html.html" />
  <link rel="alternate" type="text/plain" title="Wiki Markup" href="doku.php%3Fid=meetings:minutes_jan_24_2007&amp;do=export_raw" />
  <link rel="stylesheet" media="screen" type="text/css" href="lib/styles/style.css" />
  <meta name="date" content="2009-12-19T05:57:03+0000" />
  <meta name="robots" content="index,follow" />
  <script language="javascript" type="text/javascript" charset="utf-8">
    var alertText   = 'Please enter the text you want to format.\nIt will be appended to the end of the document.'
    var notSavedYet = 'Unsaved changes will be lost.\nReally continue?'
    var DOKU_BASE   = '/'
  </script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/script.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/tw-sack.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/ajax.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/domLib.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/domTT.js"></script>
  <link rel="stylesheet" type="text/css" href="lib/plugins/plugin/style.css" />

  <link rel="shortcut icon" href="lib/images/favicon.ico" />
  <link rel="stylesheet" media="screen" type="text/css" href="lib/tpl/default/layout.css" />
  <link rel="stylesheet" media="screen" type="text/css" href="lib/tpl/default/design.css" />

  
  <link rel="stylesheet" media="print" type="text/css" href="lib/tpl/default/print.css" />

  <!--[if gte IE 5]>
  <style type="text/css">
    /* that IE 5+ conditional comment makes this only visible in IE 5+ */
    /* IE bugfix for transparent PNGs */
    //DISABLED   img { behavior: url("/lib/scripts/pngbehavior.htc"); }
  </style>
  <![endif]-->

  </head>

<body>
<div class="dokuwiki">
  
  <div class="stylehead">

    <div class="header">
      <div class="pagename">
        [[<a href="doku.php%3Fid=meetings:minutes_jan_24_2007&amp;do=backlink.html" onclick="return svchk()" onkeypress="return svchk()">meetings:minutes_jan_24_2007</a>]]
      </div>
      <div class="logo">
        <a href="doku.php%3Fid=.html" onclick="return svchk()" onkeypress="return svchk()" name="top" accesskey="h" title="[ALT+H]">ES Wiki</a>      </div>
    </div>
  
    
    <div class="bar" id="bar_top">
      <div class="bar-left" id="bar_topleft">
        <form class="button" method="post" action="index.html" onsubmit="return svchk()"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="" /><input type="hidden" name="id" value="meetings:minutes_jan_24_2007" /><input type="submit" value="Show pagesource" class="button" title="ALT+V" accesskey="v" /></form>        <form class="button" method="get" action="index.html" onsubmit="return svchk()"><input type="hidden" name="do" value="revisions" /><input type="hidden" name="id" value="meetings:minutes_jan_24_2007" /><input type="submit" value="Old revisions" class="button" title="ALT+O" accesskey="o" /></form>      </div>
  
      <div class="bar-right" id="bar_topright">
        <form class="button" method="get" action="index.html" onsubmit="return svchk()"><input type="hidden" name="do" value="recent" /><input type="hidden" name="id" value="" /><input type="submit" value="Recent changes" class="button" title="ALT+R" accesskey="r" /></form>        <form action="doku.php%3Fid=.html" accept-charset="utf-8" class="search" name="search" onsubmit="return svchk()"><input type="hidden" name="do" value="search" /><input type="text" id="qsearch_in" accesskey="f" name="id" class="edit" onkeyup="ajax_qsearch.call('qsearch_in','qsearch_out')" /><input type="submit" value="Search" class="button" /><div id="qsearch_out" class="ajax_qsearch" onclick="this.style.display='none'"></div></form>&nbsp;
      </div>
    </div>

        <div class="breadcrumbs">
      Trace: <span class="bcsep">&raquo;</span> <a href="doku.php%3Fid=meetings:minutes_feb_27_2007.html" onclick="return svchk()" onkeypress="return svchk()" class="breadcrumbs" title="meetings:minutes_feb_27_2007">minutes_feb_27_2007</a> <span class="bcsep">&raquo;</span> <a href="doku.php%3Fid=meetings:minutes_feb_21_2007.html" onclick="return svchk()" onkeypress="return svchk()" class="breadcrumbs" title="meetings:minutes_feb_21_2007">minutes_feb_21_2007</a> <span class="bcsep">&raquo;</span> <a href="doku.php%3Fid=meetings:minutes_feb_13_2007.html" onclick="return svchk()" onkeypress="return svchk()" class="breadcrumbs" title="meetings:minutes_feb_13_2007">minutes_feb_13_2007</a> <span class="bcsep">&raquo;</span> <a href="doku.php%3Fid=meetings:minutes_feb_06_2007.html" onclick="return svchk()" onkeypress="return svchk()" class="breadcrumbs" title="meetings:minutes_feb_06_2007">minutes_feb_06_2007</a> <span class="bcsep">&raquo;</span> <span class="curid"><a href="doku.php%3Fid=meetings:minutes_jan_24_2007.html" onclick="return svchk()" onkeypress="return svchk()" class="breadcrumbs" title="meetings:minutes_jan_24_2007">minutes_jan_24_2007</a></span>          </div>
    
  </div>
  
  
  <div class="page">
    <!-- wikipage start -->
    <div class="toc">
<div class="tocheader"> <script type="text/javascript">showTocToggle("+","-")</script>Table of Contents</div>
<div id="tocinside">
<ul class="toc">
<li class="clear"><ul class="toc">
<li class="level2"><span class="li"><a href="doku.php%3Fid=meetings:minutes_jan_24_2007.html#location" class="toc">Location</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=meetings:minutes_jan_24_2007.html#times" class="toc">Times</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=meetings:minutes_jan_24_2007.html#attendees" class="toc">Attendees</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=meetings:minutes_jan_24_2007.html#meeting_goals" class="toc">Meeting goals</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=meetings:minutes_jan_24_2007.html#agenda" class="toc">Agenda</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=meetings:minutes_jan_24_2007.html#notes" class="toc">Notes</a></span><ul class="toc">
<li class="level3"><span class="li"><a href="doku.php%3Fid=meetings:minutes_jan_24_2007.html#numbers" class="toc">Numbers</a></span><ul class="toc">
<li class="level4"><span class="li"><a href="doku.php%3Fid=meetings:minutes_jan_24_2007.html#issue_1" class="toc">ISSUE 1</a></span></li>
<li class="level4"><span class="li"><a href="doku.php%3Fid=meetings:minutes_jan_24_2007.html#issue_2number_class" class="toc">ISSUE 2: Number class.</a></span></li>
<li class="level4"><span class="li"><a href="doku.php%3Fid=meetings:minutes_jan_24_2007.html#issue_3what_about_use_number_is_it_useful" class="toc">ISSUE 3: What about ‘use Number’? is it useful?</a></span></li>
</ul>
</li>
<li class="level3"><span class="li"><a href="doku.php%3Fid=meetings:minutes_jan_24_2007.html#primitive_types_not_backward_compatible" class="toc">Primitive Types Not Backward Compatible</a></span></li>
<li class="level3"><span class="li"><a href="doku.php%3Fid=meetings:minutes_jan_24_2007.html#semicolon_insertion_in_function_expression_definitions" class="toc">Semicolon insertion in function expression definitions</a></span></li>
</ul>
</li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=meetings:minutes_jan_24_2007.html#various_sorts_of_magical_function_names" class="toc">Various sorts of magical function names</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=meetings:minutes_jan_24_2007.html#better_eval" class="toc">Better eval</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=meetings:minutes_jan_24_2007.html#primitive_types_day_2" class="toc">Primitive Types, Day 2</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=meetings:minutes_jan_24_2007.html#bytearray" class="toc">ByteArray</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=meetings:minutes_jan_24_2007.html#type_system" class="toc">Type System</a></span><ul class="toc">
<li class="clear"><ul class="toc">
<li class="level4"><span class="li"><a href="doku.php%3Fid=meetings:minutes_jan_24_2007.html#equality" class="toc">Equality</a></span></li>
<li class="level4"><span class="li"><a href="doku.php%3Fid=meetings:minutes_jan_24_2007.html#subtyping" class="toc">Subtyping</a></span></li>
<li class="level4"><span class="li"><a href="doku.php%3Fid=meetings:minutes_jan_24_2007.html#compatibility" class="toc">Compatibility</a></span></li>
<li class="level4"><span class="li"><a href="doku.php%3Fid=meetings:minutes_jan_24_2007.html#convertibility" class="toc">Convertibility</a></span></li>
<li class="level4"><span class="li"><a href="doku.php%3Fid=meetings:minutes_jan_24_2007.html#questions" class="toc">Questions</a></span></li>
<li class="level4"><span class="li"><a href="doku.php%3Fid=meetings:minutes_jan_24_2007.html#moved_to_spec_page" class="toc">Moved to spec page</a></span></li>
</ul>
</li>
</ul>
</li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=meetings:minutes_jan_24_2007.html#zero-width_non-breaking_spaces" class="toc">Zero-width non-breaking spaces</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=meetings:minutes_jan_24_2007.html#dotted_name_ambiguity" class="toc">Dotted name ambiguity</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=meetings:minutes_jan_24_2007.html#nullability_conversions" class="toc">Nullability conversions</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=meetings:minutes_jan_24_2007.html#interface_subtyping" class="toc">Interface subtyping</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=meetings:minutes_jan_24_2007.html#hashes" class="toc">Hashes</a></span></li>
</ul>
</li>
</ul>
</div>
</div>

<a name="location"></a><h2>Location</h2>
<div class="level2">

<p>
 Mozilla Foundation 1981 Landings Drive Building K Mountain View, CA 94043-0801 USA
</p>

<p>
See <a href="http://maps.google.com/maps?q=1981+Landings+Drive,+Mountain+View,+CA+(Mozilla)" class="urlextern" target="_blank" title="http://maps.google.com/maps?q=1981+Landings+Drive,+Mountain+View,+CA+(Mozilla)" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">a street map</a> of our location for driving directions. Once there, see <a href="http://maps.google.com/maps?q=37.41857N+122.08769W+(Mozilla+Office,+Building+K)&amp;t=h&amp;ie=UTF8&amp;ll=37.420489,-122.089659&amp;spn=0.005777,0.00869" class="urlextern" target="_blank" title="http://maps.google.com/maps?q=37.41857N+122.08769W+(Mozilla+Office,+Building+K)&amp;t=h&amp;ie=UTF8&amp;ll=37.420489,-122.089659&amp;spn=0.005777,0.00869" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">this satellite image</a> to locate Building K within the complex.
</p>

<p>
Our meeting room is on the first floor in the east corner conference room, which will have a sign on its door.  &mdash; <em><a href="mailto:%26%23x62%3B%26%23x72%3B%26%23x65%3B%26%23x6e%3B%26%23x64%3B%26%23x61%3B%26%23x6e%3B%26%23x40%3B%26%23x6d%3B%26%23x6f%3B%26%23x7a%3B%26%23x69%3B%26%23x6c%3B%26%23x6c%3B%26%23x61%3B%26%23x2e%3B%26%23x6f%3B%26%23x72%3B%26%23x67%3B" class="mail" title="&#x62;&#x72;&#x65;&#x6e;&#x64;&#x61;&#x6e;&#x40;&#x6d;&#x6f;&#x7a;&#x69;&#x6c;&#x6c;&#x61;&#x2e;&#x6f;&#x72;&#x67;">Brendan Eich</a> 2007/01/23 17:33</em>
</p>

</div>

<a name="times"></a><h2>Times</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> Jan. 24: 10pm-5pm PDT</div>
<ul>
<li class="level2"><div class="li"> We will dine out at 7pm at <a href="http://www.gordonbiersch.com/restaurants/index.php?pg=location&amp;sub=loc&amp;location_id=15" class="urlextern" target="_blank" title="http://www.gordonbiersch.com/restaurants/index.php?pg=location&amp;sub=loc&amp;location_id=15" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">Gordon Biersch Palo Alto</a>.</div>
</li>
</ul>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> Jan. 25: 10pm-5pm PDT</div>
<ul>
<li class="level2"><div class="li"> We will dine out around 7:45pm at <a href="http://www.cascalrestaurant.com" class="urlextern" target="_blank" title="http://www.cascalrestaurant.com" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">Cascal</a> in downtown Mountain View.</div>
</li>
<li class="level2"><div class="li"> I will be at the bar around 7pm.  &mdash; <em><a href="mailto:%26%23x62%3B%26%23x72%3B%26%23x65%3B%26%23x6e%3B%26%23x64%3B%26%23x61%3B%26%23x6e%3B%26%23x40%3B%26%23x6d%3B%26%23x6f%3B%26%23x7a%3B%26%23x69%3B%26%23x6c%3B%26%23x6c%3B%26%23x61%3B%26%23x2e%3B%26%23x6f%3B%26%23x72%3B%26%23x67%3B" class="mail" title="&#x62;&#x72;&#x65;&#x6e;&#x64;&#x61;&#x6e;&#x40;&#x6d;&#x6f;&#x7a;&#x69;&#x6c;&#x6c;&#x61;&#x2e;&#x6f;&#x72;&#x67;">Brendan Eich</a> 2007/01/23 17:19</em></div>
</li>
</ul>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> Jan. 26: 10am-5pm PDT</div>
</li>
</ul>

</div>

<a name="attendees"></a><h2>Attendees</h2>
<div class="level2">

<p>
 <em>Please add your name here and let me know if you won&rsquo;t be joining us for dinner either evening; thanks.</em> &mdash; <em><a href="mailto:%26%23x62%3B%26%23x72%3B%26%23x65%3B%26%23x6e%3B%26%23x64%3B%26%23x61%3B%26%23x6e%3B%26%23x40%3B%26%23x6d%3B%26%23x6f%3B%26%23x7a%3B%26%23x69%3B%26%23x6c%3B%26%23x6c%3B%26%23x61%3B%26%23x2e%3B%26%23x6f%3B%26%23x72%3B%26%23x67%3B" class="mail" title="&#x62;&#x72;&#x65;&#x6e;&#x64;&#x61;&#x6e;&#x40;&#x6d;&#x6f;&#x7a;&#x69;&#x6c;&#x6c;&#x61;&#x2e;&#x6f;&#x72;&#x67;">Brendan Eich</a> 2007/01/16 12:01</em> 
</p>
<ul>
<li class="level1"><div class="li"> Jeff Dyer, Adobe</div>
</li>
<li class="level1"><div class="li"> Michael Daumling, Adobe</div>
</li>
<li class="level1"><div class="li"> Brendan Eich, Mozilla</div>
</li>
<li class="level1"><div class="li"> Graydon Hoare, Mozilla</div>
</li>
<li class="level1"><div class="li"> Lars Hansen</div>
</li>
<li class="level1"><div class="li"> Cormac Flanagan, UCSC</div>
</li>
<li class="level1"><div class="li"> Chris Pine, Opera</div>
</li>
<li class="level1"><div class="li"> Dave Herman, Northeastern</div>
</li>
<li class="level1"><div class="li"> Douglas Crockford, Yahoo!</div>
</li>
<li class="level1"><div class="li"> Dick Sweet, Adobe</div>
</li>
<li class="level1"><div class="li"> Francis Cheng, Adobe (Wednesday and Friday only)</div>
</li>
</ul>

</div>

<a name="meeting_goals"></a><h2>Meeting goals</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> Tentative schedule</div>
</li>
<li class="level1"><div class="li"> Tpec - prototype of code merge (definer, verifier, evaluator and machine code)</div>
</li>
<li class="level1"><div class="li"> AST - resolve fixmes</div>
</li>
<li class="level1"><div class="li"> Definer state - finalise semantics</div>
</li>
<li class="level1"><div class="li"> Verifier state?</div>
</li>
<li class="level1"><div class="li"> Evaluator state - run Function.es; figure out how to use typechk.sml </div>
</li>
<li class="level1"><div class="li"> Built-ins - complete first pass over all (modulo Unicode, decimal)</div>
</li>
<li class="level1"><div class="li"> Running Function.es (or subset) in the r.i.</div>
</li>
<li class="level1"><div class="li"> Nail down known open issues</div>
</li>
<li class="level1"><div class="li"> Other goals?</div>
</li>
</ul>

</div>

<a name="agenda"></a><h2>Agenda</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> (from Dick) As I get into the nuts and bolts of adding the &ldquo;use &lt;<a href="doku.php%3Fid=proposals:numbers.html" class="wikilink1" title="proposals:numbers" onclick="return svchk()" onkeypress="return svchk()">numbertype</a>&gt;&rdquo; pragma to the AS compiler, I have a number of things I&rsquo;d like to discuss with the committee.  </div>
</li>
<li class="level1"><div class="li"> Primitive types not backward compatible.</div>
</li>
<li class="level1"><div class="li"> Non-nullable strings.</div>
</li>
<li class="level1"><div class="li"> Final form of r.i. code.</div>
</li>
<li class="level1"><div class="li"> AST FIXMEs</div>
</li>
<li class="level1"><div class="li"> <a href="doku.php%3Fid=proposals:bytearray.html" class="wikilink1" title="proposals:bytearray" onclick="return svchk()" onkeypress="return svchk()">ByteArray</a>.</div>
</li>
<li class="level1"><div class="li"> Design principles for the builtins: how does subclassing + overriding interact with behavior of builtins?</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> <a href="doku.php%3Fid=proposals:destructuring_assignment.html#for_statements" class="wikilink1" title="proposals:destructuring_assignment" onclick="return svchk()" onkeypress="return svchk()">for-in semantics</a>: is it Right that for-in iterates over values with an iterator for the object expression and over property names with an object for the object expression, esp when we have for-each for the former case?</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> <a href="doku.php%3Fid=proposals:versioning.html" class="wikilink1" title="proposals:versioning" onclick="return svchk()" onkeypress="return svchk()">Versioning</a>.</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> Prose vs code vs testsuite</div>
<ul>
<li class="level2"><div class="li"> (from Pratap)</div>
<ul>
<li class="level3"><div class="li"> What is the guidance on the following: what should be taken as authoritative in the case where the standards prose is at variance with the reference implementation?</div>
</li>
<li class="level3"><div class="li"> I recall bringing this up when we met last met at Adobe, and I request the committee to think about this once more: with the goal of coming up with compatible implementations of a common language, I feel that an implementor would be more interested in the availability of the conformance testsuite than an ML-based reference implementation (which would require the implementor to have a strong knowledge of ML). Should we not work on, and publish, such a testsuite too?</div>
</li>
</ul>
</li>
<li class="level2"><div class="li"> We should talk next week, but I will write some guidance here:</div>
<ul>
<li class="level3"><div class="li"> There won&rsquo;t be prose specifying every detail in the reference implementation, by a long shot; nor should there be.</div>
</li>
<li class="level3"><div class="li"> The reference implementation will have bugs, just as non-executable specs have in their prose and pseudo-code (but with the refimpl, we can test and fix more readily), so it can&rsquo;t be considered the last word until it is very mature. In the mean time, testing and certainly human review will be needed. Even a published spec has unknown (and sometimes known) errata, and so must be subject to revision. Too many specs fail to reflect reality (e.g., see <a href="http://www.intertwingly.net/blog/2006/12/13/Tolerance#c1166802157" class="urlextern" target="_blank" title="http://www.intertwingly.net/blog/2006/12/13/Tolerance#c1166802157" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">Mark Pilgrim on HTTP spec vs. reality</a>). So it would be an imposture to say &ldquo;the prose always wins&rdquo; or &ldquo;the ML code always wins&rdquo;. But as noted above, the ML refimpl is where the details are specified; there will not be prose for every corner case or logic level.</div>
</li>
<li class="level3"><div class="li"> Test coverage is exponentially complex, and we will never write anywhere near a full-coverage suite by hand. We have agreed to build a common testsuite, although the details for how we&rsquo;ll do this are still sketchy.  But in my opinion, we should not produce a normative testsuite along with the ES4 spec, since debugging and completing it to have the necessary correctness and coverage will take many years, even if we use the appropriate concrete and symbolic execution techniques (the subject of ongoing academic research, e.g. <a href="http://osl.cs.uiuc.edu/~ksen/paper/cuteTool.pdf" class="urlextern" target="_blank" title="http://osl.cs.uiuc.edu/~ksen/paper/cuteTool.pdf" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">CUTE</a> and <a href="http://www.stanford.edu/~engler/exe.pdf" class="urlextern" target="_blank" title="http://www.stanford.edu/~engler/exe.pdf" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">EXE</a>) to generate tests.</div>
</li>
<li class="level3"><div class="li"> Implementors need to use multiple techniques to achieve interoperable correctness: reading the prose; reading, running, and testing against the ML refimpl <strong>and other implementations</strong>; running tests from various suites; testing against real-world content. There is no silver bullet or easy answer. We should not pretend to supply one.</div>
</li>
<li class="level3"><div class="li"> <strong>Updated:</strong> With the choice of Standard ML for the refimpl, it is possible (and some think likely) that the refimpl will be translated to a Monadic style and then transported into a metalogical framework such as <a href="http://www.cs.cmu.edu/~twelf/" class="urlextern" target="_blank" title="http://www.cs.cmu.edu/~twelf/" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">Twelf</a>, where it can be proven correct. This does not relieve us of the need for debugging, reviewing, testing, and interoperating, of course, since the refimpl may provably do something other than what we intended! Still, another reason favoring the ML refimpl over prose alone, or prose and an incomplete testsuite.</div>
</li>
<li class="level3"><div class="li"> <strong>Updated:</strong> Implementors reading the ES4 spec and refimpl may need to learn ML, as you note, but ES1-3 readers had to grapple with its less sound meta-language. At the Newton face to face last October, we agreed not to reinvent ML with our own syntax and bugs, but use the real thing. That decision still looks right to me, even if it means the expository value of the spec is diminished by unfamiliarity with ML on the part of implementors. Prose specs with or without any testsuite often give implementors the feeling that they know what is meant, and lead to wildly varying implementations. Formal methods can be taken to the opposite extreme, of course. I think we are striking the right balance, provided we do work on tests together. But again i do not believe any tests we write or gather should be normative along with the ES4 spec. Not for many years, at any rate.</div>
</li>
<li class="level3"><div class="li"> <strong>Last update:</strong> We are using ES4 itself to specify as much as we can, including almost all of the standard library. So the ML &ldquo;cognitive load&rdquo; is less than it might seem at first, and again: ML better defines the parts of ES1-3 that were written in an <em>ad hoc</em> meta-language (inside [[double brackets]], sometimes), which were defined informally and sometimes inadequately.  &mdash; <em><a href="mailto:%26%23x62%3B%26%23x72%3B%26%23x65%3B%26%23x6e%3B%26%23x64%3B%26%23x61%3B%26%23x6e%3B%26%23x40%3B%26%23x6d%3B%26%23x6f%3B%26%23x7a%3B%26%23x69%3B%26%23x6c%3B%26%23x6c%3B%26%23x61%3B%26%23x2e%3B%26%23x6f%3B%26%23x72%3B%26%23x67%3B" class="mail" title="&#x62;&#x72;&#x65;&#x6e;&#x64;&#x61;&#x6e;&#x40;&#x6d;&#x6f;&#x7a;&#x69;&#x6c;&#x6c;&#x61;&#x2e;&#x6f;&#x72;&#x67;">Brendan Eich</a> 2007/01/19 15:02</em></div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> Non-reserved keywords</div>
<ul>
<li class="level2"><div class="li"> (from Pratap) Is there a way to treat keywords as identifiers? In C# you can use the prefix &lsquo;@&rsquo; for this purpose. For example, @int means use the keyword &lsquo;int&rsquo; as an identifier. From a language interoperability perspective (as possible on the CLR) this is a useful feature.</div>
</li>
<li class="level2"><div class="li"> See <a href="doku.php%3Fid=proposals:reserved_words.html" class="wikilink1" title="proposals:reserved_words" onclick="return svchk()" onkeypress="return svchk()">reserved words</a>, implemented in Firefox 2 (JS1.7), and note that it has always been possible since JS1 in 1995 to use reserved identifiers as property names (e.g., <code>javaIOFile[&rsquo;delete&rsquo;]()</code> &ndash; in ES4 one may simply write <code>javaIOFile.delete()</code>).  &mdash; <em><a href="mailto:%26%23x62%3B%26%23x72%3B%26%23x65%3B%26%23x6e%3B%26%23x64%3B%26%23x61%3B%26%23x6e%3B%26%23x40%3B%26%23x6d%3B%26%23x6f%3B%26%23x7a%3B%26%23x69%3B%26%23x6c%3B%26%23x6c%3B%26%23x61%3B%26%23x2e%3B%26%23x6f%3B%26%23x72%3B%26%23x67%3B" class="mail" title="&#x62;&#x72;&#x65;&#x6e;&#x64;&#x61;&#x6e;&#x40;&#x6d;&#x6f;&#x7a;&#x69;&#x6c;&#x6c;&#x61;&#x2e;&#x6f;&#x72;&#x67;">Brendan Eich</a> 2007/01/23 09:56</em></div>
</li>
</ul>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> Mixing static and dynamic types in the presence of structural typing (duck typing)</div>
<ul>
<li class="level2"><div class="li"> We are not all (or at all) in agreement.  For example, Dave and I have completely different ideas about what we have decided so far.  I move that we cover this Thursday or Friday to give everyone interested an opportunity to read all the materials on the wiki.  (It&rsquo;s possible we should do this in a subset group.)   &mdash; <em><a href="mailto:%26%23x6c%3B%26%23x74%3B%26%23x68%3B%26%23x40%3B%26%23x61%3B%26%23x63%3B%26%23x6d%3B%26%23x2e%3B%26%23x6f%3B%26%23x72%3B%26%23x67%3B" class="mail" title="&#x6c;&#x74;&#x68;&#x40;&#x61;&#x63;&#x6d;&#x2e;&#x6f;&#x72;&#x67;">Lars T Hansen</a> 2007/01/24 08:34</em></div>
</li>
<li class="level2"><div class="li"> behavior of type checker at <code>with</code>, unbound variables, <code>eval</code></div>
</li>
<li class="level2"><div class="li"> reject unbound variables? therefore reject <code>with</code>? or type-check <code>with</code> body at runtime?</div>
</li>
<li class="level2"><div class="li"> <code>eval</code>: for type-checked code, dynamic error to introduce new bindings into parent function? &mdash; <em><a href="mailto:%26%23x64%3B%26%23x68%3B%26%23x65%3B%26%23x72%3B%26%23x6d%3B%26%23x61%3B%26%23x6e%3B%26%23x40%3B%26%23x63%3B%26%23x63%3B%26%23x73%3B%26%23x2e%3B%26%23x6e%3B%26%23x65%3B%26%23x75%3B%26%23x2e%3B%26%23x65%3B%26%23x64%3B%26%23x75%3B" class="mail" title="&#x64;&#x68;&#x65;&#x72;&#x6d;&#x61;&#x6e;&#x40;&#x63;&#x63;&#x73;&#x2e;&#x6e;&#x65;&#x75;&#x2e;&#x65;&#x64;&#x75;">Dave Herman</a> 2007/01/24 21:42</em></div>
</li>
<li class="level2"><div class="li"> carrot for that stick: make <code>eval &ldquo;...&rdquo;</code> (<code>eval</code> as unary operator) contain its bindings and otherwise behave better?  &mdash; <em><a href="mailto:%26%23x62%3B%26%23x72%3B%26%23x65%3B%26%23x6e%3B%26%23x64%3B%26%23x61%3B%26%23x6e%3B%26%23x40%3B%26%23x6d%3B%26%23x6f%3B%26%23x7a%3B%26%23x69%3B%26%23x6c%3B%26%23x6c%3B%26%23x61%3B%26%23x2e%3B%26%23x6f%3B%26%23x72%3B%26%23x67%3B" class="mail" title="&#x62;&#x72;&#x65;&#x6e;&#x64;&#x61;&#x6e;&#x40;&#x6d;&#x6f;&#x7a;&#x69;&#x6c;&#x6c;&#x61;&#x2e;&#x6f;&#x72;&#x67;">Brendan Eich</a> 2007/01/24 23:24</em></div>
</li>
</ul>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> Should U+FEFF (zero-width non-breaking space) in source be treated as whitespace?  (We all do it, so let&rsquo;s say &ldquo;yes&rdquo; and add it to the spec.) &mdash; <em><a href="mailto:%26%23x63%3B%26%23x68%3B%26%23x72%3B%26%23x69%3B%26%23x73%3B%26%23x70%3B%26%23x69%3B%26%23x40%3B%26%23x6f%3B%26%23x70%3B%26%23x65%3B%26%23x72%3B%26%23x61%3B%26%23x2e%3B%26%23x63%3B%26%23x6f%3B%26%23x6d%3B" class="mail" title="&#x63;&#x68;&#x72;&#x69;&#x73;&#x70;&#x69;&#x40;&#x6f;&#x70;&#x65;&#x72;&#x61;&#x2e;&#x63;&#x6f;&#x6d;">Chris Pine</a> 2007/01/25 16:53</em></div>
</li>
</ul>

</div>

<a name="notes"></a><h2>Notes</h2>
<div class="level2">

</div>

<a name="numbers"></a><h3>Numbers</h3>
<div class="level3">

</div>

<a name="issue_1"></a><h4>ISSUE 1</h4>
<div class="level4">

<p>
 There are a number of operators that are binary-centric. Dick proposes that use pragma should only refer to float. E.g. what’s use of “use int”? Response from committee, it is useful for many applications. What about support for “big int”? Response: decimal won’t give you big int for apps like crypto (only 53 bits). -	Committee: we can’t change these ops for double for backward compatibility reasons. -	Doug points out that the community is comfortable with the internal conversion to int. -	Dick is comfortable with following that precedent for decimal. -	Example:
</p>
<pre class="code javascript"><span class="kw2">function</span> f<span class="br0">&#40;</span>v<span class="br0">&#41;</span> <span class="br0">&#123;</span><span class="br0">&#125;</span>
&nbsp;
<span class="kw2">use</span> int ;
&nbsp;
f<span class="br0">&#40;</span><span class="nu0">1</span>.<span class="nu0">6</span><span class="br0">&#41;</span>;</pre>
<p>
-	Lars says that you should get 1.6 passed to f() because use pragma affects operators, such as:
</p>
<pre class="code javascript"><span class="nu0">1</span>.<span class="nu0">6</span> + <span class="nu0">3</span>; <span class="co1">// 1 + 3 because of use int pragma. </span>
&nbsp;</pre>
<p>
Lars: history of use pragma. It was brought in to help with decimal, but maybe it is a mistake to give it a broader effect.
</p>

<p>
Graydon: new proposal. What if use int is a special case. In a use int block just prevent any use of floating point literals at all. 
</p>

<p>
Lars: this has practical appeal, but is inconsistent with ‘use decimal’ and ‘use float’ and it follows that we would just get rid of use decimal. I propose we don’t make this change.
</p>

<p>
Michael: what about having a pragma that throws on overflow.
</p>

<p>
Brendan: Requests for this are rare. So what is the meaning of use pragma? Going through the wiki discussion. Question 4 applies to this discussion.
</p>

<p>
Dave: What does the type checker say when it sees two ints added that could be int or double.
</p>

<p>
Lars: It would have to call it numeric.
</p>

<p>
Recap problems: 
</p>

<p>
1.	Annotations on values don’t completely control how the numbers are converted.
</p>

<p>
Current Spec draft: The use pragma affects: 
</p>
<ol>
<li class="level1"><div class="li"> operators</div>
</li>
<li class="level1"><div class="li"> literals that are members of that data type. i.e. use int will not affect the literal 1.6, but use decimal will turn the literal 1.6 into 1.6m and use int will turn the literal 1 from int to uint.</div>
</li>
</ol>

</div>

<a name="issue_2number_class"></a><h4>ISSUE 2: Number class.</h4>
<div class="level4">

<p>
 Question 1: what does use Number mean?
</p>

<p>
Question 2: var v:Number
</p>
<pre class="code javascript">X = <span class="kw2">new</span> Number <span class="br0">&#40;</span><span class="nu0">3</span><span class="br0">&#41;</span>  <span class="co1">// 3.0d </span>
&nbsp;</pre>
<p>
Problem is that Number is an alias, so you can’t really construct a number.
</p>

<p>
One idea is to say “class Number is Double”.
</p>

<p>
Question 3: Should use decimal affect use Number? Proposal that “class Number is Double” creates a bw compat problem because Number is a wrapper in es3.
</p>

<p>
Second idea is:  
</p>
<pre class="code javascript">dynamic <span class="kw2">class</span> Number <span class="br0">&#123;</span>
	<span class="kw2">var</span> d:Double;
<span class="br0">&#125;</span></pre>
<p>
   Jeff: The second idea would be incompatible with the AS3 implementation.
</p>

<p>
<strong>Resolved</strong> that Number should be a wrapper class (second idea).
</p>

</div>

<a name="issue_3what_about_use_number_is_it_useful"></a><h4>ISSUE 3: What about ‘use Number’? is it useful?</h4>
<div class="level4">

<p>
 Lars: could be useful if you are in use decimal and want to drop back into default.
</p>

<p>
Brendan: what about ‘use default numeric’
</p>

</div>

<a name="primitive_types_not_backward_compatible"></a><h3>Primitive Types Not Backward Compatible</h3>
<div class="level3">

<p>
 The issue is whether we should add lower case versions of primitives that are unboxed and very fast, and leave upper case versions that are backward compatible.
</p>

<p>
 The only primitive that is at issue here is String. All other primitives can be dynamic and not final.
</p>

<p>
Lars: proposes that we make String dynamic and nonfinal.
</p>

<p>
Dave: In Java, there are security concerns about extendable String, so String is final in Java
</p>

<p>
Lars: what about making String like Number. Make it a bw compat class, and add a new lower case string class that is final and not dynamic.
</p>

<p>
What about lower case Boolean? 
</p>

<p>
Lars: For Boolean, maybe we should just seal it and break bw compat.
</p>

<p>
Brendan: I’d prefer to add lower case  versions for Number, Boolean, String. Jeff agrees.
</p>

<p>
<strong>Resolved</strong>: Further discussion lead to a decision to drop lower case versions of Boolean and String because the addition of the two do not provide any efficiency benefit because intrinsic provides early binding (recall that intrinsic implies final).
</p>

<p>
(This leaves us with <code>Number</code>, <code>String</code>, and <code>Boolean</code> backward compatible but fairly optimizable. The differences with AS3 are:
</p>
<ul>
<li class="level1"><div class="li"> Mutable instances, so implementations have to support both <code>&ldquo;hi&rdquo;.foo = 42</code> and the more common <code>s = new String(&rdquo;hi&rdquo;); s.foo = 42; ...</code>.</div>
</li>
<li class="level1"><div class="li"> Equality and strict equality return false for two different instances: new Boolean(true) != new Boolean(true) &amp;&amp; new Number(42) !== new Number(42).</div>
</li>
</ul>

<p>
 It would be good to get Ed&rsquo;s comments here.  &mdash; <em><a href="mailto:%26%23x62%3B%26%23x72%3B%26%23x65%3B%26%23x6e%3B%26%23x64%3B%26%23x61%3B%26%23x6e%3B%26%23x40%3B%26%23x6d%3B%26%23x6f%3B%26%23x7a%3B%26%23x69%3B%26%23x6c%3B%26%23x6c%3B%26%23x61%3B%26%23x2e%3B%26%23x6f%3B%26%23x72%3B%26%23x67%3B" class="mail" title="&#x62;&#x72;&#x65;&#x6e;&#x64;&#x61;&#x6e;&#x40;&#x6d;&#x6f;&#x7a;&#x69;&#x6c;&#x6c;&#x61;&#x2e;&#x6f;&#x72;&#x67;">Brendan Eich</a> 2007/01/24 14:41</em>)
</p>

<p>
LUNCH
</p>

</div>

<a name="semicolon_insertion_in_function_expression_definitions"></a><h3>Semicolon insertion in function expression definitions</h3>
<div class="level3">
<pre class="code javascript"><span class="kw2">Class</span> C <span class="br0">&#123;</span>
  <span class="kw2">function</span> f<span class="br0">&#40;</span><span class="br0">&#41;</span>
        <span class="nu0">37</span>
&nbsp;
  -<span class="nu0">1</span>;
<span class="br0">&#125;</span></pre>
<p>
Lars: what does this mean? I think we should have auto semicolon insertion after 37.
</p>

</div>

<a name="various_sorts_of_magical_function_names"></a><h2>Various sorts of magical function names</h2>
<div class="level2">

<p>
 We discussed all the awful sorts of magical function names again. Some revised opinions on this since the last meeting. Current elaboration follows.
</p>
<pre class="code">
  In Source                                In Impl                        Handles
  ---------                                -------                        -------

  function get y() {}                      &quot;virtual&quot; prop-state           x.y
  function set y(z) {}                     &quot;virtual&quot; prop-state           x.y = z


  class X {                                ctor function plus             new X(y);
    function X(y) {}                       static X.construct(y):X!       
  }                                        that calls new X(y)


  class X { 
    intrinsic function invoke() {}         normal function                z = new X(y);
  }                                                                       z();
                                                                          when no function closure
                                                                          found in magic slot


  class X {
    static intrinsic function invoke(y) {} normal function                z = X(y);
  }                                                                       when no function closure
                                                                          found in magic slot

  class X {
    static intrinsic function to() {}      normal function                y to X;
  }


  function get*(n:string) {}               magic part of object           x.y
  function set*(n:string) {}               magic part of object           x.y
  function call*(n:string) {}              magic part of object           x.y
                                           (special name lookup stage,
                                            after fixtures, before 
                                            dynamic props)
</pre>

</div>

<a name="better_eval"></a><h2>Better eval</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> Much discussion of <code>eval</code> vs. <code>with</code>, how to reform <code>eval</code>, alternative syntax or keyword ideas, etc.</div>
</li>
<li class="level1"><div class="li"> Proposal: new pragmas, <code>use safe eval</code> and <code>use unsafe eval</code>, orthogonal to strict/standard and in addition to <a href="doku.php%3Fid=proposals:resurrected_eval.html" class="wikilink1" title="proposals:resurrected_eval" onclick="return svchk()" onkeypress="return svchk()">resurrected eval</a>.</div>
</li>
<li class="level1"><div class="li"> Under <code>use safe eval</code>, <code>eval</code> cannot create bindings in its caller&rsquo;s lexical or dynamic scope because it gets its own variable object and implicit block</div>
<ul>
<li class="level2"><div class="li"> A safe <code>eval</code> can still see its caller&rsquo;s bindings and mutate the values of any mutable bindings, subject to type constraints.</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> This allows type-checked <code>eval</code> callers and <code>eval</code>&lsquo;ed programs (strict is propagated to <code>eval</code>, as are other pragmas such as <code>use decimal</code>).</div>
</li>
<li class="level1"><div class="li"> It is an error to call <code>eval</code> in strict mode without a <code>use safe eval</code> pragma being in effect.</div>
</li>
<li class="level1"><div class="li"> Take <code>safe</code> and <code>unsafe</code> as strawman proposals; we don&rsquo;t want false advertising. Suggestions welcome.</div>
</li>
</ul>

</div>

<a name="primitive_types_day_2"></a><h2>Primitive Types, Day 2</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> Yesterday&rsquo;s proposal plus non-nullable String (whose default value would be an, if not <strong>the</strong>, empty string) means every <code>&ldquo;&ldquo;</code> is a different object.</div>
<ul>
<li class="level2"><div class="li"> <code>var s1 = &ldquo;&ldquo;, s2 = &ldquo;&ldquo;; s1.foo = 42; assert(s1.foo === 42); assert(s2.foo === undefined)</code>.</div>
</li>
<li class="level2"><div class="li"> Neither backward compatible nor as easy to optimize as either ES1-3 or AS3.</div>
<ul>
<li class="level3"><div class="li"> Utmost backward compatibility (perhaps breakable without pain) would want <code>s1.foo = 42; assert(s1.foo === undefined)</code> &ndash; each <code>.</code> operator creates a new wrapper.</div>
</li>
<li class="level3"><div class="li"> In the <a href="doku.php%3Fid=meetings:minutes_feb_21_2007.html" class="wikilink1" title="meetings:minutes_feb_21_2007" onclick="return svchk()" onkeypress="return svchk()">minutes_feb_21_2007</a> meeting on Friday, some of us sort of talked ourselves out of &ldquo;Day 2&rdquo; and back into &ldquo;Yesterday&rdquo;&lsquo;s proposal.  &mdash; <em><a href="mailto:%26%23x62%3B%26%23x72%3B%26%23x65%3B%26%23x6e%3B%26%23x64%3B%26%23x61%3B%26%23x6e%3B%26%23x40%3B%26%23x6d%3B%26%23x6f%3B%26%23x7a%3B%26%23x69%3B%26%23x6c%3B%26%23x6c%3B%26%23x61%3B%26%23x2e%3B%26%23x6f%3B%26%23x72%3B%26%23x67%3B" class="mail" title="&#x62;&#x72;&#x65;&#x6e;&#x64;&#x61;&#x6e;&#x40;&#x6d;&#x6f;&#x7a;&#x69;&#x6c;&#x6c;&#x61;&#x2e;&#x6f;&#x72;&#x67;">Brendan Eich</a> 2007/02/23 12:07</em></div>
</li>
</ul>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Jeff suggested <a href="doku.php%3Fid=proposals:catchalls.html" class="wikilink1" title="proposals:catchalls" onclick="return svchk()" onkeypress="return svchk()">catchalls</a> on prototypes to handle &ldquo;peeks and pokes&rdquo;; we know of real-world code that peeks and wants to get <code>undefined</code>.</div>
</li>
<li class="level1"><div class="li"> Lars points to <code>s = new String(...)</code> uses on the web that want a mutable <code>String</code> object.</div>
</li>
<li class="level1"><div class="li"> So we are back to having a sealed <code>string</code> type for literals, concatenation results, and a backward-compatible <code>String</code> that can box <code>string</code>.</div>
<ul>
<li class="level2"><div class="li"> Same for <code>boolean</code> and <code>Boolean</code> &ndash; need the former because in <code>b = new Boolean(false); if (b) ...</code>, <code>b</code> always tests as true.</div>
</li>
<li class="level2"><div class="li"> Jeff&rsquo;s prototype catchalls suggestion for <code>string</code> and <code>boolean</code> help avoid boxing costs.</div>
</li>
<li class="level2"><div class="li"> Note that <code>string</code> and <code>boolean</code> are non-nullable and final.</div>
</li>
<li class="level2"><div class="li"> Open issue: Should <code>String</code> and <code>Boolean</code> be final?</div>
<ul>
<li class="level3"><div class="li"> My recollection is that we said &ldquo;no&rdquo;, but <code>string</code> and <code>boolean</code> are <code>final</code>.</div>
</li>
<li class="level3"><div class="li"> Further issue, I&rsquo;ll mirror it in the <a href="doku.php%3Fid=meetings:minutes_feb_21_2007.html" class="wikilink1" title="meetings:minutes_feb_21_2007" onclick="return svchk()" onkeypress="return svchk()">minutes_feb_21_2007</a> minutes: web script extends <code>String.prototype</code> with new methods, expects them to apply to string primitive values. Suggest <code>string &lt;: String</code>. Details to be worked out in the February minutes, or beyond. &mdash; <em><a href="mailto:%26%23x62%3B%26%23x72%3B%26%23x65%3B%26%23x6e%3B%26%23x64%3B%26%23x61%3B%26%23x6e%3B%26%23x40%3B%26%23x6d%3B%26%23x6f%3B%26%23x7a%3B%26%23x69%3B%26%23x6c%3B%26%23x6c%3B%26%23x61%3B%26%23x2e%3B%26%23x6f%3B%26%23x72%3B%26%23x67%3B" class="mail" title="&#x62;&#x72;&#x65;&#x6e;&#x64;&#x61;&#x6e;&#x40;&#x6d;&#x6f;&#x7a;&#x69;&#x6c;&#x6c;&#x61;&#x2e;&#x6f;&#x72;&#x67;">Brendan Eich</a> 2007/02/23 10:05</em></div>
</li>
</ul>
</li>
</ul>
</li>
</ul>

</div>

<a name="bytearray"></a><h2>ByteArray</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> See <a href="doku.php%3Fid=discussion:bytearray.html" class="wikilink1" title="discussion:bytearray" onclick="return svchk()" onkeypress="return svchk()">bytearray</a>.</div>
</li>
<li class="level1"><div class="li"> Need an up-down vote or an alternative proposal, quickly.</div>
</li>
<li class="level1"><div class="li"> Lars notes that this class makes sense only if native (for performance, since people make do today with string or array hacks but complain about space and time costs).</div>
</li>
</ul>

</div>

<a name="type_system"></a><h2>Type System</h2>
<div class="level2">

<p>
 One change to yesterday&rsquo;s discussion: introduce a new type <code>{*}</code> to represent the type of untyped objects (&rdquo;star for objects&rdquo;), rather than making <code>{}</code> a special case. So <code>{}</code> still means the structural object type with no fields.
</p>

</div>

<a name="equality"></a><h4>Equality</h4>
<div class="level4">

<p>
 Some types are considered to be identical to each other (like a shorthand) including: 
</p>
<ul>
<li class="level1"><div class="li"> <code>[]</code> and <code>[*]</code> and <code>Array</code></div>
</li>
<li class="level1"><div class="li"> <code>{}</code> and <code>Object</code></div>
</li>
<li class="level1"><div class="li"> reorderings of structural object type fields</div>
</li>
<li class="level1"><div class="li"> no <code>this</code> type in a function is <code>this:*</code></div>
</li>
<li class="level1"><div class="li"> <code>this</code> type in a method of <code>T</code> is <code>this:T</code></div>
</li>
<li class="level1"><div class="li"> unions are flattened</div>
</li>
<li class="level1"><div class="li"> nullable <code>T</code> is <code>(T,Null)</code></div>
</li>
</ul>

</div>

<a name="subtyping"></a><h4>Subtyping</h4>
<div class="level4">
<ul>
<li class="level1"><div class="li"> written <code>T &lt;: U</code></div>
</li>
<li class="level1"><div class="li"> Same as nominal/structural subtyping we&rsquo;ve discussed in the past</div>
</li>
<li class="level1"><div class="li"> transitive</div>
</li>
<li class="level1"><div class="li"> anti-symmetric (if <code>T != U</code>, they can&rsquo;t both be subtypes of each other)</div>
</li>
</ul>

</div>

<a name="compatibility"></a><h4>Compatibility</h4>
<div class="level4">
<ul>
<li class="level1"><div class="li"> written <code>T ~: U</code></div>
</li>
<li class="level1"><div class="li"> means <code>T</code> may not be a subtype of <code>U</code> but can be used compatibly with <code>U</code></div>
</li>
<li class="level1"><div class="li"> such uses require the &ldquo;unsafe bit&rdquo; to be enabled and runtime checks to be performed</div>
</li>
<li class="level1"><div class="li"> but does not involve conversions, so object identity is preserved</div>
</li>
<li class="level1"><div class="li"> not transitive (because it has cycles)</div>
</li>
<li class="level1"><div class="li"> not symmetric (because it includes subtyping)</div>
</li>
<li class="level1"><div class="li"> write <code>T ~ U</code> for <code>T ~: U</code> and <code>U ~: T</code></div>
</li>
<li class="level1"><div class="li"> includes subtyping and universal compatibility with <code>*</code>:</div>
</li>
</ul>
<pre class="code">
T &lt;: U
------    ------    ------
T ~: U    T ~: *    * ~: T
</pre>
<ul>
<li class="level1"><div class="li"> includes compatibility of structural objects with the &ldquo;untyped object&rdquo; type <code>{*}</code>:</div>
</li>
</ul>
<pre class="code">

------------------------      ------------------------
{x1:S1 ... xn:Sn} ~: {*}      {*} ~: {x1:S1 ... xn:Sn}
</pre>
<ul>
<li class="level1"><div class="li"> includes compatibility with array types:</div>
</li>
</ul>
<pre class="code">

--------------------    --------------------
Array ~: [T1,...,Tn]    [T1,...,Tn] ~: Array
</pre>
<ul>
<li class="level1"><div class="li"> lifts through function types:</div>
</li>
</ul>
<pre class="code">
U' ~: U
T ~: T'
forall i &lt;= n. Si' ~: Si
--------------------------------------------------------------
function(this:U,S1 .. Sn):T ~: function(this:U',S1' .. Sn'):T'

U' ~: U
T ~: T'
forall i &lt;= m. Si' ~: Si
forall m &lt; i &lt;= n. Si' ~: V
-------------------------------------------------------------------
function(this:U,S1 .. Sm,...V):T ~: function(this:U',S1' .. Sn'):T'

U' ~: U
T ~: T'
forall m &lt; i &lt;= n. Si' ~: V
forall n &lt; i &lt;= m. V' ~: Si
V' ~: V
-------------------------------------------------------------------------
function(this:U,S1 .. Sm,...V):T ~: function(this:U',S1' .. Sn',...V'):T'
</pre>
<ul>
<li class="level1"><div class="li"> lifts through union types:</div>
</li>
</ul>
<pre class="code">
exists i. S ~: Ti
-----------------
S ~: (T1,...,Tn)
</pre>
<ul>
<li class="level1"><div class="li"> invariant through object types:</div>
</li>
</ul>
<pre class="code">
forall i &lt;= m. Si ~ Ti
--------------------------------------  (m &lt;= n)
{x1:S1 ... xm:Sm} ~: {x1:T1 ... xn:Tn}
</pre>
<ul>
<li class="level1"><div class="li"> invariant through array types:</div>
</li>
</ul>
<pre class="code">
forall i &lt; m. Si ~ Ti
forall m &lt;= i &lt;= n. Sm ~ Ti
---------------------------  (0 &lt; m &lt;= n)
[S1,...,Sm] ~: [T1,...,Tn]

    example: [int,*] ~: [int,bool,string]

forall i &lt; m. Si ~ Ti
forall m &lt;= i &lt;= n. Si ~ Tm  (m &gt; n &gt; 0)
---------------------------
[S1,...,Sm] ~: [T1,...,Tn]

    example: [int,bool,string] ~: [int,*]
</pre>

</div>

<a name="convertibility"></a><h4>Convertibility</h4>
<div class="level4">
<ul>
<li class="level1"><div class="li"> written <code>T ~~&gt; U</code></div>
</li>
<li class="level1"><div class="li"> means <code>T</code> may not be compatible with <code>U</code>, but can be used as a <code>U</code> via a conversion</div>
</li>
<li class="level1"><div class="li"> such conversions do not preserve object identity</div>
</li>
<li class="level1"><div class="li"> includes convertibility (and therefore subtyping):</div>
</li>
</ul>
<pre class="code">
T ~: U
-------
T ~~&gt; U
</pre>
<ul>
<li class="level1"><div class="li"> includes <code>to</code> methods:</div>
</li>
</ul>
<pre class="code">
T is a class
static T.intrinsic::to : S' -&gt; T
S ~~&gt; S'
--------------------------------
S ~~&gt; T
</pre>

</div>

<a name="questions"></a><h4>Questions</h4>
<div class="level4">
<ul>
<li class="level1"><div class="li"> what namespace do the <code>to</code> methods live in? &ndash; <code>intrinsic</code></div>
</li>
<li class="level1"><div class="li"> are arrays invariant or covariant? &ndash; invariant</div>
</li>
<li class="level1"><div class="li"> are people okay with the <code>{*}</code> type (for &ldquo;untyped object&rdquo;)? &ndash; yep</div>
</li>
</ul>

</div>

<a name="moved_to_spec_page"></a><h4>Moved to spec page</h4>
<div class="level4">

<p>
 I&rsquo;m folding these rules back into the <a href="doku.php%3Fid=spec:type_system.html" class="wikilink1" title="spec:type_system" onclick="return svchk()" onkeypress="return svchk()">type_system</a> page.
</p>

<p>
I&rsquo;m not deleting the rules from here, since they&rsquo;re a record of the meeting, but they&rsquo;re not authoritative. Future changes will go in the spec page.
</p>

<p>
 &mdash; <em><a href="mailto:%26%23x64%3B%26%23x68%3B%26%23x65%3B%26%23x72%3B%26%23x6d%3B%26%23x61%3B%26%23x6e%3B%26%23x40%3B%26%23x63%3B%26%23x63%3B%26%23x73%3B%26%23x2e%3B%26%23x6e%3B%26%23x65%3B%26%23x75%3B%26%23x2e%3B%26%23x65%3B%26%23x64%3B%26%23x75%3B" class="mail" title="&#x64;&#x68;&#x65;&#x72;&#x6d;&#x61;&#x6e;&#x40;&#x63;&#x63;&#x73;&#x2e;&#x6e;&#x65;&#x75;&#x2e;&#x65;&#x64;&#x75;">Dave Herman</a> 2007/01/26 13:36</em>
</p>

</div>

<a name="zero-width_non-breaking_spaces"></a><h2>Zero-width non-breaking spaces</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> Should U+FEFF (zero-width non-breaking space) in source be treated as whitespace? (We all do it, so let’s say “yes” and add it to the spec.)</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> Background: Firefox 2 strips it, but the plan is for Firefox 3 to not strip it and treat it as a format control character.</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> Resolved: after examining the Opera bug report, Chris revised the proposal to say that the ES4 will treat U+FEFF as it does any other format control character. That is, it won&rsquo;t be stripped and cannot be used in identifiers. This is consistent with the existing proposal to update Unicode (<a href="doku.php%3Fid=proposals:update_unicode.html" class="wikilink1" title="proposals:update_unicode" onclick="return svchk()" onkeypress="return svchk()">Update Unicode</a>).</div>
</li>
</ul>

</div>

<a name="dotted_name_ambiguity"></a><h2>Dotted name ambiguity</h2>
<div class="level2">

<p>
 Ambiguity between package reference and dotted object reference. Resolved:
</p>
<ul>
<li class="level1"><div class="li"> no feedback of scope back to lexer</div>
</li>
<li class="level1"><div class="li"> spaces allowed between dots even in package names</div>
</li>
<li class="level1"><div class="li"> lexer produces sequence of identifier tokens separated by dot tokens</div>
</li>
<li class="level1"><div class="li"> parser produces an AST node representing an unresolved path</div>
</li>
<li class="level1"><div class="li"> definer resolves the path <code>I1 . .. . In</code> to either a package dereference or an object dereference path:</div>
<ul>
<li class="level2"><div class="li"> if the first name in the path is statically in scope, then it&rsquo;s resolved as a dereference path, regardless of type information etc.</div>
</li>
<li class="level2"><div class="li"> otherwise find the longest prefix <code>I1 . .. . Im</code> that is either an imported path or the name of a package in this compilation unit</div>
<ul>
<li class="level3"><div class="li"> if this prefix is an imported path and the identifier on the right of the dot following that path matches a name imported from that package, then resolve the expression to the expression <code>(I1 . .. . Im-1)::Im</code>; then resolve the rest of the path as an object dereference path from this expression</div>
</li>
<li class="level3"><div class="li"> otherwise if it&rsquo;s a package name and m &lt; n, resolve the prefix with the next identifier to <code>(I1 . .. . Im)::Im+1</code>, then recursively resolve <code>Im+2 . .. . In</code></div>
</li>
</ul>
</li>
<li class="level2"><div class="li"> otherwise if there is no such prefix, then it&rsquo;s an object dereference path with an unbound head variable (to be resolved dynamically)</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> notice that introducing bindings dynamically (via global object or <code>with</code>) have no effect on this resolution process, since it happens in the definer long before runtime</div>
</li>
</ul>

<p>
  &mdash; <em><a href="mailto:%26%23x64%3B%26%23x68%3B%26%23x65%3B%26%23x72%3B%26%23x6d%3B%26%23x61%3B%26%23x6e%3B%26%23x40%3B%26%23x63%3B%26%23x63%3B%26%23x73%3B%26%23x2e%3B%26%23x6e%3B%26%23x65%3B%26%23x75%3B%26%23x2e%3B%26%23x65%3B%26%23x64%3B%26%23x75%3B" class="mail" title="&#x64;&#x68;&#x65;&#x72;&#x6d;&#x61;&#x6e;&#x40;&#x63;&#x63;&#x73;&#x2e;&#x6e;&#x65;&#x75;&#x2e;&#x65;&#x64;&#x75;">Dave Herman</a> 2007/01/26 16:24</em>
</p>

</div>

<a name="nullability_conversions"></a><h2>Nullability conversions</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> no implicit conversions between nullable and non-nullable types</div>
</li>
<li class="level1"><div class="li"> can convert via <code>cast</code> if you just want to assert it&rsquo;s not <code>null</code> (get an error if it is)</div>
</li>
<li class="level1"><div class="li"> if you want to do something more complicated, you can use <code>switch type</code> and it&rsquo;s well-typed (yay Modula-3)</div>
</li>
</ul>

<p>
  &mdash; <em><a href="mailto:%26%23x64%3B%26%23x68%3B%26%23x65%3B%26%23x72%3B%26%23x6d%3B%26%23x61%3B%26%23x6e%3B%26%23x40%3B%26%23x63%3B%26%23x63%3B%26%23x73%3B%26%23x2e%3B%26%23x6e%3B%26%23x65%3B%26%23x75%3B%26%23x2e%3B%26%23x65%3B%26%23x64%3B%26%23x75%3B" class="mail" title="&#x64;&#x68;&#x65;&#x72;&#x6d;&#x61;&#x6e;&#x40;&#x63;&#x63;&#x73;&#x2e;&#x6e;&#x65;&#x75;&#x2e;&#x65;&#x64;&#x75;">Dave Herman</a> 2007/01/26 17:33</em>
</p>

</div>

<a name="interface_subtyping"></a><h2>Interface subtyping</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> interfaces allow method redeclaration with appropriate subtyping (covariant return, contravariant arg)</div>
</li>
<li class="level1"><div class="li"> this might result in unimplementable interfaces, e.g. if two superinterfaces have versions of a method with unrelated return types</div>
</li>
<li class="level1"><div class="li"> but sometimes these types might have a common subtype introduced later, e.g. by a new class definition in <code>eval</code></div>
</li>
<li class="level1"><div class="li"> the algorithm for detecting these impossible-to-implement interfaces is either complicated or impossible</div>
</li>
<li class="level1"><div class="li"> we could just make method redeclaration invariant or illegal (in AS3 it&rsquo;s illegal)</div>
</li>
<li class="level1"><div class="li"> resolved: just make it legal</div>
<ul>
<li class="level2"><div class="li"> on interface extension or implementation, every method must have correct types w.r.t. its (super)interfaces</div>
</li>
<li class="level2"><div class="li"> so if it&rsquo;s impossible to implement your interface, you&rsquo;ll find out when you try <img src="lib/images/smileys/icon_smile.gif" align="middle" alt=":-)" /></div>
</li>
</ul>
</li>
</ul>

<p>
  &mdash; <em><a href="mailto:%26%23x64%3B%26%23x68%3B%26%23x65%3B%26%23x72%3B%26%23x6d%3B%26%23x61%3B%26%23x6e%3B%26%23x40%3B%26%23x63%3B%26%23x63%3B%26%23x73%3B%26%23x2e%3B%26%23x6e%3B%26%23x65%3B%26%23x75%3B%26%23x2e%3B%26%23x65%3B%26%23x64%3B%26%23x75%3B" class="mail" title="&#x64;&#x68;&#x65;&#x72;&#x6d;&#x61;&#x6e;&#x40;&#x63;&#x63;&#x73;&#x2e;&#x6e;&#x65;&#x75;&#x2e;&#x65;&#x64;&#x75;">Dave Herman</a> 2007/01/26 17:33 </em>
</p>

</div>

<a name="hashes"></a><h2>Hashes</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> Brendan: should we make typed object literals not have a prototype?</div>
</li>
<li class="level1"><div class="li"> Douglas: prototype pollution is a very common source of problems for our coders</div>
</li>
<li class="level1"><div class="li"> problematic because it&rsquo;s a little harsh</div>
<ul>
<li class="level2"><div class="li"> can&rsquo;t call <code>hasOwnProperty</code> or <code>toJSONString</code></div>
</li>
<li class="level2"><div class="li"> although could perhaps convert to an object via <code>Object.wrap</code> or something</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> other options:</div>
<ul>
<li class="level2"><div class="li"> <code>Dict</code> class like AS3, with <code>to</code>-conversions defined from other objects</div>
</li>
<li class="level2"><div class="li"> <code>#{...}</code> syntax for special hash objects (would then need the type system to know the difference, because you can&rsquo;t call <code>Object</code> prototype methods on these)</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Jeff: no new features <img src="lib/images/smileys/icon_smile.gif" align="middle" alt=":-)" /></div>
</li>
<li class="level1"><div class="li"> Brendan: gentlemen&rsquo;s agreement to match extensions via deferred proposals for ES4.1 or whatever <img src="lib/images/smileys/icon_wink.gif" align="middle" alt=";-)" /></div>
</li>
</ul>

<p>
  &mdash; <em><a href="mailto:%26%23x64%3B%26%23x68%3B%26%23x65%3B%26%23x72%3B%26%23x6d%3B%26%23x61%3B%26%23x6e%3B%26%23x40%3B%26%23x63%3B%26%23x63%3B%26%23x73%3B%26%23x2e%3B%26%23x6e%3B%26%23x65%3B%26%23x75%3B%26%23x2e%3B%26%23x65%3B%26%23x64%3B%26%23x75%3B" class="mail" title="&#x64;&#x68;&#x65;&#x72;&#x6d;&#x61;&#x6e;&#x40;&#x63;&#x63;&#x73;&#x2e;&#x6e;&#x65;&#x75;&#x2e;&#x65;&#x64;&#x75;">Dave Herman</a> 2007/01/26 17:33</em> 
</p>

</div>

<!-- no cachefile used, but created -->
    <!-- wikipage stop -->
  </div>

  <div class="clearer">&nbsp;</div>

  
  <div class="stylefoot">

    <div class="meta">
      <div class="user">
              </div>
      <div class="doc">
        meetings/minutes_jan_24_2007.txt &middot; Last modified: 2009/12/19 05:57 by brendan      </div>
    </div>

   
    <div class="bar" id="bar_bottom">
      <div class="bar-left" id="bar_bottomleft">
        <form class="button" method="post" action="index.html" onsubmit="return svchk()"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="" /><input type="hidden" name="id" value="meetings:minutes_jan_24_2007" /><input type="submit" value="Show pagesource" class="button" title="ALT+V" accesskey="v" /></form>        <form class="button" method="get" action="index.html" onsubmit="return svchk()"><input type="hidden" name="do" value="revisions" /><input type="hidden" name="id" value="meetings:minutes_jan_24_2007" /><input type="submit" value="Old revisions" class="button" title="ALT+O" accesskey="o" /></form>      </div>
      <div class="bar-right" id="bar_bottomright">
                        <form class="button" method="get" action="index.html" onsubmit="return svchk()"><input type="hidden" name="do" value="login" /><input type="hidden" name="id" value="meetings:minutes_jan_24_2007" /><input type="submit" value="Login" class="button" /></form>        <form class="button" method="get" action="index.html" onsubmit="return svchk()"><input type="hidden" name="do" value="index" /><input type="hidden" name="id" value="meetings:minutes_jan_24_2007" /><input type="submit" value="Index" class="button" title="ALT+X" accesskey="x" /></form>        <a href="doku.php%3Fid=meetings:minutes_jan_24_2007.html#top"><input type="button" class="button" value="Back to top" onclick="window.scrollTo(0, 0)" /></a>&nbsp;
      </div>
    </div>

  </div>

</div>

<div align="center" class="footerinc">
  <a target="_blank" href="feed.php" title="Recent changes RSS feed"><img src="lib/tpl/default/images/button-rss.png" width="80" height="15" alt="Recent changes RSS feed" border="0" /></a>

  <a target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/2.0/" rel="license" title="Creative Commons License"><img src="lib/tpl/default/images/button-cc.gif" width="80" height="15" alt="Creative Commons License" border="0" /></a>

  <a target="_blank" href="https://www.paypal.com/xclick/business=andi%40splitbrain.org&amp;item_name=DokuWiki+Donation&amp;no_shipping=1&amp;no_note=1&amp;tax=0&amp;currency_code=EUR&amp;lc=US" title="Donate"><img src="lib/tpl/default/images/button-donate.gif" alt="Donate" border="0" /></a>

  <a target="_blank" href="http://www.php.net" title="Powered by PHP"><img src="lib/tpl/default/images/button-php.gif" width="80" height="15" alt="Powered by PHP" border="0" /></a>

  <a target="_blank" href="http://validator.w3.org/check/referer" title="Valid XHTML 1.0"><img src="lib/tpl/default/images/button-xhtml.png" width="80" height="15" alt="Valid XHTML 1.0" border="0" /></a>

  <a target="_blank" href="http://jigsaw.w3.org/css-validator/check/referer" title="Valid CSS"><img src="lib/tpl/default/images/button-css.png" width="80" height="15" alt="Valid CSS" border="0" /></a>

  <a target="_blank" href="http://wiki.splitbrain.org/wiki:dokuwiki" title="Driven by DokuWiki"><img src="lib/tpl/default/images/button-dw.png" width="80" height="15" alt="Driven by DokuWiki" border="0" /></a>



<!--

<rdf:RDF xmlns="http://web.resource.org/cc/"
    xmlns:dc="http://purl.org/dc/elements/1.1/"
    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
<Work rdf:about="">
   <dc:type rdf:resource="http://purl.org/dc/dcmitype/Text" />
   <license rdf:resource="http://creativecommons.org/licenses/by-nc-sa/2.0/" />
</Work>

<License rdf:about="http://creativecommons.org/licenses/by-nc-sa/2.0/">
   <permits rdf:resource="http://web.resource.org/cc/Reproduction" />
   <permits rdf:resource="http://web.resource.org/cc/Distribution" />
   <requires rdf:resource="http://web.resource.org/cc/Notice" />
   <requires rdf:resource="http://web.resource.org/cc/Attribution" />
   <prohibits rdf:resource="http://web.resource.org/cc/CommercialUse" />
   <permits rdf:resource="http://web.resource.org/cc/DerivativeWorks" />
   <requires rdf:resource="http://web.resource.org/cc/ShareAlike" />
</License>

</rdf:RDF>

-->
</div>

<img src="lib/exe/indexer.php%3Fid=meetings%253Aminutes_jan_24_2007&amp;1454275527" width="1" height="1" alt=""  /></body>
</html>
