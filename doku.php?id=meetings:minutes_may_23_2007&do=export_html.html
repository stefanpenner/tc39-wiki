<html>
<head>
  <meta name="generator" content="DokuWiki Release 2005-09-22e" />
  <link rel="start" href="index.html" />
  <link rel="contents" href="doku.php%3Fid=meetings:minutes_may_23_2007&amp;do=index.html" title="" />
  <link rel="alternate" type="application/rss+xml" title="Recent Changes" href="feed.php" />
  <link rel="alternate" type="application/rss+xml" title="Current Namespace" href="feed.php%3Fmode=list&amp;ns=meetings" />
  <link rel="alternate" type="text/html" title="Plain HTML" href="doku.php%3Fid=meetings:minutes_may_23_2007&amp;do=export_html.html" />
  <link rel="alternate" type="text/plain" title="Wiki Markup" href="doku.php%3Fid=meetings:minutes_may_23_2007&amp;do=export_raw" />
  <link rel="stylesheet" media="screen" type="text/css" href="lib/styles/style.css" />
  <meta name="robots" content="noindex,nofollow" />
  <script language="javascript" type="text/javascript" charset="utf-8">
    var alertText   = 'Please enter the text you want to format.\nIt will be appended to the end of the document.'
    var notSavedYet = 'Unsaved changes will be lost.\nReally continue?'
    var DOKU_BASE   = '/'
  </script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/script.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/tw-sack.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/ajax.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/domLib.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/domTT.js"></script>
  <link rel="stylesheet" type="text/css" href="lib/plugins/plugin/style.css" />
</head>
<body>
<div class="toc">
<div class="tocheader"> <script type="text/javascript">showTocToggle("+","-")</script>Table of Contents</div>
<div id="tocinside">
<ul class="toc">
<li class="level1"><span class="li"><a href="doku.php%3Fid=meetings:minutes_may_23_2007&amp;do=export_html.html#time_place" class="toc">Time &amp; Place</a></span><ul class="toc">
<li class="level2"><span class="li"><a href="doku.php%3Fid=meetings:minutes_may_23_2007&amp;do=export_html.html#hotels" class="toc">Hotels</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=meetings:minutes_may_23_2007&amp;do=export_html.html#directions_from_airport" class="toc">Directions from Airport</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=meetings:minutes_may_23_2007&amp;do=export_html.html#useful_words_when_trying_to_navigate_trafikanten" class="toc">Useful words when trying to navigate trafikanten</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=meetings:minutes_may_23_2007&amp;do=export_html.html#contact" class="toc">Contact</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=meetings:minutes_may_23_2007&amp;do=export_html.html#visiting_oslo" class="toc">Visiting Oslo</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=meetings:minutes_may_23_2007&amp;do=export_html.html#attendees" class="toc">Attendees</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=meetings:minutes_may_23_2007&amp;do=export_html.html#agenda" class="toc">Agenda</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=meetings:minutes_may_23_2007&amp;do=export_html.html#some_useful_examples_of_type_checking" class="toc">Some useful examples of type checking</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=meetings:minutes_may_23_2007&amp;do=export_html.html#notes" class="toc">Notes</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=meetings:minutes_may_23_2007&amp;do=export_html.html#semantics_of_type_checks" class="toc">Semantics of type checks</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=meetings:minutes_may_23_2007&amp;do=export_html.html#object_property_defaults" class="toc">Object property defaults</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=meetings:minutes_may_23_2007&amp;do=export_html.html#dictionary_again" class="toc">Dictionary, Again</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=meetings:minutes_may_23_2007&amp;do=export_html.html#units_modules" class="toc">Units (Modules)</a></span></li>
</ul>
</li>
</ul>
</div>
</div>

<a name="time_place"></a><h1>Time &amp; Place</h1>
<div class="level1">

<p>
 May 23-25 at Opera:  <a href="http://kart.gulesider.no/kart/map.c?ps=1&amp;companies=&amp;imgt2=MAP&amp;lne=&amp;h=&amp;imgt=MAP&amp;lnw=&amp;id=a_204707&amp;n=59.9300076699529&amp;s=59.9267067300471&amp;e=10.7595499018791&amp;w=10.7495498981209&amp;zoom=3&amp;tool=pan&amp;scrollX=0&amp;scrollY=0" class="urlextern" target="_blank" title="http://kart.gulesider.no/kart/map.c?ps=1&amp;companies=&amp;imgt2=MAP&amp;lne=&amp;h=&amp;imgt=MAP&amp;lnw=&amp;id=a_204707&amp;n=59.9300076699529&amp;s=59.9267067300471&amp;e=10.7595499018791&amp;w=10.7495498981209&amp;zoom=3&amp;tool=pan&amp;scrollX=0&amp;scrollY=0" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">Waldemar Thranes gate 98, 0175 Oslo</a>
</p>

<p>
11:00-18:00 <em>(note the later-than-usual time)</em>
</p>

</div>
<!-- SECTION [1-348] -->
<a name="hotels"></a><h2>Hotels</h2>
<div class="level2">

<p>
 As Brendan discovered, it may be good to stay out of the party/theater district... 
</p>
<ul>
<li class="level1"><div class="li"> Opera-sanctioned hotels: <a href="http://www.opera.com/company/visitors" class="urlextern" target="_blank" title="http://www.opera.com/company/visitors" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">http://www.opera.com/company/visitors</a></div>
</li>
<li class="level1"><div class="li"> Thon Hotel Opera (at the railway station): <a href="http://www.thonhotels.com/opera" class="urlextern" target="_blank" title="http://www.thonhotels.com/opera" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">http://www.thonhotels.com/opera</a></div>
</li>
</ul>

</div>
<!-- SECTION [349-600] -->
<a name="directions_from_airport"></a><h2>Directions from Airport</h2>
<div class="level2">

<p>
 From the airport, take the Flytoget (airport express train) to Oslo S (Oslo central train station, downtown).  From there, it&rsquo;s bus, T-bane (subway &ndash; look for the big T), trikk (light rail), Osloferjene (Oslo ferry), or taxi to wherever you&rsquo;re staying.  For all but the taxis, check out Trafikanten: 
</p>
<ul>
<li class="level1"><div class="li"> <a href="http://trafikanten.no/" class="urlextern" target="_blank" title="http://trafikanten.no/" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">http://trafikanten.no/</a> (click the UK flag for Norwenglish)</div>
</li>
</ul>

<p>
 Note, due to construction around Oslo S, most light rail and bus lines currently do not operate from that location.  Trafikanten will still tell you where you can find them, if you&rsquo;re so inclined.
</p>

</div>
<!-- SECTION [601-1199] -->
<a name="useful_words_when_trying_to_navigate_trafikanten"></a><h2>Useful words when trying to navigate trafikanten</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> <em>kart</em> = map</div>
</li>
<li class="level1"><div class="li"> <em>tog</em> = train</div>
</li>
<li class="level1"><div class="li"> <em>Jernbanetorget (foran Oslo S)</em> = the main public transportation hub (right in front of Oslo S).</div>
</li>
</ul>

</div>
<!-- SECTION [1200-1401] -->
<a name="contact"></a><h2>Contact</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> Chris Pine  &ndash;  chrispi@opera.com</div>
</li>
</ul>

</div>
<!-- SECTION [1402-1459] -->
<a name="visiting_oslo"></a><h2>Visiting Oslo</h2>
<div class="level2">

<p>
The 4-1-1, yo: <a href="http://my.opera.com/visitoslo/blog/" class="urlextern" target="_blank" title="http://my.opera.com/visitoslo/blog/" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">visiting Oslo</a>
</p>

</div>
<!-- SECTION [1460-1560] -->
<a name="attendees"></a><h2>Attendees</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> Douglas Crockford, Yahoo!</div>
</li>
<li class="level1"><div class="li"> Jeff Dyer, Adobe Systems</div>
</li>
<li class="level1"><div class="li"> Brendan Eich, Mozilla</div>
</li>
<li class="level1"><div class="li"> Dave Herman, Northeastern University</div>
</li>
<li class="level1"><div class="li"> Graydon Hoare, Mozilla</div>
</li>
<li class="level1"><div class="li"> Allen Wirfs-Brock, Microsoft</div>
</li>
<li class="level1"><div class="li"> Lars Thomas Hansen, Adobe</div>
</li>
<li class="level1"><div class="li"> Chris Pine, Opera</div>
</li>
</ul>

</div>
<!-- SECTION [1561-1828] -->
<a name="agenda"></a><h2>Agenda</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> modeling generators with <code>shift</code> and <code>reset</code> (built atop <code>callcc</code>) &ndash; Dave</div>
</li>
<li class="level1"><div class="li"> review of runtime type checks &ndash; Dave</div>
<ul>
<li class="level2"><div class="li"> <code>ExpectedType</code></div>
</li>
<li class="level2"><div class="li"> &ldquo;the bit&rdquo;</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> type compatibility and runtime checks &ndash; Dave and Cormac</div>
<ul>
<li class="level2"><div class="li"> merging redundant checks</div>
</li>
<li class="level2"><div class="li"> tail calls: merge checks on the stack</div>
</li>
<li class="level2"><div class="li"> potentially tighten compatibility (i.e., allow fewer automatic conversions) so merging can always be guaranteed </div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> revisit last item from <a href="doku.php%3Fid=meetings:minutes_feb_06_2007.html" class="wikilink1" title="meetings:minutes_feb_06_2007" onclick="return svchk()" onkeypress="return svchk()">minutes_feb_06_2007</a>, which would constrain the type of the binding created by a function declaration only in strict mode</div>
<ul>
<li class="level2"><div class="li"> want to avoid strict mode inducing extra runtime checks</div>
</li>
<li class="level2"><div class="li"> possible revision: constrain only when the function has annotated parameter and/or return types</div>
<ul>
<li class="level3"><div class="li"> otherwise backward compatible: <code>function f(){} f = 42</code> is allowed, but not <code>function f(this:*){} f = 42</code></div>
</li>
</ul>
</li>
</ul>
</li>
<li class="level1"><div class="li"> All the &ldquo;Proposal&rdquo; and &ldquo;Spec&rdquo; issues in the Trac database</div>
</li>
<li class="level1"><div class="li"> Trac/process: rename milestones to something descriptive?</div>
</li>
<li class="level1"><div class="li"> Grammar for yield, let expressions, expression closures.</div>
</li>
<li class="level1"><div class="li"> Namespace-qualified property identifiers in object initialisers.</div>
</li>
<li class="level1"><div class="li"> Discuss proposal for <a href="doku.php%3Fid=proposals:line_terminator_normalization.html" class="wikilink1" title="proposals:line_terminator_normalization" onclick="return svchk()" onkeypress="return svchk()">line_terminator_normalization</a>.</div>
</li>
<li class="level1"><div class="li"> Dictionaries. Again.</div>
</li>
<li class="level1"><div class="li"> An optional pragma that loads a compilation unit from a <acronym title="Uniform Resource Identifier">URI</acronym>.</div>
</li>
</ul>

</div>
<!-- SECTION [1829-3124] -->
<a name="some_useful_examples_of_type_checking"></a><h2>Some useful examples of type checking</h2>
<div class="level2">
<pre class="code javascript"><span class="kw2">class</span> RubberChicken <span class="br0">&#123;</span> <span class="coMULTI">/* no meta static function convert */</span> <span class="br0">&#125;</span>
&nbsp;
<span class="kw2">var</span> RC : * = <span class="kw2">new</span> RubberChicken;
type ToInt = <span class="kw2">function</span><span class="br0">&#40;</span><span class="br0">&#41;</span> : int
type ToStar = <span class="kw2">function</span><span class="br0">&#40;</span><span class="br0">&#41;</span> : *
&nbsp;
<span class="co1">// ------------------------------------------------------------</span>
<span class="co1">// EXAMPLE 1.</span>
<span class="co1">// A function must obey its declared return type.</span>
&nbsp;
<span class="kw2">function</span> thunk<span class="br0">&#40;</span><span class="br0">&#41;</span> : int <span class="br0">&#123;</span> <span class="kw1">return</span> RC <span class="br0">&#125;</span>
<span class="kw2">function</span> callThunk<span class="br0">&#40;</span>f : ToStar<span class="br0">&#41;</span> : * <span class="br0">&#123;</span> <span class="kw1">return</span> f<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#125;</span>
<span class="kw2">var</span> x : RubberChicken = callThunk<span class="br0">&#40;</span>thunk<span class="br0">&#41;</span>
&nbsp;
<span class="co1">// result: dynamic error: thunk failed to return int</span>
&nbsp;
<span class="co1">// ------------------------------------------------------------</span>
<span class="co1">// EXAMPLE 2.</span>
<span class="co1">// A call to a typed view of a function must obey the view.</span>
&nbsp;
<span class="kw2">function</span> thunk<span class="br0">&#40;</span><span class="br0">&#41;</span> : * <span class="br0">&#123;</span> <span class="kw1">return</span> RC <span class="br0">&#125;</span>
<span class="kw2">function</span> callThunk<span class="br0">&#40;</span>f : ToInt<span class="br0">&#41;</span> : int <span class="br0">&#123;</span> <span class="kw1">return</span> f<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#125;</span>
<span class="kw2">var</span> x : RubberChicken = callThunk<span class="br0">&#40;</span>thunk<span class="br0">&#41;</span>
&nbsp;
<span class="co1">// result: dynamic error: f() failed to return int</span>
&nbsp;
<span class="co1">// ------------------------------------------------------------</span>
<span class="co1">// EXAMPLE 3.</span>
<span class="co1">// Inconsistent views of return types are safe if unused.</span>
&nbsp;
<span class="kw2">function</span> thunk<span class="br0">&#40;</span><span class="br0">&#41;</span> : * <span class="br0">&#123;</span> <span class="kw1">return</span> RC <span class="br0">&#125;</span>
<span class="kw2">function</span> temporaryConfusion<span class="br0">&#40;</span>f : ToInt<span class="br0">&#41;</span> : ToStar <span class="br0">&#123;</span> <span class="kw1">return</span> f <span class="br0">&#125;</span>
<span class="kw2">function</span> callThunk<span class="br0">&#40;</span>f : ToStar<span class="br0">&#41;</span> : * <span class="br0">&#123;</span> <span class="kw1">return</span> <span class="br0">&#40;</span>temporaryConfusion<span class="br0">&#40;</span>f<span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#125;</span>
<span class="kw2">var</span> x : RubberChicken = callThunk<span class="br0">&#40;</span>thunk<span class="br0">&#41;</span>
&nbsp;
<span class="co1">// result: x is successfully assigned RC</span></pre>
</div>
<!-- SECTION [3125-4374] -->
<a name="notes"></a><h2>Notes</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> grammar changes</div>
<ul>
<li class="level2"><div class="li"> yield, let expressions, and expression closures should all produce AssignmentExpression as their rightmost part</div>
</li>
<li class="level2"><div class="li"> qualified property identifier proposals</div>
<ul>
<li class="level3"><div class="li"> ...</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> type system</div>
<ul>
<li class="level2"><div class="li"> strict mode prevents execution of certain programs, the rest run as if in standard mode</div>
</li>
<li class="level2"><div class="li"> non-observable runtime changes due to strict mode allowed?</div>
</li>
<li class="level2"><div class="li"> type relations</div>
<ul>
<li class="level3"><div class="li"> subtyping: T &lt;: U means T can be used where U is expected</div>
</li>
<li class="level3"><div class="li"> compatibility: T ~: U means T can be allowed by strict mode where U is expected, but may throw at runtime</div>
</li>
<li class="level3"><div class="li"> convertibility: T ~~&gt; U means T can be converted to U, not necessarily preserving identity</div>
</li>
</ul>
</li>
<li class="level2"><div class="li"> strict mode uses the same rules as standard, plus a short list of restrictions to do with primitives</div>
</li>
<li class="level2"><div class="li"> strict mode can be modeled as a transformer from source program to object program</div>
<ul>
<li class="level3"><div class="li"> extra conversions inserted in object program</div>
</li>
<li class="level3"><div class="li"> proving no conversion is necessary (String &lt;: Object) can avoid conversion insertion</div>
</li>
</ul>
</li>
<li class="level2"><div class="li"> discussion about v to t ~~ (v is t) ? v : t.meta::convert(v) &ndash; the convert call must be magic</div>
<ul>
<li class="level3"><div class="li"> doesn&rsquo;t convert argument v</div>
</li>
<li class="level3"><div class="li"> constrains return type to t</div>
</li>
<li class="level3"><div class="li"> spec should not dictate caller vs. callee division of labor, but must say how explicit calls to meta::convert work</div>
</li>
</ul>
</li>
<li class="level2"><div class="li"> discussion of <span class="curid"><a href="doku.php%3Fid=meetings:minutes_may_23_2007.html#some_useful_examples_of_type_checking" class="wikilink1" title="meetings:minutes_may_23_2007" onclick="return svchk()" onkeypress="return svchk()">some_useful_examples_of_type_checking</a></span></div>
<ul>
<li class="level3"><div class="li"> RubberChicken example could be simplified to not return f(); just call f()</div>
</li>
<li class="level3"><div class="li"> EXAMPLE 1 is callee check</div>
</li>
<li class="level3"><div class="li"> EXAMPLE 2 is caller check</div>
</li>
<li class="level3"><div class="li"> EXAMPLE 2 is just data flow without calling, so no check</div>
</li>
</ul>
</li>
<li class="level2"><div class="li"> what are the checks?</div>
<ul>
<li class="level3"><div class="li"> we&rsquo;ve said conversion (to), so convertibility is the relation</div>
</li>
<li class="level3"><div class="li"> but convertibility subsumes compatibility subsumes subtyping</div>
</li>
<li class="level3"><div class="li"> static checker and dynamic checks will try subtype and compatibility checking first</div>
</li>
</ul>
</li>
<li class="level2"><div class="li"> return type annotations vs. <a href="doku.php%3Fid=proposals:proper_tail_calls.html" class="wikilink1" title="proposals:proper_tail_calls" onclick="return svchk()" onkeypress="return svchk()">proper tail calls</a></div>
<ul>
<li class="level3"><div class="li"> could elide compatible conversions</div>
</li>
<li class="level3"><div class="li"> stack casts or conversions? casts are idempotent</div>
</li>
<li class="level3"><div class="li"> could just say caveat emptor</div>
</li>
<li class="level3"><div class="li"> or require a pragma &lsquo;use proper tail calls&rsquo; (syntax made up) that rejects calls whose conversions can&rsquo;t be collapsed</div>
</li>
</ul>
</li>
<li class="level2"><div class="li"> the one-bit scheme</div>
<ul>
<li class="level3"><div class="li"> informative model that optimizes away compatibility checks and conversions where it can check subtype relation</div>
</li>
<li class="level3"><div class="li"> reserve a bit in each value (alternative: bit in each reference to a value)</div>
</li>
<li class="level3"><div class="li"> functions are safe or unsafe, defaulting to safe</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>

</div>
<!-- SECTION [4375-6880] -->
<a name="semantics_of_type_checks"></a><h2>Semantics of type checks</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> verifier uses convertibility</div>
</li>
<li class="level1"><div class="li"> automatic runtime type checks are always <code>to</code>-conversion, not <code>cast</code></div>
</li>
<li class="level1"><div class="li"> for tail calls, elide conversions:</div>
<ul>
<li class="level2"><div class="li"> if one type is *, don&rsquo;t perform a check for it</div>
</li>
<li class="level2"><div class="li"> if one type is a subtype of the other, don&rsquo;t perform the supertype check</div>
</li>
<li class="level2"><div class="li"> otherwise:</div>
<ul>
<li class="level3"><div class="li"> if the tail call expression was inside a &lsquo;use proper tail calls&rsquo; pragma, fault</div>
</li>
<li class="level3"><div class="li"> otherwise just stack both conversions (in their original order)</div>
</li>
</ul>
</li>
</ul>
</li>
<li class="level1"><div class="li"> evaluator always performs checks regardless of strict vs standard mode</div>
</li>
<li class="level1"><div class="li"> verifier doesn&rsquo;t insert conversions into the AST; rather, evaluator just performs them</div>
</li>
<li class="level1"><div class="li"> but verifier still has to insert <code>ExpectedType</code>, even in &ldquo;lightweight verifier&rdquo; mode (i.e., standard mode)</div>
</li>
<li class="level1"><div class="li"> <code>meta::convert</code> behaves a little differently when called by the user rather than by the runtime for a conversion:</div>
<ul>
<li class="level2"><div class="li"> called as a function, its result needs to be converted according to the <code>ExpectedType</code></div>
</li>
<li class="level2"><div class="li"> called by the runtime, its result is just checked, to prevent transitive/infinite conversion</div>
</li>
</ul>
</li>
</ul>

<p>
  &mdash; <em><a href="mailto:%26%23x64%3B%26%23x68%3B%26%23x65%3B%26%23x72%3B%26%23x6d%3B%26%23x61%3B%26%23x6e%3B%26%23x40%3B%26%23x63%3B%26%23x63%3B%26%23x73%3B%26%23x2e%3B%26%23x6e%3B%26%23x65%3B%26%23x75%3B%26%23x2e%3B%26%23x65%3B%26%23x64%3B%26%23x75%3B" class="mail" title="&#x64;&#x68;&#x65;&#x72;&#x6d;&#x61;&#x6e;&#x40;&#x63;&#x63;&#x73;&#x2e;&#x6e;&#x65;&#x75;&#x2e;&#x65;&#x64;&#x75;">Dave Herman</a> 2007/05/24 06:50</em>
</p>

</div>
<!-- SECTION [6881-8032] -->
<a name="object_property_defaults"></a><h2>Object property defaults</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> object types don&rsquo;t currently support the usage pattern of keyword args with defaults</div>
</li>
<li class="level1"><div class="li"> made-up syntax, based on <a href="http://www.mochikit.com/doc/html/MochiKit/Async.html#fn-doxhr" class="urlextern" target="_blank" title="http://www.mochikit.com/doc/html/MochiKit/Async.html#fn-doxhr" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">http://www.mochikit.com/doc/html/MochiKit/Async.html#fn-doxhr</a>:</div>
</li>
</ul>
<pre class="code javascript">type MIME_TYPE_TABLE = <span class="br0">&#123;</span>*<span class="br0">&#125;</span>               <span class="co1">// {'Accept': 'text/xml'}</span>
type MIME_TYPE_PAIRS = <span class="br0">&#91;</span><span class="br0">&#91;</span>string,string<span class="br0">&#93;</span><span class="br0">&#93;</span> <span class="co1">// [['Accept', 'text/xml']]</span>
&nbsp;
<span class="kw2">function</span> doXHR<span class="br0">&#40;</span>url: string, options: <span class="br0">&#123;</span>
                   method: string = <span class="st0">'GET'</span>,
                   sendContent: string? = <span class="kw2">null</span>,
                   queryString: string? = <span class="kw2">null</span>,
                   username: string? = <span class="kw2">null</span>,
                   password: string? = <span class="kw2">null</span>,
                   headers: <span class="br0">&#40;</span>MIME_TYPE_TABLE, MIME_TYPE_PAIRS<span class="br0">&#41;</span>,
                   mimeType: string? = <span class="kw2">null</span>,
               <span class="br0">&#125;</span><span class="br0">&#41;</span>: Deferred
<span class="br0">&#123;</span>
    ...
<span class="br0">&#125;</span></pre><ul>
<li class="level1"><div class="li"> but how to provide defaults?</div>
<ul>
<li class="level2"><div class="li"> mutate the object? (needs <code>DontDelete</code> and a type constraint?)</div>
</li>
<li class="level2"><div class="li"> create a new object with the original as its prototype?</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> alternative: use destructuring with new syntax for defaults?</div>
</li>
</ul>
<pre class="code javascript"><span class="kw2">function</span> doXHR<span class="br0">&#40;</span>url: string, options: <span class="br0">&#123;</span>*<span class="br0">&#125;</span><span class="br0">&#41;</span>: Deferred <span class="br0">&#123;</span>
    let <span class="br0">&#123;</span> method: method = <span class="st0">'GET'</span>,
          sendContent: sendContent = <span class="kw2">null</span>,
          queryString: queryString = <span class="kw2">null</span>,
          username: username = <span class="kw2">null</span>,
          password: password = <span class="kw2">null</span>,
          headers: headers = <span class="br0">&#91;</span><span class="br0">&#93;</span>,
          mimeType: mimeType = <span class="kw2">null</span> <span class="br0">&#125;</span> = options;
    ...
<span class="br0">&#125;</span></pre><ul>
<li class="level1"><div class="li"> this doesn&rsquo;t allow typing the properties, though</div>
</li>
</ul>

</div>
<!-- SECTION [8033-9486] -->
<a name="dictionary_again"></a><h2>Dictionary, Again</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> People speaking on es4-discuss want something relatively simple</div>
<ul>
<li class="level2"><div class="li"> No weak refs, at least not in ES4 &ndash; leave for a later edition</div>
</li>
<li class="level2"><div class="li"> No magic has/get/set syntax, has/get/set methods are fine</div>
</li>
<li class="level2"><div class="li"> Mostly string keyed (we think); <code>intrinsic::hashcode</code> is orthogonal</div>
</li>
<li class="level2"><div class="li"> Initialization by object literal is very important</div>
</li>
<li class="level2"><div class="li"> Short name favored by a few commenters (Hash, Dict)</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Lars will re-work builtins/Dictionary.es within two weeks</div>
</li>
</ul>

</div>
<!-- SECTION [9487-9972] -->
<a name="units_modules"></a><h2>Units (Modules)</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> Much discussion of packages, provisions, locations</div>
</li>
<li class="level1"><div class="li"> Goal Doug stated: want to concatenate units server-side and download once</div>
</li>
<li class="level1"><div class="li"> Discrete principles we seem to agree on:</div>
<ul>
<li class="level2"><div class="li"> Provision satisfies requirement once (repeated requires do nothing)</div>
</li>
<li class="level2"><div class="li"> Provisions are independent of packages</div>
</li>
<li class="level2"><div class="li"> Provisions are separate compilation units</div>
</li>
<li class="level2"><div class="li"> Provision names and locations should be opaque strings</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Graydon to write up a <a href="doku.php%3Fid=proposals:program_units.html" class="wikilink1" title="proposals:program_units" onclick="return svchk()" onkeypress="return svchk()">program units</a> proposal</div>
</li>
</ul>

</div>
<!-- SECTION [9973-] -->
<!-- cachefile /usr/local/www/es-lang.org/wiki/data/cache/f/f0d74b29dd1b9c078b0a37599ba7a656.xhtml used -->
</body>
</html>
