<html>
<head>
  <meta name="generator" content="DokuWiki Release 2005-09-22e" />
  <link rel="start" href="index.html" />
  <link rel="contents" href="doku.php%3Fid=harmony:observe_updates&amp;do=index.html" title="" />
  <link rel="alternate" type="application/rss+xml" title="Recent Changes" href="feed.php" />
  <link rel="alternate" type="application/rss+xml" title="Current Namespace" href="http://wiki.ecmascript.org/feed.php?mode=list&amp;ns=harmony" />
  <link rel="alternate" type="text/html" title="Plain HTML" href="doku.php%3Fid=harmony:observe_updates&amp;do=export_html.html" />
  <link rel="alternate" type="text/plain" title="Wiki Markup" href="doku.php%3Fid=harmony:observe_updates&amp;do=export_raw" />
  <link rel="stylesheet" media="screen" type="text/css" href="lib/styles/style.css" />
  <meta name="robots" content="noindex,nofollow" />
  <script language="javascript" type="text/javascript" charset="utf-8">
    var alertText   = 'Please enter the text you want to format.\nIt will be appended to the end of the document.'
    var notSavedYet = 'Unsaved changes will be lost.\nReally continue?'
    var DOKU_BASE   = '/'
  </script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/script.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/tw-sack.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/ajax.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/domLib.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/domTT.js"></script>
  <link rel="stylesheet" type="text/css" href="lib/plugins/plugin/style.css" />
</head>
<body>

<a name="this_page_is_no_longer_current"></a><h1>THIS PAGE IS NO LONGER CURRENT</h1>
<div class="level1">

<p>
 <a href="lib/exe/detail.php%3Fid=harmony%253Aobserve_updates&amp;cache=cache&amp;media=harmony:warning.png.html" class="media" title="harmony:warning.png" onclick="return svchk()" onkeypress="return svchk()"><img src="lib/exe/fetch.php%3Fw=100&amp;h=&amp;cache=cache&amp;media=harmony:warning.png" class="media" alt="" width="100" /></a> <strong>WARNING:</strong> This page is <strong>out of date</strong>. Please see the <a href="https://github.com/arv/ecmascript-object-observe" class="urlextern" target="_blank" title="https://github.com/arv/ecmascript-object-observe" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">latest draft on GitHub</a> for up-to-date information. This page is here only as an archive.
</p>

</div>
<!-- SECTION [1-275] -->
<a name="object.observeupdates"></a><h2>Object.observe: Updates</h2>
<div class="level2">

<p>
11/14/2013:
</p>
<ol>
<li class="level1"><div class="li"> Re-organized structure.</div>
</li>
<li class="level1"><div class="li"> Added &ldquo;Key Algorithms and Semantics&rdquo; section.</div>
</li>
<li class="level1"><div class="li"> Added &ldquo;Cross-cutting Concerns and Potential Implementation Challenges&rdquo;</div>
</li>
</ol>

<p>
11/13/2013:
</p>
<ol>
<li class="level1"><div class="li"> Fixed a bunch of editorial issues discovered by Joshua Bell.</div>
</li>
<li class="level1"><div class="li"> Rebase spec changes against Rev21 ES6 Draft</div>
</li>
</ol>

<p>
10/29/2013:
</p>
<ol>
<li class="level1"><div class="li"> notifier.performChange now emits a change record if the return value of the changeFn is an object (feedback from Sept TC-39)</div>
</li>
<li class="level1"><div class="li"> &ldquo;intrinsic&rdquo; change record types renamed for consistency. &ldquo;new&rdquo; &rarr; &ldquo;add&rdquo;, &ldquo;updated&rdquo; &rarr; &ldquo;update&rdquo;, &ldquo;deleted&rdquo; &rarr; &ldquo;delete&rdquo;, &ldquo;reconfigured&rdquo; &rarr; &ldquo;reconfigure&rdquo;, &ldquo;prototype&rdquo; &rarr; &ldquo;setPrototype&rdquo; (feedback from Sept TC-39)</div>
</li>
<li class="level1"><div class="li"> &ldquo;preventExtensions&rdquo; changeRecord type is now emitted when the first time an object&rsquo;s [[Extensible]] internal property is set to false.</div>
</li>
</ol>

<p>
9/12/2013:
</p>
<ol>
<li class="level1"><div class="li"> Object.observe accept arg can be zero-length (now specifies that accept.length must be &gt; 0).</div>
</li>
</ol>

<p>
7/20/2013:
</p>
<ol>
<li class="level1"><div class="li"> Notifier.performChange, Array.observe &amp; some refactoring of algorithms.</div>
</li>
</ol>

<p>
1/30/2013:
</p>
<ol>
<li class="level1"><div class="li"> Suppress oldValue when the changeRecord is of type &lsquo;reconfigured&rsquo; and the oldValue and present value are the same. Note that CreateChangeRecord now takes both oldDesc and newDesc as arguments.</div>
</li>
</ol>

<p>
12/21/2012:
</p>
<ol>
<li class="level1"><div class="li"> Object.deliverChangeRecords now calls [[DeliverChangeRecords]] repeatedly until there no pending records to deliver.</div>
</li>
</ol>

<p>
11/19/2012:
</p>
<ol>
<li class="level1"><div class="li"> Object.observer/unobserve now return the object (for consistency with Object.freeze, etc...).</div>
</li>
</ol>

<p>
11/13/2012:
</p>
<ol>
<li class="level1"><div class="li"> In Object.unobserve, passing a non-function as the callback now throws (for symmetry with Object.observe).</div>
</li>
</ol>

<p>
 10/28/2012:
</p>
<ol>
<li class="level1"><div class="li"> In CreateChangeRecord, renamed fourth argument to &ldquo;oldDesc&rdquo; (from &ldquo;desc&rdquo;) for clarity.</div>
</li>
<li class="level1"><div class="li"> In CreateChangeRecord, shallow freeze created changeRecord (consistent with Notifier.prototype.notify).</div>
</li>
</ol>

<p>
 10/23/2012:
</p>
<ol>
<li class="level1"><div class="li"> In notify, moved the check for type not being a string above the check for empty observers so the error will throw regardless of if there are observers.</div>
</li>
<li class="level1"><div class="li"> Change the spec language of notify to make it clear to return before creating the changeRecord if there are no observers.</div>
</li>
</ol>

<p>
 9/11/2012:
</p>
<ol>
<li class="level1"><div class="li"> Added a section that we need to schedule a <code>{type: &ldquo;<strong>prototype</strong>&ldquo;, object: ..., oldValue: ...}</code> change record when the [[Prototype]] internal property is changed.</div>
</li>
</ol>

<p>
 7/18/2012:
</p>
<ol>
<li class="level1"><div class="li"> Only fire <strong><code>&ldquo;updated&rdquo;</code></strong> changes when value changes (using SameValue) and no other configuration change happens.</div>
</li>
</ol>

<p>
 7/17/2012: Based on feedback from Mark Miller, Tom van Cutsem and Andreas Rossberg:
</p>
<ol>
<li class="level1"><div class="li"> <em>anyWorkDone</em> should be or&rsquo;ed with the previous value.</div>
</li>
<li class="level1"><div class="li"> Refactored into [[GetNotifier]] to ensure it is always initialized.</div>
</li>
<li class="level1"><div class="li"> <strong><code>&ldquo;descriptor&rdquo;</code></strong> is now always <strong><code>&ldquo;reconfigured&rdquo;</code></strong></div>
</li>
<li class="level1"><div class="li"> Enforce that <em>changeRecord</em> is frozen in [[NotifierPrototype]].notify.</div>
</li>
<li class="level1"><div class="li"> Never pass a descriptor in the change record. Only include oldValue if it was a data property before the change.</div>
</li>
<li class="level1"><div class="li"> Remove redundant IsCallable check in unobserve.</div>
</li>
<li class="level1"><div class="li"> Ensure that <em>O</em> is an object in Object.getNotifier.</div>
</li>
</ol>

<p>
7/4/2012: Per security feedback from Mark Miller
</p>
<ol>
<li class="level1"><div class="li"> Object.getNotifier() of frozen object, returns null.</div>
</li>
<li class="level1"><div class="li"> Object [[Notifier]] is spec&rsquo;d to be lazily created to avoid infinite regress.</div>
</li>
<li class="level1"><div class="li"> All changeRecords are shallowly frozen, and &ldquo;reconfigured&rdquo; changeRecords have their oldValue (property descriptor) frozen.</div>
</li>
<li class="level1"><div class="li"> Validate <strong><code>&ldquo;object&rdquo;</code></strong> field of <em>changeRecord</em> for <em>notifyFunction</em> so as to ensure that notifier of an object can only broadcast changes of its [[Target]].</div>
</li>
<li class="level1"><div class="li"> Validate <strong><code>&ldquo;type&rdquo;</code></strong> and <strong><code>&ldquo;name&rdquo;</code></strong> fields of <em>changeRecord</em> for <em>notifyFunction</em> and perform a shallow freeze to prevent unintentional delivery of shared mutable state.</div>
</li>
<li class="level1"><div class="li"> Object.retrieveChangeRecords &rarr; Object.deliverChangeRecords (invoke the function rather than return records).</div>
</li>
<li class="level1"><div class="li"> Object callbacks invokations silently ignore all thrown exceptions and return values.</div>
</li>
<li class="level1"><div class="li"> Frozen callback function objects cannot be registered as change observers (Object.observe) throws TypeError.</div>
</li>
</ol>

<p>
 7/2/2012:
</p>
<ol>
<li class="level1"><div class="li"> Remove changeRecord validation. Since there is no way to validate &ldquo;oldValue&rdquo;, arbitrary data can always be passed.</div>
</li>
<li class="level1"><div class="li"> Added Object.getNotifier(obj).notify(changeRecord) separation, so as to allow freezing of an object to prevent side-channel, but retaining the ability to notify if getNotifier() was called prior to freezing.</div>
</li>
</ol>

<p>
 5/17/2012:
</p>
<ol>
<li class="level1"><div class="li"> Call the callbacks with a ChangeRecord object describing the change.</div>
</li>
<li class="level1"><div class="li"> Add sanity checks in [[ToChangeRecord]] which is used in <code>Object.notifyObservers</code>.</div>
</li>
<li class="level1"><div class="li"> Add <code>Object.retrieveChangeRecords</code> which allows synchronous access to the pending changes.</div>
</li>
</ol>

<p>
 3/16/2012:  Two requests from feedback from Rafael Weinstein and Erik Arvidsson:
</p>
<ol>
<li class="level1"><div class="li"> Pass old property values as well as new to [[FireChangeListeners]]</div>
</li>
<li class="level1"><div class="li"> Schedule change events to be delivered asynchronously &ldquo;at the end of the turn&rdquo;   </div>
</li>
</ol>

</div>
<!-- SECTION [276-] -->
<!-- cachefile /usr/local/www/es-lang.org/wiki/data/cache/2/269fcbe257dbe6d2563fe8924ca7d7e2.xhtml used -->
</body>
</html>
