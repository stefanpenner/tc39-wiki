<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
 lang="en" dir="ltr">
<head>
  <title>strawman:trait_composition_for_classes [ES Wiki]</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <meta name="generator" content="DokuWiki Release 2005-09-22e" />
  <link rel="start" href="index.html" />
  <link rel="contents" href="doku.php%3Fid=strawman:trait_composition_for_classes&amp;do=index.html" title="" />
  <link rel="alternate" type="application/rss+xml" title="Recent Changes" href="feed.php" />
  <link rel="alternate" type="application/rss+xml" title="Current Namespace" href="feed.php%3Fmode=list&amp;ns=strawman" />
  <link rel="alternate" type="text/html" title="Plain HTML" href="doku.php%3Fid=strawman:trait_composition_for_classes&amp;do=export_html.html" />
  <link rel="alternate" type="text/plain" title="Wiki Markup" href="doku.php%3Fid=strawman:trait_composition_for_classes&amp;do=export_raw" />
  <link rel="stylesheet" media="screen" type="text/css" href="lib/styles/style.css" />
  <meta name="date" content="2011-05-17T07:39:07+0000" />
  <meta name="robots" content="index,follow" />
  <script language="javascript" type="text/javascript" charset="utf-8">
    var alertText   = 'Please enter the text you want to format.\nIt will be appended to the end of the document.'
    var notSavedYet = 'Unsaved changes will be lost.\nReally continue?'
    var DOKU_BASE   = '/'
  </script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/script.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/tw-sack.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/ajax.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/domLib.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/domTT.js"></script>
  <link rel="stylesheet" type="text/css" href="lib/plugins/plugin/style.css" />

  <link rel="shortcut icon" href="lib/images/favicon.ico" />
  <link rel="stylesheet" media="screen" type="text/css" href="lib/tpl/default/layout.css" />
  <link rel="stylesheet" media="screen" type="text/css" href="lib/tpl/default/design.css" />

  
  <link rel="stylesheet" media="print" type="text/css" href="lib/tpl/default/print.css" />

  <!--[if gte IE 5]>
  <style type="text/css">
    /* that IE 5+ conditional comment makes this only visible in IE 5+ */
    /* IE bugfix for transparent PNGs */
    //DISABLED   img { behavior: url("/lib/scripts/pngbehavior.htc"); }
  </style>
  <![endif]-->

  </head>

<body>
<div class="dokuwiki">
  
  <div class="stylehead">

    <div class="header">
      <div class="pagename">
        [[<a href="doku.php%3Fid=strawman:trait_composition_for_classes&amp;do=backlink.html" onclick="return svchk()" onkeypress="return svchk()">strawman:trait_composition_for_classes</a>]]
      </div>
      <div class="logo">
        <a href="doku.php%3Fid=.html" onclick="return svchk()" onkeypress="return svchk()" name="top" accesskey="h" title="[ALT+H]">ES Wiki</a>      </div>
    </div>
  
    
    <div class="bar" id="bar_top">
      <div class="bar-left" id="bar_topleft">
        <form class="button" method="post" action="index.html" onsubmit="return svchk()"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="" /><input type="hidden" name="id" value="strawman:trait_composition_for_classes" /><input type="submit" value="Show pagesource" class="button" title="ALT+V" accesskey="v" /></form>        <form class="button" method="get" action="index.html" onsubmit="return svchk()"><input type="hidden" name="do" value="revisions" /><input type="hidden" name="id" value="strawman:trait_composition_for_classes" /><input type="submit" value="Old revisions" class="button" title="ALT+O" accesskey="o" /></form>      </div>
  
      <div class="bar-right" id="bar_topright">
        <form class="button" method="get" action="index.html" onsubmit="return svchk()"><input type="hidden" name="do" value="recent" /><input type="hidden" name="id" value="" /><input type="submit" value="Recent changes" class="button" title="ALT+R" accesskey="r" /></form>        <form action="doku.php%3Fid=.html" accept-charset="utf-8" class="search" name="search" onsubmit="return svchk()"><input type="hidden" name="do" value="search" /><input type="text" id="qsearch_in" accesskey="f" name="id" class="edit" onkeyup="ajax_qsearch.call('qsearch_in','qsearch_out')" /><input type="submit" value="Search" class="button" /><div id="qsearch_out" class="ajax_qsearch" onclick="this.style.display='none'"></div></form>&nbsp;
      </div>
    </div>

        <div class="breadcrumbs">
      Trace: <span class="bcsep">&raquo;</span> <a href="doku.php%3Fid=strawman:error_stack.html" onclick="return svchk()" onkeypress="return svchk()" class="breadcrumbs" title="strawman:error_stack">error_stack</a> <span class="bcsep">&raquo;</span> <a href="doku.php%3Fid=strawman:accepted.html" onclick="return svchk()" onkeypress="return svchk()" class="breadcrumbs" title="strawman:accepted">accepted</a> <span class="bcsep">&raquo;</span> <a href="doku.php%3Fid=strawman:deferred.html" onclick="return svchk()" onkeypress="return svchk()" class="breadcrumbs" title="strawman:deferred">deferred</a> <span class="bcsep">&raquo;</span> <a href="doku.php%3Fid=strawman:withdrawn.html" onclick="return svchk()" onkeypress="return svchk()" class="breadcrumbs" title="strawman:withdrawn">withdrawn</a> <span class="bcsep">&raquo;</span> <span class="curid"><a href="doku.php%3Fid=strawman:trait_composition_for_classes.html" onclick="return svchk()" onkeypress="return svchk()" class="breadcrumbs" title="strawman:trait_composition_for_classes">trait_composition_for_classes</a></span>          </div>
    
  </div>
  
  
  <div class="page">
    <!-- wikipage start -->
    <div class="toc">
<div class="tocheader"> <script type="text/javascript">showTocToggle("+","-")</script>Table of Contents</div>
<div id="tocinside">
<ul class="toc">
<li class="level1"><span class="li"><a href="doku.php%3Fid=strawman:trait_composition_for_classes.html#trait_composition_for_classes" class="toc">Trait Composition for Classes</a></span><ul class="toc">
<li class="clear"><ul class="toc">
<li class="level3"><span class="li"><a href="doku.php%3Fid=strawman:trait_composition_for_classes.html#class_adjectives" class="toc">Class Adjectives</a></span></li>
</ul>
</li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=strawman:trait_composition_for_classes.html#errors" class="toc">Errors</a></span><ul class="toc">
<li class="level3"><span class="li"><a href="doku.php%3Fid=strawman:trait_composition_for_classes.html#semi-static_errors" class="toc">Semi-Static Errors</a></span></li>
<li class="level3"><span class="li"><a href="doku.php%3Fid=strawman:trait_composition_for_classes.html#dynamic_errors" class="toc">Dynamic Errors</a></span></li>
<li class="level3"><span class="li"><a href="doku.php%3Fid=strawman:trait_composition_for_classes.html#early_errors" class="toc">Early Errors</a></span></li>
</ul>
</li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=strawman:trait_composition_for_classes.html#chaining" class="toc">Chaining</a></span></li>
</ul>
</li>
<li class="level1"><span class="li"><a href="doku.php%3Fid=strawman:trait_composition_for_classes.html#adapted_examples" class="toc">Adapted Examples</a></span><ul class="toc">
<li class="level2"><span class="li"><a href="doku.php%3Fid=strawman:trait_composition_for_classes.html#adapted_from_explanations_of_traitsjs" class="toc">Adapted from explanations of TraitsJS</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=strawman:trait_composition_for_classes.html#adapted_from_explanations_of_traceur" class="toc">Adapted from explanations of Traceur</a></span></li>
</ul>
</li>
<li class="level1"><span class="li"><a href="doku.php%3Fid=strawman:trait_composition_for_classes.html#see" class="toc">See</a></span></li>
</ul>
</div>
</div>

<a name="trait_composition_for_classes"></a><h1>Trait Composition for Classes</h1>
<div class="level1">

<p>
<em>THIS STRAWMAN IS CURRENTLY NOT IN A COHERENT STATE</em>. Rather, it is mostly a place to collect the support for trait composition, abstract classes, required members, and multiple (trait) inheritance which have been factored out of <a href="doku.php%3Fid=strawman:classes_with_trait_composition.html" class="wikilink1" title="strawman:classes_with_trait_composition" onclick="return svchk()" onkeypress="return svchk()">classes_with_trait_composition</a>.
</p>

<p>
 This strawman shows how to add trait composition to <a href="doku.php%3Fid=strawman:classes_with_trait_composition.html" class="wikilink1" title="strawman:classes_with_trait_composition" onclick="return svchk()" onkeypress="return svchk()">classes_with_trait_composition</a>, as a way to give a clean semantics to multiple inheritance. From the perspective of <a href="doku.php%3Fid=strawman:traits_semantics.html" class="wikilink1" title="strawman:traits_semantics" onclick="return svchk()" onkeypress="return svchk()">traits semantics</a>, such multiple inheritance is a straightforward generalization of that single inheritance semantics semantics.
</p>
<pre class="code">
  ClassAdjective : ...       // &quot;...&quot; means members defined elsewhere
      abstract
      trait

  ClassElement : ...
      MixinDefinition
  ConstructorElement : ...
      MixinChaining

  PublicPrototypePropertyDefinition : ...
      RequiredDeclaration
  PublicInstancePropertyDeclaration : ...
      public RequiredDeclaration           // required instance state
  RequiredDeclaration :
      requires ForwardDeclaration          // required members

  MixinDefinition :
      mixin MemberExpression Renamings?
  ProtoChaining :
      super Arguments Renamings?
  MixinChaining :
      mixin MemberExpression Arguments Renamings?

  Renamings :
      Renaming
      Renamings , Renaming
  Renaming :
      with Identifier as Identifier
      without Identifier
</pre>

<p>
NOTE: Semantics to be explained, based on <a href="doku.php%3Fid=strawman:classes_with_trait_composition&amp;rev=1305060283.html" class="urlextern" target="_blank" title="http://wiki.ecmascript.org/doku.php?id=strawman:classes_with_trait_composition&amp;rev=1305060283" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">old revision of classes_with_trait_composition</a>, from when it used trait composition for multiple inheritance.
</p>

<p>
 A ClassDeclaration or ClassExpression defines a special constructor function to represent that class. Like a regular function, this constructor function is callable, inherits from <code>Function.prototype</code>, and has a typeof of <code>&ldquo;function&rdquo;</code>. Unlike a regular function, it has a [[Class]] of <code>&ldquo;Class&rdquo;</code>, has various other internal properties below specific to such constructor functions, and perhaps even directly inherits from <code>Class.prototype</code> which then directly inherits from <code>Function.prototype</code>. From here on, we refer to such a special constructor function as a <em>class</em>.
</p>

</div>

<a name="class_adjectives"></a><h3>Class Adjectives</h3>
<div class="level3">

<p>
 The ClassAdjectives, when present, clarify the role a given class is intended to serve. The <code>abstract</code> adjective indicates that this class is not intended to be directly instantiable. Unresolved requirements in an abstract class are no problem, since the class provides only a partial description. 
</p>

<p>
The <code>const</code> adjective indicates that this class should provide high integrity. An abstract const class enforces non-instantiability &mdash; its internal [[Call]] and [[Construct]] methods only throw a TypeError when called. For non-abstract classes and for non-const abstract classes, their internal [[Call]] and [[Construct]] methods directly make the instance they describe, even though these may have unresolved requirements. Const classes are themselves frozen and they bring their class name into scope as a <a href="doku.php%3Fid=harmony:const.html" class="wikilink1" title="harmony:const" onclick="return svchk()" onkeypress="return svchk()">const</a> variable, i.e., a non-assignable variable. For a const class <code>C</code>, <code>C.prototype</code> is also frozen, as are the direct instances of a non-abstract const class.
</p>

<p>
For a non-abstract class or a non-const abstract class, this constructor code is also the behavior of the class&rsquo; internal [[Call]] and [[Construct]] methods.
</p>

</div>

<a name="errors"></a><h2>Errors</h2>
<div class="level2">

</div>

<a name="semi-static_errors"></a><h3>Semi-Static Errors</h3>
<div class="level3">

<p>
During execution of its ClassBody, a const class definition may fail by throwing a TypeError, in order to report a <em>semi-static error</em>. For a top level class, the initialization time is Program entry time, so such semi-static errors are effectively early errors. A non-abstract const class with unresolved conflicts or requirements reports an early error, so a successful non-abstract const class definition cannot have unresolved conflicts or requirements. For a const class, the class and its prototype are only frozen when the ClassBody exits. 
</p>

</div>

<a name="dynamic_errors"></a><h3>Dynamic Errors</h3>
<div class="level3">

<p>
 Required prototype properties define a public poisoned property on the prototype of the class on which they appear.
</p>

</div>

<a name="early_errors"></a><h3>Early Errors</h3>
<div class="level3">

<p>
 For a const class, every locally declared provided instance member must be &ldquo;obviously&rdquo; initialized and every declared required instance property must not be &ldquo;obviously&rdquo; initialized or an early SyntaxError is reported. 
</p>

</div>

<a name="chaining"></a><h2>Chaining</h2>
<div class="level2">

<p>
For each built-in conventional constructor &ndash; such as <code>Date</code>, <code>Array</code>, and perhaps <code>Function</code> &ndash; where the &ldquo;<code>.call</code>&rdquo; pattern does not suffice, this class creates an instance that correctly behaves as a proper instance that built-in constructor function, except that they inherits only indirectly from that constructor function&rsquo;s <code>&ldquo;prototype&rdquo;</code> property. Unfortunately, compilers from ES-next to ES5 cannot emulate this behavior by local rewriting.
</p>

</div>

<a name="adapted_examples"></a><h1>Adapted Examples</h1>
<div class="level1">

<p>
 To facilitate comparisons, the examples below are adapted from earlier or similar proposals. Since some of these are also adapted from each other, you may find some redundancy between these examples.
</p>

<p>
NOTE: At the present time, these examples are only valid for an earlier version of this proposal that made different syntactic choices. Remove this note when these examples are updated.
</p>

</div>

<a name="adapted_from_explanations_of_traitsjs"></a><h2>Adapted from explanations of TraitsJS</h2>
<div class="level2">

<p>
Example adapted from <a href="http://traitsjs.org/" class="urlextern" target="_blank" title="http://traitsjs.org/" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">http://traitsjs.org/</a>.
</p>
<pre class="code javascript">  trait ColorTrait <span class="br0">&#123;</span>
    <span class="kw2">new</span><span class="br0">&#40;</span>col<span class="br0">&#41;</span> <span class="br0">&#123;</span>
      <span class="kw2">public</span> color<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="kw1">return</span> col; <span class="br0">&#125;</span>
    <span class="br0">&#125;</span>
  <span class="br0">&#125;</span>
  <span class="kw2">class</span> Point : <span class="br0">&#40;</span>Object<span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw2">new</span><span class="br0">&#40;</span>x, y<span class="br0">&#41;</span> <span class="br0">&#123;</span>
      <span class="kw2">public</span> getX<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="kw1">return</span> x; <span class="br0">&#125;</span>
      <span class="kw2">public</span> getY<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="kw1">return</span> y; <span class="br0">&#125;</span>
      <span class="kw2">public</span> toString<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="kw1">return</span> <span class="st0">''</span>+x+<span class="st0">'@'</span>+y; <span class="br0">&#125;</span>
    <span class="br0">&#125;</span>
  <span class="br0">&#125;</span>
  <span class="kw2">class</span> ColoredPoint <span class="br0">&#123;</span>
    mixin ColorTrait;
    mixin Point;
    <span class="kw2">new</span><span class="br0">&#40;</span>x, y, col<span class="br0">&#41;</span> <span class="br0">&#123;</span>
      mixin ColorTrait<span class="br0">&#40;</span>col<span class="br0">&#41;</span>;
      mixin Point<span class="br0">&#40;</span>x, y<span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
  <span class="br0">&#125;</span>
  <span class="kw2">const</span> p = ColoredPoint<span class="br0">&#40;</span><span class="nu0">0</span>,<span class="nu0">2</span>,<span class="st0">'red'</span><span class="br0">&#41;</span>;
  p.<span class="me1">color</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="co1">// 'red'</span></pre>
<p>
Examples adapted from <a href="http://howtonode.org/traitsjs" class="urlextern" target="_blank" title="http://howtonode.org/traitsjs" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">How to Node article on TraitsJS</a> which are adapted from <a href="http://scg.unibe.ch/archive/papers/Scha03aTraits.pdf" class="urlextern" target="_blank" title="http://scg.unibe.ch/archive/papers/Scha03aTraits.pdf" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">the original traits paper</a>.
</p>
<pre class="code javascript">  trait Equality <span class="br0">&#123;</span>
    requires equals<span class="br0">&#40;</span>other<span class="br0">&#41;</span>;
    <span class="kw2">public</span> differs<span class="br0">&#40;</span>other<span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="kw1">return</span> !<span class="kw1">this</span>.<span class="me1">equals</span><span class="br0">&#40;</span>other<span class="br0">&#41;</span>; <span class="br0">&#125;</span>
  <span class="br0">&#125;</span>
  trait Magnitude <span class="br0">&#123;</span>
    mixin Equality;
    requires smaller<span class="br0">&#40;</span>other<span class="br0">&#41;</span>;
    <span class="kw2">public</span> greater<span class="br0">&#40;</span>other<span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="kw1">return</span> !<span class="kw1">this</span>.<span class="me1">smaller</span><span class="br0">&#40;</span>other<span class="br0">&#41;</span> &amp;&amp; <span class="kw1">this</span>.<span class="me1">differs</span><span class="br0">&#40;</span>other<span class="br0">&#41;</span>; <span class="br0">&#125;</span>
    <span class="kw2">public</span> between<span class="br0">&#40;</span>min, max<span class="br0">&#41;</span> <span class="br0">&#123;</span>
      <span class="kw1">return</span> min.<span class="me1">smaller</span><span class="br0">&#40;</span><span class="kw1">this</span><span class="br0">&#41;</span> &amp;&amp; <span class="kw1">this</span>.<span class="me1">smaller</span><span class="br0">&#40;</span>max<span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
  <span class="br0">&#125;</span>
  <span class="kw2">class</span> BareCircle <span class="br0">&#123;</span>
    <span class="kw2">new</span><span class="br0">&#40;</span>center, radius<span class="br0">&#41;</span> <span class="br0">&#123;</span>
      <span class="kw2">public</span> center = center;
      <span class="kw2">public</span> radius = radius;
    <span class="br0">&#125;</span>
    <span class="kw2">public</span> area<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="kw1">return</span> Math.<span class="me1">PI</span> * <span class="kw1">this</span>.<span class="me1">radius</span> * <span class="kw1">this</span>.<span class="me1">radius</span>; <span class="br0">&#125;</span>
    <span class="kw2">public</span> equals<span class="br0">&#40;</span>other<span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="kw1">return</span> <span class="kw1">this</span>.<span class="me1">center</span>.<span class="me1">equals</span><span class="br0">&#40;</span>other.<span class="me1">center</span><span class="br0">&#41;</span> &amp;&amp;
                                  <span class="kw1">this</span>.<span class="me1">radius</span> === other.<span class="me1">radius</span>; <span class="br0">&#125;</span>
    <span class="kw2">public</span> smaller<span class="br0">&#40;</span>other<span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="kw1">return</span> <span class="kw1">this</span>.<span class="me1">radius</span> &lt; other.<span class="me1">radius</span>; <span class="br0">&#125;</span>
  <span class="br0">&#125;</span>
  <span class="kw2">class</span> Circle <span class="br0">&#123;</span>
    mixin Magnitude;
    mixin BareCircle;
    <span class="kw2">new</span><span class="br0">&#40;</span>center, radius<span class="br0">&#41;</span> <span class="br0">&#123;</span>
      mixin BareCircle<span class="br0">&#40;</span>center, radius<span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
  <span class="br0">&#125;</span></pre><pre class="code javascript">  trait ColorTrait <span class="br0">&#123;</span>
    <span class="kw2">new</span><span class="br0">&#40;</span>rgb<span class="br0">&#41;</span> <span class="br0">&#123;</span>
      <span class="kw2">public</span> get rgb<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="kw1">return</span> rgb; <span class="br0">&#125;</span>
    <span class="br0">&#125;</span>
    <span class="kw2">public</span> equals<span class="br0">&#40;</span>col<span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="kw1">return</span> col.<span class="me1">rgb</span>.<span class="me1">equals</span><span class="br0">&#40;</span><span class="kw1">this</span>.<span class="me1">rgb</span><span class="br0">&#41;</span>; <span class="br0">&#125;</span>
  <span class="br0">&#125;</span>
  <span class="kw2">class</span> Circle <span class="br0">&#123;</span>
    mixin Magnitude;
    mixin ColorTrait <span class="kw1">with</span> equals <span class="kw1">as</span> equalColors; <span class="co1">// conflict avoidance by rename</span>
    mixin BareCircle;
    <span class="kw2">new</span><span class="br0">&#40;</span>center, radius<span class="br0">&#41;</span> <span class="br0">&#123;</span>
      mixin ColorTrait<span class="br0">&#40;</span>rgb<span class="br0">&#41;</span>;                     <span class="co1">// mixin chaining</span>
      mixin BareCircle<span class="br0">&#40;</span>center, radius<span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
  <span class="br0">&#125;</span>
<span class="co1">// or</span>
  <span class="kw2">class</span> Circle <span class="br0">&#123;</span>
    mixin Magnitude;
    mixin Color without equals;                  <span class="co1">// conflict avoidance by exclusion</span>
    mixin BareCircle;
    <span class="kw2">new</span><span class="br0">&#40;</span>center, radius<span class="br0">&#41;</span> <span class="br0">&#123;</span>
      mixin ColorTrait<span class="br0">&#40;</span>rgb<span class="br0">&#41;</span>;
      mixin BareCircle<span class="br0">&#40;</span>center, radius<span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
  <span class="br0">&#125;</span>
<span class="co1">// or</span>
  <span class="kw2">class</span> Circle : ColorTrait <span class="br0">&#123;</span>                    <span class="co1">// conflict avoidance by overriding</span>
    mixin Magnitude;
    mixin BareCircle;
    <span class="kw2">new</span><span class="br0">&#40;</span>center, radius<span class="br0">&#41;</span> <span class="br0">&#123;</span>
      <span class="kw2">super</span><span class="br0">&#40;</span>rgb<span class="br0">&#41;</span>;
      mixin BareCircle<span class="br0">&#40;</span>center, radius<span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
  <span class="br0">&#125;</span>
&nbsp;</pre>
<p>
Example adapted from <a href="http://soft.vub.ac.be/~tvcutsem/traitsjs/tutorial.html" class="urlextern" target="_blank" title="http://soft.vub.ac.be/~tvcutsem/traitsjs/tutorial.html" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">TraitsJS Tutorial</a>.
</p>
<pre class="code javascript">  trait EnumerableTrait <span class="br0">&#123;</span>
    requires forEach<span class="br0">&#40;</span>fun<span class="br0">&#41;</span>;
&nbsp;
    <span class="kw2">public</span> map<span class="br0">&#40;</span>fun<span class="br0">&#41;</span> <span class="br0">&#123;</span>
      <span class="kw2">const</span> seq = <span class="br0">&#91;</span><span class="br0">&#93;</span>;
      <span class="kw1">this</span>.<span class="me1">forEach</span><span class="br0">&#40;</span><span class="kw2">function</span><span class="br0">&#40;</span>e,i<span class="br0">&#41;</span> <span class="br0">&#123;</span>
        seq.<span class="me1">push</span><span class="br0">&#40;</span>fun<span class="br0">&#40;</span>e,i<span class="br0">&#41;</span><span class="br0">&#41;</span>;
      <span class="br0">&#125;</span><span class="br0">&#41;</span>;
      <span class="kw1">return</span> seq;
    <span class="br0">&#125;</span>
&nbsp;
    <span class="kw2">public</span> filter<span class="br0">&#40;</span>pred<span class="br0">&#41;</span> <span class="br0">&#123;</span>
      <span class="kw2">const</span> seq = <span class="br0">&#91;</span><span class="br0">&#93;</span>;
      <span class="kw1">this</span>.<span class="me1">forEach</span><span class="br0">&#40;</span><span class="kw2">function</span><span class="br0">&#40;</span>e,i<span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="kw1">if</span> <span class="br0">&#40;</span>pred<span class="br0">&#40;</span>e,i<span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
          seq.<span class="me1">push</span><span class="br0">&#40;</span>e<span class="br0">&#41;</span>;
        <span class="br0">&#125;</span>
      <span class="br0">&#125;</span><span class="br0">&#41;</span>;
      <span class="kw1">return</span> seq;
    <span class="br0">&#125;</span>
&nbsp;
    <span class="kw2">public</span> reduce<span class="br0">&#40;</span>init, fun<span class="br0">&#41;</span> <span class="br0">&#123;</span>
      let result = init;
      <span class="kw1">this</span>.<span class="me1">forEach</span><span class="br0">&#40;</span><span class="kw2">function</span><span class="br0">&#40;</span>e,i<span class="br0">&#41;</span> <span class="br0">&#123;</span>
        result = fun<span class="br0">&#40;</span>result, e, i<span class="br0">&#41;</span>;
      <span class="br0">&#125;</span><span class="br0">&#41;</span>;
      <span class="kw1">return</span> result;
    <span class="br0">&#125;</span>
  <span class="br0">&#125;</span>
&nbsp;
  <span class="kw2">class</span> BareInterval <span class="br0">&#123;</span>
    <span class="kw2">new</span><span class="br0">&#40;</span>min, max<span class="br0">&#41;</span> <span class="br0">&#123;</span>
      <span class="kw2">public</span> start = min;
      <span class="kw2">public</span> end = max;
      <span class="kw2">public</span> size = max - min;
    <span class="br0">&#125;</span>
    <span class="kw2">public</span> toString<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="kw1">return</span> <span class="st0">''</span>+min+<span class="st0">'..!'</span>+max; <span class="br0">&#125;</span>
    <span class="kw2">public</span> contains<span class="br0">&#40;</span>e<span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="kw1">return</span> min &lt;= e &amp;&amp; e &lt; max; <span class="br0">&#125;</span>
    <span class="kw2">public</span> forEach<span class="br0">&#40;</span>consumer<span class="br0">&#41;</span> <span class="br0">&#123;</span>
      <span class="kw1">for</span> <span class="br0">&#40;</span>let i = min; i &lt; max; i++<span class="br0">&#41;</span> <span class="br0">&#123;</span>
        consumer<span class="br0">&#40;</span>i,i-min<span class="br0">&#41;</span>;
      <span class="br0">&#125;</span>
    <span class="br0">&#125;</span>
  <span class="br0">&#125;</span>
  <span class="kw2">class</span> Interval <span class="br0">&#123;</span>
    mixin EnumerableTrait;
    mixin BareInterval;
    <span class="kw2">new</span><span class="br0">&#40;</span>min, max<span class="br0">&#41;</span> <span class="br0">&#123;</span>
      mixin BareInterval<span class="br0">&#40;</span>min, max<span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
  <span class="br0">&#125;</span>
<span class="co1">// or</span>
  <span class="kw2">class</span> Interval : BareInterval <span class="br0">&#123;</span>
    mixin EnumerableTrait;
    <span class="kw2">new</span><span class="br0">&#40;</span>min, max<span class="br0">&#41;</span> <span class="br0">&#123;</span>
      <span class="kw2">super</span><span class="br0">&#40;</span>min, max<span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
  <span class="br0">&#125;</span>
&nbsp;
&nbsp;
&nbsp;
  <span class="kw2">const</span> i = Interval<span class="br0">&#40;</span><span class="nu0">0</span>,<span class="nu0">5</span><span class="br0">&#41;</span>;
  i.<span class="me1">start</span> <span class="co1">// 0</span>
  i.<span class="me1">end</span> <span class="co1">// 5</span>
  i.<span class="me1">reduce</span><span class="br0">&#40;</span><span class="nu0">0</span>, <span class="kw2">function</span><span class="br0">&#40;</span>a,b<span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="kw1">return</span> a+b; <span class="br0">&#125;</span><span class="br0">&#41;</span>; <span class="co1">// 0+1+2+3+4 = 10</span></pre>
</div>

<a name="adapted_from_explanations_of_traceur"></a><h2>Adapted from explanations of Traceur</h2>
<div class="level2">

<p>
Examples adapted from <a href="http://code.google.com/p/traceur-compiler/wiki/LanguageFeatures#Classes" class="urlextern" target="_blank" title="http://code.google.com/p/traceur-compiler/wiki/LanguageFeatures#Classes" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">Traceur Classes and Traits</a>.
</p>
<pre class="code javascript">  <span class="kw2">class</span> Monster : Character <span class="br0">&#123;</span>
    <span class="kw2">new</span><span class="br0">&#40;</span>x, y, <span class="kw3">name</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
      <span class="kw2">super</span><span class="br0">&#40;</span>x, y<span class="br0">&#41;</span>;
      <span class="kw2">public</span> <span class="kw3">name</span> = <span class="kw3">name</span>;
      <span class="kw2">private</span> let health_ = x+y;
    <span class="br0">&#125;</span>
&nbsp;
    static <span class="kw2">public</span> let totalAttacks = <span class="nu0">0</span>;
&nbsp;
    <span class="kw2">public</span> attack<span class="br0">&#40;</span>character<span class="br0">&#41;</span> <span class="br0">&#123;</span>
      totalAttacks++;
      <span class="kw2">super</span>.<span class="me1">attack</span><span class="br0">&#40;</span>character<span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
&nbsp;
    <span class="kw2">public</span> isAlive<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="kw1">return</span> <span class="kw1">this</span>.<span class="me1">health</span> &gt; <span class="nu0">0</span>;
    <span class="kw2">public</span> get health<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="kw1">return</span> <span class="kw2">private</span><span class="br0">&#40;</span><span class="kw1">this</span><span class="br0">&#41;</span>.<span class="me1">health_</span>; <span class="br0">&#125;</span>
    <span class="kw2">public</span> set<span class="br0">&#40;</span>newHealth<span class="br0">&#41;</span> <span class="br0">&#123;</span>
      <span class="kw1">if</span> <span class="br0">&#40;</span>newHealth &lt; <span class="nu0">0</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="kw1">throw</span> <span class="kw2">new</span> Error<span class="br0">&#40;</span><span class="st0">'Health must be non-negative.'</span><span class="br0">&#41;</span>;
      <span class="kw2">private</span><span class="br0">&#40;</span><span class="kw1">this</span><span class="br0">&#41;</span>.<span class="me1">health_</span> = newHealth;
    <span class="br0">&#125;</span>
  <span class="br0">&#125;</span></pre><pre class="code javascript">  trait ComparableTrait <span class="br0">&#123;</span>
    requires lessThan<span class="br0">&#40;</span>other<span class="br0">&#41;</span>;
    requires equals<span class="br0">&#40;</span>other<span class="br0">&#41;</span>;
&nbsp;
    <span class="kw2">public</span> lessThanOrEquals<span class="br0">&#40;</span>other<span class="br0">&#41;</span> <span class="br0">&#123;</span>
      <span class="kw1">return</span> <span class="kw1">this</span>.<span class="me1">lessThan</span><span class="br0">&#40;</span>other<span class="br0">&#41;</span> || <span class="kw1">this</span>.<span class="me1">equals</span><span class="br0">&#40;</span>other<span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
    <span class="kw2">public</span> greaterThan<span class="br0">&#40;</span>other<span class="br0">&#41;</span> <span class="br0">&#123;</span>
      <span class="kw1">return</span> other.<span class="me1">lessThan</span><span class="br0">&#40;</span><span class="kw1">this</span><span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
    <span class="kw2">public</span> greaterThanOrEquals<span class="br0">&#40;</span>other<span class="br0">&#41;</span> <span class="br0">&#123;</span>
      <span class="kw1">return</span> other.<span class="me1">lessThan</span><span class="br0">&#40;</span><span class="kw1">this</span><span class="br0">&#41;</span> || <span class="kw1">this</span>.<span class="me1">equals</span><span class="br0">&#40;</span>other<span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
    <span class="kw2">public</span> notEquals<span class="br0">&#40;</span>other<span class="br0">&#41;</span> <span class="br0">&#123;</span>
      <span class="kw1">return</span> !<span class="br0">&#40;</span><span class="kw1">this</span>.<span class="me1">equals</span><span class="br0">&#40;</span>other<span class="br0">&#41;</span><span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
  <span class="br0">&#125;</span>
&nbsp;
  trait BareInterval <span class="br0">&#123;</span>
    <span class="kw2">new</span><span class="br0">&#40;</span>min, max<span class="br0">&#41;</span> <span class="br0">&#123;</span>
      <span class="kw2">public</span> start = min;
      <span class="kw2">public</span> end = max;
      <span class="kw2">public</span> size = max - min + <span class="nu0">1</span>;
    <span class="br0">&#125;</span>
    <span class="kw2">public</span> lessThan<span class="br0">&#40;</span>ival<span class="br0">&#41;</span> <span class="br0">&#123;</span>
      <span class="kw1">return</span> <span class="kw1">this</span>.<span class="me1">end</span> &lt;= ival.<span class="me1">start</span>;
    <span class="br0">&#125;</span>
    <span class="kw2">public</span> equals<span class="br0">&#40;</span>ival<span class="br0">&#41;</span> <span class="br0">&#123;</span>
      <span class="kw1">return</span> <span class="kw1">this</span>.<span class="me1">start</span> === ival.<span class="me1">start</span> &amp;&amp; <span class="kw1">this</span>.<span class="me1">end</span> === ival.<span class="me1">end</span>;
    <span class="br0">&#125;</span>
  <span class="br0">&#125;</span>
&nbsp;
  <span class="kw2">class</span> Interval <span class="br0">&#123;</span>
    mixin ComparableTrait;
    mixin BareInterval;
    <span class="kw2">new</span><span class="br0">&#40;</span>min, max<span class="br0">&#41;</span> <span class="br0">&#123;</span>
      mixin BareInterval<span class="br0">&#40;</span>min, max<span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
  <span class="br0">&#125;</span>
&nbsp;
  <span class="kw2">var</span> i1 = <span class="kw2">new</span> Interval<span class="br0">&#40;</span><span class="nu0">0</span>, <span class="nu0">5</span><span class="br0">&#41;</span>;
  <span class="kw2">var</span> i2 = <span class="kw2">new</span> Interval<span class="br0">&#40;</span><span class="nu0">7</span>, <span class="nu0">12</span><span class="br0">&#41;</span>;
  <span class="kw3">alert</span><span class="br0">&#40;</span>i1 + <span class="st0">' == '</span> + i2 + <span class="st0">': '</span> + i1.<span class="me1">notEquals</span><span class="br0">&#40;</span>i2<span class="br0">&#41;</span><span class="br0">&#41;</span>; <span class="co1">// true</span>
  <span class="kw3">alert</span><span class="br0">&#40;</span>i1 + <span class="st0">' &lt; '</span> + i2 + <span class="st0">': '</span> + i1.<span class="me1">greaterThan</span><span class="br0">&#40;</span>i2<span class="br0">&#41;</span><span class="br0">&#41;</span>; <span class="co1">// false</span></pre>
</div>

<a name="see"></a><h1>See</h1>
<div class="level1">

<p>
 <a href="doku.php%3Fid=strawman:classes_with_trait_composition.html" class="wikilink1" title="strawman:classes_with_trait_composition" onclick="return svchk()" onkeypress="return svchk()">classes_with_trait_composition</a>
</p>

<p>
<a href="http://code.google.com/p/traceur-compiler/wiki/LanguageFeatures#Classes" class="urlextern" target="_blank" title="http://code.google.com/p/traceur-compiler/wiki/LanguageFeatures#Classes" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">Traceur Classes and Traits</a>
</p>

<p>
<a href="http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.17.1949" class="urlextern" target="_blank" title="http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.17.1949" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow"> Encapsulation and Inheritance in Object-Oriented Programming Languages</a> &ndash; classic 1986 paper by Alan Snyder 
</p>

<p>
<a href="http://howtonode.org/traitsjs" class="urlextern" target="_blank" title="http://howtonode.org/traitsjs" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">How To Node article on Traits.js</a>
</p>

<p>
<a href="https://jetpack.mozillalabs.com/sdk/1.0b3/docs/packages/api-utils/docs/traits.html" class="urlextern" target="_blank" title="https://jetpack.mozillalabs.com/sdk/1.0b3/docs/packages/api-utils/docs/traits.html" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">Jetpack Traits</a>
</p>

<p>
<a href="doku.php%3Fid=strawman:syntax_for_efficient_traits.html" class="wikilink1" title="strawman:syntax_for_efficient_traits" onclick="return svchk()" onkeypress="return svchk()">syntax for efficient traits</a>
</p>

</div>

<!-- cachefile /usr/local/www/es-lang.org/wiki/data/cache/5/57d1d33e0b1017a284d9e095d86f394b.xhtml used -->
    <!-- wikipage stop -->
  </div>

  <div class="clearer">&nbsp;</div>

  
  <div class="stylefoot">

    <div class="meta">
      <div class="user">
              </div>
      <div class="doc">
        strawman/trait_composition_for_classes.txt &middot; Last modified: 2011/05/17 07:39 by markm      </div>
    </div>

   
    <div class="bar" id="bar_bottom">
      <div class="bar-left" id="bar_bottomleft">
        <form class="button" method="post" action="index.html" onsubmit="return svchk()"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="" /><input type="hidden" name="id" value="strawman:trait_composition_for_classes" /><input type="submit" value="Show pagesource" class="button" title="ALT+V" accesskey="v" /></form>        <form class="button" method="get" action="index.html" onsubmit="return svchk()"><input type="hidden" name="do" value="revisions" /><input type="hidden" name="id" value="strawman:trait_composition_for_classes" /><input type="submit" value="Old revisions" class="button" title="ALT+O" accesskey="o" /></form>      </div>
      <div class="bar-right" id="bar_bottomright">
                        <form class="button" method="get" action="index.html" onsubmit="return svchk()"><input type="hidden" name="do" value="login" /><input type="hidden" name="id" value="strawman:trait_composition_for_classes" /><input type="submit" value="Login" class="button" /></form>        <form class="button" method="get" action="index.html" onsubmit="return svchk()"><input type="hidden" name="do" value="index" /><input type="hidden" name="id" value="strawman:trait_composition_for_classes" /><input type="submit" value="Index" class="button" title="ALT+X" accesskey="x" /></form>        <a href="doku.php%3Fid=strawman:trait_composition_for_classes.html#top"><input type="button" class="button" value="Back to top" onclick="window.scrollTo(0, 0)" /></a>&nbsp;
      </div>
    </div>

  </div>

</div>

<div align="center" class="footerinc">
  <a target="_blank" href="feed.php" title="Recent changes RSS feed"><img src="lib/tpl/default/images/button-rss.png" width="80" height="15" alt="Recent changes RSS feed" border="0" /></a>

  <a target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/2.0/" rel="license" title="Creative Commons License"><img src="lib/tpl/default/images/button-cc.gif" width="80" height="15" alt="Creative Commons License" border="0" /></a>

  <a target="_blank" href="https://www.paypal.com/xclick/business=andi%40splitbrain.org&amp;item_name=DokuWiki+Donation&amp;no_shipping=1&amp;no_note=1&amp;tax=0&amp;currency_code=EUR&amp;lc=US" title="Donate"><img src="lib/tpl/default/images/button-donate.gif" alt="Donate" border="0" /></a>

  <a target="_blank" href="http://www.php.net" title="Powered by PHP"><img src="lib/tpl/default/images/button-php.gif" width="80" height="15" alt="Powered by PHP" border="0" /></a>

  <a target="_blank" href="http://validator.w3.org/check/referer" title="Valid XHTML 1.0"><img src="lib/tpl/default/images/button-xhtml.png" width="80" height="15" alt="Valid XHTML 1.0" border="0" /></a>

  <a target="_blank" href="http://jigsaw.w3.org/css-validator/check/referer" title="Valid CSS"><img src="lib/tpl/default/images/button-css.png" width="80" height="15" alt="Valid CSS" border="0" /></a>

  <a target="_blank" href="http://wiki.splitbrain.org/wiki:dokuwiki" title="Driven by DokuWiki"><img src="lib/tpl/default/images/button-dw.png" width="80" height="15" alt="Driven by DokuWiki" border="0" /></a>



<!--

<rdf:RDF xmlns="http://web.resource.org/cc/"
    xmlns:dc="http://purl.org/dc/elements/1.1/"
    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
<Work rdf:about="">
   <dc:type rdf:resource="http://purl.org/dc/dcmitype/Text" />
   <license rdf:resource="http://creativecommons.org/licenses/by-nc-sa/2.0/" />
</Work>

<License rdf:about="http://creativecommons.org/licenses/by-nc-sa/2.0/">
   <permits rdf:resource="http://web.resource.org/cc/Reproduction" />
   <permits rdf:resource="http://web.resource.org/cc/Distribution" />
   <requires rdf:resource="http://web.resource.org/cc/Notice" />
   <requires rdf:resource="http://web.resource.org/cc/Attribution" />
   <prohibits rdf:resource="http://web.resource.org/cc/CommercialUse" />
   <permits rdf:resource="http://web.resource.org/cc/DerivativeWorks" />
   <requires rdf:resource="http://web.resource.org/cc/ShareAlike" />
</License>

</rdf:RDF>

-->
</div>

<img src="lib/exe/indexer.php%3Fid=strawman%253Atrait_composition_for_classes&amp;1454275660" width="1" height="1" alt=""  /></body>
</html>
