<html>
<head>
  <meta name="generator" content="DokuWiki Release 2005-09-22e" />
  <link rel="start" href="index.html" />
  <link rel="contents" href="doku.php%3Fid=discussion:date_and_time&amp;do=index.html" title="" />
  <link rel="alternate" type="application/rss+xml" title="Recent Changes" href="feed.php" />
  <link rel="alternate" type="application/rss+xml" title="Current Namespace" href="feed.php%3Fmode=list&amp;ns=discussion" />
  <link rel="alternate" type="text/html" title="Plain HTML" href="doku.php%3Fid=discussion:date_and_time&amp;do=export_html.html" />
  <link rel="alternate" type="text/plain" title="Wiki Markup" href="doku.php%3Fid=discussion:date_and_time&amp;do=export_raw" />
  <link rel="stylesheet" media="screen" type="text/css" href="lib/styles/style.css" />
  <meta name="robots" content="noindex,nofollow" />
  <script language="javascript" type="text/javascript" charset="utf-8">
    var alertText   = 'Please enter the text you want to format.\nIt will be appended to the end of the document.'
    var notSavedYet = 'Unsaved changes will be lost.\nReally continue?'
    var DOKU_BASE   = '/'
  </script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/script.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/tw-sack.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/ajax.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/domLib.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/domTT.js"></script>
  <link rel="stylesheet" type="text/css" href="lib/plugins/plugin/style.css" />
</head>
<body>
<div class="toc">
<div class="tocheader"> <script type="text/javascript">showTocToggle("+","-")</script>Table of Contents</div>
<div id="tocinside">
<ul class="toc">
<li class="level1"><span class="li"><a href="doku.php%3Fid=discussion:date_and_time&amp;do=export_html.html#lack_of_historical_dst" class="toc">Lack of Historical DST</a></span></li>
<li class="level1"><span class="li"><a href="doku.php%3Fid=discussion:date_and_time&amp;do=export_html.html#discussion_of_new_proposal" class="toc">Discussion of new proposal</a></span></li>
<li class="level1"><span class="li"><a href="doku.php%3Fid=discussion:date_and_time&amp;do=export_html.html#discussion_of_older_proposals" class="toc">Discussion of older proposals</a></span><ul class="toc">
<li class="level2"><span class="li"><a href="doku.php%3Fid=discussion:date_and_time&amp;do=export_html.html#background" class="toc">Background</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=discussion:date_and_time&amp;do=export_html.html#proposal" class="toc">Proposal</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=discussion:date_and_time&amp;do=export_html.html#references" class="toc">References</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=discussion:date_and_time&amp;do=export_html.html#to_do_issues" class="toc">To do / Issues</a></span></li>
</ul>
</li>
</ul>
</div>
</div>

<p>
This is the discussion page for <a href="doku.php%3Fid=proposals:date_and_time.html" class="wikilink1" title="proposals:date_and_time" onclick="return svchk()" onkeypress="return svchk()">date_and_time</a>.
</p>

<a name="lack_of_historical_dst"></a><h1>Lack of Historical DST</h1>
<div class="level1">

<p>
 See <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=365349" class="urlextern" target="_blank" title="https://bugzilla.mozilla.org/show_bug.cgi?id=365349" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">Mozilla bug 365349</a>. Thanks to U.S. Representative Ed Markey, the U.S. is about to enter Daylight Savings Time  this weekend, three weeks early compared to last year. ES1-3 all say that DST computation depends on only four data: 
</p>
<ul>
<li class="level1"><div class="li"> the time since the beginning of the year,</div>
</li>
<li class="level1"><div class="li"> whether t is in a leap year,</div>
</li>
<li class="level1"><div class="li"> the week day of the beginning of the year, and</div>
</li>
<li class="level1"><div class="li"> the geographic location.</div>
</li>
</ul>

<p>
 This design, from my memory, assumed a more sane and stable DST regime. So according to the spec, I should find that noon on March 12, 2006 was in DST, just because noon this coming Monday is in DST. This is crazy, and of course all the browser engines rely on the <acronym title="Operating System">OS</acronym> for DST information, which <acronym title="As far as I know">AFAIK</acronym> will be historically accurate. We should do something in ES4 to conform to the <em>de facto</em> standard thereby created by <acronym title="Operating System">OS</acronym>-based browser Data implementations. Comments?
</p>

<p>
 &mdash; <em><a href="mailto:%26%23x62%3B%26%23x72%3B%26%23x65%3B%26%23x6e%3B%26%23x64%3B%26%23x61%3B%26%23x6e%3B%26%23x40%3B%26%23x6d%3B%26%23x6f%3B%26%23x7a%3B%26%23x69%3B%26%23x6c%3B%26%23x6c%3B%26%23x61%3B%26%23x2e%3B%26%23x6f%3B%26%23x72%3B%26%23x67%3B" class="mail" title="&#x62;&#x72;&#x65;&#x6e;&#x64;&#x61;&#x6e;&#x40;&#x6d;&#x6f;&#x7a;&#x69;&#x6c;&#x6c;&#x61;&#x2e;&#x6f;&#x72;&#x67;">Brendan Eich</a> 2007/03/11 00:58</em>
</p>

<p>
Logged in the trac as ticket 129: <a href="http://bugs.ecmascript-lang.org/ticket/129" class="urlextern" target="_blank" title="http://bugs.ecmascript-lang.org/ticket/129" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">http://bugs.ecmascript-lang.org/ticket/129</a>
</p>

<p>
 &mdash; <em><a href="mailto:%26%23x6c%3B%26%23x74%3B%26%23x68%3B%26%23x40%3B%26%23x61%3B%26%23x63%3B%26%23x6d%3B%26%23x2e%3B%26%23x6f%3B%26%23x72%3B%26%23x67%3B" class="mail" title="&#x6c;&#x74;&#x68;&#x40;&#x61;&#x63;&#x6d;&#x2e;&#x6f;&#x72;&#x67;">Lars T Hansen</a> 2007/07/17 12:39</em>
</p>

</div>
<!-- SECTION [64-1221] -->
<a name="discussion_of_new_proposal"></a><h1>Discussion of new proposal</h1>
<div class="level1">
<ul>
<li class="level1"><div class="li"> Why is there a need for a separate parsing function?  Which corner cases can&rsquo;t Date.parse handle (presumably for compatibility reasons)?</div>
</li>
<li class="level1"><div class="li"> Why is the + sign required to write dates beyond 9999 CE?  Is this an <acronym title="International Organization for Standardization">ISO</acronym> requirement?</div>
</li>
</ul>

<p>
  &mdash; <em><a href="mailto:%26%23x6c%3B%26%23x74%3B%26%23x68%3B%26%23x40%3B%26%23x6f%3B%26%23x70%3B%26%23x65%3B%26%23x72%3B%26%23x61%3B%26%23x2e%3B%26%23x63%3B%26%23x6f%3B%26%23x6d%3B" class="mail" title="&#x6c;&#x74;&#x68;&#x40;&#x6f;&#x70;&#x65;&#x72;&#x61;&#x2e;&#x63;&#x6f;&#x6d;">Lars T Hansen</a> 2006/09/27 07:40</em> 
</p>
<ul>
<li class="level1"><div class="li"> Date.toISO still leaves open the possibility of generating a prefix <code>+</code>, no doubt this is just a missing edit.</div>
</li>
<li class="level1"><div class="li"> I would prefer to see language that states that <acronym title="International Organization for Standardization">ISO</acronym> dates have precedence in Date.parse in cases of ambiguity, since Date.parse in practice will try to interpret anything.  (In fact 12/92/2003 is a valid date in most browsers (though not in Opera)). [<a href="http://bugs.ecmascript-lang.org/ticket/134" class="urlextern" target="_blank" title="http://bugs.ecmascript-lang.org/ticket/134" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">http://bugs.ecmascript-lang.org/ticket/134</a>]</div>
</li>
<li class="level1"><div class="li"> The error thrown on an invalid second argument to Date.parse needs to be specified.  I might propose introducing a DateParseError to cover this and the syntax error thrown by Date.parse if the format is incorrect, but (a) this seems like a lot and (b) I&rsquo;m not sure Date.parse <em>should</em> throw a SyntaxError, so perhaps just specify that Date.parse throws an <code>Error</code> if the second argument is invalid?</div>
</li>
<li class="level1"><div class="li"> It&rsquo;s incompatible with the rest of the language for Date.parse to throw an error if extraneous arguments are provided.  (No(?) other standard functions do this.)</div>
</li>
<li class="level1"><div class="li"> Date.parse can&rsquo;t return a <code>Date</code> object, since it does not do so in 3rd Edition.</div>
</li>
<li class="level1"><div class="li"> I think we&rsquo;re compatible with <acronym title="World Wide Web Consortium">W3C</acronym> time and date formats (<a href="http://www.w3.org/TR/NOTE-datetime" class="urlextern" target="_blank" title="http://www.w3.org/TR/NOTE-datetime" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">http://www.w3.org/TR/NOTE-datetime</a>) and webforms2 &ldquo;time&rdquo; input elements (<a href="http://whatwg.org/specs/web-forms/current-work/" class="urlextern" target="_blank" title="http://whatwg.org/specs/web-forms/current-work/" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">http://whatwg.org/specs/web-forms/current-work/</a>) but we should double-check that we are; no sense in being gratuitously incompatible for our major application area.</div>
</li>
</ul>

<p>
  &mdash; <em><a href="mailto:%26%23x6c%3B%26%23x74%3B%26%23x68%3B%26%23x40%3B%26%23x6f%3B%26%23x70%3B%26%23x65%3B%26%23x72%3B%26%23x61%3B%26%23x2e%3B%26%23x63%3B%26%23x6f%3B%26%23x6d%3B" class="mail" title="&#x6c;&#x74;&#x68;&#x40;&#x6f;&#x70;&#x65;&#x72;&#x61;&#x2e;&#x63;&#x6f;&#x6d;">Lars T Hansen</a> 2006/09/28 00:27</em>
</p>

</div>
<!-- SECTION [1222-2990] -->
<a name="discussion_of_older_proposals"></a><h1>Discussion of older proposals</h1>
<div class="level1">

</div>
<!-- SECTION [2991-3035] -->
<a name="background"></a><h2>Background</h2>
<div class="level2">

<p>
 Read <a href="http://jroller.com/page/cpurdy?entry=the_seven_habits_of_highly" class="urlextern" target="_blank" title="http://jroller.com/page/cpurdy?entry=the_seven_habits_of_highly" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">Cameron Purdy on java.util.Date and kin</a>.  Highlights: 
</p>
<ul>
<li class="level1"><div class="li"> &ldquo;First of all, java.util.Date is not a date! It is a data structure that contains both a date and a time! If you can&rsquo;t get the name right, it&rsquo;s a very bad omen.&rdquo;</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> &ldquo;All the properties have random offsets. Some are zero-based, such as month and hours. Some are one-based, such as day-of-the-month. Just to pay tribute to the century in which Java was born, the year has an offset of 1900. (&rsquo;That&rsquo;s soooo twentieth century!&rsquo;)&rdquo;</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> &ldquo;All the properties are settable. Whereas a String can be used as a value (i.e. it is immutable), a Date cannot be. That means that any property of type Date (or of type Date, Time or Timestamp) needs to be cloned when being returned from an accessor, etc. Now one might assume that Date has a reason to be mutable, but in the past 10 years, I have yet to &lsquo;set&rsquo; anything on a Date object.&rdquo;</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> &ldquo;Date itself has a fixed precision: Milliseconds. In a few years, a millisecond will be as long (to a computer) as a second is today. The concept of clock granularity could have been completely (or at least mostly) hidden by the <acronym title="Application Programming Interface">API</acronym>.&rdquo;</div>
</li>
</ul>

<p>
 ECMA-262 Edition 1 just spackled over these flaws, fixing the domain (which was badly broken in extant JS1 implementations) to use an &ldquo;extrapolated Gregorian&rdquo; calendar.  The Y2K bugs were moved to an informative appendix, but alas web pages still use them, and browser implementations still do not agree on how they work in the new millennium!
</p>

</div>
<!-- SECTION [3036-4609] -->
<a name="proposal"></a><h2>Proposal</h2>
<div class="level2">

<p>
 This will be brief: 
</p>
<ul>
<li class="level1"><div class="li"> Support properties for the <code>get/set</code> method pairs.  A no-brainer, even if no one ever &ldquo;sets&rdquo;. <img src="lib/images/smileys/icon_razz.gif" align="middle" alt=":-P" /></div>
</li>
<li class="level1"><div class="li"> Add <a href="http://en.wikipedia.org/wiki/ISO_8601" class="urlextern" target="_blank" title="http://en.wikipedia.org/wiki/ISO_8601" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">ISO 8601</a> Date format support.  It&rsquo;s a well-known and much-used standard.  </div>
</li>
<li class="level1"><div class="li"> Add <code>Date.now():double</code> as a standard way to get the time in milliseconds since the epoch.</div>
</li>
<li class="level1"><div class="li"> Add a <code>Date.nanoAge():double</code> method that returns the number of nanoseconds since the method&rsquo;s object was constructed. This number has varying precision from one platform to another, and will slowly lose precision (after 104 days it can only possibly be precise to within 2 nanoseconds).</div>
</li>
<li class="level1"><div class="li"> After this, I move we declare victory through minimalism and let the ecosystem take care of business. <img src="lib/images/smileys/icon_wink.gif" align="middle" alt=";-)" /></div>
</li>
</ul>

<p>
  &mdash; <em><a href="mailto:%26%23x62%3B%26%23x72%3B%26%23x65%3B%26%23x6e%3B%26%23x64%3B%26%23x61%3B%26%23x6e%3B%26%23x40%3B%26%23x6d%3B%26%23x6f%3B%26%23x7a%3B%26%23x69%3B%26%23x6c%3B%26%23x6c%3B%26%23x61%3B%26%23x2e%3B%26%23x6f%3B%26%23x72%3B%26%23x67%3B" class="mail" title="&#x62;&#x72;&#x65;&#x6e;&#x64;&#x61;&#x6e;&#x40;&#x6d;&#x6f;&#x7a;&#x69;&#x6c;&#x6c;&#x61;&#x2e;&#x6f;&#x72;&#x67;">Brendan Eich</a> 2006/02/28 23:32</em>
</p>

<p>
Here&rsquo;s CLI DateTime description <a href="http://msdn.microsoft.com/library/en-us/cpref/html/frlrfsystemdatetimeclasstopic.asp?frame=true" class="urlextern" target="_blank" title="http://msdn.microsoft.com/library/en-us/cpref/html/frlrfsystemdatetimeclasstopic.asp?frame=true" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">MSDN DateTime Topic</a>
</p>

<p>
 &mdash; <em><a href="mailto:%26%23x72%3B%26%23x6f%3B%26%23x6b%3B%26%23x79%3B%26%23x75%3B%26%23x40%3B%26%23x6d%3B%26%23x69%3B%26%23x63%3B%26%23x72%3B%26%23x6f%3B%26%23x73%3B%26%23x6f%3B%26%23x66%3B%26%23x74%3B%26%23x2e%3B%26%23x63%3B%26%23x6f%3B%26%23x6d%3B" class="mail" title="&#x72;&#x6f;&#x6b;&#x79;&#x75;&#x40;&#x6d;&#x69;&#x63;&#x72;&#x6f;&#x73;&#x6f;&#x66;&#x74;&#x2e;&#x63;&#x6f;&#x6d;">Rok Yu</a> 2006/03/17 16:04</em>
</p>

</div>
<!-- SECTION [4610-5659] -->
<a name="references"></a><h2>References</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> <acronym title="World Wide Web Consortium">W3C</acronym> dates: <a href="http://www.w3.org/TR/NOTE-datetime" class="urlextern" target="_blank" title="http://www.w3.org/TR/NOTE-datetime" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">http://www.w3.org/TR/NOTE-datetime</a></div>
</li>
<li class="level1"><div class="li"> <acronym title="International Organization for Standardization">ISO</acronym> dates: <a href="http://www.cl.cam.ac.uk/~mgk25/iso-time.html" class="urlextern" target="_blank" title="http://www.cl.cam.ac.uk/~mgk25/iso-time.html" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">http://www.cl.cam.ac.uk/~mgk25/iso-time.html</a> </div>
</li>
<li class="level1"><div class="li"> <a href="http://www.imc.org/atom-syntax/mail-archive/msg13103.html" class="urlextern" target="_blank" title="http://www.imc.org/atom-syntax/mail-archive/msg13103.html" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">http://www.imc.org/atom-syntax/mail-archive/msg13103.html</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://www.faqs.org/rfcs/rfc3339.html" class="urlextern" target="_blank" title="http://www.faqs.org/rfcs/rfc3339.html" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">http://www.faqs.org/rfcs/rfc3339.html</a></div>
</li>
</ul>

</div>
<!-- SECTION [5660-5899] -->
<a name="to_do_issues"></a><h2>To do / Issues</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> There&rsquo;s no way to specify dates before year 1.  <a href="http://books.xmlschemata.org/relaxng/ch19-77049.html" class="urlextern" target="_blank" title="http://books.xmlschemata.org/relaxng/ch19-77049.html" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">xsd:dateTime</a> allows a leading <code>-</code> to specify this.  Need to check what ISO8601/RFC3339 say.</div>
<ul>
<li class="level2"><div class="li"> ISO8601 permits years before year 0 by providing a leading -. It also permits years after 9999 using a leading +.</div>
</li>
<li class="level2"><div class="li"> RFC3339 is a subset (profile) of ISO8601, and does not permit years before year 0, nor after 9999.</div>
</li>
<li class="level2"><div class="li"> We need to support extended dates if we want to comply with the range of dates representable by ECMA-262-3, using <code>double</code> values of milliseconds. </div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> There are open issues on default values for missing fields, as outlined above.</div>
<ul>
<li class="level2"><div class="li"> A flexible approach that permits local default <em>or</em> fixed defaults is to be provided.</div>
</li>
</ul>
</li>
</ul>

</div>
<!-- SECTION [5900-] -->
<!-- cachefile /usr/local/www/es-lang.org/wiki/data/cache/0/0b3cccbb88480b7628ce2bbd294155d4.xhtml used -->
</body>
</html>
