<html>
<head>
  <meta name="generator" content="DokuWiki Release 2005-09-22e" />
  <link rel="start" href="index.html" />
  <link rel="contents" href="doku.php%3Fid=harmony:iterators&amp;do=index.html" title="" />
  <link rel="alternate" type="application/rss+xml" title="Recent Changes" href="feed.php" />
  <link rel="alternate" type="application/rss+xml" title="Current Namespace" href="http://wiki.ecmascript.org/feed.php?mode=list&amp;ns=harmony" />
  <link rel="alternate" type="text/html" title="Plain HTML" href="doku.php%3Fid=harmony:iterators&amp;do=export_html.html" />
  <link rel="alternate" type="text/plain" title="Wiki Markup" href="doku.php%3Fid=harmony:iterators&amp;do=export_raw" />
  <link rel="stylesheet" media="screen" type="text/css" href="lib/styles/style.css" />
  <meta name="robots" content="noindex,nofollow" />
  <script language="javascript" type="text/javascript" charset="utf-8">
    var alertText   = 'Please enter the text you want to format.\nIt will be appended to the end of the document.'
    var notSavedYet = 'Unsaved changes will be lost.\nReally continue?'
    var DOKU_BASE   = '/'
  </script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/script.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/tw-sack.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/ajax.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/domLib.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/domTT.js"></script>
  <link rel="stylesheet" type="text/css" href="lib/plugins/plugin/style.css" />
</head>
<body>
<div class="toc">
<div class="tocheader"> <script type="text/javascript">showTocToggle("+","-")</script>Table of Contents</div>
<div id="tocinside">
<ul class="toc">
<li class="level1"><span class="li"><a href="doku.php%3Fid=harmony:iterators&amp;do=export_html.html#overview" class="toc">Overview</a></span></li>
<li class="level1"><span class="li"><a href="doku.php%3Fid=harmony:iterators&amp;do=export_html.html#examples" class="toc">Examples</a></span></li>
<li class="level1"><span class="li"><a href="doku.php%3Fid=harmony:iterators&amp;do=export_html.html#iteration" class="toc">Iteration</a></span><ul class="toc">
<li class="level2"><span class="li"><a href="doku.php%3Fid=harmony:iterators&amp;do=export_html.html#iterator_objects" class="toc">Iterator objects</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=harmony:iterators&amp;do=export_html.html#the_.iterator_method" class="toc">The .iterator method</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=harmony:iterators&amp;do=export_html.html#stopiteration" class="toc">StopIteration</a></span></li>
</ul>
</li>
<li class="level1"><span class="li"><a href="doku.php%3Fid=harmony:iterators&amp;do=export_html.html#iteration_semantics" class="toc">Iteration semantics</a></span><ul class="toc">
<li class="level2"><span class="li"><a href="doku.php%3Fid=harmony:iterators&amp;do=export_html.html#evaluation_of_for-of_loops" class="toc">Evaluation of for-of loops</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=harmony:iterators&amp;do=export_html.html#for-of_loop_bodies" class="toc">for-of loop bodies</a></span></li>
</ul>
</li>
<li class="level1"><span class="li"><a href="doku.php%3Fid=harmony:iterators&amp;do=export_html.html#builtin_iterators" class="toc">Builtin iterators</a></span><ul class="toc">
<li class="level2"><span class="li"><a href="doku.php%3Fid=harmony:iterators&amp;do=export_html.html#iterator_objects" class="toc">Iterator objects</a></span><ul class="toc">
<li class="level3"><span class="li"><a href="doku.php%3Fid=harmony:iterators&amp;do=export_html.html#iterator.prototype" class="toc">Iterator.prototype</a></span></li>
<li class="level3"><span class="li"><a href="doku.php%3Fid=harmony:iterators&amp;do=export_html.html#iterator.prototype.iterator" class="toc">Iterator.prototype.iterator()</a></span></li>
</ul>
</li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=harmony:iterators&amp;do=export_html.html#array_iterators" class="toc">Array iterators</a></span><ul class="toc">
<li class="level3"><span class="li"><a href="doku.php%3Fid=harmony:iterators&amp;do=export_html.html#array.prototype.iterator" class="toc">Array.prototype.iterator()</a></span></li>
<li class="level3"><span class="li"><a href="doku.php%3Fid=harmony:iterators&amp;do=export_html.html#the_arrayiteratorprototype_object" class="toc">The [[ArrayIteratorPrototype]] object</a></span></li>
<li class="level3"><span class="li"><a href="doku.php%3Fid=harmony:iterators&amp;do=export_html.html#arrayiteratorprototype_.next" class="toc">[[ArrayIteratorPrototype]].next()</a></span></li>
</ul>
</li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=harmony:iterators&amp;do=export_html.html#string_iterators" class="toc">String iterators</a></span><ul class="toc">
<li class="level3"><span class="li"><a href="doku.php%3Fid=harmony:iterators&amp;do=export_html.html#string.prototype.iterator" class="toc">String.prototype.iterator()</a></span></li>
<li class="level3"><span class="li"><a href="doku.php%3Fid=harmony:iterators&amp;do=export_html.html#the_stringiteratorprototype_object" class="toc">The [[StringIteratorPrototype]] object</a></span></li>
<li class="level3"><span class="li"><a href="doku.php%3Fid=harmony:iterators&amp;do=export_html.html#stringiteratorprototype_.next" class="toc">[[StringIteratorPrototype]].next()</a></span></li>
</ul>
</li>
</ul>
</li>
<li class="level1"><span class="li"><a href="doku.php%3Fid=harmony:iterators&amp;do=export_html.html#standard_api" class="toc">Standard API</a></span></li>
<li class="level1"><span class="li"><a href="doku.php%3Fid=harmony:iterators&amp;do=export_html.html#rationale" class="toc">Rationale</a></span></li>
<li class="level1"><span class="li"><a href="doku.php%3Fid=harmony:iterators&amp;do=export_html.html#resolved_issues" class="toc">Resolved Issues</a></span></li>
<li class="level1"><span class="li"><a href="doku.php%3Fid=harmony:iterators&amp;do=export_html.html#discussion" class="toc">Discussion</a></span></li>
</ul>
</div>
</div>

<a name="overview"></a><h1>Overview</h1>
<div class="level1">

<p>
 <strong>This proposal has progressed to the Draft ECMAScript 6 Specification, which is available for review here: <a href="doku.php%3Fid=harmony:specification_drafts.html" class="wikilink1" title="harmony:specification_drafts" onclick="return svchk()" onkeypress="return svchk()">specification_drafts</a>. Any new issues relating to them should be filed as bugs at <a href="http://bugs.ecmascript.org" class="urlextern" target="_blank" title="http://bugs.ecmascript.org" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">http://bugs.ecmascript.org</a>. The content on this page is for historic record only and may no longer reflect the current state of the feature described within.</strong>
</p>

<p>
 The <code>for</code>-<code>in</code> loop is ECMAScript&rsquo;s convenient mechanism for doing iteration. However, several factors combine to make it inconvenient for general-purpose iteration. 
</p>
<ul>
<li class="level1"><div class="li"> <code>for-in</code> loops iterate over the names of enumerable properties. However properties are not the only type of data set one might want to iterate over.</div>
</li>
<li class="level1"><div class="li"> Iterating over an array does not produce each value, but each array index, represented as a string.</div>
</li>
<li class="level1"><div class="li"> If an enumerable property is added to Object.prototype, for-in loops visit it.</div>
</li>
<li class="level1"><div class="li"> Several aspects of <code>for-in</code> are unspecified in ECMA-262 Edition 5, including the order in which properties are visited.</div>
</li>
<li class="level1"><div class="li"> The behavior of <code>for-in</code> is not conveniently customizable. If <code>X</code> is an object representing a binary tree, for example, there is no way to customize <code>X</code> so that <code>for (v in X)</code> instead iterates over all the nodes in the tree. It visits all the enumerable properties of <code>X</code>.</div>
</li>
</ul>

<p>
 This proposal generalizes the behavior of <code>for</code>-<code>in</code> to obey user-specified iteration protocols via an iteration hook. To preserve compatibility, we add an alternative preposition <code>of</code>, a contextual keyword usable in place of <code>in</code>. This generalization allows the use of <code>for</code>-<code>of</code> loops for custom iterations, providing concise, readable traversals of user-specified data structures and computed value streams.
</p>

<p>
The same <code>of</code> contextual keyword can be used in place of <code>in</code> in <a href="doku.php%3Fid=harmony:array_comprehensions.html" class="wikilink1" title="harmony:array_comprehensions" onclick="return svchk()" onkeypress="return svchk()">array comprehensions</a> and <a href="doku.php%3Fid=harmony:generator_expressions.html" class="wikilink1" title="harmony:generator_expressions" onclick="return svchk()" onkeypress="return svchk()">generator expressions</a>.
</p>

</div>
<!-- SECTION [1-1889] -->
<a name="examples"></a><h1>Examples</h1>
<div class="level1">

<p>
 Conveniently iterate over data in Arrays, Sets, and Maps:
</p>
<pre class="code javascript"><span class="kw1">for</span> <span class="br0">&#40;</span>word of <span class="br0">&#91;</span><span class="st0">"one"</span>, <span class="st0">"two"</span>, <span class="st0">"three"</span><span class="br0">&#93;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw3">alert</span><span class="br0">&#40;</span>word<span class="br0">&#41;</span>;
<span class="br0">&#125;</span>
&nbsp;
<span class="kw2">var</span> s = Set<span class="br0">&#40;</span><span class="br0">&#91;</span><span class="nu0">1</span>, <span class="nu0">3</span>, <span class="nu0">4</span>, <span class="nu0">2</span>, <span class="nu0">3</span>, <span class="nu0">2</span>, <span class="nu0">17</span>, <span class="nu0">17</span>, <span class="nu0">1</span>, <span class="nu0">17</span><span class="br0">&#93;</span><span class="br0">&#41;</span>;
<span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw2">var</span> v of s<span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw3">alert</span><span class="br0">&#40;</span>v<span class="br0">&#41;</span>;
<span class="br0">&#125;</span>
&nbsp;
<span class="co1">// Iterating over a Map produces key-value pairs: arrays of length 2.</span>
<span class="kw2">var</span> m = <span class="kw2">new</span> Map;
m.<span class="me1">set</span><span class="br0">&#40;</span><span class="st0">"one"</span>, <span class="nu0">1</span><span class="br0">&#41;</span>;
m.<span class="me1">set</span><span class="br0">&#40;</span><span class="st0">"two"</span>, <span class="nu0">2</span><span class="br0">&#41;</span>;
<span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw2">var</span> <span class="br0">&#91;</span><span class="kw3">name</span>, value<span class="br0">&#93;</span> of m<span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw3">alert</span><span class="br0">&#40;</span><span class="kw3">name</span> + <span class="st0">" = "</span> + value<span class="br0">&#41;</span>;
<span class="br0">&#125;</span></pre>
<p>
<code>for-of</code> is available in array comprehensions. This makes it easy to convert any iterable object to an Array:
</p>
<pre class="code javascript"><span class="co1">// Make a large Set of strings.</span>
<span class="kw2">var</span> words = <span class="kw2">new</span> Set<span class="br0">&#40;</span>document.<span class="me1">body</span>.<span class="me1">textContent</span>.<span class="me1">split</span><span class="br0">&#40;</span><span class="re0">/\s+/</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;
&nbsp;
<span class="co1">// Convert it to an Array and sort the strings.</span>
<span class="kw2">var</span> arr = <span class="br0">&#91;</span>w <span class="kw1">for</span> w of words<span class="br0">&#93;</span>;
arr.<span class="me1">sort</span><span class="br0">&#40;</span><span class="br0">&#41;</span>;</pre>
<p>
Visit the keys of a JSON object:
</p>
<pre class="code javascript"><span class="kw2">var</span> obj = JSON.<span class="me1">parse</span><span class="br0">&#40;</span>json_data<span class="br0">&#41;</span>;
<span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw3">name</span> of Object.<span class="me1">keys</span><span class="br0">&#40;</span>obj<span class="br0">&#41;</span><span class="br0">&#41;</span>
    <span class="kw3">alert</span><span class="br0">&#40;</span><span class="kw3">name</span> + <span class="st0">": "</span> + obj<span class="br0">&#91;</span><span class="kw3">name</span><span class="br0">&#93;</span><span class="br0">&#41;</span>;</pre>
<p>
An object is iterable if it has an <code>iterator()</code> method.
</p>

<p>
<code>for-of</code> simply calls the <code>iterator()</code> method to produce an iterator, then repeatedly calls the iterator&rsquo;s <code>.next()</code> method to produce values.
</p>
<pre class="code javascript"><span class="kw2">function</span> MyCollection<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">this</span>.<span class="me1">elements</span> = <span class="br0">&#91;</span><span class="br0">&#93;</span>;
<span class="br0">&#125;</span>
&nbsp;
MyCollection.<span class="me1">prototype</span> = <span class="br0">&#123;</span>
    add: <span class="kw2">function</span><span class="br0">&#40;</span>x<span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="kw1">this</span>.<span class="me1">elements</span>.<span class="me1">push</span><span class="br0">&#40;</span>x<span class="br0">&#41;</span> <span class="br0">&#125;</span>,
    iterator: <span class="kw2">function</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="kw1">return</span> <span class="br0">&#123;</span>
            elements: <span class="kw1">this</span>.<span class="me1">elements</span>,
            index: <span class="nu0">0</span>,
            next: <span class="kw2">function</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
                <span class="kw1">if</span> <span class="br0">&#40;</span><span class="kw1">this</span>.<span class="me1">index</span> &gt;= <span class="kw1">this</span>.<span class="me1">elements</span>.<span class="me1">length</span><span class="br0">&#41;</span>
                    <span class="kw1">throw</span> StopIteration;
                <span class="kw1">return</span> <span class="kw1">this</span>.<span class="me1">elements</span><span class="br0">&#91;</span><span class="kw1">this</span>.<span class="me1">index</span>++<span class="br0">&#93;</span>
            <span class="br0">&#125;</span>
        <span class="br0">&#125;</span>
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span>;</pre>
<p>
A higher-order function that operates on iterables:
</p>
<pre class="code javascript"><span class="kw2">function</span> lazyFilter<span class="br0">&#40;</span>predicate, data<span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">return</span> <span class="br0">&#123;</span>
        sourceIter: data.<span class="me1">iterator</span><span class="br0">&#40;</span><span class="br0">&#41;</span>,
        iterator: <span class="kw2">function</span> <span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="kw1">return</span> <span class="kw1">this</span>; <span class="br0">&#125;</span>,
        next: <span class="kw2">function</span> <span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
            <span class="kw2">var</span> <span class="kw1">item</span>;
            <span class="kw1">do</span> <span class="br0">&#123;</span>
                <span class="kw1">item</span> = <span class="kw1">this</span>.<span class="me1">sourceIter</span>.<span class="me1">next</span><span class="br0">&#40;</span><span class="br0">&#41;</span>;
            <span class="br0">&#125;</span> <span class="kw1">while</span> <span class="br0">&#40;</span>!predicate<span class="br0">&#40;</span><span class="kw1">item</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;
            <span class="kw1">return</span> <span class="kw1">item</span>;
        <span class="br0">&#125;</span>
    <span class="br0">&#125;</span>;
<span class="br0">&#125;</span></pre>
<p>
Iterators, <code>for-of</code>, and generators are designed to work together. Another way to write the above function is:
</p>
<pre class="code javascript"><span class="kw2">function</span>* lazyFilter<span class="br0">&#40;</span>predicate, data<span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw2">var</span> <span class="kw1">item</span> of data<span class="br0">&#41;</span>
        <span class="kw1">if</span> <span class="br0">&#40;</span>predicate<span class="br0">&#40;</span><span class="kw1">item</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
            yield <span class="kw1">item</span>;
<span class="br0">&#125;</span></pre>
<p>
And the previous example:
</p>
<pre class="code javascript"><span class="kw2">function</span> MyCollection<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">this</span>.<span class="me1">elements</span> = <span class="br0">&#91;</span><span class="br0">&#93;</span>;
<span class="br0">&#125;</span>
&nbsp;
MyCollection.<span class="me1">prototype</span> = <span class="br0">&#123;</span>
    add: <span class="kw2">function</span><span class="br0">&#40;</span>x<span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="kw1">this</span>.<span class="me1">elements</span>.<span class="me1">push</span><span class="br0">&#40;</span>x<span class="br0">&#41;</span> <span class="br0">&#125;</span>,
    iterator: <span class="kw2">function</span>*<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw2">var</span> i = <span class="nu0">0</span>; i &lt; <span class="kw1">this</span>.<span class="me1">elements</span>.<span class="me1">length</span>; i++<span class="br0">&#41;</span>
            yield <span class="kw1">this</span>.<span class="me1">elements</span><span class="br0">&#91;</span>i<span class="br0">&#93;</span>;
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span>;</pre>
<p>
<code>Array.prototype.iterator</code> is generic; it will work on any object that has a <code>.length</code> property and elements. So a program can &ldquo;monkey-patch&rdquo; existing objects to make them iterable:
</p>
<pre class="code javascript"><span class="co1">// Make DOM NodeLists iterable.</span>
NodeList.<span class="me1">prototype</span>.<span class="me1">iterator</span> = Array.<span class="me1">prototype</span>.<span class="me1">iterator</span>;</pre>
<p>
Of course it is hoped that such hacks will not be necessary very often.
</p>

</div>
<!-- SECTION [1890-4857] -->
<a name="iteration"></a><h1>Iteration</h1>
<div class="level1">

<p>
 Unlike <code>for</code>-<code>in</code>, the <code>for</code>-<code>of</code> mechanism is intended to be extensible with custom iteration behavior.
</p>

</div>
<!-- SECTION [4858-4997] -->
<a name="iterator_objects"></a><h2>Iterator objects</h2>
<div class="level2">

<p>
 In the terminology of this proposal, an <em>iterator</em> is any object of the following form:
</p>
<pre class="code javascript"><span class="br0">&#123;</span> next: <span class="kw2">function</span><span class="br0">&#40;</span><span class="br0">&#41;</span> -&gt; any <span class="br0">&#125;</span></pre>
<p>
An object is <em>iterable</em> if it is of the following form:
</p>
<pre class="code javascript"><span class="br0">&#123;</span> iterator: <span class="kw2">function</span><span class="br0">&#40;</span><span class="br0">&#41;</span> -&gt; iterator <span class="br0">&#125;</span></pre>
</div>
<!-- SECTION [4998-5299] -->
<a name="the_.iterator_method"></a><h2>The .iterator method</h2>
<div class="level2">

<p>
 The <code>for</code>-<code>of</code> loop syntax supports custom iteration behavior. When <code>for (V of OBJ) STMT</code> executes, first <code>OBJ</code> is evaluated, then an implicit call to <code>OBJ.iterator()</code> occurs. This method is expected to return an iterator. (This is exactly analogous to the implicit call to <code>obj.__iter__()</code> in Python&rsquo;s <code>for</code> loop, or the implicit call to <code>obj.iterator()</code> in Java&rsquo;s enhanced <code>for</code> loop.)
</p>

<p>
Arrays, Maps, Sets, and strings are iterable exactly because there are builtin methods Array.prototype.iterator, Map.prototype.iterator, Set.prototype.iterator, and String.prototype.iterator.
</p>

<p>
Proxies do not have any special hooks to support iteration. The loop <code>for (V of OBJ)</code> treats <code>OBJ</code> exactly the same whether it is a proxy or not. The proxy handler will receive a <code>get</code> trap for the <code>&ldquo;iterator&rdquo;</code> property, just like any other property access.
</p>

</div>
<!-- SECTION [5300-6204] -->
<a name="stopiteration"></a><h2>StopIteration</h2>
<div class="level2">

<p>
 There is a special &ldquo;StopIteration&rdquo; [[Class]] recognized by the <code>for</code>-<code>of</code> loop semantics. When the <code>next</code> method of the <code>iterate</code> trap throws an exception, if the exception is an object whose [[Class]] is &ldquo;StopIteration&rdquo;, the loop terminates normally. The exception is not propagated.
</p>

<p>
There is a standard variable <code>StopIteration</code> that is bound to an object of [[Class]] &ldquo;StopIteration&rdquo;.
</p>

<p>
<em><strong>TODO</strong></em>: <code>StopIteration</code> as a constructor, for compatibility with <a href="doku.php%3Fid=harmony:generators.html" class="wikilink1" title="harmony:generators" onclick="return svchk()" onkeypress="return svchk()">generators</a> that return values
</p>

</div>
<!-- SECTION [6205-6763] -->
<a name="iteration_semantics"></a><h1>Iteration semantics</h1>
<div class="level1">

<p>
 <strong>Note</strong>: assignments containing a question mark are eliding a simple error propagation, i.e.:
</p>

<p>
    Let x ?= e
</p>

<p>
and
</p>

<p>
    x :?= e
</p>

<p>
are shorthand for:
</p>

<p>
    Let x = e <br/>
     If <em>IsError</em>(x) Return x
</p>

<p>
and
</p>

<p>
    x := e <br/>
     If <em>IsError</em>(x) Return x
</p>

<p>
respectively.
</p>

</div>
<!-- SECTION [6764-7111] -->
<a name="evaluation_of_for-of_loops"></a><h2>Evaluation of for-of loops</h2>
<div class="level2">

<p>
 <u><strong>Operation</strong> <em>Eval</em>(IterationStatement &rarr; for (LHSExpression of Expression) Statement)</u>
</p>

<p>
Return <em>ForOfLoop</em>(LHSExpression, Expression, Statement, IterationStatement.labels)
</p>

<p>
<u><strong>Operation</strong> <em>Eval</em>(IterationStatement &rarr; for (VarDeclarationNoIn of Expression) Statement)</u>
</p>

<p>
Let varName = <em>Eval</em>(VarDeclarationNoIn) <br/>
 Let var = IdentifierReference(varName) <br/>
 Return <em>ForOfLoop</em>(var, Expression, Statement, IterationStatement.labels)
</p>

</div>
<!-- SECTION [7112-7604] -->
<a name="for-of_loop_bodies"></a><h2>for-of loop bodies</h2>
<div class="level2">

<p>
 Note: The semantics here have been rewritten to use the <code>.iterator</code> and <code>.next</code> methods. Previously the semantics used an <code>iterate</code> trap, now gone. <em>&ndash; Jason Orendorff 6/19/2012.</em>
</p>

<p>
<u><strong>Operation</strong> <em>ForOfLoop</em>(LHS, Expression, Statement, labels)</u>
</p>

<p>
Let expr ?= <em>Eval</em>(Expression) <br/>
 Let obj ?= <em>ToObject</em>(expr.value) <br/>
 Let iteratorMethod ?= obj.[[Get]](&quot;iterator&quot;) <br/>
 Let iterator ?= iteratorMethod.[[Call]](obj, []) <br/>
 Let V = <strong>empty</strong> <br/>
 Repeat <br/>
     Let nextMethod ?= iterator.[[Get]](&quot;next&quot;) <br/>
     Let nextResult = nextMethod.[[Call]](iterator, []) <br/>
     If <em>IsError</em>(nextResult) <br/>
         If <em>IsObject</em>(nextResult.value) and nextResult.value.[[Class]] = &ldquo;StopIteration&rdquo; <br/>
             Return (type=<strong>normal</strong>, value=V, target=<strong>empty</strong>) <br/>
         Return nextResult <br/>
     Let lhsRef ?= <em>Eval</em>(LHS) <br/>
     Let put ?= <em>PutValue</em>(lhsRef, nextResult.value) <br/>
     Let stmt ?= <em>Eval</em>(Statement) <br/>
     If stmt.value != <strong>empty</strong> <br/>
         V := stmt.value <br/>
     If stmt.type = <strong>break</strong> <br/>
         If stmt.targets ∈ labels <br/>
             Return (type=<strong>normal</strong>, value=V, target=<strong>empty</strong>) <br/>
         Return stmt <br/>
     If stmt.type = <strong>continue</strong> &amp;&amp; stmt.target ∉ labels <br/>
         Return stmt <br/>

</p>

<p>
<em><strong>TODO</strong></em>: The semantics of a <code>for</code>-<code>of</code> loop where the LHS is bound with <code>let</code> ought to bind the left-hand-side <em>inside</em> the loop instead of <em>outside</em> the loop, so each iteration gets a fresh binding. (See SpiderMonkey <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=449811" class="urlextern" target="_blank" title="https://bugzilla.mozilla.org/show_bug.cgi?id=449811" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">bug 449811</a>.)
</p>

<p>
<em><strong>TODO</strong></em>: The paren-free proposal had <code>for</code>-<code>in</code> automatically <code>let</code>-bound, with no explicit <code>let</code>/<code>var</code>/<code>const</code> keyword. This is an option for <code>for</code>-<code>of</code> as well. This would make it so that iteration <em>only</em> uses binding semantics, <em>never</em> assignment semantics.
</p>

</div>
<!-- SECTION [7605-9699] -->
<a name="builtin_iterators"></a><h1>Builtin iterators</h1>
<div class="level1">

<p>
 <code>Array</code>, <code>Map</code>, <code>Set</code>, and <code>String</code> objects each have an <code>iterator</code> method that returns a new iterator each time it is called.
</p>

</div>
<!-- SECTION [9700-9870] -->
<a name="iterator_objects"></a><h2>Iterator objects</h2>
<div class="level2">

</div>
<!-- SECTION [9871-9900] -->
<a name="iterator.prototype"></a><h3>Iterator.prototype</h3>
<div class="level3">

<p>
 The initial value of <code>Iterator.prototype</code> is the standard built-in Iterator prototype object, an object with the internal properties { [[NativeBrand]]: NativeIterator, [[Prototype]]: the standard built-in Object prototype object } and the <code>.iterator</code> method below.
</p>

<p>
This property has the attributes { [[Writable]]: <strong>false</strong>, [[Enumerable]]: <strong>false</strong>, [[Configurable]]: <strong>false</strong> }.
</p>

</div>
<!-- SECTION [9901-10339] -->
<a name="iterator.prototype.iterator"></a><h3>Iterator.prototype.iterator()</h3>
<div class="level3">
<ol>
<li class="level1"><div class="li"> Return <strong>this</strong>.</div>
</li>
</ol>

</div>
<!-- SECTION [10340-10402] -->
<a name="array_iterators"></a><h2>Array iterators</h2>
<div class="level2">

<p>
 <code>Array.prototype.iterator</code> works approximately like this: 
</p>
<pre class="code">  Array.prototype.iterator = function* iterator() {
      for (var i = 0; i &lt; (this.length &gt;&gt;&gt; 0); i++)
          yield this[i];
  };</pre>

<p>
 However this is only approximate. Array iterator objects are not generator-iterators.
</p>

</div>
<!-- SECTION [10403-10722] -->
<a name="array.prototype.iterator"></a><h3>Array.prototype.iterator()</h3>
<div class="level3">

<p>
 The following steps are taken: 
</p>
<ol>
<li class="level1"><div class="li"> Let <em>obj</em> = the <strong>this</strong> value.</div>
</li>
<li class="level1"><div class="li"> Return a new object with the internal properties {[[NativeBrand]]: NativeArrayIterator, [[Prototype]]: the [[ArrayIteratorPrototype]] object, [[Target]]: <em>obj</em>, [[Index]]: <strong>0</strong>}.</div>
</li>
</ol>

<p>
 NOTE This <code>iterator</code> function is intentionally generic.
</p>

</div>
<!-- SECTION [10723-11096] -->
<a name="the_arrayiteratorprototype_object"></a><h3>The [[ArrayIteratorPrototype]] object</h3>
<div class="level3">

<p>
 The [[ArrayIteratorPrototype]] object is a unique (per global) object. Initially it has the internal properties {[[NativeBrand]]: NativeArrayIterator, [[Prototype]]: the initial value of <code>Iterator.prototype</code>, [[Target]]: <strong>undefined</strong>, [[Index]]: <strong>undefined</strong>} and the <code>next</code> method described below.
</p>

</div>
<!-- SECTION [11097-11473] -->
<a name="arrayiteratorprototype_.next"></a><h3>[[ArrayIteratorPrototype]].next()</h3>
<div class="level3">

<p>
 The following steps are taken:
</p>
<ol>
<li class="level1"><div class="li"> Let <em>iter</em> = <strong>this</strong>.</div>
</li>
<li class="level1"><div class="li"> If <em>iter</em>.[[NativeBrand]] is not <strong>ArrayIterator</strong>, throw a TypeError.</div>
</li>
<li class="level1"><div class="li"> Let <em>result</em> = ArrayIteratorNext(<em>iter</em>).</div>
</li>
<li class="level1"><div class="li"> If IsError(<em>result</em>), then set <em>iter</em>.[[Index]] = <strong>undefined</strong>.</div>
</li>
<li class="level1"><div class="li"> Return <em>result</em>.</div>
</li>
</ol>

<p>
 The abstract operation ArrayIteratorNext(<em>iter</em>) is as follows:
</p>
<ol>
<li class="level1"><div class="li"> Let <em>i</em> = <em>iter</em>.[[Index]].</div>
</li>
<li class="level1"><div class="li"> If <em>i</em> is <strong>undefined</strong>, throw StopIteration.</div>
</li>
<li class="level1"><div class="li"> Let <em>target</em> = <em>iter</em>.[[Target]].</div>
</li>
<li class="level1"><div class="li"> Let <em>obj</em> = ToObject(<em>target</em>).</div>
</li>
<li class="level1"><div class="li"> Let <em>length</em> ?= <em>obj</em>.[[Get]](<code>&ldquo;length&rdquo;</code>).</div>
</li>
<li class="level1"><div class="li"> Let <em>uintLength</em> ?= ToUint32(<em>length</em>).</div>
</li>
<li class="level1"><div class="li"> If <em>i</em> ≥ <em>uintLength</em>, throw StopIteration.</div>
</li>
<li class="level1"><div class="li"> Let <em>value</em> ?= <em>obj</em>.[[Get]](ToString(<em>i</em>).value).</div>
</li>
<li class="level1"><div class="li"> Set <em>iter</em>.[[Index]] = <em>i</em> + 1.</div>
</li>
<li class="level1"><div class="li"> Return <em>value</em>.</div>
</li>
</ol>

<p>
 NOTE 
</p>
<ul>
<li class="level1"><div class="li"> An Array iterator does not skip &ldquo;array holes&rdquo;. When it encounters a hole, it consults the target&rsquo;s prototype chain and yields undefined if no element is found.</div>
</li>
<li class="level1"><div class="li"> Array iterators are designed to produce intuitive results when elements are added, modified, or removed to the right of [[Index]]. The iterator continues to produce elements up to the updated <code>.length</code> of the [[Target]]; then it stops.</div>
</li>
<li class="level1"><div class="li"> Array iterators are not designed to produce intuitive results when elements are inserted or removed using methods such as <code>Array.prototype.insert</code>, <code>.shift</code>, <code>.unshift</code>, or <code>.splice</code> to the left of [[Index]]. Because these operations do not update the iterator&rsquo;s internal state, this can cause an iterator to skip elements or produce the same element more than once.</div>
</li>
<li class="level1"><div class="li"> If an element has a getter which throws, the exception is propagated, and the iterator is closed. All future calls to <code>.next()</code> will simply throw StopIteration.</div>
</li>
</ul>

</div>
<!-- SECTION [11474-13318] -->
<a name="string_iterators"></a><h2>String iterators</h2>
<div class="level2">

<p>
 <strong>TODO</strong> summary
</p>

</div>
<!-- SECTION [13319-13367] -->
<a name="string.prototype.iterator"></a><h3>String.prototype.iterator()</h3>
<div class="level3">

<p>
 The following steps are taken: 
</p>
<ol>
<li class="level1"><div class="li"> Let <em>s</em> = ToString(<em>this</em>).</div>
</li>
<li class="level1"><div class="li"> Return a new object with the internal properties {[[NativeBrand]]: NativeStringIterator, [[Prototype]]: the [[StringIteratorPrototype]] object, [[Target]]: s, [[Index]]: <strong>0</strong>}.</div>
</li>
</ol>

<p>
 NOTE This causes both primitive strings and String objects to be iterable.
</p>

</div>
<!-- SECTION [13368-13738] -->
<a name="the_stringiteratorprototype_object"></a><h3>The [[StringIteratorPrototype]] object</h3>
<div class="level3">

<p>
 The [[StringIteratorPrototype]] object is a unique (per global) object. Initially it has the internal properties {[[NativeBrand]]: NativeStringIterator, [[Prototype]]: the initial value of ''Iterator.prototype'', [[Target]]: the empty string, [[Index]]: <strong>undefined</strong>} and the <code>next</code> method described below. 
</p>

</div>
<!-- SECTION [13739-14108] -->
<a name="stringiteratorprototype_.next"></a><h3>[[StringIteratorPrototype]].next()</h3>
<div class="level3">

<p>
 <strong>TODO</strong>. Produces the sequence of Unicode characters that make up the string (note: not 16-bit code units).
</p>

</div>
<!-- SECTION [14109-14264] -->
<a name="standard_api"></a><h1>Standard API</h1>
<div class="level1">

<p>
 There is a standard <code>&ldquo;@iter&rdquo;</code> module which provides the following functionality: 
</p>
<ul>
<li class="level1"><div class="li"> <code>isGenerator(x)</code>: returns <code>true</code> if <code>x</code> is a generator function, <code>false</code> otherwise.</div>
</li>
<li class="level1"><div class="li"> <code>isStopIteration(x)</code>: returns <code>true</code> if <code>x</code> is an object whose [[Class]] internal property is <code>&ldquo;StopIteration&rdquo;</code>.</div>
</li>
</ul>

<p>
 as well as some additional convenience functions which behave as follows:
</p>
<pre class="code javascript"><span class="co1">// module &quot;@iter&quot; {</span>
    <span class="kw2">import</span> create from <span class="st0">"@name"</span>;
    <span class="kw2">const</span> call = <span class="kw2">Function</span>.<span class="me1">prototype</span>.<span class="me1">call</span>.<span class="me1">bind</span><span class="br0">&#40;</span><span class="kw2">Function</span>.<span class="me1">prototype</span>.<span class="me1">call</span><span class="br0">&#41;</span>;
    <span class="kw2">const</span> hasOwn = Object.<span class="me1">prototype</span>.<span class="me1">hasOwnProperty</span>;
    <span class="kw2">export</span> <span class="kw2">function</span> keys<span class="br0">&#40;</span>obj<span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="kw1">return</span> <span class="br0">&#123;</span>
            iterator: <span class="kw2">function</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
                <span class="kw1">return</span> <span class="br0">&#40;</span><span class="kw2">function</span>*<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
                    <span class="kw1">for</span> <span class="br0">&#40;</span>let x <span class="kw1">in</span> obj<span class="br0">&#41;</span> <span class="br0">&#123;</span>
                        <span class="kw1">if</span> <span class="br0">&#40;</span>call<span class="br0">&#40;</span>hasOwn, obj, x<span class="br0">&#41;</span><span class="br0">&#41;</span>
                            yield x;
                    <span class="br0">&#125;</span>
                <span class="br0">&#125;</span><span class="br0">&#41;</span><span class="br0">&#40;</span><span class="br0">&#41;</span>;
            <span class="br0">&#125;</span>
        <span class="br0">&#125;</span>;
    <span class="br0">&#125;</span>
    <span class="kw2">export</span> <span class="kw2">function</span> values<span class="br0">&#40;</span>obj<span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="kw1">return</span> <span class="br0">&#123;</span>
            iterator: <span class="kw2">function</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
                <span class="kw1">return</span> <span class="br0">&#40;</span><span class="kw2">function</span>*<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
                    <span class="kw1">for</span> <span class="br0">&#40;</span>let x <span class="kw1">in</span> obj<span class="br0">&#41;</span> <span class="br0">&#123;</span>
                        <span class="kw1">if</span> <span class="br0">&#40;</span>call<span class="br0">&#40;</span>hasOwn, obj, x<span class="br0">&#41;</span><span class="br0">&#41;</span>
                            yield obj<span class="br0">&#91;</span>x<span class="br0">&#93;</span>;
                    <span class="br0">&#125;</span>
                <span class="br0">&#125;</span><span class="br0">&#41;</span><span class="br0">&#40;</span><span class="br0">&#41;</span>;
            <span class="br0">&#125;</span>
        <span class="br0">&#125;</span>;
    <span class="br0">&#125;</span>
    <span class="kw2">export</span> <span class="kw2">function</span> items<span class="br0">&#40;</span>obj<span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="kw1">return</span> <span class="br0">&#123;</span>
            iterator: <span class="kw2">function</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
                <span class="kw1">return</span> <span class="br0">&#40;</span><span class="kw2">function</span>*<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
                    <span class="kw1">for</span> <span class="br0">&#40;</span>let x <span class="kw1">in</span> obj<span class="br0">&#41;</span> <span class="br0">&#123;</span>
                        <span class="kw1">if</span> <span class="br0">&#40;</span>call<span class="br0">&#40;</span>hasOwn, obj, x<span class="br0">&#41;</span><span class="br0">&#41;</span>
                            yield <span class="br0">&#91;</span>x, obj<span class="br0">&#91;</span>x<span class="br0">&#93;</span><span class="br0">&#93;</span>;
                    <span class="br0">&#125;</span>
                <span class="br0">&#125;</span><span class="br0">&#41;</span><span class="br0">&#40;</span><span class="br0">&#41;</span>;
            <span class="br0">&#125;</span>
        <span class="br0">&#125;</span>;
    <span class="br0">&#125;</span>
    <span class="kw2">export</span> <span class="kw2">function</span> allKeys<span class="br0">&#40;</span>obj<span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="kw1">return</span> <span class="br0">&#123;</span>
            iterator: <span class="kw2">function</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
                <span class="kw1">return</span> <span class="br0">&#40;</span><span class="kw2">function</span>*<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
                    <span class="kw1">for</span> <span class="br0">&#40;</span>let x <span class="kw1">in</span> obj<span class="br0">&#41;</span>
                        yield x;
                <span class="br0">&#125;</span><span class="br0">&#41;</span><span class="br0">&#40;</span><span class="br0">&#41;</span>;
            <span class="br0">&#125;</span>
        <span class="br0">&#125;</span>;
    <span class="br0">&#125;</span>
    <span class="kw2">export</span> <span class="kw2">function</span> allValues<span class="br0">&#40;</span>obj<span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="kw1">return</span> <span class="br0">&#123;</span>
            iterator: <span class="kw2">function</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
                <span class="kw1">return</span> <span class="br0">&#40;</span><span class="kw2">function</span>*<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
                    <span class="kw1">for</span> <span class="br0">&#40;</span>let x <span class="kw1">in</span> obj<span class="br0">&#41;</span>
                        yield obj<span class="br0">&#91;</span>x<span class="br0">&#93;</span>;
                <span class="br0">&#125;</span><span class="br0">&#41;</span><span class="br0">&#40;</span><span class="br0">&#41;</span>;
            <span class="br0">&#125;</span>
        <span class="br0">&#125;</span>;
    <span class="br0">&#125;</span>
    <span class="kw2">export</span> <span class="kw2">function</span> allItems<span class="br0">&#40;</span>obj<span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="kw1">return</span> <span class="br0">&#123;</span>
            iterator: <span class="kw2">function</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
                <span class="kw1">return</span> <span class="br0">&#40;</span><span class="kw2">function</span>*<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
                    <span class="kw1">for</span> <span class="br0">&#40;</span>let x <span class="kw1">in</span> obj<span class="br0">&#41;</span>
                        yield <span class="br0">&#91;</span>x, obj<span class="br0">&#91;</span>x<span class="br0">&#93;</span><span class="br0">&#93;</span>;
                <span class="br0">&#125;</span><span class="br0">&#41;</span><span class="br0">&#40;</span><span class="br0">&#41;</span>;
            <span class="br0">&#125;</span>
        <span class="br0">&#125;</span>;
    <span class="br0">&#125;</span>
<span class="co1">// }</span></pre>
</div>
<!-- SECTION [14265-16653] -->
<a name="rationale"></a><h1>Rationale</h1>
<div class="level1">

<p>
 <strong>Why throw if iteration is not defined?</strong> 
</p>
<ul>
<li class="level1"><div class="li"> <acronym title="Application Programming Interface">API</acronym> evolution: can make an object iterable in v2 without breaking v1 clients</div>
</li>
<li class="level1"><div class="li"> clean separation of collections vs reflection</div>
</li>
</ul>

<p>
 <strong>Why the new syntax? Why not extend the <code>for</code>-<code>in</code> semantics?</strong> 
</p>
<ul>
<li class="level1"><div class="li"> preserve the &ldquo;LHS is always a string&rdquo; invariant</div>
</li>
<li class="level1"><div class="li"> again, clean separation of collections vs reflection</div>
</li>
</ul>

</div>
<!-- SECTION [16654-17039] -->
<a name="resolved_issues"></a><h1>Resolved Issues</h1>
<div class="level1">

<p>
 From <a href="https://mail.mozilla.org/pipermail/es-discuss/2011-November/018114.html" class="urlextern" target="_blank" title="https://mail.mozilla.org/pipermail/es-discuss/2011-November/018114.html" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">this thread</a> it&rsquo;s clear that many people value CoffeeScript&rsquo;s <code>for own k in o</code>. Should we support <code>for own (k in o)</code> loop head syntax, desugaring to <code>for (k of keys(o))</code>?
</p>

<p>
Resolved: at the March 2012 TC39 meeting, we agreed not to add <code>for-own-in</code> in favor of iterators. See the <a href="https://mail.mozilla.org/pipermail/es-discuss/2012-March/021872.html" class="urlextern" target="_blank" title="https://mail.mozilla.org/pipermail/es-discuss/2012-March/021872.html" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">meeting notes</a>.
</p>

<p>
We have long-standing agreement to forbid the <code>=i</code> initializer in <code>for (let x=i in o)</code> and <code>for (let x=i of o)</code> (and paren-free comprehension head variant) forms. Likewise <code>const</code>.
</p>

<p>
Resolved: fine to remove with TC39 if Mozilla ships it first to prove compatibility claim. See <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=748550" class="urlextern" target="_blank" title="https://bugzilla.mozilla.org/show_bug.cgi?id=748550" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">bug 748550</a>.
</p>

<p>
 &mdash; <em><a href="mailto:%26%23x62%3B%26%23x72%3B%26%23x65%3B%26%23x6e%3B%26%23x64%3B%26%23x61%3B%26%23x6e%3B%26%23x40%3B%26%23x6d%3B%26%23x6f%3B%26%23x7a%3B%26%23x69%3B%26%23x6c%3B%26%23x6c%3B%26%23x61%3B%26%23x2e%3B%26%23x6f%3B%26%23x72%3B%26%23x67%3B" class="mail" title="&#x62;&#x72;&#x65;&#x6e;&#x64;&#x61;&#x6e;&#x40;&#x6d;&#x6f;&#x7a;&#x69;&#x6c;&#x6c;&#x61;&#x2e;&#x6f;&#x72;&#x67;">Brendan Eich</a> 2012/04/24 21:07</em>
</p>

</div>
<!-- SECTION [17040-17947] -->
<a name="discussion"></a><h1>Discussion</h1>
<div class="level1">

<p>
 This proposal have some inconsistencies with previous agreements: 
</p>
<ol>
<li class="level1"><div class="li"> We would use a private name, <code>@iterator</code>, instead of a public name. The main reason for not using an ordinary property name is that it pollutes the property space.</div>
</li>
<li class="level1"><div class="li"> It was previously agreed that the default iterator for strings should iterate over code points, not code units. <a href="http://norbertlindenberg.com/2012/05/ecmascript-supplementary-characters/index.html" class="urlextern" target="_blank" title="http://norbertlindenberg.com/2012/05/ecmascript-supplementary-characters/index.html" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">http://norbertlindenberg.com/2012/05/ecmascript-supplementary-characters/index.html</a></div>
</li>
</ol>

<p>
  &mdash; <em><a href="mailto:%26%23x61%3B%26%23x72%3B%26%23x76%3B%26%23x40%3B%26%23x67%3B%26%23x6f%3B%26%23x6f%3B%26%23x67%3B%26%23x6c%3B%26%23x65%3B%26%23x2e%3B%26%23x63%3B%26%23x6f%3B%26%23x6d%3B" class="mail" title="&#x61;&#x72;&#x76;&#x40;&#x67;&#x6f;&#x6f;&#x67;&#x6c;&#x65;&#x2e;&#x63;&#x6f;&#x6d;">Erik Arvidsson</a> 2012/06/21 04:24</em>
</p>

<p>
The public name doesn&rsquo;t hurt anything, and it reads better.
</p>

<p>
I&rsquo;m pleased to hear string iterators will iterate over code points. I just hadn&rsquo;t heard about that. I&rsquo;ll update the proposal today.
</p>

<p>
 &mdash; <em><a href="mailto:%26%23x6a%3B%26%23x6f%3B%26%23x72%3B%26%23x65%3B%26%23x6e%3B%26%23x64%3B%26%23x6f%3B%26%23x72%3B%26%23x66%3B%26%23x66%3B%26%23x40%3B%26%23x6d%3B%26%23x6f%3B%26%23x7a%3B%26%23x69%3B%26%23x6c%3B%26%23x6c%3B%26%23x61%3B%26%23x2e%3B%26%23x63%3B%26%23x6f%3B%26%23x6d%3B" class="mail" title="&#x6a;&#x6f;&#x72;&#x65;&#x6e;&#x64;&#x6f;&#x72;&#x66;&#x66;&#x40;&#x6d;&#x6f;&#x7a;&#x69;&#x6c;&#x6c;&#x61;&#x2e;&#x63;&#x6f;&#x6d;">Jason Orendorff</a> 2012/06/21 13:09</em>
</p>

<p>
Per <a href="https://mail.mozilla.org/pipermail/es-discuss/2012-July/024207.html" class="urlextern" target="_blank" title="https://mail.mozilla.org/pipermail/es-discuss/2012-July/024207.html" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">https://mail.mozilla.org/pipermail/es-discuss/2012-July/024207.html</a>, we want a <a href="doku.php%3Fid=harmony:private_name_objects.html" class="wikilink1" title="harmony:private_name_objects" onclick="return svchk()" onkeypress="return svchk()">unique name</a> for <code>iterator</code>, to support iterable duck-type testing on arbitrary objects.
</p>

<p>
 &mdash; <em><a href="mailto:%26%23x62%3B%26%23x72%3B%26%23x65%3B%26%23x6e%3B%26%23x64%3B%26%23x61%3B%26%23x6e%3B%26%23x40%3B%26%23x6d%3B%26%23x6f%3B%26%23x7a%3B%26%23x69%3B%26%23x6c%3B%26%23x6c%3B%26%23x61%3B%26%23x2e%3B%26%23x6f%3B%26%23x72%3B%26%23x67%3B" class="mail" title="&#x62;&#x72;&#x65;&#x6e;&#x64;&#x61;&#x6e;&#x40;&#x6d;&#x6f;&#x7a;&#x69;&#x6c;&#x6c;&#x61;&#x2e;&#x6f;&#x72;&#x67;">Brendan Eich</a> 2012/08/31 14:15</em> 
</p>

</div>
<!-- SECTION [17948-] -->
<!-- cachefile /usr/local/www/es-lang.org/wiki/data/cache/b/b41b95f07f0450a097bf078a1a50e47e.xhtml used -->
</body>
</html>
