<html>
<head>
  <meta name="generator" content="DokuWiki Release 2005-09-22e" />
  <link rel="start" href="index.html" />
  <link rel="contents" href="doku.php%3Fid=meetings:minutes_oct_13_2005&amp;do=index.html" title="" />
  <link rel="alternate" type="application/rss+xml" title="Recent Changes" href="feed.php" />
  <link rel="alternate" type="application/rss+xml" title="Current Namespace" href="feed.php%3Fmode=list&amp;ns=meetings" />
  <link rel="alternate" type="text/html" title="Plain HTML" href="doku.php%3Fid=meetings:minutes_oct_13_2005&amp;do=export_html.html" />
  <link rel="alternate" type="text/plain" title="Wiki Markup" href="doku.php%3Fid=meetings:minutes_oct_13_2005&amp;do=export_raw" />
  <link rel="stylesheet" media="screen" type="text/css" href="lib/styles/style.css" />
  <meta name="robots" content="noindex,nofollow" />
  <script language="javascript" type="text/javascript" charset="utf-8">
    var alertText   = 'Please enter the text you want to format.\nIt will be appended to the end of the document.'
    var notSavedYet = 'Unsaved changes will be lost.\nReally continue?'
    var DOKU_BASE   = '/'
  </script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/script.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/tw-sack.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/ajax.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/domLib.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/domTT.js"></script>
  <link rel="stylesheet" type="text/css" href="lib/plugins/plugin/style.css" />
</head>
<body>
<div class="toc">
<div class="tocheader"> <script type="text/javascript">showTocToggle("+","-")</script>Table of Contents</div>
<div id="tocinside">
<ul class="toc">
<li class="level1"><span class="li"><a href="doku.php%3Fid=meetings:minutes_oct_13_2005&amp;do=export_html.html#ecma_tc39-tg1_meeting" class="toc">ECMA TC39-TG1 meeting</a></span><ul class="toc">
<li class="level2"><span class="li"><a href="doku.php%3Fid=meetings:minutes_oct_13_2005&amp;do=export_html.html#date" class="toc">Date</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=meetings:minutes_oct_13_2005&amp;do=export_html.html#attendees" class="toc">Attendees</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=meetings:minutes_oct_13_2005&amp;do=export_html.html#agenda" class="toc">Agenda</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=meetings:minutes_oct_13_2005&amp;do=export_html.html#es4_spec_process" class="toc">ES4 Spec Process</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=meetings:minutes_oct_13_2005&amp;do=export_html.html#review_of_a_list" class="toc">Review of A List</a></span><ul class="toc">
<li class="level3"><span class="li"><a href="doku.php%3Fid=meetings:minutes_oct_13_2005&amp;do=export_html.html#gettersetters" class="toc">Getter/Setters</a></span></li>
<li class="level3"><span class="li"><a href="doku.php%3Fid=meetings:minutes_oct_13_2005&amp;do=export_html.html#trailing_comma" class="toc">Trailing Comma</a></span></li>
<li class="level3"><span class="li"><a href="doku.php%3Fid=meetings:minutes_oct_13_2005&amp;do=export_html.html#drill_down_on_types" class="toc">Drill down on types</a></span></li>
<li class="level3"><span class="li"><a href="doku.php%3Fid=meetings:minutes_oct_13_2005&amp;do=export_html.html#nullable_types" class="toc">Nullable Types</a></span></li>
<li class="level3"><span class="li"><a href="doku.php%3Fid=meetings:minutes_oct_13_2005&amp;do=export_html.html#type_unions" class="toc">Type Unions</a></span></li>
<li class="level3"><span class="li"><a href="doku.php%3Fid=meetings:minutes_oct_13_2005&amp;do=export_html.html#recap_from_types_discussion" class="toc">Recap from types discussion</a></span></li>
<li class="level3"><span class="li"><a href="doku.php%3Fid=meetings:minutes_oct_13_2005&amp;do=export_html.html#classes" class="toc">Classes</a></span></li>
<li class="level3"><span class="li"><a href="doku.php%3Fid=meetings:minutes_oct_13_2005&amp;do=export_html.html#duck_typing" class="toc">Duck Typing</a></span></li>
<li class="level3"><span class="li"><a href="doku.php%3Fid=meetings:minutes_oct_13_2005&amp;do=export_html.html#sealed_vs._dynamic" class="toc">Sealed vs. dynamic</a></span></li>
<li class="level3"><span class="li"><a href="doku.php%3Fid=meetings:minutes_oct_13_2005&amp;do=export_html.html#prototype" class="toc">Prototype</a></span></li>
<li class="level3"><span class="li"><a href="doku.php%3Fid=meetings:minutes_oct_13_2005&amp;do=export_html.html#sealing_built-in_classes" class="toc">Sealing built-in classes</a></span></li>
<li class="level3"><span class="li"><a href="doku.php%3Fid=meetings:minutes_oct_13_2005&amp;do=export_html.html#explicit" class="toc">Explicit</a></span></li>
<li class="level3"><span class="li"><a href="doku.php%3Fid=meetings:minutes_oct_13_2005&amp;do=export_html.html#public_private_internal_protected" class="toc">Public, Private, Internal, Protected</a></span></li>
<li class="level3"><span class="li"><a href="doku.php%3Fid=meetings:minutes_oct_13_2005&amp;do=export_html.html#open_definition_namespaces" class="toc">Open definition namespaces</a></span></li>
<li class="level3"><span class="li"><a href="doku.php%3Fid=meetings:minutes_oct_13_2005&amp;do=export_html.html#static_inheritance_not_supported" class="toc">Static inheritance not supported</a></span></li>
<li class="level3"><span class="li"><a href="doku.php%3Fid=meetings:minutes_oct_13_2005&amp;do=export_html.html#const" class="toc">const</a></span></li>
<li class="level3"><span class="li"><a href="doku.php%3Fid=meetings:minutes_oct_13_2005&amp;do=export_html.html#non-public_constructors" class="toc">Non-public constructors</a></span></li>
<li class="level3"><span class="li"><a href="doku.php%3Fid=meetings:minutes_oct_13_2005&amp;do=export_html.html#super_statements" class="toc">Super statements</a></span></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>

<a name="ecma_tc39-tg1_meeting"></a><h1>ECMA TC39-TG1 meeting</h1>
<div class="level1">

</div>
<!-- SECTION [1-37] -->
<a name="date"></a><h2>Date</h2>
<div class="level2">

<p>
 October 13, 2005
</p>

</div>
<!-- SECTION [38-73] -->
<a name="attendees"></a><h2>Attendees</h2>
<div class="level2">

<p>
 Francis Cheng (Macromedia) Jeff Dyer (Macromedia) Brendan Eich (Mozilla) Gary Grossman (Macromedia)
</p>

</div>
<!-- SECTION [74-197] -->
<a name="agenda"></a><h2>Agenda</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> Process for writing the ECMAScript Edition 4 specification</div>
</li>
<li class="level1"><div class="li"> Review of A-List features for ES4</div>
</li>
<li class="level1"><div class="li"> Drill down on ES4 Types feature</div>
</li>
<li class="level1"><div class="li"> Drill down on ES4 Classes feature</div>
</li>
</ul>

</div>
<!-- SECTION [198-393] -->
<a name="es4_spec_process"></a><h2>ES4 Spec Process</h2>
<div class="level2">

<p>
 Brendan thinks it&rsquo;s important to have checkable or executable representation of the spec.  He will investigate this offline.
</p>

</div>
<!-- SECTION [394-549] -->
<a name="review_of_a_list"></a><h2>Review of A List</h2>
<div class="level2">

</div>
<!-- SECTION [550-579] -->
<a name="gettersetters"></a><h3>Getter/Setters</h3>
<div class="level3">

<p>
 Brendan: There is a widely used getter/setter syntax within object initializers used all over Firefox, different from the &ldquo;function get / function set&rdquo; syntax used in Waldemar&rsquo;s spec: 
</p>
<pre class="code">var o = {
  get p() { return ++this.x; },
  x:0,
  set p(nx) { return this.x = nx; },
  get * (id) { ... },
  set * (id, v) { ... },
};
o.p =&gt; 1
o.p =&gt; 2
o.p = -1 =&gt; -1
o.p =&gt; 0</pre>

<p>
 The &ldquo;get *&rdquo; and &ldquo;set *&rdquo; syntax is like __resolve in ActionScript.
</p>

<p>
Brendan feels that this kind of extension is so popular and prevalent that we should attempt to standardize it.
</p>

</div>
<!-- SECTION [580-1171] -->
<a name="trailing_comma"></a><h3>Trailing Comma</h3>
<div class="level3">
<pre class="code">var a=[1,2,]
assert(a.length === 2)
var o={p:1, q:2,}              // Error</pre>

<p>
 The ES3 spec forbids trailing commas in object initializers, but not in array initializers where it must be allowed (to make a hole at the end with two trailing commas).  Brendan feels the spec is wrong and that we should standardize on permitting the trailing comma, since it is something people like to use in real code.
</p>

</div>
<!-- SECTION [1172-1604] -->
<a name="drill_down_on_types"></a><h3>Drill down on types</h3>
<div class="level3">

<p>
 We reviewed Section 6.5 of Jeff&rsquo;s language spec regarding Types.
</p>

<p>
Jeff: The distinctions between implicit conversions and explicit conversions is going to go away in our spec.  Everything will be an implicit conversion.  The implicit and explicit conversion tables will be merged together and will be equivalent.  The conversion rules are pretty much the same as ECMA-262 Edition 3, with the exception of when null is assigned to a nullable type.  Implicit conversions will convert to null.  Explicit will convert to the string &ldquo;null&rdquo;.
</p>

<p>
Brendan: All ints and uints can be expressed as doubles, but can&rsquo;t model the integer arithmetic and overflow, and we&rsquo;re not going to have exceptions for overflow.
</p>

<p>
Jeff: &ldquo;is&rdquo; table: How do you feel about value set checking at runtime?  1.23 is Number, but 1.23 is not int or uint.
</p>

<p>
Brendan: This is where we want &ldquo;is&rdquo; to be a predicate, not a converting operator.  Whereas &ldquo;as&rdquo; converts if it can.
</p>

<p>
Brendan: Will int, uint be lowercase type names like in C?
</p>

<p>
Jeff: Yes
</p>

<p>
Brendan: Top and bottom types.  I was arguing that Object should not be the top type.  Arguably we have two bottom types, null and undefined, historically. The uninitialized variables have value undefined.  null denotes a null reference, a null object.  Kind of useful to have that distinction, or not, but now we&rsquo;re stuck with it.
</p>

<p>
Brendan: Undefined and null should not convert to Object.  ToObject in Edition 3 on null/undefined throws a TypeError exception.  In this table, it does not, so the table has a bug.
</p>

<p>
Brendan: It&rsquo;s cool that you are reasoning about types at compile time, but I don&rsquo;t think Object should be the top type.  There should be a top type that includes null and undefined.  Then we can restore the TypeErrors in the table for those coercions.
</p>

<p>
<a href="lib/exe/detail.php%3Fid=meetings%253Aminutes_oct_13_2005&amp;cache=cache&amp;media=meetings:ecma101305-1.png.html" class="media" title="meetings:ecma101305-1.png" onclick="return svchk()" onkeypress="return svchk()"><img src="lib/exe/fetch.php%3Fw=&amp;h=&amp;cache=cache&amp;media=meetings:ecma101305-1.png" class="media" alt="" /></a>
</p>

</div>
<!-- SECTION [1605-3433] -->
<a name="nullable_types"></a><h3>Nullable Types</h3>
<div class="level3">

<p>
 We explored the idea of using nullable types to resolve the type conversion issues with null and undefined.
</p>
<pre class="code">
  String : { UTF-16 unichar sequence }
  String? : String | null
  Object? would mean any value of type Object, or null
  Object! would mean Object and only Object, null not permitted
</pre>

<p>
In ActionScript today, var x:Object, the default value is undefined. So the presence of Object is the same as the absence of a type annotation.
</p>

<p>
Object is currently the top type, therefore the table in 6.5.3 is not compatible with Edition 3.  The effect of the current incarnation of the table is that we&rsquo;ve moved Object up in the type tree, which causes some issues.
</p>

<p>
These are the internal types in the ECMAScript Edition 3 specification.  There is no explicit top type in the Edition 3 spec, but one could imagine there being an implicit one, T:
</p>

<p>
<a href="lib/exe/detail.php%3Fid=meetings%253Aminutes_oct_13_2005&amp;cache=cache&amp;media=meetings:ecma101305-2.png.html" class="media" title="meetings:ecma101305-2.png" onclick="return svchk()" onkeypress="return svchk()"><img src="lib/exe/fetch.php%3Fw=&amp;h=&amp;cache=cache&amp;media=meetings:ecma101305-2.png" class="media" alt="" /></a>
</p>

<p>
So, there are nine types in ES3, three of them being internal: Reference, List and Completion.
</p>

<p>
We&rsquo;re trying to make them all derive from Object, except for Null Undefined
</p>

<p>
<a href="lib/exe/detail.php%3Fid=meetings%253Aminutes_oct_13_2005&amp;cache=cache&amp;media=meetings:ecma101305-3.png.html" class="media" title="meetings:ecma101305-3.png" onclick="return svchk()" onkeypress="return svchk()"><img src="lib/exe/fetch.php%3Fw=&amp;h=&amp;cache=cache&amp;media=meetings:ecma101305-3.png" class="media" alt="" /></a>
</p>

<p>
Jeff: Completions are gone, due to the execution model of statements.  Past statements pass in their completion values.  Type is Object instead. Completion is three things: a value, a target, a state.
</p>

<p>
Brendan: Seems like there could be an internal spec type called Completion, don&rsquo;t see why not since it was in Edition 3.
</p>

<p>
<a href="lib/exe/detail.php%3Fid=meetings%253Aminutes_oct_13_2005&amp;cache=cache&amp;media=meetings:ecma101305-4.png.html" class="media" title="meetings:ecma101305-4.png" onclick="return svchk()" onkeypress="return svchk()"><img src="lib/exe/fetch.php%3Fw=&amp;h=&amp;cache=cache&amp;media=meetings:ecma101305-4.png" class="media" alt="" /></a>
</p>
<pre class="code">
  undefined is Boolean -&gt; false
  undefined as Boolean -&gt; false
  undefined as String -&gt; &quot;undefined&quot;
  null as String -&gt; null
</pre>

<p>
Brendan: Why did Waldemar make string nullable?  [Answer from Waldemar, via Brendan: by fiat, to match common use-cases, as Java did.]
</p>

<p>
Jeff: Our users want it too, it&rsquo;s useful to be able to say no value.
</p>

<p>
Brendan: If we want the type system to work without special cases for values, it will make the spec and implementation broken or ugly.
</p>
<pre class="code">
  Boolean &lt;: Object
  Boolean? &lt;: Object?
  Null &lt;: Boolean?
</pre>

<p>
Conversion table that maps type to type using capitalized type names. Then some cases collapse, and do get TypeError conversion.  Get Edition 3 behavior. We should systematize things and use set-theoretic type system, so we can reason about them.
</p>

<p>
Soft spots:
</p>
<ul>
<li class="level1"><div class="li"> <code>null</code> to <code>String</code></div>
</li>
<li class="level1"><div class="li"> <code>undefined</code> to <code>Object</code></div>
</li>
</ul>

<p>
 Use cases to solve: 
</p>
<ul>
<li class="level1"><div class="li"> <code>String~</code> - always does conversion to String</div>
</li>
<li class="level1"><div class="li"> <code>String!</code> - can be string and only string</div>
</li>
<li class="level1"><div class="li"> <code>String?</code> - nullable</div>
</li>
</ul>

<p>
 Brendan: Some languages are building in preconditions, postconditions, invariants I prefer the type system to enforce things, so that people don&rsquo;t have to write boilerplate code to validate parameters.
</p>

<p>
<a href="lib/exe/detail.php%3Fid=meetings%253Aminutes_oct_13_2005&amp;cache=cache&amp;media=meetings:ecma101305-5.png.html" class="media" title="meetings:ecma101305-5.png" onclick="return svchk()" onkeypress="return svchk()"><img src="lib/exe/fetch.php%3Fw=&amp;h=&amp;cache=cache&amp;media=meetings:ecma101305-5.png" class="media" alt="" /></a>
</p>

<p>
Right now, in Jeff&rsquo;s language spec, Object and the lack of a type annotation are equivalent.  Should we change that, so that not having a type annotation means something different, i.e. type Any?
</p>

<p>
For instance, type Object could be sealed instead of dynamic, so that the language is safer by not allowing Object to be a free-for-all.  Then, accessing unknown properties of a reference of type Object would be an error, whereas it would have the standard ES3 behavior if the type annotation was Any or absent.
</p>
<pre class="code">
  var x
  var y:Object
  x.foo -&gt; undefined
  y.foo -&gt; error?
</pre>

</div>
<!-- SECTION [3434-6723] -->
<a name="type_unions"></a><h3>Type Unions</h3>
<div class="level3">

<p>
 Brendan thinks we should have some ability for type unions in the language. 
</p>
<pre class="code">var x : Number | Null</pre>

<p>
 It would be good to have something like this because otherwise developers end up enforcing their invariants on their own, with the potential for buggy code.
</p>

</div>
<!-- SECTION [6724-7006] -->
<a name="recap_from_types_discussion"></a><h3>Recap from types discussion</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> Revisit Any vs. Object, try to work Any into the type system.  Jeff will investigate.</div>
</li>
<li class="level1"><div class="li"> The biggest issue is null/undefined with String and Object.</div>
</li>
</ul>

</div>
<!-- SECTION [7007-7200] -->
<a name="classes"></a><h3>Classes</h3>
<div class="level3">

<p>
 Brendan: Lots of people write me, asking me not to add classes to the language.  Now, Im resigned to doing classes, and also I want them in the language for two reasons: bootstrapping and empowerment.  But, we must be careful to avoid the C++ black hole.
</p>

</div>
<!-- SECTION [7201-7477] -->
<a name="duck_typing"></a><h3>Duck Typing</h3>
<div class="level3">
<pre class="code">function m (s:Shape)
{
  print(s.radius);
}</pre>

<p>
 Suppose this is a block, and you&rsquo;ve tested if (s is Circle), and don&rsquo;t want to rename it.  This kind of duck typing is convenient; Python users, etc. like it.
</p>

<p>
Is whether this is an error controlled by whether you are in strict mode (Bang)?Or is it dependent on whether you are using sealed or dynamic classes?
</p>

</div>
<!-- SECTION [7478-7865] -->
<a name="sealed_vs._dynamic"></a><h3>Sealed vs. dynamic</h3>
<div class="level3">

<p>
 In Jeff&rsquo;s spec, a class is sealed by default.  The &ldquo;dynamic&rdquo; attribute may be used to make a class dynamic.  Sealed classes are not expando; they have no internal hashtable and properties cannot be added at runtime.  Dynamic classes have ES3-like behavior; they can have declared properties/methods in the class definition, but dynamic properties may be added too.
</p>

<p>
Sealed and dynamic classes alike have a prototype object.  The prototype object is currently an instance of generic Object, although we may want to change that to be an instance of the class.  However, if the prototype of a sealed class was an instance of the  sealed class, then the prototype object is basically useless and vestigial, since you can&rsquo;t add properties to it.
</p>

<p>
If it is an error to access undefined properties on a sealed object with the &ldquo;.&rdquo; operator, it&rsquo;s kind of weird since you can&rsquo;t get to properties declared on the prototype chain.  This is only a compile-time error in the strict dialect.
</p>

<p>
Jeff is leaning is to make all objects expando by default, since they are already really expando due to the prototype chain.
</p>

<p>
However, this would be unpopular since it means that we basically can&rsquo;t intercept property not found conditions, so typos would get past the system.
</p>

<p>
Jeff entertained the idea of always making accessing an unfound property a ReferenceError, for every object, instead of returning undefined.  That would be a pretty big break from ES3 behavior though.
</p>

<p>
The &ldquo;dynamic&rdquo; attribute means 3 things rolled up in one: 
</p>
<ul>
<li class="level1"><div class="li"> The object is not sealed.</div>
</li>
<li class="level1"><div class="li"> The object is not checked.</div>
</li>
<li class="level1"><div class="li"> Undefined property accesses will not throw a ReferenceError exception.</div>
</li>
</ul>

<p>
 Jeff wants to explore the idea of breaking these three aspects of dynamic out into separate attributes.  Suppose there was a sealed attribute, and an unchecked attribute? After some discussion, the straw man of making all objects dynamic by default was rejected.  There are good developer productivity reasons for making objects sealed by default.
</p>

<p>
Ultimately, we agreed that dynamic should continue to mean the 3 things it does today.
</p>

</div>
<!-- SECTION [7866-9983] -->
<a name="prototype"></a><h3>Prototype</h3>
<div class="level3">

<p>
 We decided that the prototype of a class should be an instance of that class.
</p>

<p>
One weird idiosyncracy in the ES3 spec is that the RegExp prototype is a vanilla Object.
</p>

<p>
Another weirdness is that arguments is an Object, not a true Array... it should probably just be an Array in the ES4 spec.
</p>

<p>
If something has a [[Call]], typeof is supposed to say function.  So what&rsquo;s typeof  RegExp in the new spec?  It&rsquo;s &ldquo;function&rdquo; in SpiderMonkey, but &ldquo;object&rdquo; in many other implementations.
</p>

</div>
<!-- SECTION [9984-10501] -->
<a name="sealing_built-in_classes"></a><h3>Sealing built-in classes</h3>
<div class="level3">
<pre class="code">var x:Number = 42;
...
x.f = function() {
global = this;
}
x.f();</pre>

<p>
 It is desirable to seal certain built-in classes, like Number, Boolean and String.  Then they can be optimized and represented using their machine representations, instead of a wrapper object a la ES3.
</p>

<p>
(image here)
</p>

<p>
Jeff: If we didn&rsquo;t have a dynamic attribute, we could have a &ldquo;primitive&rdquo; attribute which means sealed.
</p>

<p>
Brendan: Ajax toolkits have a tendency to decorate Number and String to extend them. So, it&rsquo;s important to preserve that capability.
</p>

<p>
This should be disallowed: 
</p>
<pre class="code">(1).foo = &quot;bar&quot;</pre>

<p>
 But it is desirable to extend Number and String via the prototype object. Namespaces as versioning
</p>

<p>
Brendan expressed interest in the idea of using namespaces as a versioning mechanism.  We discussed Macromedia&rsquo;s internal experience with trying to use namespaces as a versioning mechanism, and running into various difficulties and shelving it.
</p>

<p>
In Macromedia&rsquo;s spec, only one namespace attribute can be used on a definition.  This restriction was made to simplify the implementation, but also because developers were having a hard time understanding what it meant to decorate a definition with multiple namespace attributes.
</p>

<p>
It is certainly demanding to have to put multiple namespace attributes on every definition in your framework classes, adding a new one every time you release a new version.
</p>

<p>
Brendan wondered whether a definition could be both public and in a namespace. The Macromedia experience was that versioning worked best if the definitions were in a namespace and were not public, and then user code would use the desired version namespace. Finalization of built-in classes
</p>

<p>
The final attribute on a class definition makes it an error to subclass it, just like Java/C#.
</p>

<p>
In Macromedia&rsquo;s spec, String, Boolean and Number are final, since they may be represented by primitives at runtime, so subclassing them would be problematic.  Brendan is fine with that.
</p>

<p>
<acronym title="Extensible Markup Language">XML</acronym> and XMLList are also final.  That also seems to make sense.
</p>

<p>
We may have swung the pendulum too far out, however, when we made Array final. Brendan favors making Array non-final.
</p>

<p>
Should also consider whether Date, RegExp, etc. should be final or not.
</p>

</div>
<!-- SECTION [10502-12750] -->
<a name="explicit"></a><h3>Explicit</h3>
<div class="level3">

<p>
 The explicit attribute is from the ES4 Draft Proposal.  When it is used on a definition in a package, it means that references to that definition must be fully qualified, even if the definition has been imported.
</p>

<p>
The use case is to reduce pollution of the users open namespaces.
</p>

<p>
Brendan: I don&rsquo;t think we really need explicit...
</p>

</div>
<!-- SECTION [12751-13104] -->
<a name="public_private_internal_protected"></a><h3>Public, Private, Internal, Protected</h3>
<div class="level3">

<p>
 The public, private, internal, protected access modifiers are all implemented using namespaces in the Macromedia implementation.
</p>

<p>
Brendan: If public, protected, private, internal can be implemented by namespaces, and that&rsquo;s basically the best way to do it, maybe we should say that in the specification. Protected namespace bug
</p>

<p>
Macromedia&rsquo;s first cut at implementing &ldquo;protected&rdquo; was to introduce a protected namespace for each class.  Class A would declare a protected namespace.  Subclass B would declare its own protected namespace, and would &ldquo;use&rdquo; both the A and B protected namespaces. 
</p>
<pre class="code">class A { protected int foo; }
class B extends A { }
class C extends B { }</pre>

<p>
 The problem is that B can now see protected members on instances of C!  That means if you have a common UIComponent base class with a protected update method, a Button component could invoke the protected update method of a ComboBox.
</p>

<p>
It seems like a solution is to copy traits from base classes into subclasses.  If B only opens its own protected namespace, but copies A&rsquo;s protected traits into its own namespace, that might solve the problem.
</p>

</div>
<!-- SECTION [13105-14272] -->
<a name="open_definition_namespaces"></a><h3>Open definition namespaces</h3>
<div class="level3">

<p>
 Since a class doesn&rsquo;t create its own public namespace, this C++-style member hiding is not allowed: 
</p>
<pre class="code">class A { public var x; }
class B extends A { public var x; }</pre>

<p>
 This is an error, and that makes sense.
</p>

<p>
However, local name collisions are also reported as errors: 
</p>
<pre class="code">class A { public var x; }
class B extends A { private var x; }</pre>

<p>
 This is an error, even though it doesn&rsquo;t seem like it has to be.  If it wasn&rsquo;t an error, the user would get confusing ambiguity errors.
</p>

<p>
The scope overrides private::x, public::x should work, however.
</p>

</div>
<!-- SECTION [14273-14854] -->
<a name="static_inheritance_not_supported"></a><h3>Static inheritance not supported</h3>
<div class="level3">

<p>
 The Macromedia spec does not support static inheritance, i.e. 
</p>
<pre class="code">class A { public static int x; }
class B extends A {}
print(B.x);</pre>

<p>
 It was troublesome to implement because class members are defined using traits and slots just like instance members, just on the class object instead of on object instances.  The aliasing was not simple to implement.  We had it working for awhile using prototype chain, but that seemed like a kludge.
</p>

<p>
Brendan: C++ ran into ugly problems like contravariance of return types.  This stuff scares me.
</p>

<p>
However, the Macromedia spec supports lexical references to static members from within a class, even superclass statics.  Is this good to continue to allow?
</p>

<p>
Brendan would like to get rid of asymmetries in the model if possible.  We will think about whether lexical references to statics should be disallowed.
</p>

<p>
It is already disallowed to reference a static member using an instance.  It&rsquo;s permitted in Java and C++.  This seems OK, C# disallows this too.
</p>

</div>
<!-- SECTION [14855-15890] -->
<a name="const"></a><h3>const</h3>
<div class="level3">

<p>
 We are coming to the conclusion that initializers should be required on const.
</p>

<p>
For instance const members, you can write to const as much as you want during constructor.
</p>

</div>
<!-- SECTION [15891-16079] -->
<a name="non-public_constructors"></a><h3>Non-public constructors</h3>
<div class="level3">

<p>
 We think non-public constructors, while requested by people wanting to do things like private constructors for singletons, are too complex to put in because in ECMAScript, the class object and constructor method don&rsquo;t lead a really separate existence and it&rsquo;s difficult for them to have different names.
</p>

<p>
We want to future-proof it though... so we require that a constructor&rsquo;s access specifier match the class&rsquo;s access specifier.
</p>

</div>
<!-- SECTION [16080-16545] -->
<a name="super_statements"></a><h3>Super statements</h3>
<div class="level3">

<p>
 Super statements are not required to be the first line in the constructor, but they are required to occur before any statement that references this.  Jeff has a data flow analysis algorithm for determining this.
</p>

<p>
Must watch out for indirect eval, a.eval(s), called via a super expression. 
</p>

</div>
<!-- SECTION [16546-] -->
<!-- cachefile /usr/local/www/es-lang.org/wiki/data/cache/c/caff8456a41445f7d996e0cebdc47aba.xhtml used -->
</body>
</html>
