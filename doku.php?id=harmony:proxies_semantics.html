<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
 lang="en" dir="ltr">
<head>
  <title>harmony:proxies_semantics [ES Wiki]</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <meta name="generator" content="DokuWiki Release 2005-09-22e" />
  <link rel="start" href="index.html" />
  <link rel="contents" href="doku.php%3Fid=harmony:proxies_semantics&amp;do=index.html" title="" />
  <link rel="alternate" type="application/rss+xml" title="Recent Changes" href="feed.php" />
  <link rel="alternate" type="application/rss+xml" title="Current Namespace" href="http://wiki.ecmascript.org/feed.php?mode=list&amp;ns=harmony" />
  <link rel="alternate" type="text/html" title="Plain HTML" href="doku.php%3Fid=harmony:proxies_semantics&amp;do=export_html.html" />
  <link rel="alternate" type="text/plain" title="Wiki Markup" href="doku.php%3Fid=harmony:proxies_semantics&amp;do=export_raw" />
  <link rel="stylesheet" media="screen" type="text/css" href="lib/styles/style.css" />
  <meta name="date" content="2013-10-18T15:09:13+0000" />
  <meta name="robots" content="index,follow" />
  <script language="javascript" type="text/javascript" charset="utf-8">
    var alertText   = 'Please enter the text you want to format.\nIt will be appended to the end of the document.'
    var notSavedYet = 'Unsaved changes will be lost.\nReally continue?'
    var DOKU_BASE   = '/'
  </script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/script.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/tw-sack.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/ajax.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/domLib.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/domTT.js"></script>
  <link rel="stylesheet" type="text/css" href="lib/plugins/plugin/style.css" />

  <link rel="shortcut icon" href="lib/images/favicon.ico" />
  <link rel="stylesheet" media="screen" type="text/css" href="lib/tpl/default/layout.css" />
  <link rel="stylesheet" media="screen" type="text/css" href="lib/tpl/default/design.css" />

  
  <link rel="stylesheet" media="print" type="text/css" href="lib/tpl/default/print.css" />

  <!--[if gte IE 5]>
  <style type="text/css">
    /* that IE 5+ conditional comment makes this only visible in IE 5+ */
    /* IE bugfix for transparent PNGs */
    //DISABLED   img { behavior: url("/lib/scripts/pngbehavior.htc"); }
  </style>
  <![endif]-->

  </head>

<body>
<div class="dokuwiki">
  
  <div class="stylehead">

    <div class="header">
      <div class="pagename">
        [[<a href="doku.php%3Fid=harmony:proxies_semantics&amp;do=backlink.html" onclick="return svchk()" onkeypress="return svchk()">harmony:proxies_semantics</a>]]
      </div>
      <div class="logo">
        <a href="doku.php%3Fid=.html" onclick="return svchk()" onkeypress="return svchk()" name="top" accesskey="h" title="[ALT+H]">ES Wiki</a>      </div>
    </div>
  
    
    <div class="bar" id="bar_top">
      <div class="bar-left" id="bar_topleft">
        <form class="button" method="post" action="index.html" onsubmit="return svchk()"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="" /><input type="hidden" name="id" value="harmony:proxies_semantics" /><input type="submit" value="Show pagesource" class="button" title="ALT+V" accesskey="v" /></form>        <form class="button" method="get" action="index.html" onsubmit="return svchk()"><input type="hidden" name="do" value="revisions" /><input type="hidden" name="id" value="harmony:proxies_semantics" /><input type="submit" value="Old revisions" class="button" title="ALT+O" accesskey="o" /></form>      </div>
  
      <div class="bar-right" id="bar_topright">
        <form class="button" method="get" action="index.html" onsubmit="return svchk()"><input type="hidden" name="do" value="recent" /><input type="hidden" name="id" value="" /><input type="submit" value="Recent changes" class="button" title="ALT+R" accesskey="r" /></form>        <form action="doku.php%3Fid=.html" accept-charset="utf-8" class="search" name="search" onsubmit="return svchk()"><input type="hidden" name="do" value="search" /><input type="text" id="qsearch_in" accesskey="f" name="id" class="edit" onkeyup="ajax_qsearch.call('qsearch_in','qsearch_out')" /><input type="submit" value="Search" class="button" /><div id="qsearch_out" class="ajax_qsearch" onclick="this.style.display='none'"></div></form>&nbsp;
      </div>
    </div>

        <div class="breadcrumbs">
      Trace: <span class="bcsep">&raquo;</span> <a href="doku.php%3Fid=harmony:proxies_spec.html" onclick="return svchk()" onkeypress="return svchk()" class="breadcrumbs" title="harmony:proxies_spec">proxies_spec</a> <span class="bcsep">&raquo;</span> <a href="doku.php%3Fid=harmony:extended_object_api.html" onclick="return svchk()" onkeypress="return svchk()" class="breadcrumbs" title="harmony:extended_object_api">extended_object_api</a> <span class="bcsep">&raquo;</span> <a href="doku.php%3Fid=harmony:proxies.html" onclick="return svchk()" onkeypress="return svchk()" class="breadcrumbs" title="harmony:proxies">proxies</a> <span class="bcsep">&raquo;</span> <a href="doku.php%3Fid=harmony:proxy_defaulthandler.html" onclick="return svchk()" onkeypress="return svchk()" class="breadcrumbs" title="harmony:proxy_defaulthandler">proxy_defaulthandler</a> <span class="bcsep">&raquo;</span> <span class="curid"><a href="doku.php%3Fid=harmony:proxies_semantics.html" onclick="return svchk()" onkeypress="return svchk()" class="breadcrumbs" title="harmony:proxies_semantics">proxies_semantics</a></span>          </div>
    
  </div>
  
  
  <div class="page">
    <!-- wikipage start -->
    <div class="toc">
<div class="tocheader"> <script type="text/javascript">showTocToggle("+","-")</script>Table of Contents</div>
<div id="tocinside">
<ul class="toc">
<li class="level1"><span class="li"><a href="doku.php%3Fid=harmony:proxies_semantics.html#the_content_on_this_page_is_obsolete" class="toc">The content on this page is OBSOLETE</a></span><ul class="toc">
<li class="level2"><span class="li"><a href="doku.php%3Fid=harmony:proxies_semantics.html#semantics_of_proxies" class="toc">Semantics of Proxies</a></span><ul class="toc">
<li class="level3"><span class="li"><a href="doku.php%3Fid=harmony:proxies_semantics.html#proxy" class="toc">Proxy</a></span></li>
<li class="level3"><span class="li"><a href="doku.php%3Fid=harmony:proxies_semantics.html#detailed_semantics_of_behavior_for_object_and_function_proxies" class="toc">Detailed semantics of behavior for object and function proxies</a></span></li>
<li class="level3"><span class="li"><a href="doku.php%3Fid=harmony:proxies_semantics.html#detailed_semantics_of_additional_behavior_for_function_proxies" class="toc">Detailed semantics of additional behavior for function proxies</a></span></li>
<li class="level3"><span class="li"><a href="doku.php%3Fid=harmony:proxies_semantics.html#modifications_to_object.seal_object.preventextensions_object.freeze" class="toc">Modifications to Object.seal, Object.preventExtensions, Object.freeze</a></span></li>
<li class="level3"><span class="li"><a href="doku.php%3Fid=harmony:proxies_semantics.html#modifications_to_object.issealed_object.isfrozen" class="toc">Modifications to Object.isSealed, Object.isFrozen</a></span></li>
<li class="level3"><span class="li"><a href="doku.php%3Fid=harmony:proxies_semantics.html#modifications_to_other_object_built-ins" class="toc">Modifications to other Object built-ins</a></span></li>
<li class="level3"><span class="li"><a href="doku.php%3Fid=harmony:proxies_semantics.html#modifications_to_the_evaluation_of_expressions_and_statements" class="toc">Modifications to the evaluation of expressions and statements</a></span></li>
<li class="level3"><span class="li"><a href="doku.php%3Fid=harmony:proxies_semantics.html#utilities" class="toc">Utilities</a></span></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>

<a name="the_content_on_this_page_is_obsolete"></a><h1>The content on this page is OBSOLETE</h1>
<div class="level1">

</div>

<a name="semantics_of_proxies"></a><h2>Semantics of Proxies</h2>
<div class="level2">
<table class="inline">
	<tr>
		<td><strong>This <acronym title="Application Programming Interface">API</acronym> is superseded by the newer <a href="doku.php%3Fid=harmony:proxies_spec.html" class="wikilink1" title="harmony:proxies_spec" onclick="return svchk()" onkeypress="return svchk()">proxies spec</a>.</strong></td>
	</tr>
</table>
<br />

<p>
 A proxy is a new language type, its internal properties having the following semantics (cfr. table 8 in ES5 spec):
</p>

<p>
<strong>behavior for both object proxies and function proxies:</strong>
</p>

<p>
[[Prototype]] : for object proxies: the <code>proto</code> argument of <code>Proxy.create</code> or <code>null</code> if none given. For function proxies: <code>Function.prototype</code> (can&rsquo;t be changed by fixing) (used by instanceof)
</p>

<p>
[[Class]] : &ldquo;Object&rdquo; for object proxies, &ldquo;Function&rdquo; for function proxies (visible via Object.prototype.toString)
</p>

<p>
[[Extensible]] : always returns &lsquo;true&rsquo; until fixed (Object.isExtensible)
</p>

<p>
[[DefineOwnProperty]] : reify as &lsquo;defineProperty&rsquo; trap (Object.defineProperty)
</p>

<p>
[[GetOwnProperty]] : reify as &lsquo;getOwnPropertyDescriptor&rsquo; trap (Object.getOwnPropertyDescriptor)
</p>

<p>
[[GetProperty]] : reify as &lsquo;getPropertyDescriptor&rsquo; trap
</p>

<p>
[[Get]] : reified as a &lsquo;get&rsquo; trap.
</p>

<p>
[[Put]] : reified as a &lsquo;set&rsquo; trap. the return value of the trap indicates whether or not set succeeded. if (set failed &amp;&amp; strict) throw TypeError;
</p>

<p>
[[HasProperty]] : reify as &lsquo;has&rsquo; trap
</p>

<p>
[[Delete]] : reify as &lsquo;delete&rsquo; trap. the return value of the trap indicates whether or not the delete succeeded. if (delete failed &amp;&amp; strict) throw TypeError else return value of trap;
</p>

<p>
[[CanPut]] : always returns true
</p>

<p>
[[DefaultValue]] : used for &ldquo;valueof&rdquo;, same semantics as default [[DefaultValue]] (8.12.8)
</p>

<p>
<strong>additional behavior for function proxies:</strong>
</p>

<p>
[[Call]] : reify as &lsquo;callTrap&rsquo; passed in createFunction factory
</p>

<p>
[[Construct]] : reify as &lsquo;constructTrap&rsquo; passed in createFunction factory, or throw TypeError if undefined
</p>

<p>
[[HasInstance]] : used for &ldquo;instanceof&rdquo;, same semantics as default [[HasInstance]] (15.3.5.3)
</p>

</div>

<a name="proxy"></a><h3>Proxy</h3>
<div class="level3">

<p>
 <strong> Proxy.create (O, Proto) </strong>
</p>

<p>
When the <code>create</code> function is called, the following steps are taken: 
</p>
<ol>
<li class="level1"><div class="li"> If Type(O) is not Object, throw a TypeError exception</div>
</li>
<li class="level1"><div class="li"> If the argument Proto is present and not undefined,</div>
<ul>
<li class="level2"><div class="li"> If Type(Proto) is not Object or Null, throw a TypeError exception</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Else, let Proto be the null value</div>
</li>
<li class="level1"><div class="li"> Let p be a new trapping Proxy object</div>
</li>
<li class="level1"><div class="li"> Set the [[Handler]] internal property of p to O</div>
</li>
<li class="level1"><div class="li"> Set the [[Class]] internal property of p to &ldquo;Object&rdquo;</div>
</li>
<li class="level1"><div class="li"> Set the [[Prototype]] internal property of p to Proto</div>
</li>
<li class="level1"><div class="li"> Set the [[Extensible]] internal property of p to true</div>
</li>
<li class="level1"><div class="li"> Return p</div>
</li>
</ol>

<p>
 <strong>Note:</strong> A Proxy object is an ECMAScript object with built-in methods as specified in the following section.
</p>

<p>
<strong> Proxy.createFunction (O, Call, Construct) </strong>
</p>

<p>
When the <code>createFunction</code> function is called, the following steps are taken: 
</p>
<ol>
<li class="level1"><div class="li"> If Type(O) is not Object, throw a TypeError exception</div>
</li>
<li class="level1"><div class="li"> If IsCallable(Call) is false, throw a TypeError exception</div>
</li>
<li class="level1"><div class="li"> If the argument Construct is present and not undefined</div>
<ul>
<li class="level2"><div class="li"> If IsCallable(Construct) is false, throw a TypeError exception</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Let p be a new trapping FunctionProxy object</div>
</li>
<li class="level1"><div class="li"> Set the [[Handler]] internal property of p to O</div>
</li>
<li class="level1"><div class="li"> Set the [[Class]] internal property of p to &ldquo;Function&rdquo;</div>
</li>
<li class="level1"><div class="li"> Set the [[Prototype]] internal property of p to the standard built-in Function prototype object as specified in 15.3.3.1.</div>
</li>
<li class="level1"><div class="li"> Set the [[CallHandler]] internal property of p to Call</div>
</li>
<li class="level1"><div class="li"> Set the [[ConstructHandler]] internal property of p to Construct</div>
</li>
<li class="level1"><div class="li"> Set the [[Extensible]] internal property of p to true</div>
</li>
<li class="level1"><div class="li"> Return p</div>
</li>
</ol>

<p>
 <strong>Note:</strong> A FunctionProxy object is an ECMAScript object with built-in methods as specified in the following two sections.
</p>

</div>

<a name="detailed_semantics_of_behavior_for_object_and_function_proxies"></a><h3>Detailed semantics of behavior for object and function proxies</h3>
<div class="level3">

<p>
 <strong>[[Prototype]]</strong>
</p>

<p>
For object proxies: if the <code>proto</code> argument passed to Proxy.create is <code>undefined</code>, then <code>null</code> otherwise <code>proto</code>
</p>

<p>
For function proxies: <code>Function.prototype</code>
</p>

<p>
Upon fixing the proxy, the fixed proxy&rsquo;s [[Prototype]] remains unchanged.
</p>

<p>
<strong>[[Class]]</strong>
</p>

<p>
For object proxies: &ldquo;Object&rdquo; For function proxies: &ldquo;Function&rdquo;
</p>

<p>
<strong>[[Extensible]]</strong> : &lsquo;true&rsquo; for trapping proxies, set to &lsquo;false&rsquo; when the proxy is fixed.
</p>

<p>
<strong>[[DefineOwnProperty]] (P, Desc, Throw)</strong>
</p>

<p>
When the [[DefineOwnProperty]] internal method of a trapping proxy O is called with property name P, property descriptor Desc and Boolean flag Throw, the following steps are taken: 
</p>
<ol>
<li class="level1"><div class="li"> Let descObj be FromGenericPropertyDescriptor(Desc)</div>
</li>
<li class="level1"><div class="li"> Call TrapDefineOwnProperty(O, P, descObj, Throw)</div>
</li>
<li class="level1"><div class="li"> Return true</div>
</li>
</ol>

<p>
 <strong>TrapDefineOwnProperty (Proxy, P, DescObj, Throw)</strong>
</p>

<p>
When the abstract operation TrapDefineOwnProperty is called with a trapping proxy Proxy, a property name P, an Object DescObj and a Boolean flag Throw, the following steps are taken: 
</p>
<ol>
<li class="level1"><div class="li"> Let handler be the value of the [[Handler]] internal property of Proxy.</div>
</li>
<li class="level1"><div class="li"> Let defineProperty be the result of calling the [[Get]] internal method of handler with argument &ldquo;defineProperty&rdquo;.</div>
</li>
<li class="level1"><div class="li"> If defineProperty is undefined, throw a TypeError exception.</div>
</li>
<li class="level1"><div class="li"> If IsCallable(defineProperty) is false, throw a TypeError exception.</div>
</li>
<li class="level1"><div class="li"> Return the result of calling the [[Call]] internal method of defineProperty providing handler as the this value, P as the first argument and DescObj as the second argument.</div>
</li>
</ol>

<p>
 Notes:
</p>
<ul>
<li class="level1"><div class="li"> The return value of <code>TrapDefineOwnProperty</code>, and consequently that of the <code>defineProperty</code> trap, is ignored. <code>Object.defineProperty</code>, which calls [[DefineOwnProperty]] always return the object on which the property is defined (in this case the proxy). If the handler wants to indicate that defining the property failed, it should throw a <code>TypeError</code>.</div>
</li>
<li class="level1"><div class="li"> It is impossible to define properties on a trapping proxy itself. When the proxy becomes fixed, its [[DefineOwnProperty]] method implementation is changed to the default implementation (8.12.9)</div>
</li>
<li class="level1"><div class="li"> The <code>Object.defineProperty</code> built-in directly calls the <code>TrapDefineOwnProperty</code> operation. This is to circumvent the restriction of [[DefineOwnProperty]] which requires its <code>Desc</code> argument to be an internal property descriptor. <code>Object.defineProperty</code> can pass property descriptor objects that contain additional, non-standard attributes. That is why <code>TrapDefineOwnProperty</code> expects a property descriptor Object, rather than an internal property descriptor.</div>
</li>
</ul>

<p>
 <strong>[[GetOwnProperty]] (P)</strong>
</p>

<p>
When the [[GetOwnProperty]] internal method of a trapping proxy O is called with property name P, the following steps are taken: 
</p>
<ol>
<li class="level1"><div class="li"> Let descriptor be the result of calling TrapGetOwnProperty(O, P)</div>
</li>
<li class="level1"><div class="li"> If descriptor is undefined, return undefined</div>
</li>
<li class="level1"><div class="li"> Let desc be ToCompletePropertyDescriptor(descriptor)</div>
</li>
<li class="level1"><div class="li"> If desc.[[Configurable]] is false, throw a TypeError Exception.</div>
</li>
<li class="level1"><div class="li"> Return desc</div>
</li>
</ol>

<p>
 Notes:
</p>
<ul>
<li class="level1"><div class="li"> when the proxy becomes fixed, its [[GetOwnProperty]] method implementation is changed to the default implementation (8.12.1)</div>
</li>
<li class="level1"><div class="li"> The built-in <code>Object.getOwnPropertyDescriptor</code> invokes the <code>TrapGetOwnProperty</code> operation directly, to be able to normalize the returned descriptor, rather than to turn it into an internal property descriptor.</div>
</li>
<li class="level1"><div class="li"> step 4 is controversial, see the <a href="doku.php%3Fid=strawman:fixed_properties.html" class="wikilink1" title="strawman:fixed_properties" onclick="return svchk()" onkeypress="return svchk()">fixed properties</a> strawman.</div>
</li>
</ul>

<p>
 <strong>TrapGetOwnProperty (Proxy, P)</strong>
</p>

<p>
When the abstract operation TrapGetOwnProperty is called with a trapping proxy Proxy and a property name P, the following steps are taken: 
</p>
<ol>
<li class="level1"><div class="li"> Let handler be the value of the [[Handler]] internal property of Proxy.</div>
</li>
<li class="level1"><div class="li"> Let getOwnProperty be the result of calling the [[Get]] internal method of handler with argument &ldquo;getOwnPropertyDescriptor&rdquo;.</div>
</li>
<li class="level1"><div class="li"> If getOwnProperty is undefined, throw a TypeError exception.</div>
</li>
<li class="level1"><div class="li"> If IsCallable(getOwnProperty) is false, throw a TypeError exception.</div>
</li>
<li class="level1"><div class="li"> Return the result of calling the [[Call]] internal method of getOwnProperty providing handler as the this value and P as the first argument.</div>
</li>
</ol>

<p>
 <strong>[[GetProperty]] (P)</strong>
</p>

<p>
When the [[GetProperty]] internal method of a trapping proxy O is called with property name P, the following steps are taken: 
</p>
<ol>
<li class="level1"><div class="li"> Let descriptor be the result of calling TrapGetProperty(O, P)</div>
</li>
<li class="level1"><div class="li"> If descriptor is undefined, return undefined</div>
</li>
<li class="level1"><div class="li"> Let desc be ToCompletePropertyDescriptor(descriptor)</div>
</li>
<li class="level1"><div class="li"> If desc.[[Configurable]] is false, throw a TypeError Exception.</div>
</li>
<li class="level1"><div class="li"> Return desc</div>
</li>
</ol>

<p>
 Notes:
</p>
<ul>
<li class="level1"><div class="li"> When the proxy becomes fixed, its [[GetProperty]] method implementation is changed to the default implementation (8.12.2)</div>
</li>
<li class="level1"><div class="li"> The built-in <code>Object.getPropertyDescriptor</code> invokes the <code>TrapGetProperty</code> operation directly, to be able to normalize the returned descriptor, rather than to turn it into an internal property descriptor.</div>
</li>
<li class="level1"><div class="li"> step 4 is controversial, see the <a href="doku.php%3Fid=strawman:fixed_properties.html" class="wikilink1" title="strawman:fixed_properties" onclick="return svchk()" onkeypress="return svchk()">fixed properties</a> strawman.</div>
</li>
</ul>

<p>
 <strong>TrapGetProperty (Proxy, P)</strong>
</p>

<p>
When the abstract operation TrapGetProperty is called with a trapping proxy Proxy and a property name P, the following steps are taken: 
</p>
<ol>
<li class="level1"><div class="li"> Let handler be the value of the [[Handler]] internal property of Proxy.</div>
</li>
<li class="level1"><div class="li"> Let getProperty be the result of calling the [[Get]] internal method of handler with argument &ldquo;getPropertyDescriptor&rdquo;.</div>
</li>
<li class="level1"><div class="li"> If getProperty is undefined, throw a TypeError exception.</div>
</li>
<li class="level1"><div class="li"> If IsCallable(getProperty) is false, throw a TypeError exception.</div>
</li>
<li class="level1"><div class="li"> Return the result of calling the [[Call]] internal method of getProperty providing handler as the this value and P as the first argument.</div>
</li>
</ol>

<p>
 <strong>[[Get]] (P)</strong>
</p>

<p>
When the [[Get]] internal method of a trapping proxy O is called with property name P, the following steps are taken:
</p>
<ol>
<li class="level1"><div class="li"> Let handler be the value of the [[Handler]] internal property of O.</div>
</li>
<li class="level1"><div class="li"> Let get be the result of calling the [[Get]] internal method of handler with argument &ldquo;get&rdquo;.</div>
</li>
<li class="level1"><div class="li"> If get is undefined, return the result of calling Object.[[Get]](P) on O.</div>
</li>
<li class="level1"><div class="li"> If IsCallable(get) is false, throw a TypeError exception.</div>
</li>
<li class="level1"><div class="li"> Return the result of calling the [[Call]] internal method of get providing handler as the this value, O as the first argument and P as the second argument.</div>
</li>
</ol>

<p>
 Notes:
</p>
<ul>
<li class="level1"><div class="li"> <code>get</code> is a derived trap. If missing, the <a href="doku.php%3Fid=harmony:proxies.html#trap_defaults" class="wikilink1" title="harmony:proxies" onclick="return svchk()" onkeypress="return svchk()">default behavior</a> is executed. Object.[[Get]] refers to the default implementation for Objects, ES5 8.12.3. The intent is that the call to [[GetProperty]] in that algorithm refers to the implementation for Proxies, and calls the handler&rsquo;s &ldquo;getPropertyDescriptor&rdquo; trap.</div>
</li>
</ul>

<p>
 <strong>[[Put]] (P, V, Throw)</strong>
</p>

<p>
When the [[Put]] internal method of a trapping proxy O is called with property name P, value V and Boolean flag Throw the following steps are taken: 
</p>
<ol>
<li class="level1"><div class="li"> Let handler be the value of the [[Handler]] internal property of O.</div>
</li>
<li class="level1"><div class="li"> Let set be the result of calling the [[Get]] internal method of handler with argument &ldquo;set&rdquo;.</div>
</li>
<li class="level1"><div class="li"> If set is undefined,</div>
<ul>
<li class="level2"><div class="li"> a. Call DefaultPut(O,P,V,Throw).</div>
</li>
<li class="level2"><div class="li"> b. Return.</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> If IsCallable(set) is false, throw a TypeError exception.</div>
</li>
<li class="level1"><div class="li"> If the result of calling the [[Call]] internal method of set providing handler as the this value, O as the first argument, P as the second argument and V as the third argument is false</div>
<ul>
<li class="level2"><div class="li"> a. Reject</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Return.</div>
</li>
</ol>

<p>
 Notes:
</p>
<ul>
<li class="level1"><div class="li"> <code>set</code> is a derived trap. If missing, the <a href="doku.php%3Fid=harmony:proxies.html#trap_defaults" class="wikilink1" title="harmony:proxies" onclick="return svchk()" onkeypress="return svchk()">default behavior</a> is executed. The below <code>DefaultPut</code> algorithm mimics the default [[Put]] algorithm for Objects (ES5 8.12.5), but does not separately call [[CanPut]] as this would lead to redundant calls to the &ldquo;getOwnPropertyDescriptor&rdquo; and &ldquo;getPropertyDescriptor&rdquo; traps.</div>
</li>
</ul>

<p>
 <strong>DefaultPut(O,P,V,Throw)</strong>
</p>

<p>
When the <code>DefaultPut</code> abstract operation is called with a trapping proxy O, property name P, value V and Boolean flag Throw the following steps are taken: 
</p>
<ol>
<li class="level1"><div class="li"> Let ownDesc be the result of calling the [[GetOwnProperty]] internal method of O with argument P.</div>
</li>
<li class="level1"><div class="li"> If ownDesc is not undefined and IsDataDescriptor(ownDesc) is true, then</div>
<ul>
<li class="level2"><div class="li"> a. If ownDesc.[[Writable]] is false, reject</div>
</li>
<li class="level2"><div class="li"> b. Let valueDesc be the Property Descriptor {[[Value]]: V}.</div>
</li>
<li class="level2"><div class="li"> c. Call the [[DefineOwnProperty]] internal method of O passing P, valueDesc, and Throw as arguments.</div>
</li>
<li class="level2"><div class="li"> d. Return.</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> If ownDesc is not undefined, then it must be an accessor descriptor</div>
<ul>
<li class="level2"><div class="li"> a. If desc.[[Set]] is undefined, reject</div>
</li>
<li class="level2"><div class="li"> b. Let setter be desc.[[Set]] which cannot be undefined.</div>
</li>
<li class="level2"><div class="li"> c. Call the [[Call]] internal method of setter providing O as the this value and providing V as the sole argument.</div>
</li>
<li class="level2"><div class="li"> d. Return.</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Let desc be the result of calling the [[GetProperty]] internal method of O with argument P. This may be either an inherited accessor property descriptor or an inherited data property descriptor.</div>
</li>
<li class="level1"><div class="li"> If desc is not undefined and IsDataDescriptor(desc) is true, then</div>
<ul>
<li class="level2"><div class="li"> a. If desc.[[Writable]] is false, reject</div>
</li>
<li class="level2"><div class="li"> b. Let valueDesc be the Property Descriptor {[[Value]]: V}.</div>
</li>
<li class="level2"><div class="li"> c. Call the [[DefineOwnProperty]] internal method of O passing P, valueDesc, and Throw as arguments.</div>
</li>
<li class="level2"><div class="li"> d. Return.</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> If desc is not undefined, then it must be an accessor descriptor</div>
<ul>
<li class="level2"><div class="li"> a. If desc.[[Set]] is undefined, reject</div>
</li>
<li class="level2"><div class="li"> b. Let setter be desc.[[Set]] which cannot be undefined.</div>
</li>
<li class="level2"><div class="li"> c. Call the [[Call]] internal method of setter providing O as the this value and providing V as the sole argument.</div>
</li>
<li class="level2"><div class="li"> d. Return.</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Else, create a named data property named P on object O as follows</div>
<ul>
<li class="level2"><div class="li"> a. Let newDesc be the Property Descriptor {[[Value]]: V, [[Writable]]: true, [[Enumerable]]: true, [[Configurable]]: true}.</div>
</li>
<li class="level2"><div class="li"> b. Call the [[DefineOwnProperty]] internal method of O passing P, newDesc, and Throw as arguments.</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Return.</div>
</li>
</ol>

<p>
 Note: the intent is that the calls to [[GetOwnProperty]], [[GetProperty]] and [[DefineOwnProperty]] in the above algorithm refer to the implementation for Proxies, and may call the handler&rsquo;s &ldquo;getOwnPropertyDescriptor&rdquo;, &ldquo;getPropertyDescriptor&rdquo; and &ldquo;defineProperty&rdquo; traps.
</p>

<p>
<strong>[[HasProperty]] (P)</strong>
</p>

<p>
When the [[HasProperty]] internal method of a trapping proxy O is called with property name P the following steps are taken: 
</p>
<ol>
<li class="level1"><div class="li"> Let handler be the value of the [[Handler]] internal property of O.</div>
</li>
<li class="level1"><div class="li"> Let has be the result of calling the [[Get]] internal method of handler with argument &ldquo;has&rdquo;.</div>
</li>
<li class="level1"><div class="li"> If has is undefined, return the result of calling Object.[[HasProperty]](P) on O.</div>
</li>
<li class="level1"><div class="li"> If IsCallable(has) is false, throw a TypeError exception.</div>
</li>
<li class="level1"><div class="li"> Let result be the result of calling the [[Call]] internal method of has providing handler as the this value, O as the first argument and P as the second argument.</div>
</li>
<li class="level1"><div class="li"> Return ToBoolean(result)</div>
</li>
</ol>

<p>
 Notes:
</p>
<ul>
<li class="level1"><div class="li"> <code>has</code> is a derived trap. If missing, the <a href="doku.php%3Fid=harmony:proxies.html#trap_defaults" class="wikilink1" title="harmony:proxies" onclick="return svchk()" onkeypress="return svchk()">default behavior</a> is executed. Object.[[HasProperty]] refers to the default implementation for Objects, ES5 8.12.6. The intent is that the call to [[GetProperty]] in that algorithm refers to the implementation for Proxies, and calls the handler&rsquo;s &ldquo;getPropertyDescriptor&rdquo; trap.</div>
</li>
</ul>

<p>
 <strong>[[Delete]] (P, Throw)</strong>
</p>

<p>
When the [[Delete]] internal method of a trapping proxy O is called with property name P and the Boolean flag Throw the following steps are taken: 
</p>
<ol>
<li class="level1"><div class="li"> Let handler be the value of the [[Handler]] internal property of O.</div>
</li>
<li class="level1"><div class="li"> Let delete be the result of calling the [[Get]] internal method of handler with argument &ldquo;delete&rdquo;.</div>
</li>
<li class="level1"><div class="li"> If delete is undefined, throw a TypeError exception.</div>
</li>
<li class="level1"><div class="li"> If IsCallable(delete) is false, throw a TypeError exception.</div>
</li>
<li class="level1"><div class="li"> Let success be the result of calling the [[Call]] internal method of delete providing handler as the this value and P as the first argument</div>
</li>
<li class="level1"><div class="li"> If ToBoolean(success) is false</div>
<ul>
<li class="level2"><div class="li"> a. If Throw then throw a TypeError exception, else return false.</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Return true.</div>
</li>
</ol>

<p>
 <strong>[[CanPut]] (P)</strong>
</p>

<p>
When the [[CanPut]] internal method of a trapping proxy O is called with property name P the following steps are taken: 
</p>
<ol>
<li class="level1"><div class="li"> Return true.</div>
</li>
</ol>

<p>
 Note: this internal method should actually never be invoked. Why is [[CanPut]] not applicable on proxies? It is used in:
</p>
<ol>
<li class="level1"><div class="li"> the definition of [[Put]] built-in method for Objects. Since [[Put]] has different semantics for proxies, [[CanPut]] will not be called on proxies.</div>
</li>
<li class="level1"><div class="li"> the definition of PutValue(Ref, Value) when Ref has a primitive base. Since proxies are not primitive, [[CanPut]] will not be called on proxies.</div>
</li>
</ol>

<p>
 Note: we should not make [[CanPut]] return &lsquo;false&rsquo;, as the spec dictates that [[Put]] operations should not be allowed on any property names for which [[CanPut]] returns false.
</p>

<p>
<strong>[[DefaultValue]] (hint)</strong>
</p>

<p>
The implementation of [[DefaultValue]] for a proxy is the same as the default implementation of [[DefaultValue]] for Objects (8.12.8)
</p>

</div>

<a name="detailed_semantics_of_additional_behavior_for_function_proxies"></a><h3>Detailed semantics of additional behavior for function proxies</h3>
<div class="level3">

<p>
 <strong>[[Call]] (thisValue, listOfArguments)</strong>
</p>

<p>
When the [[Call]] internal method of a function proxy F is called with a this value and a list of arguments, the following steps are taken: 
</p>
<ol>
<li class="level1"><div class="li"> Let callhandler be the value of the [[CallHandler]] internal property of F.</div>
</li>
<li class="level1"><div class="li"> If IsCallable(callhandler) is false, throw a TypeError exception.</div>
</li>
<li class="level1"><div class="li"> Let argArray be listOfArguments converted into an Array.</div>
</li>
<li class="level1"><div class="li"> Return the result of calling the [[Call]] internal method of callhandler providing undefined as the this value, thisValue as the first argument and argArray as the second argument.</div>
</li>
</ol>

<p>
 Note: we could also perform step 2 in the <code>Proxy.createFunction</code> method.
</p>

<p>
<strong>[[Construct]] (listOfArguments)</strong>
</p>

<p>
When the [[Construct]] internal method of a function proxy F is called with a list of arguments the following steps are taken: 
</p>
<ol>
<li class="level1"><div class="li"> Let constructhandler be the value of the [[ConstructHandler]] internal property of F.</div>
</li>
<li class="level1"><div class="li"> If constructhandler is undefined</div>
<ul>
<li class="level2"><div class="li"> Let callhandler be the value of the [[CallHandler]] internal property of F.</div>
</li>
<li class="level2"><div class="li"> If callhandler doesn&rsquo;t have a [[Construct]] internal method, throw a TypeError exception.</div>
</li>
<li class="level2"><div class="li"> Let result be the result of calling the [[Construct]] internal method of callhandler providing the argument list passed to [[Construct]] as <em>args</em>.</div>
</li>
<li class="level2"><div class="li"> return result.</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> If IsCallable(constructhandler) is false, throw a TypeError exception.</div>
</li>
<li class="level1"><div class="li"> Let argArray be listOfArguments converted into an Array.</div>
</li>
<li class="level1"><div class="li"> Let result be the result of calling the [[Call]] internal method of constructhandler providing undefined as the this value and argArray as the first argument.</div>
</li>
<li class="level1"><div class="li"> return result.</div>
</li>
</ol>

<p>
 <strong>[[HasInstance]]</strong>
</p>

<p>
Same semantics as default [[HasInstance]] (15.3.5.3)
</p>

<p>
<strong> 15.3.4.2 Function.prototype.toString ()</strong>
</p>

<p>
When called on a function proxy, returns the result of applying the built-in <code>Function.prototype.toString</code> on the function proxy&rsquo;s call trap.
</p>

</div>

<a name="modifications_to_object.seal_object.preventextensions_object.freeze"></a><h3>Modifications to Object.seal, Object.preventExtensions, Object.freeze</h3>
<div class="level3">

<p>
 Informally:
</p>
<ul>
<li class="level1"><div class="li"> When fixing a proxy, all of its object internal methods are overridden with the default internal methods from section 8.6.2 and its [[Extensible]] property is set to false.</div>
</li>
<li class="level1"><div class="li"> When fixing a function proxy, [[Call]] and [[Construct]] remain as is.</div>
</li>
</ul>

<p>
 <strong>15.2.3.9 Object.freeze ( O )</strong>
</p>

<p>
When the <strong>freeze</strong> function is called with argument O, the following steps are taken: 
</p>
<ol>
<li class="level1"><div class="li"> If Type(O) is not Object throw a TypeError exception.</div>
</li>
<li class="level1"><div class="li"> If O is a trapping proxy</div>
<ul>
<li class="level2"><div class="li"> a. Let handler be the value of the [[Handler]] internal property of O.</div>
</li>
<li class="level2"><div class="li"> b. Let fix be the result of calling the [[Get]] internal method of handler with argument &ldquo;fix&rdquo;.</div>
</li>
<li class="level2"><div class="li"> c. If fix is undefined, throw a TypeError exception.</div>
</li>
<li class="level2"><div class="li"> d. If IsCallable(fix) is false, throw a TypeError exception.</div>
</li>
<li class="level2"><div class="li"> e. Let props be the result of calling the [[Call]] internal method of fix providing handler as the this value and an empty argument list.</div>
</li>
<li class="level2"><div class="li"> f. If props is undefined</div>
<ul>
<li class="level3"><div class="li"> i. throw TypeError</div>
</li>
</ul>
</li>
<li class="level2"><div class="li"> g. set the internal [[Class]] property of O to &ldquo;Object&rdquo; if O is an object proxy or to &ldquo;Function&rdquo; otherwise</div>
</li>
<li class="level2"><div class="li"> h. delete the internal [[Handler]] property of O (enables handler to be garbage-collected)</div>
</li>
<li class="level2"><div class="li"> i. set the [[Get]], [[Put]], [[HasProperty]], [[Delete]], [[CanPut]], [[DefineOwnProperty]], [[GetOwnProperty]] and [[GetProperty]] internal methods of O to their default implementations</div>
</li>
<li class="level2"><div class="li"> j. perform Object.defineProperties(O, props) (according to 15.2.3.7)</div>
</li>
<li class="level2"><div class="li"> k. If O was a function proxy, and &ldquo;length&rdquo; or &ldquo;prototype&rdquo; are not defined, initialize these properties according to the corresponding properties of the function proxy&rsquo;s call trap.</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Perform the regular Object.freeze steps according to 15.2.3.9, starting from step 2.</div>
</li>
</ol>

<p>
 The same prologue is inserted in Object.seal (15.2.3.8) and Object.preventExtensions (15.2.3.10) except that in step 3 the appropriate method is invoked.
</p>

<p>
<strong>Note:</strong> recursive fixing should be disallowed. If <code>fix()</code> is called on a proxy handler while the same proxy is already being fixed (an earlier call to fix() is already on the stack), a <code>TypeError</code> should be thrown. This is not (yet) reflected in the above semantics.
</p>

</div>

<a name="modifications_to_object.issealed_object.isfrozen"></a><h3>Modifications to Object.isSealed, Object.isFrozen</h3>
<div class="level3">

<p>
 Informally:
</p>
<ul>
<li class="level1"><div class="li"> When one of these primitives is invoked on a trapping proxy, return false, otherwise perform the default behavior.</div>
</li>
</ul>

<p>
 <strong>15.2.3.12 Object.isFrozen ( O )</strong>
</p>

<p>
When the <strong>isFrozen</strong> function is called with argument O, the following steps are taken: 
</p>
<ol>
<li class="level1"><div class="li"> If Type(O) is not Object throw a TypeError exception.</div>
</li>
<li class="level1"><div class="li"> If O is a trapping Proxy</div>
<ul>
<li class="level2"><div class="li"> a. return false.</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Otherwise, perform the regular Object.isFrozen steps according to 15.2.3.12, starting from step 2.</div>
</li>
</ol>

<p>
 The same prologue is inserted in Object.isSealed (15.2.3.11) except that in step 3 the appropriate method is invoked.
</p>

<p>
Object.isExtensible (15.2.3.13) need not be changed, as the [[Extensible]] attribute for trapping proxies is <code>true</code> and for fixed proxies is <code>false</code>.
</p>

</div>

<a name="modifications_to_other_object_built-ins"></a><h3>Modifications to other Object built-ins</h3>
<div class="level3">

<p>
 <strong>15.2.3.3 Object.getOwnPropertyDescriptor ( O, P )</strong>
</p>

<p>
When the <strong>getOwnPropertyDescriptor</strong> function is called, the following steps are taken: 
</p>
<ol>
<li class="level1"><div class="li"> If Type(O) is not Object throw a TypeError exception.</div>
</li>
<li class="level1"><div class="li"> Let name be ToString(P)</div>
</li>
<li class="level1"><div class="li"> If O is a trapping proxy</div>
<ul>
<li class="level2"><div class="li"> a. Let descObj be the result of calling TrapGetOwnProperty(O, P)</div>
</li>
<li class="level2"><div class="li"> b. Let normalizedDesc be the result of calling NormalizeAndCompletePropertyDescriptor(descObj)</div>
</li>
<li class="level2"><div class="li"> c. Return normalizedDesc</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Let desc be the result of calling the [[GetOwnProperty]] internal method of O with argument name.</div>
</li>
<li class="level1"><div class="li"> Return the result of calling FromPropertyDescriptor(desc) (8.10.4).</div>
</li>
</ol>

<p>
 <strong> Object.getPropertyDescriptor ( O, P )</strong>
</p>

<p>
Note: this built-in does not exist in ES5.
</p>

<p>
When the <strong>getPropertyDescriptor</strong> function is called, the following steps are taken: 
</p>
<ol>
<li class="level1"><div class="li"> If Type(O) is not Object throw a TypeError exception.</div>
</li>
<li class="level1"><div class="li"> Let name be ToString(P)</div>
</li>
<li class="level1"><div class="li"> If O is a trapping proxy</div>
<ul>
<li class="level2"><div class="li"> a. Let descObj be the result of calling TrapGetProperty(O, P)</div>
</li>
<li class="level2"><div class="li"> b. Let normalizedDesc be the result of calling NormalizeAndCompletePropertyDescriptor(descObj)</div>
</li>
<li class="level2"><div class="li"> c. Return normalizedDesc</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Let desc be the result of calling the [[GetProperty]] internal method of O with argument name.</div>
</li>
<li class="level1"><div class="li"> Return the result of calling FromPropertyDescriptor(desc) (8.10.4).</div>
</li>
</ol>

<p>
 <strong>15.2.3.4 Object.getOwnPropertyNames ( O )</strong>
</p>

<p>
When the <strong>getOwnPropertyNames</strong> function is called, the following steps are taken: 
</p>
<ol>
<li class="level1"><div class="li"> If Type(O) is not Object throw a TypeError exception.</div>
</li>
<li class="level1"><div class="li"> If O is a trapping proxy</div>
<ul>
<li class="level2"><div class="li"> a. Let names be the result of calling TrapGetOwnPropertyNames(O)</div>
</li>
<li class="level2"><div class="li"> b. return ToStringArray(names).</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Perform the regular Object.getOwnPropertyNames steps according to 15.2.3.4, starting from step 2.</div>
</li>
</ol>

<p>
 <strong>TrapGetOwnPropertyNames(O)</strong>
</p>

<p>
When the TrapGetOwnPropertyNames abstract operation is called on a trapping proxy O, the following steps are taken: 
</p>
<ol>
<li class="level1"><div class="li"> Let handler be the value of the [[Handler]] internal property of O.</div>
</li>
<li class="level1"><div class="li"> Let getOwnPropertyNames be the result of calling the [[Get]] internal method of handler with argument &ldquo;getOwnPropertyNames&rdquo;.</div>
</li>
<li class="level1"><div class="li"> If getOwnPropertyNames is undefined, throw a TypeError exception.</div>
</li>
<li class="level1"><div class="li"> If IsCallable(getOwnPropertyNames) is false, throw a TypeError exception.</div>
</li>
<li class="level1"><div class="li"> Return the result of calling the [[Call]] internal method of getOwnPropertyNames providing handler as the this value and an empty argument list.</div>
</li>
</ol>

<p>
 <strong>Object.getPropertyNames ( O )</strong>
</p>

<p>
Note: this built-in does not exist in ES5.
</p>

<p>
When the <strong>getPropertyNames</strong> function is called, the following steps are taken: 
</p>
<ol>
<li class="level1"><div class="li"> If Type(O) is not Object throw a TypeError exception.</div>
</li>
<li class="level1"><div class="li"> If O is a trapping proxy</div>
<ul>
<li class="level2"><div class="li"> a. Let names be the result of calling TrapGetPropertyNames(O)</div>
</li>
<li class="level2"><div class="li"> b. return ToStringArray(names).</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Let names be the result of calling Object.getOwnPropertyNames(O)</div>
</li>
<li class="level1"><div class="li"> Let proto be O.[[Prototype]]</div>
</li>
<li class="level1"><div class="li"> while proto is not null</div>
<ul>
<li class="level2"><div class="li"> a. Let newnames be the result of calling Object.getOwnpropertyNames(proto)</div>
</li>
<li class="level2"><div class="li"> b. Set props to the result of calling Array.prototype.concat, passing names as the this value and newnames as the sole argument</div>
</li>
<li class="level2"><div class="li"> c. Set proto to proto.[[Prototype]]</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Remove any duplicate property names from names</div>
</li>
<li class="level1"><div class="li"> Return names</div>
</li>
</ol>

<p>
 <strong>TrapGetPropertyNames(O)</strong>
</p>

<p>
When the TrapGetPropertyNames abstract operation is called on a trapping proxy O, the following steps are taken: 
</p>
<ol>
<li class="level1"><div class="li"> Let handler be the value of the [[Handler]] internal property of O.</div>
</li>
<li class="level1"><div class="li"> Let getPropertyNames be the result of calling the [[Get]] internal method of handler with argument &ldquo;getPropertyNames&rdquo;.</div>
</li>
<li class="level1"><div class="li"> If getPropertyNames is undefined, throw a TypeError exception.</div>
</li>
<li class="level1"><div class="li"> If IsCallable(getPropertyNames) is false, throw a TypeError exception.</div>
</li>
<li class="level1"><div class="li"> Return the result of calling the [[Call]] internal method of getPropertyNames providing handler as the this value and an empty argument list.</div>
</li>
</ol>

<p>
 <strong>15.2.3.6 Object.defineProperty ( O, P, Attributes )</strong>
</p>

<p>
When the <strong>defineProperty</strong> function is called, the following steps are taken: 
</p>
<ol>
<li class="level1"><div class="li"> If Type(O) is not Object throw a TypeError exception.</div>
</li>
<li class="level1"><div class="li"> Let name be ToString(P).</div>
</li>
<li class="level1"><div class="li"> If O is a trapping proxy</div>
<ul>
<li class="level2"><div class="li"> a. Let descObj be the result of NormalizePropertyDescriptor(Attributes)</div>
</li>
<li class="level2"><div class="li"> b. Call TrapDefineOwnProperty(O, name, descObj, true)</div>
</li>
<li class="level2"><div class="li"> c. Return O.</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Let desc be the result of ToPropertyDescriptor(Attributes)</div>
</li>
<li class="level1"><div class="li"> Call the [[DefineOwnProperty]] internal method of O with arguments name, desc, and true.</div>
</li>
<li class="level1"><div class="li"> Return O.</div>
</li>
</ol>

<p>
 <strong>15.2.3.7 Object.defineProperties ( O, Properties )</strong>
</p>

<p>
Replace step 6.c. by:
</p>
<ul>
<li class="level1"><div class="li"> 6.c. Call Object.defineProperty(O, P, desc), using the above definition of Object.defineProperty</div>
</li>
</ul>

<p>
 Notes:
</p>
<ul>
<li class="level1"><div class="li"> This change is necessary so that calling <code>Object.defineProperties</code> on a trapping proxy will correctly pass on non-standard property descriptor attributes.</div>
</li>
</ul>

<p>
 <strong>15.2.3.14 Object.keys ( O )</strong>
</p>

<p>
When the <strong>keys</strong> function is called with argument O, the following steps are taken: 
</p>
<ol>
<li class="level1"><div class="li"> If Type(O) is not Object throw a TypeError exception.</div>
</li>
<li class="level1"><div class="li"> If O is a trapping proxy</div>
<ul>
<li class="level2"><div class="li"> a. Let handler be the value of the [[Handler]] internal property of O.</div>
</li>
<li class="level2"><div class="li"> b. Let keys be the result of calling the [[Get]] internal method of handler with argument &ldquo;keys&rdquo;.</div>
</li>
<li class="level2"><div class="li"> c. If keys is undefined,</div>
<ul>
<li class="level3"><div class="li"> i. Let trapResult be the result of calling TrapGetOwnPropertyNames(O)</div>
</li>
<li class="level3"><div class="li"> ii. Let names be the result of calling FilterEnumerableOwn(O, trapResult)</div>
</li>
<li class="level3"><div class="li"> iii. Return names</div>
</li>
</ul>
</li>
<li class="level2"><div class="li"> d. If IsCallable(keys) is false, throw a TypeError exception.</div>
</li>
<li class="level2"><div class="li"> e. Let names be the result of calling the [[Call]] internal method of keys providing handler as the this value and an empty argument list.</div>
</li>
<li class="level2"><div class="li"> f. Return ToStringArray(names).</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Perform the regular Object.keys steps according to 15.2.3.14, starting from step 2.</div>
</li>
</ol>

<p>
 Notes:
</p>
<ul>
<li class="level1"><div class="li"> <code>keys</code> is a derived trap. If missing, the <a href="doku.php%3Fid=harmony:proxies.html#trap_defaults" class="wikilink1" title="harmony:proxies" onclick="return svchk()" onkeypress="return svchk()">default behavior</a> is performed by consulting the handler&rsquo;s &ldquo;getOwnPropertyNames&rdquo; and &ldquo;getOwnPropertyDescriptor&rdquo; traps.</div>
</li>
</ul>

<p>
 <strong>15.2.4.5 Object.prototype.hasOwnProperty ( V )</strong>
</p>

<p>
When the <strong>hasOwnProperty</strong> method is called with argument V, the following steps are taken:
</p>
<ol>
<li class="level1"><div class="li"> Let P be ToString(V).</div>
</li>
<li class="level1"><div class="li"> Let O be the result of calling ToObject passing the this value as the argument.</div>
</li>
<li class="level1"><div class="li"> If O is a trapping proxy</div>
<ul>
<li class="level2"><div class="li"> a. Let handler be the value of the [[Handler]] internal property of O.</div>
</li>
<li class="level2"><div class="li"> b. Let hasOwn be the result of calling the [[Get]] internal method of handler with argument &ldquo;hasOwn&rdquo;.</div>
</li>
<li class="level2"><div class="li"> c. If hasOwn is not undefined,</div>
<ul>
<li class="level3"><div class="li"> i. If IsCallable(hasOwn) is false, throw a TypeError exception.</div>
</li>
<li class="level3"><div class="li"> ii. Let result be the result of calling the [[Call]] internal method of hasOwn providing handler as the this value and P as the single argument.</div>
</li>
<li class="level3"><div class="li"> iii. Return ToBoolean(result).</div>
</li>
</ul>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Perform the regular Object.prototype.hasOwnProperty steps according to 15.2.4.5, starting from step 3.</div>
</li>
</ol>

<p>
 Notes:
</p>
<ul>
<li class="level1"><div class="li"> <code>hasOwn</code> is a derived trap. If missing, the <a href="doku.php%3Fid=harmony:proxies.html#trap_defaults" class="wikilink1" title="harmony:proxies" onclick="return svchk()" onkeypress="return svchk()">default behavior</a> is executed. In this case, the regular <code>Object.prototype.hasOwnProperty</code> algorithm (ES5 15.2.4.5) is executed, and should trigger the handler&rsquo;s &ldquo;getOwnPropertyDescriptor&rdquo; trap.</div>
</li>
</ul>

</div>

<a name="modifications_to_the_evaluation_of_expressions_and_statements"></a><h3>Modifications to the evaluation of expressions and statements</h3>
<div class="level3">

<p>
 <strong>12.6.4 The for-in Statement</strong> 
</p>
<ul>
<li class="level1"><div class="li"> 1. through 5. unmodified</div>
</li>
<li class="level1"><div class="li"> 6. If obj is a trapping proxy</div>
<ul>
<li class="level2"><div class="li"> a. Let handler be the value of the [[Handler]] internal property of obj.</div>
</li>
<li class="level2"><div class="li"> b. Let enumerate be the result of calling the [[Get]] internal method of handler with argument &ldquo;enumerate&rdquo;.</div>
</li>
<li class="level2"><div class="li"> c. If enumerate is undefined</div>
<ul>
<li class="level3"><div class="li"> i. Let trapResult be the result of calling TrapGetPropertyNames(O)</div>
</li>
<li class="level3"><div class="li"> ii. Let propertyNames be the result of calling FilterEnumerable(O, trapResult)</div>
</li>
</ul>
</li>
<li class="level2"><div class="li"> d. Else, enumerate is defined</div>
<ul>
<li class="level3"><div class="li"> i. If IsCallable(enumerate) is false, throw a TypeError exception.</div>
</li>
<li class="level3"><div class="li"> ii. Let names be the result of calling the [[Call]] internal method of enumerate providing handler as the this value and an empty argument list.</div>
</li>
<li class="level3"><div class="li"> iii. Let propertyNames be ToStringArray(names).</div>
</li>
</ul>
</li>
<li class="level2"><div class="li"> g. For each P in propertyNames</div>
<ul>
<li class="level3"><div class="li"> i. Perform steps 6.b to 6.g.i from the original algorithm.</div>
</li>
</ul>
</li>
<li class="level2"><div class="li"> h. Return (normal, V, empty).</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Perform the original step 6 in the algorithm.</div>
</li>
</ul>

<p>
 Notes:
</p>
<ul>
<li class="level1"><div class="li"> If <code>for-in</code> encounters a non-proxy object <code>obj</code> whose [[Prototype]] is a Proxy object <code>p</code>, then the original for-in algorithm must be modified such that, after all of <code>obj</code>&lsquo;s properties have been enumerated, the &ldquo;enumerate&rdquo; trap of <code>p</code> is invoked, returning an array of properties <code>props</code>. The for-in algorithm should then continue enumerating properties based on <code>props</code>, with already enumerated properties filtered out. After <code>p</code>&lsquo;s properties have been enumerated, the for-in algorithm should not attempt to enumerate the properties of <code>p</code>&lsquo;s prototype.</div>
</li>
<li class="level1"><div class="li"> <code>enumerate</code> is a derived trap. If missing, the <a href="doku.php%3Fid=harmony:proxies.html#trap_defaults" class="wikilink1" title="harmony:proxies" onclick="return svchk()" onkeypress="return svchk()">default behavior</a> is executed by consulting the handler&rsquo;s &ldquo;getPropertyNames&rdquo; and &ldquo;getPropertyDescriptor&rdquo; traps.</div>
</li>
</ul>

</div>

<a name="utilities"></a><h3>Utilities</h3>
<div class="level3">

<p>
 ToStringArray is called to make sure that the result of traps such as <code>getOwnPropertyNames</code> is fresh and well-formed.
</p>

<p>
<strong> ToStringArray ( O )</strong>
</p>
<ol>
<li class="level1"><div class="li"> If Type(O) is not Object, throw a TypeError exception</div>
</li>
<li class="level1"><div class="li"> Let len be the result of calling the [[Get]] internal method of O with argument &ldquo;length&rdquo;</div>
</li>
<li class="level1"><div class="li"> Let n be ToUint32(len)</div>
</li>
<li class="level1"><div class="li"> Let array be the result of creating a new Object as if by the expression new Array(n) where Array is the standard built-in constructor with that name.</div>
</li>
<li class="level1"><div class="li"> Let index be 0.</div>
</li>
<li class="level1"><div class="li"> Repeat, while index &lt; n</div>
<ul>
<li class="level2"><div class="li"> a. Let nextElement be the result of calling the [[Get]] internal method of O with argument ToString(index).</div>
</li>
<li class="level2"><div class="li"> b. Let s be ToString(nextElement)</div>
</li>
<li class="level2"><div class="li"> c. If s is the same as any previous s obtained in this loop, throw a TypeError exception.</div>
</li>
<li class="level2"><div class="li"> d. Call the [[DefineOwnProperty]] internal method of array with arguments ToString(index), the PropertyDescriptor {[[Value]]: s, [[Writable]]: true, [[Enumerable]]: true, [[Configurable]]: true}, and true.</div>
</li>
<li class="level2"><div class="li"> e. Increment index by 1.</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Return array.</div>
</li>
</ol>

<p>
 ToCompletePropertyDescriptor creates a fresh, complete, internal property descriptor.
</p>

<p>
<strong> ToCompletePropertyDescriptor ( Obj ) </strong>
</p>
<ol>
<li class="level1"><div class="li"> If Type(Obj) is not Object, throw a TypeError exception</div>
</li>
<li class="level1"><div class="li"> Let desc be the result of calling ToPropertyDescriptor(Obj)</div>
</li>
<li class="level1"><div class="li"> If IsGenericDescriptor(desc) or IsDataDescriptor(desc) is true, then</div>
<ul>
<li class="level2"><div class="li"> a. If the value of an attribute field of desc, considered as a data descriptor, is absent, set it to its default value.</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Else if the value of an attribute field of desc, considered as an accessor descriptor, is absent, set it to its default value.</div>
</li>
<li class="level1"><div class="li"> Return desc.</div>
</li>
</ol>

<p>
 FromGenericPropertyDescriptor creates a new ECMAScript Object based on a generic (potentially incomplete) internal property descriptor.
</p>

<p>
<strong> FromGenericPropertyDescriptor ( Desc ) </strong>
</p>
<ol>
<li class="level1"><div class="li"> If Desc is undefined, return undefined</div>
</li>
<li class="level1"><div class="li"> Let obj be the result of creating a new object as if by the expression new Object() where Object is the standard built-in constructor with that name.</div>
</li>
<li class="level1"><div class="li"> If Desc has a [[Value]] field,</div>
<ul>
<li class="level2"><div class="li"> a. Call the [[DefineOwnProperty]] internal method of obj with arguments &ldquo;value&rdquo;, Property Descriptor {[[Value]]: Desc.[[Value]], [[Writable]]: true, [[Enumerable]]: true, [[Configurable]]: true}, and true.</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> If Desc has a [[Writable]] field,</div>
<ul>
<li class="level2"><div class="li"> a. Call the [[DefineOwnProperty]] internal method of obj with arguments &ldquo;writable&rdquo;, Property Descriptor {[[Value]]: Desc.[[Writable]], [[Writable]]: true, [[Enumerable]]: true, [[Configurable]]: true}, and true.</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> If Desc has a [[Get]] field,</div>
<ul>
<li class="level2"><div class="li"> a. Call the [[DefineOwnProperty]] internal method of obj with arguments &ldquo;get&rdquo;, Property Descriptor {[[Value]]: Desc.[[Get]], [[Writable]]: true, [[Enumerable]]: true, [[Configurable]]: true}, and true.</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> If Desc has a [[Set]] field,</div>
<ul>
<li class="level2"><div class="li"> a. Call the [[DefineOwnProperty]] internal method of obj with arguments &ldquo;set&rdquo;, Property Descriptor {[[Value]]: Desc.[[Set]], [[Writable]]: true, [[Enumerable]]: true, [[Configurable]]: true}, and true.</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> If Desc has a [[Enumerable]] field,</div>
<ul>
<li class="level2"><div class="li"> a. Call the [[DefineOwnProperty]] internal method of obj with arguments &ldquo;enumerable&rdquo;, Property Descriptor {[[Value]]: Desc.[[Enumerable]], [[Writable]]: true, [[Enumerable]]: true, [[Configurable]]: true}, and true.</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> If Desc has a [[Configurable]] field,</div>
<ul>
<li class="level2"><div class="li"> a. Call the [[DefineOwnProperty]] internal method of obj with arguments &ldquo;configurable&rdquo;, Property Descriptor {[[Value]]: Desc.[[Configurable]], [[Writable]]: true, [[Enumerable]]: true, [[Configurable]]: true}, and true.</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Return obj</div>
</li>
</ol>

<p>
 <strong> NormalizePropertyDescriptor ( Attributes ) </strong>
</p>

<p>
When the abstract operation NormalizePropertyDescriptor is called with object Attributes, the following steps are taken: 
</p>
<ol>
<li class="level1"><div class="li"> If Type(Attributes) is not Object throw a TypeError exception.</div>
</li>
<li class="level1"><div class="li"> Let desc be the result of calling ToPropertyDescriptor(Attributes)</div>
</li>
<li class="level1"><div class="li"> Let descObj be the result of calling FromGenericPropertyDescriptor(desc)</div>
</li>
<li class="level1"><div class="li"> For each enumerable property name N in Attributes that is not a standard property descriptor attribute name,</div>
<ul>
<li class="level2"><div class="li"> a. Let attr be the result of calling the [[Get]] internal method of Attributes with N.</div>
</li>
<li class="level2"><div class="li"> b. Call the [[DefineOwnProperty]] internal method of descObj with arguments N, the Property Descriptor {[[Value]]: attr, [[Writable]]:true, [[Enumerable]]:true, [[Configurable]]:true}, and true.</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Return descObj.</div>
</li>
</ol>

<p>
 Notes:
</p>
<ul>
<li class="level1"><div class="li"> The standard property descriptor attribute names are <code>&ldquo;value&rdquo;</code>, <code>&ldquo;writable&rdquo;</code>, <code>&ldquo;get&rdquo;</code>, <code>&ldquo;set&rdquo;</code>, <code>&ldquo;enumerable&rdquo;</code> and <code>&ldquo;configurable&rdquo;</code>.</div>
</li>
<li class="level1"><div class="li"> step 4 is determined as if by performing a for-in loop over Attributes. If Attributes is a Proxy, this will trigger that Proxy&rsquo;s &ldquo;enumerate&rdquo; trap.</div>
</li>
<li class="level1"><div class="li"> Any enumerable own and inherited properties of Attributes, whose name is non-standard, are treated as &ldquo;custom&rdquo; attributes. This is consistent with <code>ToPropertyDescriptor</code>&lsquo;s use of [[HasProperty]] and [[Get]] to determine the standard attributes (Section 8.10.5).</div>
</li>
<li class="level1"><div class="li"> Custom attributes are defined as own enumerable, configurable, writable data properties on the new descriptor object. This is consistent with <code>FromPropertyDescriptor</code>&lsquo;s definition of the standard attributes (Section 8.10.4)</div>
</li>
</ul>

<p>
 <strong> NormalizeAndCompletePropertyDescriptor ( Attributes ) </strong>
</p>

<p>
When the abstract operation NormalizeAndCompletePropertyDescriptor is called with object Attributes, the following steps are taken: 
</p>
<ol>
<li class="level1"><div class="li"> If Attributes is undefined, return undefined</div>
</li>
<li class="level1"><div class="li"> If Type(Attributes) is not Object throw a TypeError exception.</div>
</li>
<li class="level1"><div class="li"> Let desc be the result of calling ToCompletePropertyDescriptor(Attributes)</div>
</li>
<li class="level1"><div class="li"> Let descObj be the result of calling FromPropertyDescriptor(desc)</div>
</li>
<li class="level1"><div class="li"> For each enumerable property name N in Attributes that is not a standard property descriptor attribute name,</div>
<ul>
<li class="level2"><div class="li"> a. Let attr be the result of calling the [[Get]] internal method of Attributes with N.</div>
</li>
<li class="level2"><div class="li"> b. Call the [[DefineOwnProperty]] internal method of descObj with arguments N, the Property Descriptor {[[Value]]: attr, [[Writable]]:true, [[Enumerable]]:true, [[Configurable]]:true}, and true.</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Return descObj.</div>
</li>
</ol>

<p>
 <strong>FilterEnumerableOwn ( P, V )</strong>
</p>

<p>
When the FilterEnumerableOwn abstract operation is called on a trapping proxy P with a value V, the following steps are taken: 
</p>
<ol>
<li class="level1"><div class="li"> Let O be the result of calling ToObject(V)</div>
</li>
<li class="level1"><div class="li"> Let lenValue be the result of calling the [[Get]] internal method of O with the argument &ldquo;length&rdquo;.</div>
</li>
<li class="level1"><div class="li"> Let len be ToUint32(lenValue).</div>
</li>
<li class="level1"><div class="li"> Let A be a new array created as if by the expression new Array() where Array is the standard built-in constructor with that name.</div>
</li>
<li class="level1"><div class="li"> Let k be 0.</div>
</li>
<li class="level1"><div class="li"> Let to be 0.</div>
</li>
<li class="level1"><div class="li"> Repeat, while k &lt; len</div>
<ul>
<li class="level2"><div class="li"> a. Let Pk be ToString(k).</div>
</li>
<li class="level2"><div class="li"> b. Let kPresent be the result of calling the [[HasProperty]] internal method of O with argument Pk.</div>
</li>
<li class="level2"><div class="li"> c. If kPresent is true, then</div>
<ul>
<li class="level3"><div class="li"> i. Let kValue be the result of calling the [[Get]] internal method of O with argument Pk.</div>
</li>
<li class="level3"><div class="li"> ii. Let name be ToString(kValue)</div>
</li>
<li class="level3"><div class="li"> iii. Let desc be the result of calling the [[GetOwnProperty]] internal method of P, passing name as the sole argument</div>
</li>
<li class="level3"><div class="li"> iv. If desc is not undefined and desc.[[Enumerable]] is true, then</div>
<ul>
<li class="level4"><div class="li"> 1. Call the [[DefineOwnProperty]] internal method of A with arguments ToString(to), Property Descriptor {[[Value]]: name, [[Writable]]: true, [[Enumerable]]: true, [[Configurable]]: true}, and true.</div>
</li>
<li class="level4"><div class="li"> 2. Increase to by 1.</div>
</li>
</ul>
</li>
</ul>
</li>
<li class="level2"><div class="li"> d. Increase k by 1.</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Return A.</div>
</li>
</ol>

<p>
 Notes:
</p>
<ul>
<li class="level1"><div class="li"> The above specification is based on that of <code>Array.prototype.filter</code> (ES5 section 15.4.4.20)</div>
</li>
<li class="level1"><div class="li"> This algorithm is called as part of the default behavior of <code>Object.keys</code> on a trapping proxy, when the handler does not implement the derived <code>keys</code> trap.</div>
</li>
<li class="level1"><div class="li"> The call to [[GetOwnProperty]] in step 7.c.iii. may trigger the proxy&rsquo;s &ldquo;getOwnPropertyDescriptor&rdquo; trap.</div>
</li>
</ul>

<p>
 <strong>FilterEnumerable ( P, V )</strong>
</p>

<p>
When the FilterEnumerable abstract operation is called on a trapping proxy P with a value V, the following steps are taken: 
</p>
<ol>
<li class="level1"><div class="li"> Let O be the result of calling ToObject(V)</div>
</li>
<li class="level1"><div class="li"> Let lenValue be the result of calling the [[Get]] internal method of O with the argument &ldquo;length&rdquo;.</div>
</li>
<li class="level1"><div class="li"> Let len be ToUint32(lenValue).</div>
</li>
<li class="level1"><div class="li"> Let A be a new array created as if by the expression new Array() where Array is the standard built-in constructor with that name.</div>
</li>
<li class="level1"><div class="li"> Let k be 0.</div>
</li>
<li class="level1"><div class="li"> Let to be 0.</div>
</li>
<li class="level1"><div class="li"> Repeat, while k &lt; len</div>
<ul>
<li class="level2"><div class="li"> a. Let Pk be ToString(k).</div>
</li>
<li class="level2"><div class="li"> b. Let kPresent be the result of calling the [[HasProperty]] internal method of O with argument Pk.</div>
</li>
<li class="level2"><div class="li"> c. If kPresent is true, then</div>
<ul>
<li class="level3"><div class="li"> i. Let kValue be the result of calling the [[Get]] internal method of O with argument Pk.</div>
</li>
<li class="level3"><div class="li"> ii. Let name be ToString(kValue)</div>
</li>
<li class="level3"><div class="li"> iii. Let desc be the result of calling the [[GetProperty]] internal method of P, passing name as the sole argument</div>
</li>
<li class="level3"><div class="li"> iv. If desc is not undefined and desc.[[Enumerable]] is true, then</div>
<ul>
<li class="level4"><div class="li"> 1. Call the [[DefineOwnProperty]] internal method of A with arguments ToString(to), Property Descriptor {[[Value]]: name, [[Writable]]: true, [[Enumerable]]: true, [[Configurable]]: true}, and true.</div>
</li>
<li class="level4"><div class="li"> 2. Increase to by 1.</div>
</li>
</ul>
</li>
</ul>
</li>
<li class="level2"><div class="li"> d. Increase k by 1.</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Return A.</div>
</li>
</ol>

<p>
 Notes:
</p>
<ul>
<li class="level1"><div class="li"> The above specification is based on that of <code>Array.prototype.filter</code> (ES5 section 15.4.4.20)</div>
</li>
<li class="level1"><div class="li"> This algorithm is called as part of the default behavior of <code>for (var val in proxy){...}</code> on a trapping proxy, when the handler does not implement the derived <code>enumerate</code> trap.</div>
</li>
<li class="level1"><div class="li"> The call to [[GetProperty]] in step 7.c.iii. may trigger the proxy&rsquo;s &ldquo;getPropertyDescriptor&rdquo; trap.</div>
</li>
</ul>

</div>

<!-- cachefile /usr/local/www/es-lang.org/wiki/data/cache/0/07e109f7c4476b4db0e88ccab53b7c0e.xhtml used -->
    <!-- wikipage stop -->
  </div>

  <div class="clearer">&nbsp;</div>

  
  <div class="stylefoot">

    <div class="meta">
      <div class="user">
              </div>
      <div class="doc">
        harmony/proxies_semantics.txt &middot; Last modified: 2013/10/18 15:09 by rwaldron      </div>
    </div>

   
    <div class="bar" id="bar_bottom">
      <div class="bar-left" id="bar_bottomleft">
        <form class="button" method="post" action="index.html" onsubmit="return svchk()"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="" /><input type="hidden" name="id" value="harmony:proxies_semantics" /><input type="submit" value="Show pagesource" class="button" title="ALT+V" accesskey="v" /></form>        <form class="button" method="get" action="index.html" onsubmit="return svchk()"><input type="hidden" name="do" value="revisions" /><input type="hidden" name="id" value="harmony:proxies_semantics" /><input type="submit" value="Old revisions" class="button" title="ALT+O" accesskey="o" /></form>      </div>
      <div class="bar-right" id="bar_bottomright">
                        <form class="button" method="get" action="index.html" onsubmit="return svchk()"><input type="hidden" name="do" value="login" /><input type="hidden" name="id" value="harmony:proxies_semantics" /><input type="submit" value="Login" class="button" /></form>        <form class="button" method="get" action="index.html" onsubmit="return svchk()"><input type="hidden" name="do" value="index" /><input type="hidden" name="id" value="harmony:proxies_semantics" /><input type="submit" value="Index" class="button" title="ALT+X" accesskey="x" /></form>        <a href="doku.php%3Fid=harmony:proxies_semantics.html#top"><input type="button" class="button" value="Back to top" onclick="window.scrollTo(0, 0)" /></a>&nbsp;
      </div>
    </div>

  </div>

</div>

<div align="center" class="footerinc">
  <a target="_blank" href="feed.php" title="Recent changes RSS feed"><img src="lib/tpl/default/images/button-rss.png" width="80" height="15" alt="Recent changes RSS feed" border="0" /></a>

  <a target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/2.0/" rel="license" title="Creative Commons License"><img src="lib/tpl/default/images/button-cc.gif" width="80" height="15" alt="Creative Commons License" border="0" /></a>

  <a target="_blank" href="https://www.paypal.com/xclick/business=andi%40splitbrain.org&amp;item_name=DokuWiki+Donation&amp;no_shipping=1&amp;no_note=1&amp;tax=0&amp;currency_code=EUR&amp;lc=US" title="Donate"><img src="lib/tpl/default/images/button-donate.gif" alt="Donate" border="0" /></a>

  <a target="_blank" href="http://www.php.net" title="Powered by PHP"><img src="lib/tpl/default/images/button-php.gif" width="80" height="15" alt="Powered by PHP" border="0" /></a>

  <a target="_blank" href="http://validator.w3.org/check/referer" title="Valid XHTML 1.0"><img src="lib/tpl/default/images/button-xhtml.png" width="80" height="15" alt="Valid XHTML 1.0" border="0" /></a>

  <a target="_blank" href="http://jigsaw.w3.org/css-validator/check/referer" title="Valid CSS"><img src="lib/tpl/default/images/button-css.png" width="80" height="15" alt="Valid CSS" border="0" /></a>

  <a target="_blank" href="http://wiki.splitbrain.org/wiki:dokuwiki" title="Driven by DokuWiki"><img src="lib/tpl/default/images/button-dw.png" width="80" height="15" alt="Driven by DokuWiki" border="0" /></a>



<!--

<rdf:RDF xmlns="http://web.resource.org/cc/"
    xmlns:dc="http://purl.org/dc/elements/1.1/"
    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
<Work rdf:about="">
   <dc:type rdf:resource="http://purl.org/dc/dcmitype/Text" />
   <license rdf:resource="http://creativecommons.org/licenses/by-nc-sa/2.0/" />
</Work>

<License rdf:about="http://creativecommons.org/licenses/by-nc-sa/2.0/">
   <permits rdf:resource="http://web.resource.org/cc/Reproduction" />
   <permits rdf:resource="http://web.resource.org/cc/Distribution" />
   <requires rdf:resource="http://web.resource.org/cc/Notice" />
   <requires rdf:resource="http://web.resource.org/cc/Attribution" />
   <prohibits rdf:resource="http://web.resource.org/cc/CommercialUse" />
   <permits rdf:resource="http://web.resource.org/cc/DerivativeWorks" />
   <requires rdf:resource="http://web.resource.org/cc/ShareAlike" />
</License>

</rdf:RDF>

-->
</div>

<img src="lib/exe/indexer.php%3Fid=harmony%253Aproxies_semantics&amp;1454275460" width="1" height="1" alt=""  /></body>
</html>
