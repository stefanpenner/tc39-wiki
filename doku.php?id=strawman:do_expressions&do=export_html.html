<html>
<head>
  <meta name="generator" content="DokuWiki Release 2005-09-22e" />
  <link rel="start" href="index.html" />
  <link rel="contents" href="doku.php%3Fid=strawman:do_expressions&amp;do=index.html" title="" />
  <link rel="alternate" type="application/rss+xml" title="Recent Changes" href="feed.php" />
  <link rel="alternate" type="application/rss+xml" title="Current Namespace" href="feed.php%3Fmode=list&amp;ns=strawman" />
  <link rel="alternate" type="text/html" title="Plain HTML" href="doku.php%3Fid=strawman:do_expressions&amp;do=export_html.html" />
  <link rel="alternate" type="text/plain" title="Wiki Markup" href="doku.php%3Fid=strawman:do_expressions&amp;do=export_raw" />
  <link rel="stylesheet" media="screen" type="text/css" href="lib/styles/style.css" />
  <meta name="robots" content="noindex,nofollow" />
  <script language="javascript" type="text/javascript" charset="utf-8">
    var alertText   = 'Please enter the text you want to format.\nIt will be appended to the end of the document.'
    var notSavedYet = 'Unsaved changes will be lost.\nReally continue?'
    var DOKU_BASE   = '/'
  </script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/script.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/tw-sack.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/ajax.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/domLib.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/domTT.js"></script>
  <link rel="stylesheet" type="text/css" href="lib/plugins/plugin/style.css" />
</head>
<body>

<a name="overview"></a><h2>Overview</h2>
<div class="level2">

<p>
 <acronym title="JavaScript">JS</acronym> has <a href="http://www.youtube.com/watch?v=Q_UsmvtyxEI" class="urlextern" target="_blank" title="http://www.youtube.com/watch?v=Q_UsmvtyxEI" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">too many statements</a>! This proposal makes it easier to do all the flexible things you can do with statements while still producing a useful result and plugging that back into an expression context.
</p>

<p>
Compound expressions with side-effects are possible with comma-expressions, but limited and awkward, and they can&rsquo;t bind temporary variables. ES4 had multiple variations on <code>let</code>, but this took up valuable grammar real estate.
</p>

<p>
This proposal is an alternative to the deferred <a href="doku.php%3Fid=strawman:let_expressions.html" class="wikilink1" title="strawman:let_expressions" onclick="return svchk()" onkeypress="return svchk()">let expressions</a>, which simply introduces a way to treat a block statement as an expression by prefixing it with <code>do</code>.
</p>

<p>
Examples:
</p>
<pre class="code javascript">x = <span class="kw1">do</span> <span class="br0">&#123;</span> let t = f<span class="br0">&#40;</span><span class="br0">&#41;</span>; t * t + <span class="nu0">1</span> <span class="br0">&#125;</span>;
<span class="kw3">print</span><span class="br0">&#40;</span><span class="kw1">do</span> <span class="br0">&#123;</span> let x = f<span class="br0">&#40;</span><span class="br0">&#41;</span>; g<span class="br0">&#40;</span>x, x<span class="br0">&#41;</span> <span class="br0">&#125;</span><span class="br0">&#41;</span>;</pre>
</div>
<!-- SECTION [1-786] -->
<a name="syntax"></a><h2>Syntax</h2>
<div class="level2">
<pre class="code ebnf">PrimaryExpression :
    &quot;do&quot; Block
    ...
ExpressionStatement :
    [lookahead âˆ‰ { &quot;{&quot;, &quot;function&quot;, &quot;do&quot; }] Expression ;

// &quot;...&quot; means existing members defined elsewhere
</pre>
</div>
<!-- SECTION [787-1003] -->
<a name="semantics"></a><h2>Semantics</h2>
<div class="level2">

<p>
 The semantics of a <code>do</code> expression is simple: evaluate the body and produce its completion value.
</p>

</div>
<!-- SECTION [1004-] -->
<!-- cachefile /usr/local/www/es-lang.org/wiki/data/cache/4/40192cdd556a58bb814c33b29a4c5b9c.xhtml used -->
</body>
</html>
