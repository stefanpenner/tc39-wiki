====== Line continuations in string and regex literals ======

  NAME:        "Line continuation in string and regex literals"
  CATEGORY:    Lexical conventions (E262-3 ch 7)
  SOURCES:     References [1], [2]
  SPEC AUTHOR: Lars
  STATUS:      Last call, 2008-03-08
  REVIEWS:     es4-discuss; phone conference; tickets
  IMPLEMENTED: RI (partial); Tamarin+ESC (partial)

====== Change log ======

2008-03-13 / lth: added clarification about processing continuations as part of tokenizations, not as a prepass.

2008-03-06 / lth: based on [6], decide that this applies to regular expression literals too.  Changed the title of the proposal to reflect this.

2008-03-06 / lth: based on sentiment in the 04 March 2008 minutes, and on [6], I have decided that line continuations should be in effect in triple-quoted strings as well.  (May be revisited when/if the triple-quoted string proposal is updated.)

2008-03-06 / lth: based on resolutions in [4], BACKSLASH PS and BACKSLASH LS are necessarily handled like BACKSLASH LF.

====== Description ======

The character sequence BACKSLASH <lineterminator> (where
<lineterminator> will be one of the characters LF, LS, or PS) is
removed from string literals delimited by either single or triple SINGLEQUOTE
or DOUBLEQUOTE characters.  (Triple-quoting is defined in [5].)

The character sequence BACKSLASH <lineterminator> is removed from
regular expression literals.  See [6].

====== Notes and clarifications ======

The (unstated) intent here is that the continuation processing is handled as part of the normal left-to-rigth tokenization of the input.  Input that contains eg

  "abc\\
  tef"

is therefore illegal: it lexes as the four characters a, b, c, and \ followed by an unescaped newline, not the string "abc<tab>ef".  This is in contrast with line terminator normalization, which is logically handled before tokenization.  (IIRC it is also in contrast with C and C++ which process \<newline> before tokenization.)

It is assumed that line terminator normalization [4] is in effect,
thus CR, LS, and PS do not appear in string and regular expression literals.


====== Definitions ======


  LF=U+000A
  CR=U+000D
  BACKSLASH=U+005C
  LS=U+2028
  PS=U+2029
  SINGLEQUOTE=U+0027
  DOUBLEQUOTE=U+0022

====== References ======

[1] http://wiki.ecmascript.org/doku.php?id=proposals:bug_fixes, item [BACKSLASH.NEWLINE.IN.STRING]

[2] http://wiki.ecmascript.org/doku.php?id=proposals:line_terminator_normalization

[3] http://wiki.ecmascript.org/doku.php?id=proposals:triple_quotes

[4] [[Line terminator normalization]]

[5] [[Triply quoted string literals]]

[6] http://bugs.ecmascript.org/ticket/363
