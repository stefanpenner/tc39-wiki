<html>
<head>
  <meta name="generator" content="DokuWiki Release 2005-09-22e" />
  <link rel="start" href="index.html" />
  <link rel="contents" href="doku.php%3Fid=test262:submission_process&amp;do=index.html" title="" />
  <link rel="alternate" type="application/rss+xml" title="Recent Changes" href="feed.php" />
  <link rel="alternate" type="application/rss+xml" title="Current Namespace" href="feed.php%3Fmode=list&amp;ns=test262" />
  <link rel="alternate" type="text/html" title="Plain HTML" href="doku.php%3Fid=test262:submission_process&amp;do=export_html.html" />
  <link rel="alternate" type="text/plain" title="Wiki Markup" href="doku.php%3Fid=test262:submission_process&amp;do=export_raw" />
  <link rel="stylesheet" media="screen" type="text/css" href="lib/styles/style.css" />
  <meta name="robots" content="noindex,nofollow" />
  <script language="javascript" type="text/javascript" charset="utf-8">
    var alertText   = 'Please enter the text you want to format.\nIt will be appended to the end of the document.'
    var notSavedYet = 'Unsaved changes will be lost.\nReally continue?'
    var DOKU_BASE   = '/'
  </script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/script.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/tw-sack.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/ajax.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/domLib.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/domTT.js"></script>
  <link rel="stylesheet" type="text/css" href="lib/plugins/plugin/style.css" />
</head>
<body>
<div class="toc">
<div class="tocheader"> <script type="text/javascript">showTocToggle("+","-")</script>Table of Contents</div>
<div id="tocinside">
<ul class="toc">
<li class="level1"><span class="li"><a href="doku.php%3Fid=test262:submission_process&amp;do=export_html.html#getting_started" class="toc">Getting Started</a></span><ul class="toc">
<li class="level2"><span class="li"><a href="doku.php%3Fid=test262:submission_process&amp;do=export_html.html#getting_the_sources" class="toc">Getting the Sources</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=test262:submission_process&amp;do=export_html.html#mercurial_repository_structure" class="toc">Mercurial Repository Structure</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=test262:submission_process&amp;do=export_html.html#downloading_and_installing_mercurial" class="toc">Downloading and Installing Mercurial</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=test262:submission_process&amp;do=export_html.html#obtaining_mercurial_submission_permissions_for_test262" class="toc">Obtaining Mercurial Submission Permissions for Test262</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=test262:submission_process&amp;do=export_html.html#configuring_mercurial_for_check-ins" class="toc">Configuring Mercurial for Check-ins</a></span></li>
</ul>
</li>
<li class="level1"><span class="li"><a href="doku.php%3Fid=test262:submission_process&amp;do=export_html.html#making_changes" class="toc">Making Changes</a></span><ul class="toc">
<li class="level2"><span class="li"><a href="doku.php%3Fid=test262:submission_process&amp;do=export_html.html#play_nice" class="toc">Play Nice!</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=test262:submission_process&amp;do=export_html.html#mercurial" class="toc">Mercurial</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=test262:submission_process&amp;do=export_html.html#regenerate_the_website" class="toc">Regenerate the Website</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=test262:submission_process&amp;do=export_html.html#sanity_check_the_generated_website" class="toc">Sanity Check the Generated Website</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=test262:submission_process&amp;do=export_html.html#code_reviews" class="toc">Code Reviews</a></span><ul class="toc">
<li class="level3"><span class="li"><a href="doku.php%3Fid=test262:submission_process&amp;do=export_html.html#test_harness_and_website" class="toc">Test Harness and Website</a></span></li>
<li class="level3"><span class="li"><a href="doku.php%3Fid=test262:submission_process&amp;do=export_html.html#test_cases" class="toc">Test Cases</a></span></li>
</ul>
</li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=test262:submission_process&amp;do=export_html.html#updating_the_live_website" class="toc">Updating the Live Website</a></span></li>
</ul>
</li>
<li class="level1"><span class="li"><a href="doku.php%3Fid=test262:submission_process&amp;do=export_html.html#other" class="toc">Other</a></span></li>
</ul>
</div>
</div>

<a name="getting_started"></a><h1>Getting Started</h1>
<div class="level1">

</div>
<!-- SECTION [1-31] -->
<a name="getting_the_sources"></a><h2>Getting the Sources</h2>
<div class="level2">

<p>
If you’re simply interested in <em>viewing</em> the sources to Test262, you can download them directly from <a href="http://hg.ecmascript.org/tests/test262" class="urlextern" target="_blank" title="http://hg.ecmascript.org/tests/test262" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">http://hg.ecmascript.org/tests/test262</a> as a tarball or zip file.  Alternatively, you’ll be able to peruse them with your web browser if you prefer.  For content submissions to Test262, you’ll need to install and configure Mercurial as described below.  
</p>

</div>
<!-- SECTION [32-432] -->
<a name="mercurial_repository_structure"></a><h2>Mercurial Repository Structure</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> <em>external/contributions/</em>:  contains original copies of ECMAScript tests that have been officially contributed to Test262 by TC39 members</div>
</li>
<li class="level1"><div class="li"> <em>test/harness/</em>:  test harness(es) used to run Test262 test cases</div>
</li>
<li class="level1"><div class="li"> <em>test/suite/</em>:  suite of Test262 tests.  Consists of tests contributed by TC39 members that may have been adapted to run against the harness(es) found under <em>test/harness/</em></div>
</li>
<li class="level1"><div class="li"> <em>test/config/</em>:  contains various configuration files which are among other things used to control which test cases are deployed to the Test262 website (e.g., <em>excludelist.xml</em>)</div>
</li>
<li class="level1"><div class="li"> <em>tools/</em>:  contains various tools used to create and run Test262 tests</div>
</li>
<li class="level1"><div class="li"> <em>website/</em>:  a verbatim copy of the Test262 website.  Scripts under <em>tools/</em> generate assets here</div>
</li>
<li class="level1"><div class="li"> <em>docs/</em>:  contains various documents pertaining to test262 ES coverage, architecture, etc.</div>
</li>
</ul>

</div>
<!-- SECTION [433-1382] -->
<a name="downloading_and_installing_mercurial"></a><h2>Downloading and Installing Mercurial</h2>
<div class="level2">

<p>
Sources to the Test262 test harness, tests, and website are available through the Mercurial source control system.  A Mercurial client for all major operating systems can be downloaded at <a href="http://mercurial.selenic.com/wiki/Download" class="urlextern" target="_blank" title="http://mercurial.selenic.com/wiki/Download" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">http://mercurial.selenic.com/wiki/Download</a>.  If you’re running the Windows operating system, you’ll also need to install a good <acronym title="Secure Shell">SSH</acronym> tool.  We recommend the free <acronym title="Secure Shell">SSH</acronym> application, plink.exe, which can be downloaded at <a href="http://www.putty.org" class="urlextern" target="_blank" title="http://www.putty.org" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">http://www.putty.org</a>.
</p>

</div>
<!-- SECTION [1383-1872] -->
<a name="obtaining_mercurial_submission_permissions_for_test262"></a><h2>Obtaining Mercurial Submission Permissions for Test262</h2>
<div class="level2">

<p>
Email dherman@mozilla.com (if you&rsquo;re a TC39 committee member) for details.
</p>

</div>
<!-- SECTION [1873-2016] -->
<a name="configuring_mercurial_for_check-ins"></a><h2>Configuring Mercurial for Check-ins</h2>
<div class="level2">

<p>
First, clone a copy of the Test262 repository to your favorite directory, my_test262:
</p>
<pre class="code">              &gt; hg clone http://hg.ecmascript.org/tests/test262/ my_test262
              requesting all changes
              …
              17614 files updated, 0 files merged, 0 files removed, 0 files unresolved</pre>

<p>
 Next, you’ll need to tell Mercurial where to submit your changes to and also to use the credentials created in the prior step to accomplish this.  To this end, add the following to the file, my_test262/.hg/hgrc:
</p>
<pre class="code">              [ui]
              username = first_name last_name &lt;email_alias@domain&gt;
              ssh=%PathToPlink%/plink -ssh -i %SomeProtectedDirectory%/test262_private_key.ppk -l email_alias@domain
              
              [paths]
              default = http://hg.ecmascript.org/tests/test262
              default-push = ssh://email_alias@domain@hg.ecmascript.org/tests/test262</pre>

<p>
 where email_alias@domain is your Mercurial username (given to Test262) and test262_private_key.ppk is the private <acronym title="Secure Shell">SSH</acronym> key corresponding to the public <acronym title="Secure Shell">SSH</acronym> key you submitted to Test262.  Please note that the “ssh=…” line will vary considerably depending upon your operating system and chosen <acronym title="Secure Shell">SSH</acronym> tool.
</p>

</div>
<!-- SECTION [2017-3303] -->
<a name="making_changes"></a><h1>Making Changes</h1>
<div class="level1">

</div>
<!-- SECTION [3304-3334] -->
<a name="play_nice"></a><h2>Play Nice!</h2>
<div class="level2">

<p>
It might be very tempting to take advantage of the latest and greatest HTML5 or ECMAScript feature in either the Test262 website or the test harness itself.  Please don&rsquo;t:)  Both of these have been kept relatively simple to ensure new, partially implemented ECMAScript engines can run the test suite once they reach a minimum level of the language&rsquo;s functionality. While some new feature might make the website look very cool in your browser, it could very well break others so please consider this when making changes.
</p>

</div>
<!-- SECTION [3335-3878] -->
<a name="mercurial"></a><h2>Mercurial</h2>
<div class="level2">

<p>
If you&rsquo;re familiar with other source control systems such as Subversion, Team Foundation Server, etc., working with Mercurial will be a breeze.  File edits do not require any special Mercurial command usage, file additions are accomplished via <em>hg add</em>, and removal of files can be done via <em>hg remove</em>.  When your changes are complete, call <em>hg commit</em> to commit the changes locally on your machine followed by <em>hg push</em> to push your changesets out to the official test262 repository.  You can get a full list of all Mercurial commands by calling <em>hg commands</em>.  <strong>Please note while the semantics of pushing changes to Test262 have been described above, there is a little bit of Test262 process (described below) that you must follow before calling <em>hg submit</em></strong>.
</p>

</div>
<!-- SECTION [3879-4679] -->
<a name="regenerate_the_website"></a><h2>Regenerate the Website</h2>
<div class="level2">

<p>
You should always regenerate the Test262 website within your local enlistment before submitting changes to the Test262 Mercurial repository.  Today, you&rsquo;ll need any machine with Python 2.7 installed to accomplish this:
</p>
<pre class="code">              &gt; cd %PathToYourEnlistment%/test262/tools/packaging
              &gt; %pathToPython%/python.exe packager.py ES5
              Generating test cases for ES5 chapter: 07_Lexical_Conventions
              ...
              Done.</pre>

<p>
 Provided that your changes do not add a brand new ES5 chapter to the test suite, the command above should have taken care of everything for you.  If you did happen to add a new test chapter, call <em>hg status</em> to see which new files under <em>website/</em> you need to call <em>hg add</em> on.
</p>

</div>
<!-- SECTION [4680-5471] -->
<a name="sanity_check_the_generated_website"></a><h2>Sanity Check the Generated Website</h2>
<div class="level2">
<ol>
<li class="level1"><div class="li"> Run the full test suite against your favorite ES3+ browser. Also run it against your favorite JavaScript command line engine Using the <a href="doku.php%3Fid=test262:command.html" class="wikilink1" title="test262:command" onclick="return svchk()" onkeypress="return svchk()">Test262 command line runner</a>. Ensure the run is <em>sane</em>: it doesn&rsquo;t hang the browser, new tests take under a couple seconds to run on <em>modern</em> hardware, no layout bugs have been introduced, etc.</div>
</li>
<li class="level1"><div class="li"> Repeat the previous step for at least one other vendor&rsquo;s most recently released non-nightly/Alpha/Beta web browser.  We do this as a minimal sanity check to try to make sure the website and harness do not take dependencies on non-standard browser functionality</div>
</li>
</ol>

</div>
<!-- SECTION [5472-6140] -->
<a name="code_reviews"></a><h2>Code Reviews</h2>
<div class="level2">

</div>
<!-- SECTION [6141-6167] -->
<a name="test_harness_and_website"></a><h3>Test Harness and Website</h3>
<div class="level3">

<p>
The only process here is that there&rsquo;s very little process.  In short, major website changes should be reviewed by the TC39 committee of ECMA <strong>prior</strong> to being uploaded to the public website.
</p>

</div>
<!-- SECTION [6168-6400] -->
<a name="test_cases"></a><h3>Test Cases</h3>
<div class="level3">

<p>
All test cases should be written in the <a href="doku.php%3Fid=test262:test_case_format.html" class="wikilink1" title="test262:test_case_format" onclick="return svchk()" onkeypress="return svchk()">Test262 test case format</a>.
</p>

<p>
We have no formal test case reviewing process at the moment.  That said, we do have a formal mechanism to keep track of which tests have been reviewed by someone other than the contributor and which haven&rsquo;t.  For tests that have been reviewed please add a property named <em>reviewers</em> followed by a string identifying the reviewers in the metadata for the individual test case.  For example, a test file 1.2-1.js: 
</p>
<pre class="code javascript">                <span class="coMULTI">/**
                 * @description Simple test case.
                 */</span>
                
                <span class="kw1">if</span> <span class="br0">&#40;</span><span class="nu0">2</span> + <span class="nu0">3</span> !== <span class="nu0">5</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
                    $ERROR<span class="br0">&#40;</span><span class="st0">"Addition does not work."</span><span class="br0">&#41;</span>;
                <span class="br0">&#125;</span></pre>
<p>
 would be changed to: 
</p>
<pre class="code javascript">                <span class="coMULTI">/**
                 * @description Simple test case.
                 * @reviewers jane@doe.com
                 */</span>
                
                <span class="kw1">if</span> <span class="br0">&#40;</span><span class="nu0">2</span> + <span class="nu0">3</span> !== <span class="nu0">5</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
                    $ERROR<span class="br0">&#40;</span><span class="st0">"Addition does not work."</span><span class="br0">&#41;</span>;
                <span class="br0">&#125;</span></pre>
</div>
<!-- SECTION [6401-7494] -->
<a name="updating_the_live_website"></a><h2>Updating the Live Website</h2>
<div class="level2">
<ol>
<li class="level1"><div class="li"> <acronym title="Secure Shell">SSH</acronym> into <em>test262.ecmascript.org</em></div>
</li>
<li class="level1"><div class="li"> Grab the latest <em>website</em> directory from Test262&rsquo;s Mercurial repository.  To this effect you can maintain a repository clone on <em>test262.ecmascript.org</em> or simply <em>scp</em> your local copy up to <em>test262</em></div>
</li>
<li class="level1"><div class="li"> <em>cd /var/www/test262/www</em></div>
</li>
<li class="level1"><div class="li"> Backup everything in this directory (minus <em>old</em>) to <em>/var/www/test262/www/old/TODAYS_DATE</em></div>
</li>
<li class="level1"><div class="li"> Nuke everything in <em>/var/www/test262/www</em> <strong>except for <em>index.html</em> and <em>old</em></strong></div>
</li>
<li class="level1"><div class="li"> Copy the contents of the <em>website</em> directory you grabbed from Mercurial in an earlier step to <em>/var/www/test262/www</em></div>
</li>
<li class="level1"><div class="li"> <strong>Important</strong>: verify the changes you&rsquo;ve made to the live website actually <em>work</em> from at least one browser.  If not, revert the changes using the backup you made to <em>/old/TODAYS_DATE</em></div>
</li>
<li class="level1"><div class="li"> Send an email to the test262-discuss alias if the changes were significant</div>
</li>
</ol>

</div>
<!-- SECTION [7495-8406] -->
<a name="other"></a><h1>Other</h1>
<div class="level1">

</div>
<!-- SECTION [8407-] -->
<!-- cachefile /usr/local/www/es-lang.org/wiki/data/cache/d/dd35f07fedee3c2b0a660388c915b240.xhtml used -->
</body>
</html>
