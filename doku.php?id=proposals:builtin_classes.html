<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
 lang="en" dir="ltr">
<head>
  <title>proposals:builtin_classes [ES Wiki]</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <meta name="generator" content="DokuWiki Release 2005-09-22e" />
  <link rel="start" href="index.html" />
  <link rel="contents" href="doku.php%3Fid=proposals:builtin_classes&amp;do=index.html" title="" />
  <link rel="alternate" type="application/rss+xml" title="Recent Changes" href="feed.php" />
  <link rel="alternate" type="application/rss+xml" title="Current Namespace" href="feed.php%3Fmode=list&amp;ns=proposals" />
  <link rel="alternate" type="text/html" title="Plain HTML" href="doku.php%3Fid=proposals:builtin_classes&amp;do=export_html.html" />
  <link rel="alternate" type="text/plain" title="Wiki Markup" href="doku.php%3Fid=proposals:builtin_classes&amp;do=export_raw" />
  <link rel="stylesheet" media="screen" type="text/css" href="lib/styles/style.css" />
  <meta name="date" content="2008-07-14T18:29:02+0000" />
  <meta name="robots" content="index,follow" />
  <script language="javascript" type="text/javascript" charset="utf-8">
    var alertText   = 'Please enter the text you want to format.\nIt will be appended to the end of the document.'
    var notSavedYet = 'Unsaved changes will be lost.\nReally continue?'
    var DOKU_BASE   = '/'
  </script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/script.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/tw-sack.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/ajax.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/domLib.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/domTT.js"></script>
  <link rel="stylesheet" type="text/css" href="lib/plugins/plugin/style.css" />

  <link rel="shortcut icon" href="lib/images/favicon.ico" />
  <link rel="stylesheet" media="screen" type="text/css" href="lib/tpl/default/layout.css" />
  <link rel="stylesheet" media="screen" type="text/css" href="lib/tpl/default/design.css" />

  
  <link rel="stylesheet" media="print" type="text/css" href="lib/tpl/default/print.css" />

  <!--[if gte IE 5]>
  <style type="text/css">
    /* that IE 5+ conditional comment makes this only visible in IE 5+ */
    /* IE bugfix for transparent PNGs */
    //DISABLED   img { behavior: url("/lib/scripts/pngbehavior.htc"); }
  </style>
  <![endif]-->

  </head>

<body>
<div class="dokuwiki">
  
  <div class="stylehead">

    <div class="header">
      <div class="pagename">
        [[<a href="doku.php%3Fid=proposals:builtin_classes&amp;do=backlink.html" onclick="return svchk()" onkeypress="return svchk()">proposals:builtin_classes</a>]]
      </div>
      <div class="logo">
        <a href="doku.php%3Fid=.html" onclick="return svchk()" onkeypress="return svchk()" name="top" accesskey="h" title="[ALT+H]">ES Wiki</a>      </div>
    </div>
  
    
    <div class="bar" id="bar_top">
      <div class="bar-left" id="bar_topleft">
        <form class="button" method="post" action="index.html" onsubmit="return svchk()"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="" /><input type="hidden" name="id" value="proposals:builtin_classes" /><input type="submit" value="Show pagesource" class="button" title="ALT+V" accesskey="v" /></form>        <form class="button" method="get" action="index.html" onsubmit="return svchk()"><input type="hidden" name="do" value="revisions" /><input type="hidden" name="id" value="proposals:builtin_classes" /><input type="submit" value="Old revisions" class="button" title="ALT+O" accesskey="o" /></form>      </div>
  
      <div class="bar-right" id="bar_topright">
        <form class="button" method="get" action="index.html" onsubmit="return svchk()"><input type="hidden" name="do" value="recent" /><input type="hidden" name="id" value="" /><input type="submit" value="Recent changes" class="button" title="ALT+R" accesskey="r" /></form>        <form action="doku.php%3Fid=.html" accept-charset="utf-8" class="search" name="search" onsubmit="return svchk()"><input type="hidden" name="do" value="search" /><input type="text" id="qsearch_in" accesskey="f" name="id" class="edit" onkeyup="ajax_qsearch.call('qsearch_in','qsearch_out')" /><input type="submit" value="Search" class="button" /><div id="qsearch_out" class="ajax_qsearch" onclick="this.style.display='none'"></div></form>&nbsp;
      </div>
    </div>

        <div class="breadcrumbs">
      Trace: <span class="bcsep">&raquo;</span> <a href="doku.php%3Fid=proposals:semantics.html" onclick="return svchk()" onkeypress="return svchk()" class="breadcrumbs" title="proposals:semantics">semantics</a> <span class="bcsep">&raquo;</span> <a href="doku.php%3Fid=proposals:built-in_objects.html" onclick="return svchk()" onkeypress="return svchk()" class="breadcrumbs" title="proposals:built-in_objects">built-in_objects</a> <span class="bcsep">&raquo;</span> <a href="doku.php%3Fid=proposals:descriptive_prose.html" onclick="return svchk()" onkeypress="return svchk()" class="breadcrumbs" title="proposals:descriptive_prose">descriptive_prose</a> <span class="bcsep">&raquo;</span> <a href="doku.php%3Fid=proposals:type_parameters.html" onclick="return svchk()" onkeypress="return svchk()" class="breadcrumbs" title="proposals:type_parameters">type_parameters</a> <span class="bcsep">&raquo;</span> <span class="curid"><a href="doku.php%3Fid=proposals:builtin_classes.html" onclick="return svchk()" onkeypress="return svchk()" class="breadcrumbs" title="proposals:builtin_classes">builtin_classes</a></span>          </div>
    
  </div>
  
  
  <div class="page">
    <!-- wikipage start -->
    <div class="toc">
<div class="tocheader"> <script type="text/javascript">showTocToggle("+","-")</script>Table of Contents</div>
<div id="tocinside">
<ul class="toc">
<li class="level1"><span class="li"><a href="doku.php%3Fid=proposals:builtin_classes.html#ecma-262.15_reminders" class="toc">ECMA-262.15 Reminders</a></span></li>
<li class="level1"><span class="li"><a href="doku.php%3Fid=proposals:builtin_classes.html#invented_syntax" class="toc">Invented Syntax</a></span></li>
<li class="level1"><span class="li"><a href="doku.php%3Fid=proposals:builtin_classes.html#open_issues" class="toc">Open Issues</a></span></li>
<li class="level1"><span class="li"><a href="doku.php%3Fid=proposals:builtin_classes.html#resolved_issues" class="toc">Resolved Issues</a></span></li>
<li class="level1"><span class="li"><a href="doku.php%3Fid=proposals:builtin_classes.html#globals" class="toc">Globals</a></span></li>
<li class="level1"><span class="li"><a href="doku.php%3Fid=proposals:builtin_classes.html#object" class="toc">Object</a></span></li>
<li class="level1"><span class="li"><a href="doku.php%3Fid=proposals:builtin_classes.html#class" class="toc">Class</a></span></li>
<li class="level1"><span class="li"><a href="doku.php%3Fid=proposals:builtin_classes.html#function" class="toc">Function</a></span></li>
<li class="level1"><span class="li"><a href="doku.php%3Fid=proposals:builtin_classes.html#array" class="toc">Array</a></span></li>
<li class="level1"><span class="li"><a href="doku.php%3Fid=proposals:builtin_classes.html#string" class="toc">String</a></span></li>
<li class="level1"><span class="li"><a href="doku.php%3Fid=proposals:builtin_classes.html#boolean" class="toc">Boolean</a></span></li>
<li class="level1"><span class="li"><a href="doku.php%3Fid=proposals:builtin_classes.html#number" class="toc">Number</a></span></li>
<li class="level1"><span class="li"><a href="doku.php%3Fid=proposals:builtin_classes.html#math" class="toc">Math</a></span></li>
<li class="level1"><span class="li"><a href="doku.php%3Fid=proposals:builtin_classes.html#date" class="toc">Date</a></span></li>
<li class="level1"><span class="li"><a href="doku.php%3Fid=proposals:builtin_classes.html#regexp" class="toc">RegExp</a></span></li>
<li class="level1"><span class="li"><a href="doku.php%3Fid=proposals:builtin_classes.html#error" class="toc">Error</a></span></li>
</ul>
</div>
</div>

<p>
This is a simple brute force attempt to write the ECMA-262 builtin classes using the new language.
</p>

<p>
(The contents of this page has mostly been superseded by what&rsquo;s now in the reference implementation repository.)
</p>

<p>
(Also see the <a href="doku.php%3Fid=discussion:builtin_classes.html" class="wikilink1" title="discussion:builtin_classes" onclick="return svchk()" onkeypress="return svchk()">discussion page</a> for this proposal)
</p>

<a name="ecma-262.15_reminders"></a><h1>ECMA-262.15 Reminders</h1>
<div class="level1">
<ul>
<li class="level1"><div class="li"> Every builtin function and ctor has <code>[[Prototype]] = Function.prototype</code>.</div>
</li>
<li class="level1"><div class="li"> Every builtin prototype has <code>[[Prototype]] = Object.prototype</code>, except <code>Object.prototype</code>.</div>
</li>
<li class="level1"><div class="li"> Builtin functions do not have a <code>prototype</code> property unless stated otherwise.</div>
</li>
<li class="level1"><div class="li"> Every function has <code>length</code> {RO,DE,DD} with number of formal parameters including optional parameters.</div>
</li>
<li class="level1"><div class="li"> All properties are {DE} unless otherwise specified.</div>
</li>
</ul>

</div>

<a name="invented_syntax"></a><h1>Invented Syntax</h1>
<div class="level1">

<p>
 By default, declared properties inside a class are {DontEnum,DontDelete}, and are part of the type constraint for the class type, instance type, or prototype that they&rsquo;re on. 
</p>
<ul>
<li class="level1"><div class="li"> <code>dynamic</code>: means {!DontDelete}, in effect describing the initial state of an object that can change at runtime.</div>
</li>
<li class="level1"><div class="li"> <code>prototype</code>: means the property is declared on <code>C.prototype</code>, and if the decl is a function, the function is unbound.  Where a property is declared is orthagonal to whether its bound, however its mostly useless to have a bound prototype function, so prototype will imply unbound.</div>
</li>
<li class="level1"><div class="li"> <code>static</code>: means the property is declared on C itself, not <code>C.prototype</code> or instances of C.</div>
</li>
<li class="level1"><div class="li"> <code>this:T</code> if given as the first parameter of an unbound (prototype or anonymous) function, the type of <code>this</code> is constrained to <code>T</code>.  Error on bound (instance) functions.  In <code>static</code> functions, use of <code>this</code> is an error.</div>
</li>
<li class="level1"><div class="li"> anonymous and global functions have <code>this:Object</code> by default</div>
</li>
<li class="level1"><div class="li"> {DE} = {DontEnum}</div>
</li>
<li class="level1"><div class="li"> {DD} = {DontDelete}</div>
</li>
<li class="level1"><div class="li"> {RO} = {ReadOnly}</div>
</li>
</ul>
<pre class="code">
class C 
{
    prototype function f()	// {DD,DE,RO} unbound, on prototype, this:C
    function		        // {DD,DE,RO} bound to instance, this:C
    static function             // {DD,DE,RO} bound to C, this causes error
    dynamic prototype function g(this:Object)  // {DE}, generic dynamic prototype function, e.g. Array.slice()
}
</pre>

<p>
 We also use some namespaces to imagine how host-specific properties might be declared.  This is mainly to point out host-specific behaviors that are important, and less to propose that hosts actually use namespaces for their specific properties.  Although that may be a good idea.
</p>
<pre class="code">
namespace SpiderMonkey
namespace ActionScript
namespace JScriptNET
</pre>

</div>

<a name="open_issues"></a><h1>Open Issues</h1>
<div class="level1">
<ul>
<li class="level1"><div class="li"> Class itself is sealed, but all the builtin objects in E262 are dynamic.  Should all class objects be dynamic?  This would be unfortunate for usability, but legacy code requires it... specifically, &ldquo;function Foo(){}; Foo.bar = 3;&rdquo; is not legal in Tamarin but is required for web compatibility. We&rsquo;d prefer user-defined classes be sealed with respect by default, but builtin E262 objects must be unsealed. Deferred until we can get Edwin&rsquo;s opinion.</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> C.prototype is not exactly the same type as an instance of C.  Is it an implicit subclass?</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> What, exactly, is Math?  if it&rsquo;s a singleton class, how to limit access to its constructor?  In ECMA-262, it&rsquo;s an object, so it&rsquo;s dynamic.  But class objects are not dynamic.  If it&rsquo;s a singleton object, how to declare its methods in an early-bindable way?  Should it be a package?  (Discussed/resolved in <a href="http://bugs.ecmascript-lang.org/ticket/8" class="urlextern" target="_blank" title="http://bugs.ecmascript-lang.org/ticket/8" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">http://bugs.ecmascript-lang.org/ticket/8</a>.)</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> How can Number.toString(radix) take an optional parameter if it is to override Object.toString()?  Either it&rsquo;s not overriding, but proto-function-hiding, or else we must allow override functions to add optional parameters.  Proposal: allow override to add parameters.  If optional parameters are initialized in the function body, rather than at the call site, then the implementation is straightforward.</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> where does C.prototype.constructor.name get set?</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> Douglass Crockford <a href="http://www.crockford.com/javascript/recommend.html" class="urlextern" target="_blank" title="http://www.crockford.com/javascript/recommend.html" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">recommended</a> we should support dots in function names, like this <pre class="code"> function myClass.prototype.myMethod() {...} </pre>

<p>
 Translating to our &ldquo;invented syntax&rdquo; it might look like this 
</p>
<pre class="code"> class myClass { function prototype.myMethod() {} } </pre>

<p>
 Since <code>prototype</code> is invented for this effort, which syntax do we like better?  Doug&rsquo;s syntax implies that <code>prototype</code> in the function declartion isnt an attribute but rather a lexical reference to a class property.  Should that work on any class property?  Can arbitrary expressions be used there?
</p>
</div>
</li>
</ul>

</div>

<a name="resolved_issues"></a><h1>Resolved Issues</h1>
<div class="level1">
<ul>
<li class="level1"><div class="li"> Several vararg functions have <code>length &gt; 0</code> in E262, but their behavior is tied to the number of args only, as if there were no formal parameters.  In other words, calling with no args is not the same as calling with 1 or more args equal to their default values.  Resolved: Bug in E262.  <code>f.length</code> should be the number of required and optional formal parameters, not counting this, and not counting rest args.   Individual cases are marked with a comment.</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> Writing generic functions as <pre class="code"> dynamic prototype var f = function() </pre>

<p>
 is too subtle a way to creat unbound functions.  Resolved: allow <code>this:T</code> to de-constrain the type of <code>this</code> 
</p>
<pre class="code"> dynamic prototype function f(this:Object) </pre>
</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> In ECMA-262, global properties <code>undefined</code>, <code>NaN</code>, etc, are <code>var</code> {DE,DD}, but <code>Number</code> constants are <code>const</code> {DD,DE,RO}.  Resolution: make the globals <code>const</code> {DE,DD,RO} too.</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> We agreed to use <code>intrinsic</code> as the namespace for <code>call</code> and <code>construct</code> methods needed to override invocation and construction-via-<code>new</code> defaults.  If <code>static</code> in a class, these override the class called as a function, and via <code>new</code>, respectively.  If not <code>static</code>, they define how an instance is invoked or <code>new</code>ed.</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> For <code>this:T</code> T have be C or a superclass of C.</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> if <code>class</code> keyword creates a Class, then <code>C.[[Prototype]] == Class.prototype</code>. To maintain compatibility with E262, which requires it to be<code>Function.prototype</code>, a get/set pair will be used to reroute it to appear to be <code>Function.prototype</code>.</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> If a runtime has a single set of host objects exposed to ECMA-262 code and ECMAScript 4 code, old code may see a new global Class constructor; however, this is deemed acceptable because it implies that a partial code migration has occurred and thus potential name collisions will have to be checked for and resolved. However, because Function.prototype has a getter that returns the &ldquo;ClassClosure&rdquo; prototype, Function will still always appear to be a Function instance, not a Class instance.</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> <code>String</code> is currently marked <code>final</code> in AS3 but this may not be a good choice for ES4, as subclassing String may be a desirable thing.  <strong>Resolved</strong>: &ldquo;String&rdquo; is non-final but its subclass &ldquo;string&rdquo; is final.</div>
</li>
</ul>

</div>

<a name="globals"></a><h1>Globals</h1>
<div class="level1">
<pre class="code">
// {DE,DD,RO} properties of the global object.  These were {DD,DE} var in ECMA-262
const NaN
const Infinity
const undefined

// {DE} functions on the global object
// issue: this isn't E3-esque at all, maybe function implies dynamic at top level
dynamic function eval(x)
dynamic function parseInt(string, radix)
dynamic function parseFloat(string)
dynamic function isNaN(number)
dynamic function isFinite(number)
dynamic function decodeURI(encodedURI)
dynamic function decodeURIComponent(encodedURIComponent)
dynamic function encodeURI(uri)
dynamic function encodeURIComponent(uriComponent)
</pre>

</div>

<a name="object"></a><h1>Object</h1>
<div class="level1">
<pre class="code">
dynamic class Object
{
	static intrinsic function call(v)
	/*
           I'm not sure what this is trying to do, but neither this nor C is bound for a static -- help?
           --- //[[brendan@mozilla.org|Brendan Eich]] 2006/11/16 12:14//

        static intrinsic function construct()
	{
		this.[[Class]] = C.[[Classname]]  // eg &quot;Array&quot; or &quot;Date&quot;
		this.[[Prototype]] = C.prototype
	}
        */

	// non-generic unbound {DE} properties of Object.prototype
	// (generic or not is the same since all types extend Object)
	dynamic prototype function toString(this:Object)		
	dynamic prototype function hasOwnProperty(this:Object, V)
	dynamic prototype function isPrototypeOf(this:Object, V)
	dynamic prototype function propertyIsEnumerable(this:Object, V)

	// properties of Object instances	
	const [[Class]]		// name of most derived type
	
        // bound {DE,DD} accessors
	SpiderMonkey function get __proto__() { return [[Prototype]] }
	SpiderMonkey function set __proto__(o) { [[Prototype]] = o }   // check for a cycle, throw Error if so

        // ECMA-262 doesn't expose __proto__ and it's internally readonly
	private const [[Prototype]]

	// bound {DD,DE,RO} properties of Object instances
	ActionScript prototype function toString()
}
</pre>

</div>

<a name="class"></a><h1>Class</h1>
<div class="level1">
<pre class="code">
// ISSUE do we need class Class or can class Function be extended
// to support builtin functions and user defined / anonymous functions?
class Class
{
	// class setup, invoked when class object is created
	function Class()
	{
                // implicit super() is Object ctor, which sets this.[[Prototype]] = Class.prototype

                // create this class's prototype object		
		this.prototype = new this() // in E3 prototypes are instances of class
		this.prototype.constructor = this
		this.prototype.[[Prototype]] = this.[[BaseClass]].prototype
	}

	// {RO,DD,DE} properties of Class objects 
	const prototype						
}
</pre>

</div>

<a name="function"></a><h1>Function</h1>
<div class="level1">
<pre class="code">
dynamic class Function
{
        // Function constructor called as a function
        static intrinsic function call()

	// non-generic unbound {DE} properties of Function.prototype 
	dynamic prototype function toString(this:Function)
	dynamic prototype function apply(this:Function, thisArg, argArray)
	dynamic prototype function call(this:Function, thisArg, ...args)

	// {DE,DD} properties of function instances
	const length		// {RO}, number of args
	var prototype
	
        // bound {DD,DE,RO} methods of function instances
	function [[HasInstance]](V)		// implements instanceof
}
</pre>

</div>

<a name="array"></a><h1>Array</h1>
<div class="level1">
<pre class="code">
dynamic class Array
{
        // the Array constructor called as a function
        static intrinsic function call()

	// non-generic unbound {DE} properties of Array.prototype
	dynamic prototype function toString(this:Array)
	dynamic prototype function toLocaleString(this:Array)

	// bound {DE,DD,RO} methods 
	ActionScript function toString()
	ActionScript function toLocaleString()

	// generic unbound {DE} properties of Array.prototype
	dynamic prototype function concat(this:Object, ...items)
	dynamic prototype function join(this:Object, separator)
	dynamic prototype function pop(this:Object)
	dynamic prototype function push(this:Object, ...items)
	dynamic prototype function reverse(this:Object)
	dynamic prototype function shift(this:Object)
	dynamic prototype function slice(this:Object, start, end)
	dynamic prototype function sort(this:Object, comparefn)
	dynamic prototype function splice(this:Object, start, deleteCount, ...items)
	dynamic prototype function unshift(this:Object, ...items) // length=0, bug in E262 that unshift.length=1

	// bound {DE,DD} properties of Array instances 	
        function get length()
	function set length(v)

        // bound internal methods of Array instances
	function [[Put]](P,V)
}
</pre>

</div>

<a name="string"></a><h1>String</h1>
<div class="level1">
<pre class="code">
dynamic class String
{
        // the String constructor called as a function
        static intrinsic function call()
        static intrinsic function construct()   // does not necessarily construct anything!

	// unbound {DE} properties of String constructor (this is not used)
        // E3 bug: fromCharCode.length=1, but should be 0 since behavior is strictly based on # args
	dynamic static function fromCharCode(...chars)
	
	// bound equivalent {DD,DE,RO}
	ActionScript static function fromCharCode(...chars)

	// Edwin: dynamic static sounds weird, but the meaning is clear
        // Jeff: can only use dynamic on unsealed objects.
        // In ES3 all objects are unsealed so it is okay, but not so in ES4

	// non generic unbound {DE} properties of String.prototype

	dynamic prototype function toString(this:String)
	dynamic prototype function valueOf(this:String)

	// generic unbound {DE} properties of String.prototype
	dynamic prototype function charAt(this:Object, pos)
	dynamic prototype function charCodeAt(this:Object, pos)
	dynamic prototype function concat(this:Object, ...strings)
	dynamic prototype function indexOf(this:Object, searchString, position)
	dynamic prototype function lastIndexOf(this:Object, searchString, position)
	dynamic prototype function localeCompare(this:Object, that)
	dynamic prototype function match(this:Object, regexp)
	dynamic prototype function replace(this:Object, searchValue, replaceValue)
	dynamic prototype function search(this:Object, regexp)
	dynamic prototype function slice(this:Object, start, end)
	dynamic prototype function split(this:Object, separator, limit)
	dynamic prototype function substring(this:Object, start, end)
	dynamic prototype function toLowerCase(this:Object)
	dynamic prototype function toLocaleLowerCase(this:Object)
	dynamic prototype function toUpperCase(this:Object)
	dynamic prototype function toLocaleUpperCase(this:Object)

	// bound {DE,DD,RO} properties of String instances
	function get length()
        // or const length?
}
</pre>

</div>

<a name="boolean"></a><h1>Boolean</h1>
<div class="level1">
<pre class="code">
dynamic class Boolean
{
        // Boolean constructor called as a function
        static intrinsic function call()

	// non-generic {DE} properties of Boolean.prototype
	dynamic prototype function toString(this:Boolean)
	dynamic prototype function valueOf(this:Boolean)
}
</pre>

</div>

<a name="number"></a><h1>Number</h1>
<div class="level1">
<pre class="code">
dynamic class Number
{
        // Number constructor called as a function
        static intrinsic function call()
        
	// properties of the Number Constructor {DE,DD,RO}
        // note: these are const in E3, even though global.undefined, etc, are vars.
	static const MAX_VALUE
	static const MIN_VALUE
	static const NaN
	static const NEGATIVE_INFINITY
	static const POSITIVE_INFINITY

	// non-generic unbound {DE} properties of Number.prototype
	dynamic prototype function toString(this:Number, radix=10) // not a simple override: adds radix param
	dynamic prototype function toLocaleString(this:Number)
	dynamic prototype function valueOf(this:Number)
	dynamic prototype function toFixed(this:Number, fractionDigits)
	dynamic prototype function toExponential(this:Number, fractionDigits)
	dynamic prototype function toPrecision(this:Number, precision)
}
</pre>

</div>

<a name="math"></a><h1>Math</h1>
<div class="level1">
<pre class="code">
// Math is a singleton object, not a class, but has the type &quot;Math&quot;
// which suggests a private Math class that created the singleton.
var Math = new private::Math
private dynamic class Math
{
	// {DE,DD,RO} value properties of the Math object
	const E	
	const LN10	
	const LN2	
	const LOG2E	
	const LOG10E
	const PI	
	const SQRT1_2
	const SQRT2	

	// unbound {DE}, function properties of the Math object.  
        // this is unused
	dynamic function abs(x)
	dynamic function acos(x)
	dynamic function asin(x)
	dynamic function atan(x)
	dynamic function atan2(x,y)
	dynamic function ceil(x)
	dynamic function cos(x)
	dynamic function exp(x)
	dynamic function floor(x)
	dynamic function log(x)
	dynamic function pow(x,y)
	dynamic function random()
	dynamic function round(x)
	dynamic function sin(x)
	dynamic function sqrt(x)
	dynamic function tan(x)

        // in ECMA-262, max.length==min.length==2.  But, the actual behavior is
        // based on arg count even with 0 or 1 args.   decision: bug in ECMA-262 spec.
	dynamic function max(...values)
	dynamic function min(...values)

        // high performance runtimes want bound math functions
        ActionScript function sqrt(x)
}
</pre>

</div>

<a name="date"></a><h1>Date</h1>
<div class="level1">
<pre class="code">
dynamic class Date
{
        // Date called as function
	static instrinsic function call(year=0, month=0, date=0, hours=0, minutes=0, seconds=0, ms=0):String

        // Date called as constructor... overloads based on arg count
	function Date(yearOrTime=NaN, month=NaN, date=NaN, hours=NaN, minutes=NaN, seconds=NaN, ms=NaN)

	// properties of the Date Constructor
	static function parse(string)
	static function UTC(year, month, date=NaN, hourse=NaN, minutes=NaN, seconds=NaN, ms=NaN)

	Date.prototype = new Date(NaN) // not same as new Date()

	// non-generic unbound {DE} properties of Date.prototype 
	dynamic prototype function toString(this:Date)
	dynamic prototype function toDateString(this:Date)
	dynamic prototype function toTimeString(this:Date)
	dynamic prototype function toLocaleString(this:Date)
	dynamic prototype function toLocaleDateString(this:Date)
	dynamic prototype function toLocaleTimeString(this:Date)
	dynamic prototype function toUTCString(this:Date)
	dynamic prototype function valueOf(this:Date)
	dynamic prototype function getTime(this:Date)
	dynamic prototype function getFullYear(this:Date)
	dynamic prototype function getUTCFullYear(this:Date)
	dynamic prototype function getMonth(this:Date)
	dynamic prototype function getUTCMonth(this:Date)
	dynamic prototype function getDate(this:Date)
	dynamic prototype function getUTCDate(this:Date)
	dynamic prototype function getDay(this:Date)
	dynamic prototype function getUTCDay(this:Date)
	dynamic prototype function getHours(this:Date)
	dynamic prototype function getUTCHours(this:Date)
	dynamic prototype function getMinutes(this:Date)
	dynamic prototype function getUTCMinutes(this:Date)
	dynamic prototype function getSeconds(this:Date)
	dynamic prototype function getUTCSeconds(this:Date)
	dynamic prototype function getMilliseconds(this:Date)
	dynamic prototype function getUTCMilliseconds(this:Date)
	dynamic prototype function getTimezoneOffset(this:Date)
	dynamic prototype function setTime(this:Date, time)
	dynamic prototype function setMilliseconds(this:Date, ms)
	dynamic prototype function setUTCMilliseconds(this:Date, ms)
	dynamic prototype function setSeconds(this:Date, sec, ms=getMilliseconds())
	dynamic prototype function setUTCSeconds(this:Date, sec, ms=getUTCMilliseconds())
	dynamic prototype function setMinutes(this:Date, min, sec=getUTCSeconds(), ms=getMilliseconds())
	dynamic prototype function setUTCMinutes(this:Date, min, sec=getUTCSeconds(), ms=getUTCMilliseconds())
	// yada yada
	// setHours, setUTCHours
	// setDate, setUTCDate
	// setMonth, setUTCMonth
	// setFullYear, setUTCFullYear
}
</pre>

</div>

<a name="regexp"></a><h1>RegExp</h1>
<div class="level1">
<pre class="code">
dynamic class RegExp
{
	// RegExp called as function
	static intrinsic function call(pattern,flags)	// called as function, eg RegExp()
	function RegExp(pattern,flags)			// regexp constructor eg new RegExp

        intrinsic function call()                       // instance of RegExp called as function
        intrinsic function construct()                  // instance called as constructor

	// override default prototype setup
	RegExp.prototype = new Object
	RegExp.prototype.constructor = RegExp

	// non-generic unbound {DE} properties of RegExp.prototype
	dynamic prototype function exec(this:RegExp, string)
	dynamic prototype function test(this:RegExp, string)
	dynamic prototype function toString(this:RegExp, )

	// {DD,DE,RO} properties of regexp instances
	const source
	const global
	const ignoreCase
	const multiline
	var lastIndex	// {DD,DE,!RO}
}
</pre>

</div>

<a name="error"></a><h1>Error</h1>
<div class="level1">
<pre class="code">
dynamic class Error
{
	static function call Error(message) {
		return new Error(message)
	}
	function Error(message) {
		if (message != undefined) this.message = message // dynamically create this.message
	}

	// {DE} properties of Error.prototype
	dynamic prototype var name = &quot;Error&quot;
	dynamic prototype var message = // impl defined
	dynamic prototype function toString()
}

// EvalError
// RangeError
// ReferenceError
// SyntaxError
// TypeError
// URIError
dynamic class NativeError extends Error
{
	// issue: instances have [[Class]] = &quot;Error&quot; not &quot;NativeError&quot;
	// yet, NativeError.prototype.[[Prototype]] = Error.prototype, 
	// as if NativeError extends Error

	dynamic prototype var name = &quot;NativeError&quot;
	dynamic prototype var message = // impl defined
}
</pre>

</div>

<!-- no cachefile used, but created -->
    <!-- wikipage stop -->
  </div>

  <div class="clearer">&nbsp;</div>

  
  <div class="stylefoot">

    <div class="meta">
      <div class="user">
              </div>
      <div class="doc">
        proposals/builtin_classes.txt &middot; Last modified: 2008/07/14 18:29 by jodyer      </div>
    </div>

   
    <div class="bar" id="bar_bottom">
      <div class="bar-left" id="bar_bottomleft">
        <form class="button" method="post" action="index.html" onsubmit="return svchk()"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="" /><input type="hidden" name="id" value="proposals:builtin_classes" /><input type="submit" value="Show pagesource" class="button" title="ALT+V" accesskey="v" /></form>        <form class="button" method="get" action="index.html" onsubmit="return svchk()"><input type="hidden" name="do" value="revisions" /><input type="hidden" name="id" value="proposals:builtin_classes" /><input type="submit" value="Old revisions" class="button" title="ALT+O" accesskey="o" /></form>      </div>
      <div class="bar-right" id="bar_bottomright">
                        <form class="button" method="get" action="index.html" onsubmit="return svchk()"><input type="hidden" name="do" value="login" /><input type="hidden" name="id" value="proposals:builtin_classes" /><input type="submit" value="Login" class="button" /></form>        <form class="button" method="get" action="index.html" onsubmit="return svchk()"><input type="hidden" name="do" value="index" /><input type="hidden" name="id" value="proposals:builtin_classes" /><input type="submit" value="Index" class="button" title="ALT+X" accesskey="x" /></form>        <a href="doku.php%3Fid=proposals:builtin_classes.html#top"><input type="button" class="button" value="Back to top" onclick="window.scrollTo(0, 0)" /></a>&nbsp;
      </div>
    </div>

  </div>

</div>

<div align="center" class="footerinc">
  <a target="_blank" href="feed.php" title="Recent changes RSS feed"><img src="lib/tpl/default/images/button-rss.png" width="80" height="15" alt="Recent changes RSS feed" border="0" /></a>

  <a target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/2.0/" rel="license" title="Creative Commons License"><img src="lib/tpl/default/images/button-cc.gif" width="80" height="15" alt="Creative Commons License" border="0" /></a>

  <a target="_blank" href="https://www.paypal.com/xclick/business=andi%40splitbrain.org&amp;item_name=DokuWiki+Donation&amp;no_shipping=1&amp;no_note=1&amp;tax=0&amp;currency_code=EUR&amp;lc=US" title="Donate"><img src="lib/tpl/default/images/button-donate.gif" alt="Donate" border="0" /></a>

  <a target="_blank" href="http://www.php.net" title="Powered by PHP"><img src="lib/tpl/default/images/button-php.gif" width="80" height="15" alt="Powered by PHP" border="0" /></a>

  <a target="_blank" href="http://validator.w3.org/check/referer" title="Valid XHTML 1.0"><img src="lib/tpl/default/images/button-xhtml.png" width="80" height="15" alt="Valid XHTML 1.0" border="0" /></a>

  <a target="_blank" href="http://jigsaw.w3.org/css-validator/check/referer" title="Valid CSS"><img src="lib/tpl/default/images/button-css.png" width="80" height="15" alt="Valid CSS" border="0" /></a>

  <a target="_blank" href="http://wiki.splitbrain.org/wiki:dokuwiki" title="Driven by DokuWiki"><img src="lib/tpl/default/images/button-dw.png" width="80" height="15" alt="Driven by DokuWiki" border="0" /></a>



<!--

<rdf:RDF xmlns="http://web.resource.org/cc/"
    xmlns:dc="http://purl.org/dc/elements/1.1/"
    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
<Work rdf:about="">
   <dc:type rdf:resource="http://purl.org/dc/dcmitype/Text" />
   <license rdf:resource="http://creativecommons.org/licenses/by-nc-sa/2.0/" />
</Work>

<License rdf:about="http://creativecommons.org/licenses/by-nc-sa/2.0/">
   <permits rdf:resource="http://web.resource.org/cc/Reproduction" />
   <permits rdf:resource="http://web.resource.org/cc/Distribution" />
   <requires rdf:resource="http://web.resource.org/cc/Notice" />
   <requires rdf:resource="http://web.resource.org/cc/Attribution" />
   <prohibits rdf:resource="http://web.resource.org/cc/CommercialUse" />
   <permits rdf:resource="http://web.resource.org/cc/DerivativeWorks" />
   <requires rdf:resource="http://web.resource.org/cc/ShareAlike" />
</License>

</rdf:RDF>

-->
</div>

<img src="lib/exe/indexer.php%3Fid=proposals%253Abuiltin_classes&amp;1454275564" width="1" height="1" alt=""  /></body>
</html>
