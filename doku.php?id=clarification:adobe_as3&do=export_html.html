<html>
<head>
  <meta name="generator" content="DokuWiki Release 2005-09-22e" />
  <link rel="start" href="index.html" />
  <link rel="contents" href="doku.php%3Fid=clarification:adobe_as3&amp;do=index.html" title="" />
  <link rel="alternate" type="application/rss+xml" title="Recent Changes" href="feed.php" />
  <link rel="alternate" type="application/rss+xml" title="Current Namespace" href="feed.php%3Fmode=list&amp;ns=clarification" />
  <link rel="alternate" type="text/html" title="Plain HTML" href="doku.php%3Fid=clarification:adobe_as3&amp;do=export_html.html" />
  <link rel="alternate" type="text/plain" title="Wiki Markup" href="doku.php%3Fid=clarification:adobe_as3&amp;do=export_raw" />
  <link rel="stylesheet" media="screen" type="text/css" href="lib/styles/style.css" />
  <meta name="robots" content="noindex,nofollow" />
  <script language="javascript" type="text/javascript" charset="utf-8">
    var alertText   = 'Please enter the text you want to format.\nIt will be appended to the end of the document.'
    var notSavedYet = 'Unsaved changes will be lost.\nReally continue?'
    var DOKU_BASE   = '/'
  </script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/script.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/tw-sack.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/ajax.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/domLib.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/domTT.js"></script>
  <link rel="stylesheet" type="text/css" href="lib/plugins/plugin/style.css" />
</head>
<body>
<div class="toc">
<div class="tocheader"> <script type="text/javascript">showTocToggle("+","-")</script>Table of Contents</div>
<div id="tocinside">
<ul class="toc">
<li class="level1"><span class="li"><a href="doku.php%3Fid=clarification:adobe_as3&amp;do=export_html.html#as3_compatibility" class="toc">AS3 compatibility</a></span><ul class="toc">
<li class="level2"><span class="li"><a href="doku.php%3Fid=clarification:adobe_as3&amp;do=export_html.html#new_string_and_string" class="toc">'new String' and ': String'</a></span><ul class="toc">
<li class="level3"><span class="li"><a href="doku.php%3Fid=clarification:adobe_as3&amp;do=export_html.html#rationale" class="toc">Rationale</a></span></li>
<li class="level3"><span class="li"><a href="doku.php%3Fid=clarification:adobe_as3&amp;do=export_html.html#incompatibility" class="toc">Incompatibility</a></span></li>
<li class="level3"><span class="li"><a href="doku.php%3Fid=clarification:adobe_as3&amp;do=export_html.html#workaround" class="toc">Workaround</a></span></li>
<li class="level3"><span class="li"><a href="doku.php%3Fid=clarification:adobe_as3&amp;do=export_html.html#issues" class="toc">Issues</a></span></li>
</ul>
</li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=clarification:adobe_as3&amp;do=export_html.html#new_boolean_and_boolean" class="toc">'new Boolean' and ': Boolean'</a></span><ul class="toc">
<li class="level3"><span class="li"><a href="doku.php%3Fid=clarification:adobe_as3&amp;do=export_html.html#rationale" class="toc">Rationale</a></span></li>
<li class="level3"><span class="li"><a href="doku.php%3Fid=clarification:adobe_as3&amp;do=export_html.html#incompatibility" class="toc">Incompatibility</a></span></li>
<li class="level3"><span class="li"><a href="doku.php%3Fid=clarification:adobe_as3&amp;do=export_html.html#workaround" class="toc">Workaround</a></span></li>
<li class="level3"><span class="li"><a href="doku.php%3Fid=clarification:adobe_as3&amp;do=export_html.html#issues" class="toc">Issues</a></span></li>
</ul>
</li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=clarification:adobe_as3&amp;do=export_html.html#is_rhs_expressions" class="toc">'is' RHS expressions</a></span><ul class="toc">
<li class="level3"><span class="li"><a href="doku.php%3Fid=clarification:adobe_as3&amp;do=export_html.html#background" class="toc">Background</a></span></li>
<li class="level3"><span class="li"><a href="doku.php%3Fid=clarification:adobe_as3&amp;do=export_html.html#incompatibility" class="toc">Incompatibility</a></span></li>
<li class="level3"><span class="li"><a href="doku.php%3Fid=clarification:adobe_as3&amp;do=export_html.html#workaround" class="toc">Workaround</a></span></li>
</ul>
</li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=clarification:adobe_as3&amp;do=export_html.html#is_operator" class="toc">'is' operator</a></span><ul class="toc">
<li class="level3"><span class="li"><a href="doku.php%3Fid=clarification:adobe_as3&amp;do=export_html.html#workaround" class="toc">Workaround</a></span></li>
</ul>
</li>
</ul>
</li>
<li class="level1"><span class="li"><a href="doku.php%3Fid=clarification:adobe_as3&amp;do=export_html.html#as3_extensions" class="toc">AS3 extensions</a></span><ul class="toc">
<li class="level2"><span class="li"><a href="doku.php%3Fid=clarification:adobe_as3&amp;do=export_html.html#packages_and_import" class="toc">Packages and import</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=clarification:adobe_as3&amp;do=export_html.html#as_operator" class="toc">'as' operator</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=clarification:adobe_as3&amp;do=export_html.html#e4x" class="toc">E4X</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=clarification:adobe_as3&amp;do=export_html.html#int_and_uint" class="toc">int and uint</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=clarification:adobe_as3&amp;do=export_html.html#virtual_attribute" class="toc">'virtual' attribute</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=clarification:adobe_as3&amp;do=export_html.html#static_strict_mode" class="toc">Static strict mode</a></span></li>
</ul>
</li>
</ul>
</div>
</div>

<a name="as3_compatibility"></a><h1>AS3 compatibility</h1>
<div class="level1">

<p>
 This section describes known incompatabilities between ES4 and AS3. This includes language constructs that have a different meaning in ES4 than they do in AS3. Not included are AS3 features that are not in ES4 (see below) and ES4 features that are not in AS3.
</p>

</div>
<!-- SECTION [1-294] -->
<a name="new_string_and_string"></a><h2>'new String' and ': String'</h2>
<div class="level2">

</div>
<!-- SECTION [295-335] -->
<a name="rationale"></a><h3>Rationale</h3>
<div class="level3">

<p>
 AS3 makes <code>class String</code> final and sealed. For web compatibility, ES4 must retain the ES3 behavior of allowing <code>String</code> instances to be extended with dynamic properties.
</p>

</div>
<!-- SECTION [336-531] -->
<a name="incompatibility"></a><h3>Incompatibility</h3>
<div class="level3">

<p>
 AS3 programs that use <code>String</code> as a constructor or an annotation will change meaning in the following ways: 
</p>
<ul>
<li class="level1"><div class="li"> values created by <code>new String</code> are mutable and are unique with respect to <code>===</code></div>
</li>
<li class="level1"><div class="li"> properties annotated with <code>: String</code> are nullable and values assigned to them will be converted to String objects as though with <code>new String</code></div>
</li>
<li class="level1"><div class="li"> programs that continue to run might run slower because of possible late binding to string methods</div>
</li>
</ul>

<p>
 ES4 introduces a new class named <code>string</code> that has the behavior of the primitive <code>string</code> type in ES3 and approximates the behavior of the <code>String</code> class in AS3. The main difference between ES4 <code>string</code> and AS3 <code>String</code> is that <code>string</code> is non-nullable.
</p>

</div>
<!-- SECTION [532-1279] -->
<a name="workaround"></a><h3>Workaround</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> Replace occurances of <code>&lsquo;: String</code>&rsquo; (type annotation) that are intended to be nullable with <code>&lsquo;: ?string</code>&rsquo;</div>
</li>
<li class="level1"><div class="li"> Replace occurances of <code>&lsquo;: String</code>&rsquo; that are intended to be non-nullable with <code>&lsquo;: string</code>&rsquo;</div>
</li>
<li class="level1"><div class="li"> Replace occurances of <code> &lsquo;new String&rsquo; </code> with <code> &lsquo;new string&rsquo; </code>, or simply the string literal that is the constructor argument</div>
</li>
</ul>

</div>
<!-- SECTION [1280-1645] -->
<a name="issues"></a><h3>Issues</h3>
<div class="level3">

<p>
 When a computed name is used to lookup a constructor, there is no way for a compiler to detect a change in behavior between AS3 and ES4 and generate compatible code. In this case, we will need runtime checks in the vm to distinguish between references to &ldquo;String&rdquo; and &ldquo;string&rdquo;. E.g.
</p>
<pre class="code">
    var n = &quot;String&quot;     // AS3 or ES4 String?
    new this[n] (&quot;foo&quot;)
</pre>

</div>
<!-- SECTION [1646-2035] -->
<a name="new_boolean_and_boolean"></a><h2>'new Boolean' and ': Boolean'</h2>
<div class="level2">

</div>
<!-- SECTION [2036-2078] -->
<a name="rationale"></a><h3>Rationale</h3>
<div class="level3">

<p>
 AS3 makes <code>class Boolean</code> final and sealed. For web compatibility, ES4 must retain the ES3 behavior of <code>Boolean</code> instances.
</p>

</div>
<!-- SECTION [2079-2228] -->
<a name="incompatibility"></a><h3>Incompatibility</h3>
<div class="level3">

<p>
 AS3 programs that use <code>Boolean</code> as a constructor or a type annotation change meaning in the following ways: 
</p>
<ul>
<li class="level1"><div class="li"> values created by <code>new Boolean</code> are mutable and are unique with respect to <code>===</code></div>
</li>
<li class="level1"><div class="li"> properties annotated with <code>: Boolean</code> are nullable and values assigned to them will be converted to Boolean objects as though with <code>new Boolean</code></div>
</li>
</ul>

<p>
 The meaning of the literals <code>true</code> and <code>false</code> is the same in AS3 as it is in ES3 and ES4. Therefore only AS3 programs that explicitly create Boolean objects using <code>new</code> or use <code>Boolean</code> as an annotation will be affected. 
</p>

</div>
<!-- SECTION [2229-2842] -->
<a name="workaround"></a><h3>Workaround</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> Replace occurances of <code>&lsquo;: Boolean</code>&rsquo; (type annotation) with <code>&lsquo;: boolean</code>&rsquo;</div>
</li>
<li class="level1"><div class="li"> Replace occurances of <code> &lsquo;new Boolean&rsquo; </code> with <code> &lsquo;new boolean&rsquo; </code>, or simply the boolean literal that is the constructor argument</div>
</li>
</ul>

</div>
<!-- SECTION [2843-3081] -->
<a name="issues"></a><h3>Issues</h3>
<div class="level3">

<p>
 See String Issues above.
</p>

</div>
<!-- SECTION [3082-3125] -->
<a name="is_rhs_expressions"></a><h2>'is' RHS expressions</h2>
<div class="level2">

</div>
<!-- SECTION [3126-3159] -->
<a name="background"></a><h3>Background</h3>
<div class="level3">

<p>
 AS3 allows an ordinary expression on the right side of the binary &lsquo;is&rsquo; operator. ES4 allows only a type expression
</p>

</div>
<!-- SECTION [3160-3297] -->
<a name="incompatibility"></a><h3>Incompatibility</h3>
<div class="level3">

<p>
 AS3 programs that use an expression that is not a type expression on the right side of the &lsquo;is&rsquo; operator will result in a syntax error
</p>

</div>
<!-- SECTION [3298-3460] -->
<a name="workaround"></a><h3>Workaround</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> replace the non-type expression on the right side of <code> &lsquo;is&rsquo; </code> with a type expression. This might result in a loss of flexibility, but also greater reliability</div>
</li>
</ul>

</div>
<!-- SECTION [3461-3648] -->
<a name="is_operator"></a><h2>'is' operator</h2>
<div class="level2">

<p>
 The is operator respects nullability in ES4 but not in AS3. E.g.
</p>
<pre class="code">
    print(null is Object)   // prints true in ES4 and false in AS3
</pre>

</div>
<!-- SECTION [3649-3824] -->
<a name="workaround"></a><h3>Workaround</h3>
<div class="level3">

<p>
 Add <code>!</code> after <code>Object</code> on the rhs of <code>is</code>. Do the same for all other nullable types.
</p>

</div>
<!-- SECTION [3825-3939] -->
<a name="as3_extensions"></a><h1>AS3 extensions</h1>
<div class="level1">

<p>
 This section describes features in AS3 that have not been adopted in ES4. The ES4 conformance clause allows such extensions by conforming implementations, and so these are true incompatibilities.
</p>

</div>
<!-- SECTION [3940-4167] -->
<a name="packages_and_import"></a><h2>Packages and import</h2>
<div class="level2">

<p>
 Packages are mostly syntactic sugar for namespaces. They are not included in ES4 because they do not provide significant additional value. In particular, they don&rsquo;t support common module or loading use cases.
</p>

</div>
<!-- SECTION [4168-4411] -->
<a name="as_operator"></a><h2>'as' operator</h2>
<div class="level2">

<p>
 The AS3 &lsquo;as&rsquo; operator is replaced by &lsquo;cast&rsquo;. The cast operator throws a runtime error where &lsquo;as&rsquo; returns <code>null</code>.
</p>

</div>
<!-- SECTION [4412-4556] -->
<a name="e4x"></a><h2>E4X</h2>
<div class="level2">

<p>
 E4X is not included in ES4 because it is too complicated and buggy to be digested in the time allowed.
</p>

</div>
<!-- SECTION [4557-4680] -->
<a name="int_and_uint"></a><h2>int and uint</h2>
<div class="level2">

<p>
 The &lsquo;int&rsquo; and &lsquo;uint&rsquo; types are inconsistent with the ES4 (and AS3) type system. They are really optimization annotations, but their actual performance benefits are unclear.
</p>

</div>
<!-- SECTION [4681-4881] -->
<a name="virtual_attribute"></a><h2>'virtual' attribute</h2>
<div class="level2">

<p>
 The &lsquo;virtual&rsquo; attribute is not supported in ES4, and is the default where allowed in AS3.
</p>

</div>
<!-- SECTION [4882-5005] -->
<a name="static_strict_mode"></a><h2>Static strict mode</h2>
<div class="level2">

<p>
 AS3 style static checking is seen as a feature of development environments, which vary widely among ES4 implementations. There is interest in specifying an optional static semantics that implementations should follow if they do ahead of time error checking. The effort to specify those semantics was put on hold until the run time type system is fully specified. 
</p>

</div>
<!-- SECTION [5006-] -->
<!-- cachefile /usr/local/www/es-lang.org/wiki/data/cache/e/eec22252b39437ddd06ad6c126248776.xhtml used -->
</body>
</html>
