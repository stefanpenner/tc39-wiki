<html>
<head>
  <meta name="generator" content="DokuWiki Release 2005-09-22e" />
  <link rel="start" href="index.html" />
  <link rel="contents" href="doku.php%3Fid=proposals:remove_the_arguments_object&amp;do=index.html" title="" />
  <link rel="alternate" type="application/rss+xml" title="Recent Changes" href="feed.php" />
  <link rel="alternate" type="application/rss+xml" title="Current Namespace" href="feed.php%3Fmode=list&amp;ns=proposals" />
  <link rel="alternate" type="text/html" title="Plain HTML" href="doku.php%3Fid=proposals:remove_the_arguments_object&amp;do=export_html.html" />
  <link rel="alternate" type="text/plain" title="Wiki Markup" href="doku.php%3Fid=proposals:remove_the_arguments_object&amp;do=export_raw" />
  <link rel="stylesheet" media="screen" type="text/css" href="lib/styles/style.css" />
  <meta name="robots" content="noindex,nofollow" />
  <script language="javascript" type="text/javascript" charset="utf-8">
    var alertText   = 'Please enter the text you want to format.\nIt will be appended to the end of the document.'
    var notSavedYet = 'Unsaved changes will be lost.\nReally continue?'
    var DOKU_BASE   = '/'
  </script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/script.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/tw-sack.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/ajax.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/domLib.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/domTT.js"></script>
  <link rel="stylesheet" type="text/css" href="lib/plugins/plugin/style.css" />
</head>
<body>
<div class="toc">
<div class="tocheader"> <script type="text/javascript">showTocToggle("+","-")</script>Table of Contents</div>
<div id="tocinside">
<ul class="toc">
<li class="level1"><span class="li"><a href="doku.php%3Fid=proposals:remove_the_arguments_object&amp;do=export_html.html#remove_the_arguments_object" class="toc">Remove the arguments object</a></span><ul class="toc">
<li class="level2"><span class="li"><a href="doku.php%3Fid=proposals:remove_the_arguments_object&amp;do=export_html.html#summary" class="toc">Summary</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=proposals:remove_the_arguments_object&amp;do=export_html.html#rationale" class="toc">Rationale</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=proposals:remove_the_arguments_object&amp;do=export_html.html#facilities" class="toc">Facilities</a></span><ul class="toc">
<li class="level3"><span class="li"><a href="doku.php%3Fid=proposals:remove_the_arguments_object&amp;do=export_html.html#rest_arguments_and_optional_arguments" class="toc">Rest arguments and optional arguments</a></span></li>
<li class="level3"><span class="li"><a href="doku.php%3Fid=proposals:remove_the_arguments_object&amp;do=export_html.html#arguments.callee" class="toc">arguments.callee</a></span></li>
<li class="level3"><span class="li"><a href="doku.php%3Fid=proposals:remove_the_arguments_object&amp;do=export_html.html#arguments.generator" class="toc">arguments.generator</a></span></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>

<a name="remove_the_arguments_object"></a><h1>Remove the arguments object</h1>
<div class="level1">

</div>
<!-- SECTION [1-44] -->
<a name="summary"></a><h2>Summary</h2>
<div class="level2">

<p>
 The <code>arguments</code> object described in section 10.1.8 of E262-3 should be relegated to an informative annex of <em>deprecated</em> features, and its essential functionality should be provided by other mechanisms: rest arguments, optional arguments, <code>this function</code>, and <code>this generator</code>.
</p>

</div>
<!-- SECTION [45-352] -->
<a name="rationale"></a><h2>Rationale</h2>
<div class="level2">

<p>
 The essential function of the <code>arguments</code> object is to serve as a reflection point for entities participating in a function call: the caller, the callee, the actual arguments, and the formal arguments.  <code>arguments.callee</code> is the function receiving the call (ie, the function within which <code>arguments</code> is available); <code>arguments[k]</code> is the value of the <em>k</em>th actual parameter; and <code>arguments[k]</code> is also the location of the <em>k</em>th formal parameter.  <code>arguments.caller</code> is not part of E262-3 but was part of previous editions (?).
</p>

<p>
But the <code>arguments</code> object is only a partial reflection mechanism in that the receiver object of a method call is available through the <code>this</code> mechanism instead.  Furthermore, it is an oddity for the properties of the <code>arguments</code> object to share storage with the formal parameters of the function.  Worse, though the <code>arguments</code> object appears to be an Array (it has a predefined <code>length</code> field and its properties are named by nonnegative integers) it is not&mdash;it is a plain, but unusual, object.  Finally, a practical implementation of ECMAScript must avoid creating the <code>arguments</code> object until it is actually needed, leading to a substantial increase in implementation complexity for little or no gain.
</p>

<p>
It is proposed that the <code>arguments</code> object be <em>removed</em> from the specification rather than <em>deprecated</em> or kept in its current form, since there is no longer any need for it.  Implementations that need to cater to E262-3 code must continue to provide support for it (like they currently provide support for <code>arguments.caller</code> and <code>&lt;function&gt;.arguments</code> to cater to earlier spec editions), but pure E262-4 implementations need not.
</p>

</div>
<!-- SECTION [353-2079] -->
<a name="facilities"></a><h2>Facilities</h2>
<div class="level2">

</div>
<!-- SECTION [2080-2103] -->
<a name="rest_arguments_and_optional_arguments"></a><h3>Rest arguments and optional arguments</h3>
<div class="level3">

<p>
 In ECMAScript 4 the rest arguments facility is available to capture the actual parameters of the function.  Furthermore, the rest parameter is a true Array object.  The rest arguments facility is in most ways better than the <code>arguments</code> object at capturing the parameter values.
</p>

<p>
In fact, the optional arguments facility (i.e., default parameter values) handles many of the use cases for which the <code>arguments</code> object is used in E262-3 code; in many cases the E262-4 rest arguments facility will not need to be used at all.
</p>

<p>
The sharing of <code>arguments</code> object properties with formal parameters does not appear to be an essential feature and no substitute for it will be provided.  [By means of a mechanism outside E262-3, namely <code>&lt;function&gt;.arguments</code>, it is possible to obtain a reference to the <code>arguments</code> object of a function with a currently suspended activation object, and by changing properties on that object it is possible to change the values the body of that function will see when its activation becomes active again.  No doubt this is occasionally useful, but it is equally likely a security and maintenance nightmare.]
</p>

</div>
<!-- SECTION [2104-3295] -->
<a name="arguments.callee"></a><h3>arguments.callee</h3>
<div class="level3">

<p>
 We are left with having to provide for <code>arguments.callee</code>, which some programmers like to use as a way of referencing the function in which the reference occurs without knowing the name of the function.
</p>

<p>
We propose the following syntax as an alternative: 
</p>
<pre class="code">this function</pre>

<p>
 where the two keywords cannot be separated by a linebreak.
</p>

</div>
<!-- SECTION [3296-3659] -->
<a name="arguments.generator"></a><h3>arguments.generator</h3>
<div class="level3">

<p>
 A recent thread on the es4-discuss list has proposed that <code>arguments.generator</code>, analogous to <code>arguments.callee</code>, should be a way of obtaining a reference to the generator object in which the referencing code is executing.
</p>

<p>
We propose that the following syntax is used instead: 
</p>
<pre class="code">this generator</pre>

<p>
 where <code>generator</code> is a new contextual keyword, and the two keywords cannot be separated by a linebreak. 
</p>
<hr noshade="noshade" size="1" />

<p>
The <code>this function</code> and <code>this generator</code> double keywords could be primary expressions, allowing <code>this function.length</code>, e.g., instead of <code>(this function).length</code>. Or they could be unary expressions, requiring parenthesization when accessing properties such as <code>length</code> (the function&rsquo;s expected or &ldquo;ideal&rdquo; number of parameters). I&rsquo;m in favor of primary over unary, by analogy to <code>this</code> itself; also similar to <code>new C().prop</code>, which evaluates as <code>(new C()).prop</code>. Comments?
</p>

<p>
 &mdash; <em><a href="mailto:%26%23x62%3B%26%23x72%3B%26%23x65%3B%26%23x6e%3B%26%23x64%3B%26%23x61%3B%26%23x6e%3B%26%23x40%3B%26%23x6d%3B%26%23x6f%3B%26%23x7a%3B%26%23x69%3B%26%23x6c%3B%26%23x6c%3B%26%23x61%3B%26%23x2e%3B%26%23x6f%3B%26%23x72%3B%26%23x67%3B" class="mail" title="&#x62;&#x72;&#x65;&#x6e;&#x64;&#x61;&#x6e;&#x40;&#x6d;&#x6f;&#x7a;&#x69;&#x6c;&#x6c;&#x61;&#x2e;&#x6f;&#x72;&#x67;">Brendan Eich</a> 2007/05/08 15:28</em>
</p>

<p>
I prefer the <em>PrimaryExpression</em> form as well. <code>this generator</code> is just a name with funny syntax.
</p>

<p>
 &mdash; <em><a href="mailto:%26%23x6a%3B%26%23x6f%3B%26%23x64%3B%26%23x79%3B%26%23x65%3B%26%23x72%3B%26%23x40%3B%26%23x61%3B%26%23x64%3B%26%23x6f%3B%26%23x62%3B%26%23x65%3B%26%23x2e%3B%26%23x63%3B%26%23x6f%3B%26%23x6d%3B" class="mail" title="&#x6a;&#x6f;&#x64;&#x79;&#x65;&#x72;&#x40;&#x61;&#x64;&#x6f;&#x62;&#x65;&#x2e;&#x63;&#x6f;&#x6d;">Jeff Dyer</a> 2007/06/21 12:51</em> 
</p>

</div>
<!-- SECTION [3660-] -->
<!-- cachefile /usr/local/www/es-lang.org/wiki/data/cache/c/c82f1b1b06dfea5b274ea26766579813.xhtml used -->
</body>
</html>
