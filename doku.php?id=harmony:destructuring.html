<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
 lang="en" dir="ltr">
<head>
  <title>harmony:destructuring [ES Wiki]</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <meta name="generator" content="DokuWiki Release 2005-09-22e" />
  <link rel="start" href="index.html" />
  <link rel="contents" href="doku.php%3Fid=harmony:destructuring&amp;do=index.html" title="" />
  <link rel="alternate" type="application/rss+xml" title="Recent Changes" href="feed.php" />
  <link rel="alternate" type="application/rss+xml" title="Current Namespace" href="http://wiki.ecmascript.org/feed.php?mode=list&amp;ns=harmony" />
  <link rel="alternate" type="text/html" title="Plain HTML" href="doku.php%3Fid=harmony:destructuring&amp;do=export_html.html" />
  <link rel="alternate" type="text/plain" title="Wiki Markup" href="doku.php%3Fid=harmony:destructuring&amp;do=export_raw" />
  <link rel="stylesheet" media="screen" type="text/css" href="lib/styles/style.css" />
  <meta name="date" content="2013-07-12T00:00:09+0000" />
  <meta name="robots" content="index,follow" />
  <script language="javascript" type="text/javascript" charset="utf-8">
    var alertText   = 'Please enter the text you want to format.\nIt will be appended to the end of the document.'
    var notSavedYet = 'Unsaved changes will be lost.\nReally continue?'
    var DOKU_BASE   = '/'
  </script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/script.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/tw-sack.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/ajax.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/domLib.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/domTT.js"></script>
  <link rel="stylesheet" type="text/css" href="lib/plugins/plugin/style.css" />

  <link rel="shortcut icon" href="lib/images/favicon.ico" />
  <link rel="stylesheet" media="screen" type="text/css" href="lib/tpl/default/layout.css" />
  <link rel="stylesheet" media="screen" type="text/css" href="lib/tpl/default/design.css" />

  
  <link rel="stylesheet" media="print" type="text/css" href="lib/tpl/default/print.css" />

  <!--[if gte IE 5]>
  <style type="text/css">
    /* that IE 5+ conditional comment makes this only visible in IE 5+ */
    /* IE bugfix for transparent PNGs */
    //DISABLED   img { behavior: url("/lib/scripts/pngbehavior.htc"); }
  </style>
  <![endif]-->

  </head>

<body>
<div class="dokuwiki">
  
  <div class="stylehead">

    <div class="header">
      <div class="pagename">
        [[<a href="doku.php%3Fid=harmony:destructuring&amp;do=backlink.html" onclick="return svchk()" onkeypress="return svchk()">harmony:destructuring</a>]]
      </div>
      <div class="logo">
        <a href="doku.php%3Fid=.html" onclick="return svchk()" onkeypress="return svchk()" name="top" accesskey="h" title="[ALT+H]">ES Wiki</a>      </div>
    </div>
  
    
    <div class="bar" id="bar_top">
      <div class="bar-left" id="bar_topleft">
        <form class="button" method="post" action="index.html" onsubmit="return svchk()"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="" /><input type="hidden" name="id" value="harmony:destructuring" /><input type="submit" value="Show pagesource" class="button" title="ALT+V" accesskey="v" /></form>        <form class="button" method="get" action="index.html" onsubmit="return svchk()"><input type="hidden" name="do" value="revisions" /><input type="hidden" name="id" value="harmony:destructuring" /><input type="submit" value="Old revisions" class="button" title="ALT+O" accesskey="o" /></form>      </div>
  
      <div class="bar-right" id="bar_topright">
        <form class="button" method="get" action="index.html" onsubmit="return svchk()"><input type="hidden" name="do" value="recent" /><input type="hidden" name="id" value="" /><input type="submit" value="Recent changes" class="button" title="ALT+R" accesskey="r" /></form>        <form action="doku.php%3Fid=.html" accept-charset="utf-8" class="search" name="search" onsubmit="return svchk()"><input type="hidden" name="do" value="search" /><input type="text" id="qsearch_in" accesskey="f" name="id" class="edit" onkeyup="ajax_qsearch.call('qsearch_in','qsearch_out')" /><input type="submit" value="Search" class="button" /><div id="qsearch_out" class="ajax_qsearch" onclick="this.style.display='none'"></div></form>&nbsp;
      </div>
    </div>

        <div class="breadcrumbs">
      Trace: <span class="bcsep">&raquo;</span> <a href="doku.php%3Fid=harmony:block_scoped_bindings.html" onclick="return svchk()" onkeypress="return svchk()" class="breadcrumbs" title="harmony:block_scoped_bindings">block_scoped_bindings</a> <span class="bcsep">&raquo;</span> <a href="doku.php%3Fid=harmony:let.html" onclick="return svchk()" onkeypress="return svchk()" class="breadcrumbs" title="harmony:let">let</a> <span class="bcsep">&raquo;</span> <a href="doku.php%3Fid=harmony:const.html" onclick="return svchk()" onkeypress="return svchk()" class="breadcrumbs" title="harmony:const">const</a> <span class="bcsep">&raquo;</span> <a href="doku.php%3Fid=harmony:block_functions.html" onclick="return svchk()" onkeypress="return svchk()" class="breadcrumbs" title="harmony:block_functions">block_functions</a> <span class="bcsep">&raquo;</span> <span class="curid"><a href="doku.php%3Fid=harmony:destructuring.html" onclick="return svchk()" onkeypress="return svchk()" class="breadcrumbs" title="harmony:destructuring">destructuring</a></span>          </div>
    
  </div>
  
  
  <div class="page">
    <!-- wikipage start -->
    <div class="toc">
<div class="tocheader"> <script type="text/javascript">showTocToggle("+","-")</script>Table of Contents</div>
<div id="tocinside">
<ul class="toc">
<li class="clear"><ul class="toc">
<li class="level2"><span class="li"><a href="doku.php%3Fid=harmony:destructuring.html#background" class="toc">Background</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=harmony:destructuring.html#goals" class="toc">Goals</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=harmony:destructuring.html#syntax" class="toc">Syntax</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=harmony:destructuring.html#semantics" class="toc">Semantics</a></span><ul class="toc">
<li class="level3"><span class="li"><a href="doku.php%3Fid=harmony:destructuring.html#assignments" class="toc">Assignments</a></span></li>
<li class="level3"><span class="li"><a href="doku.php%3Fid=harmony:destructuring.html#variable_definitions" class="toc">Variable Definitions</a></span></li>
<li class="level3"><span class="li"><a href="doku.php%3Fid=harmony:destructuring.html#for_loops" class="toc">For Loops</a></span></li>
<li class="level3"><span class="li"><a href="doku.php%3Fid=harmony:destructuring.html#catch_heads" class="toc">Catch Heads</a></span></li>
<li class="level3"><span class="li"><a href="doku.php%3Fid=harmony:destructuring.html#function_parameters" class="toc">Function Parameters</a></span></li>
<li class="level3"><span class="li"><a href="doku.php%3Fid=harmony:destructuring.html#setter_parameter" class="toc">Setter Parameter</a></span></li>
</ul>
</li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=harmony:destructuring.html#examples" class="toc">Examples</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=harmony:destructuring.html#issues" class="toc">Issues</a></span></li>
</ul>
</li>
</ul>
</div>
</div>

<p>
<strong>This proposal has progressed to the Draft ECMAScript 6 Specification, which is available for review here: <a href="doku.php%3Fid=harmony:specification_drafts.html" class="wikilink1" title="harmony:specification_drafts" onclick="return svchk()" onkeypress="return svchk()">specification_drafts</a>. Any new issues relating to them should be filed as bugs at <a href="http://bugs.ecmascript.org" class="urlextern" target="_blank" title="http://bugs.ecmascript.org" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">http://bugs.ecmascript.org</a>. The content on this page is for historic record only and may no longer reflect the current state of the feature described within.</strong>
</p>

<a name="background"></a><h2>Background</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> ES4&rsquo;s <a href="doku.php%3Fid=proposals:destructuring_assignment.html" class="wikilink1" title="proposals:destructuring_assignment" onclick="return svchk()" onkeypress="return svchk()">destructuring assignment</a> proposal</div>
</li>
<li class="level1"><div class="li"> The ES4 destructuring assignment <a href="doku.php%3Fid=discussion:destructuring_assignment.html" class="wikilink1" title="discussion:destructuring_assignment" onclick="return svchk()" onkeypress="return svchk()">discussion page</a></div>
</li>
<li class="level1"><div class="li"> Array destructuring is implemented in the Opera browser starting with Opera 8</div>
</li>
<li class="level1"><div class="li"> ES4&rsquo;s proposal is implemented in SpiderMonkey and Rhino</div>
</li>
</ul>

</div>

<a name="goals"></a><h2>Goals</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> Allow for destructuring of arrays and objects using syntax that mirrors array and object initialisers</div>
</li>
<li class="level1"><div class="li"> Destructuring patterns can appear in assignment expressions but also in the various binding forms</div>
</li>
<li class="level1"><div class="li"> Create optimizable idioms such as &ldquo;group assignment&rdquo;, e.g. <code>[a, b] = [b, a]</code> to swap two variables</div>
</li>
</ul>

</div>

<a name="syntax"></a><h2>Syntax</h2>
<div class="level2">
<pre class="code ebnf">Pattern ::= &quot;{&quot; (Field (&quot;,&quot; Field)* &quot;,&quot;?)? &quot;}&quot;  
          | &quot;[&quot; ArrayPatternList &quot;]&quot;
ArrayPatternList ::= &quot;...&quot; Element
                   | Element? (&quot;,&quot; Element?)* (&quot;,&quot; &quot;...&quot; Element)?
Element ::= Pattern | LValue
Field   ::= Identifier (&quot;:&quot; Element)?
LValue  ::= &lt;any lvalue expression allowed in a normal assignment expression&gt; 
</pre>
<p>
A <em>Pattern</em> may appear only on the left-hand-side of &ldquo;=&rdquo; in the following contexts: 
</p>
<ul>
<li class="level1"><div class="li"> in a plain assignment expression</div>
</li>
<li class="level1"><div class="li"> in a variable initializer in a <code>var</code>, <code>let</code> or <code>const</code> definition</div>
</li>
<li class="level1"><div class="li"> in the first expression in the head of a <code>for-in</code> loop</div>
</li>
</ul>

<p>
 If preceded by a <code>var</code>, <code>let</code>, or <code>const</code> the <em>Pattern</em> must contain <em>LValue</em>s that are all identifiers, else the compiler must throw a <code>SyntaxError</code>.
</p>

<p>
A <em>Pattern</em> may appear not on the left-hand side of &ldquo;=&rdquo; in the following contexts: 
</p>
<ul>
<li class="level1"><div class="li"> in a <code>catch</code> clause head: <code>try {...} catch ({type, message, filename, lineNumber}) {...}</code></div>
</li>
<li class="level1"><div class="li"> in a formal parameter list: <code>function foo([first, second], third) {...}</code>, callable via <code>foo([1, 2], 3)</code></div>
<ul>
<li class="level2"><div class="li"> ES1-3 allow duplicate formal parameter names</div>
</li>
</ul>
</li>
</ul>

<p>
 In these cases all <em>LValue</em>s must be identifiers. Thus only assignment expressions may bind other lvalues than fresh identifiers.
</p>

<p>
&ldquo;Don&rsquo;t Repeat Yourself&rdquo; motivates a shorthand familiar from ML for object patterns: <code>{x, y}</code> in a pattern context is equivalent to <code>{x: x, y: y}</code>.
</p>

<p>
Note that an object initialiser cannot appear at the start of a statement, so an object destructuring assignment statement <code>{ x } = y</code> must be parenthesized either as <code>({ x } = y)</code> or <code>({ x }) = y</code>.
</p>

<p>
Empty patterns are allowed. Rationale: same basis case as for initialisers helps code generators avoid extra checks.
</p>

<p>
<em>(We don&rsquo;t understand the statement about Empty patterns. Besides, they aren&rsquo;t allowed by the above grammar. &ndash; MarkM &amp; Tom)</em>
</p>

<p>
The grammar does produce empty patterns such as in <code>var {} = obj;</code> and <code>[] = returnsArray()</code>. Note the parentheses and Kleene <code>*</code> usage. The rationale is that empty initialisers are allowed, and indeed top-down parsers must parse an empty pattern on the left of assignment as a primary initialiser expression first, only then discover a <code>=</code> token and revise the AST appropriately to make the initialiser be a destructuring pattern.
</p>

<p>
The further rationale is that code generators should not need to check and avoid emitting a no-op empty destructuring assignment or binding, if it happens that there are no properties or elements to destructure for the particular case the code generator is handling (say, based on database records or JSON). This is a bit thin by itself, but with the first point (symmetry with initialisers) it adds up to a better case for empty patterns.
</p>

<p>
 &mdash; <em><a href="mailto:%26%23x62%3B%26%23x72%3B%26%23x65%3B%26%23x6e%3B%26%23x64%3B%26%23x61%3B%26%23x6e%3B%26%23x40%3B%26%23x6d%3B%26%23x6f%3B%26%23x7a%3B%26%23x69%3B%26%23x6c%3B%26%23x6c%3B%26%23x61%3B%26%23x2e%3B%26%23x6f%3B%26%23x72%3B%26%23x67%3B" class="mail" title="&#x62;&#x72;&#x65;&#x6e;&#x64;&#x61;&#x6e;&#x40;&#x6d;&#x6f;&#x7a;&#x69;&#x6c;&#x6c;&#x61;&#x2e;&#x6f;&#x72;&#x67;">Brendan Eich</a> 2010/01/30 17:51</em>
</p>

</div>

<a name="semantics"></a><h2>Semantics</h2>
<div class="level2">

</div>

<a name="assignments"></a><h3>Assignments</h3>
<div class="level3">

<p>
 The meaning of the assignment expression P <code>=</code> E where P is a <em>Pattern</em> and E is an <em>AssignmentExpression</em> is: 
</p>
<ol>
<li class="level1"><div class="li"> Evaluate E yielding a value V</div>
</li>
<li class="level1"><div class="li"> Assign V to a fresh temporary T</div>
</li>
<li class="level1"><div class="li"> If P is an array pattern then </div>
<ol>
<li class="level3"><div class="li"> Taking each element L at the top level of P in order, with index I of L in P</div>
<ol>
<li class="level5"><div class="li"> If L is an <em>... Element</em> E then</div>
<ol>
<li class="level7"><div class="li"> Let A be a new array created as if by the expression new Array() where Array is the standard built-in constructor with that name. </div>
</li>
<li class="level7"><div class="li"> If T is null or undefined</div>
<ol>
<li class="level9"><div class="li"> Perform E = A</div>
</li>
</ol>
</li>
<li class="level7"><div class="li"> Else if Type(T) is not Object, then throw a TypeError exception.</div>
</li>
<li class="level7"><div class="li"> Else</div>
<ol>
<li class="level9"><div class="li"> Let len be the result of calling the [[Get]] internal method of T with argument “length”.</div>
</li>
<li class="level9"><div class="li"> Let n be ToUint32(len).</div>
</li>
<li class="level9"><div class="li"> Let index be I.</div>
</li>
<li class="level9"><div class="li"> Repeat while index &lt; n</div>
<ol>
<li class="level11"><div class="li"> Let indexName be ToString(index).</div>
</li>
<li class="level11"><div class="li"> Let value be the result of calling the [[Get]] internal method of T with argument indexName.</div>
</li>
<li class="level11"><div class="li"> Call the [[DefineOwnProperty]] internal method of A with arguments indexName, the Property Descriptor { [[Value]]: value, [[Writable]]: true, [[Enumerable]]: true, [[Configurable]]: true}, and false.</div>
</li>
<li class="level11"><div class="li"> Set index to index + 1.</div>
</li>
</ol>
</li>
<li class="level9"><div class="li"> Perform E = A</div>
</li>
</ol>
</li>
</ol>
</li>
<li class="level5"><div class="li"> Else if L is an <em>LValue</em> N then</div>
<ol>
<li class="level7"><div class="li"> Perform N = T[I]</div>
</li>
</ol>
</li>
<li class="level5"><div class="li"> Else L is a <em>Pattern</em> P&rsquo;</div>
<ol>
<li class="level7"><div class="li"> Destructure P&rsquo; and T[I] according to this algorithm (from step 2)</div>
</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
<li class="level1"><div class="li"> If P is an object pattern then</div>
<ol>
<li class="level3"><div class="li"> Taking each field F with name Q at the top level of P in order</div>
<ol>
<li class="level5"><div class="li"> If there is no &ldquo;:&rdquo; or right-hand side in F</div>
<ol>
<li class="level7"><div class="li"> Perform Q = T.Q</div>
</li>
</ol>
</li>
<li class="level5"><div class="li"> If the right-hand-side of F is an <em>LValue</em> N</div>
<ol>
<li class="level7"><div class="li"> Perform N = T.Q</div>
</li>
</ol>
</li>
<li class="level5"><div class="li"> Else the right-hand-side of F is a <em>Pattern</em> P&rsquo;</div>
<ol>
<li class="level7"><div class="li"> Destructure P&rsquo; and T.Q according to this algorithm (from step 2)</div>
</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
<li class="level1"><div class="li"> Return T</div>
</li>
</ol>

<p>
 As can be seen, destructuring assignment is simple syntactic sugar.
</p>

<p>
<em>Note</em>: In contrast with normal assignment expressions, the locations updated by destructuring assignment are not computed before the value that is to be stored. Destructuring assignment is simple syntactic sugar for a common compute-and-destructure pattern, and true to this pattern it computes the value prior to computing the locations. Apart from <code>with</code> and embedding-specific deep scope chains, there is no difference between prebinding lvalues vs. post-binding them.
</p>

</div>

<a name="variable_definitions"></a><h3>Variable Definitions</h3>
<div class="level3">

<p>
 The meaning of <em>DefiningKeyword</em> P <code>=</code> E where the <em>DefiningKeyword</em> can be <code>var</code>, <code>let</code>, or <code>const</code> and all <em>LValue</em>s in the <em>Pattern</em> P are simple identifiers i1, i2, ..., is <em>DefiningKeyword</em> i1, i2, ... <code>;</code> P <code>=</code> E.
</p>

</div>

<a name="for_loops"></a><h3>For Loops</h3>
<div class="level3">

</div>

<a name="catch_heads"></a><h3>Catch Heads</h3>
<div class="level3">

</div>

<a name="function_parameters"></a><h3>Function Parameters</h3>
<div class="level3">

</div>

<a name="setter_parameter"></a><h3>Setter Parameter</h3>
<div class="level3">

</div>

<a name="examples"></a><h2>Examples</h2>
<div class="level2">

<p>
 Swap:
</p>
<pre class="code">
[a, b] = [b, a]
</pre>

<p>
Multiple-value returns:
</p>
<pre class="code javascript"><span class="kw2">function</span> f<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="kw1">return</span> <span class="br0">&#91;</span><span class="nu0">1</span>, <span class="nu0">2</span><span class="br0">&#93;</span> <span class="br0">&#125;</span>
<span class="kw2">var</span> a, b;
<span class="br0">&#91;</span>a, b<span class="br0">&#93;</span> = f<span class="br0">&#40;</span><span class="br0">&#41;</span>;</pre>
<p>
Multiple-value returns, some values are not interesting:
</p>
<pre class="code javascript"><span class="kw2">function</span> f<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="kw1">return</span> <span class="br0">&#91;</span><span class="nu0">1</span>, <span class="nu0">2</span>, <span class="nu0">3</span><span class="br0">&#93;</span> <span class="br0">&#125;</span>
<span class="kw2">var</span> <span class="br0">&#91;</span>a, , b<span class="br0">&#93;</span> = f<span class="br0">&#40;</span><span class="br0">&#41;</span>;</pre>
<p>
Going deeper into the array:
</p>
<pre class="code javascript"><span class="br0">&#91;</span>a,,<span class="br0">&#91;</span>b,,<span class="br0">&#91;</span>c<span class="br0">&#93;</span><span class="br0">&#93;</span><span class="br0">&#93;</span> = f<span class="br0">&#40;</span><span class="br0">&#41;</span>;</pre>
<p>
Object destructuring:
</p>
<pre class="code javascript"><span class="kw2">var</span> <span class="br0">&#123;</span> op: a, lhs: b, rhs: c <span class="br0">&#125;</span> = getASTNode<span class="br0">&#40;</span><span class="br0">&#41;</span></pre>
<p>
Digging deeper into an object:
</p>
<pre class="code javascript"><span class="kw2">var</span> <span class="br0">&#123;</span> op: a, lhs: <span class="br0">&#123;</span> op: b <span class="br0">&#125;</span>, rhs: c <span class="br0">&#125;</span> = getASTNode<span class="br0">&#40;</span><span class="br0">&#41;</span></pre>
<p>
Looping across an object:
</p>
<pre class="code javascript"><span class="kw1">for</span> <span class="br0">&#40;</span> let <span class="br0">&#91;</span><span class="kw3">name</span>, value<span class="br0">&#93;</span> <span class="kw1">in</span> obj <span class="br0">&#41;</span>
    <span class="kw3">print</span><span class="br0">&#40;</span><span class="st0">"Name: "</span> + <span class="kw3">name</span> + <span class="st0">", Value: "</span> + value<span class="br0">&#41;</span>;</pre>
<p>
Looping across values in an object:
</p>
<pre class="code javascript"><span class="kw1">for</span> each <span class="br0">&#40;</span> let <span class="br0">&#123;</span> <span class="kw3">name</span>: n, family: <span class="br0">&#123;</span> father: f <span class="br0">&#125;</span> <span class="br0">&#125;</span> <span class="kw1">in</span> obj <span class="br0">&#41;</span>
    <span class="kw3">print</span><span class="br0">&#40;</span><span class="st0">"Name: "</span> + n + <span class="st0">", Father: "</span> + f<span class="br0">&#41;</span>;</pre>
<p>
Summing the salary fields of all records whose record key begins with <code>N</code>:
</p>
<pre class="code javascript"><span class="kw1">for</span> <span class="br0">&#40;</span> let <span class="br0">&#91;</span><span class="br0">&#91;</span>k<span class="br0">&#93;</span>, <span class="br0">&#123;</span> <span class="st0">"salary"</span>: s <span class="br0">&#125;</span><span class="br0">&#93;</span> <span class="kw1">in</span> database <span class="br0">&#41;</span>
    <span class="kw1">if</span> <span class="br0">&#40;</span>k == <span class="st0">"N"</span><span class="br0">&#41;</span>
        sum += s;</pre>
<p>
   Function that destructures its first argument and accepts some optional object arguments:
</p>
<pre class="code javascript"><span class="kw2">function</span> f<span class="br0">&#40;</span> <span class="br0">&#123;</span> <span class="st0">"name"</span>: n <span class="br0">&#125;</span>, ...<span class="br0">&#91;</span> a, b, c <span class="br0">&#93;</span> <span class="br0">&#41;</span>
<span class="br0">&#123;</span>
<span class="br0">&#125;</span></pre>
<p>
 &mdash; <em><a href="mailto:%26%23x62%3B%26%23x72%3B%26%23x65%3B%26%23x6e%3B%26%23x64%3B%26%23x61%3B%26%23x6e%3B%26%23x40%3B%26%23x6d%3B%26%23x6f%3B%26%23x7a%3B%26%23x69%3B%26%23x6c%3B%26%23x6c%3B%26%23x61%3B%26%23x2e%3B%26%23x6f%3B%26%23x72%3B%26%23x67%3B" class="mail" title="&#x62;&#x72;&#x65;&#x6e;&#x64;&#x61;&#x6e;&#x40;&#x6d;&#x6f;&#x7a;&#x69;&#x6c;&#x6c;&#x61;&#x2e;&#x6f;&#x72;&#x67;">Brendan Eich</a> 2009/05/06 01:41</em>  &mdash; <em><a href="mailto:%26%23x6c%3B%26%23x74%3B%26%23x68%3B%26%23x40%3B%26%23x61%3B%26%23x63%3B%26%23x6d%3B%26%23x2e%3B%26%23x6f%3B%26%23x72%3B%26%23x67%3B" class="mail" title="&#x6c;&#x74;&#x68;&#x40;&#x61;&#x63;&#x6d;&#x2e;&#x6f;&#x72;&#x67;">Lars T Hansen</a> 2007/01/16 07:47</em>
</p>

</div>

<a name="issues"></a><h2>Issues</h2>
<div class="level2">

<p>
 It would be nice if we could get destructuring to work with rest arguments/spread operator.
</p>
<pre class="code javascript"><span class="br0">&#91;</span>x, ...<span class="me1">xs</span><span class="br0">&#93;</span> = someList</pre>
<p>
 &mdash; <em><a href="mailto:%26%23x61%3B%26%23x72%3B%26%23x76%3B%26%23x40%3B%26%23x67%3B%26%23x6f%3B%26%23x6f%3B%26%23x67%3B%26%23x6c%3B%26%23x65%3B%26%23x2e%3B%26%23x63%3B%26%23x6f%3B%26%23x6d%3B" class="mail" title="&#x61;&#x72;&#x76;&#x40;&#x67;&#x6f;&#x6f;&#x67;&#x6c;&#x65;&#x2e;&#x63;&#x6f;&#x6d;">Erik Arvidsson</a> 2009/07/30 18:48</em>
</p>

<p>
Erik: good idea, I will write it up in the <a href="doku.php%3Fid=harmony:rest_parameters.html" class="wikilink1" title="harmony:rest_parameters" onclick="return svchk()" onkeypress="return svchk()">rest parameters</a> proposal.
</p>

<p>
The idea of <code>{x: a, y: b, ...: c}</code> &ndash; <a href="http://successor-ml.org/index.php?title=Functional_record_extension_and_row_capture" class="urlextern" target="_blank" title="http://successor-ml.org/index.php?title=Functional_record_extension_and_row_capture" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">record extension and row capture</a> &ndash; for structuring and destructuring comes to mind, but ES objects are a different animal compared to ML records. For example, which properties of <code>c</code> are copied into the object being initialized by <code>{x: a, y: b, ...: c}</code>? enumerable? own? etc.
</p>

<p>
 &mdash; <em><a href="mailto:%26%23x62%3B%26%23x72%3B%26%23x65%3B%26%23x6e%3B%26%23x64%3B%26%23x61%3B%26%23x6e%3B%26%23x40%3B%26%23x6d%3B%26%23x6f%3B%26%23x7a%3B%26%23x69%3B%26%23x6c%3B%26%23x6c%3B%26%23x61%3B%26%23x2e%3B%26%23x6f%3B%26%23x72%3B%26%23x67%3B" class="mail" title="&#x62;&#x72;&#x65;&#x6e;&#x64;&#x61;&#x6e;&#x40;&#x6d;&#x6f;&#x7a;&#x69;&#x6c;&#x6c;&#x61;&#x2e;&#x6f;&#x72;&#x67;">Brendan Eich</a> 2009/07/30 22:25</em>
</p>

<p>
The shorthand <code>{x, y}</code> for <code>{x: x, y: y}</code> allowed on the left-hand side of assignment should be allowed on the right too, markm suggests.
</p>

<p>
 &mdash; <em><a href="mailto:%26%23x62%3B%26%23x72%3B%26%23x65%3B%26%23x6e%3B%26%23x64%3B%26%23x61%3B%26%23x6e%3B%26%23x40%3B%26%23x6d%3B%26%23x6f%3B%26%23x7a%3B%26%23x69%3B%26%23x6c%3B%26%23x6c%3B%26%23x61%3B%26%23x2e%3B%26%23x6f%3B%26%23x72%3B%26%23x67%3B" class="mail" title="&#x62;&#x72;&#x65;&#x6e;&#x64;&#x61;&#x6e;&#x40;&#x6d;&#x6f;&#x7a;&#x69;&#x6c;&#x6c;&#x61;&#x2e;&#x6f;&#x72;&#x67;">Brendan Eich</a> 2009/07/30 22:10</em>
</p>

<p>
Allowing <code>{x, y}</code> in an object literal expression seems like a great idea. It seems useful since it makes patterns <em>reversible</em> and it also makes common programming patterns shorter:
</p>
<pre class="code javascript"><span class="kw2">var</span> obj = <span class="br0">&#40;</span><span class="kw2">function</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
  <span class="kw2">function</span> foo<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>...<span class="br0">&#125;</span>
  ...
  <span class="kw1">return</span> <span class="br0">&#123;</span>foo<span class="br0">&#125;</span>;
<span class="br0">&#125;</span><span class="br0">&#41;</span><span class="br0">&#40;</span><span class="br0">&#41;</span>;</pre>
<p>
 &mdash; <em><a href="mailto:%26%23x61%3B%26%23x72%3B%26%23x76%3B%26%23x40%3B%26%23x67%3B%26%23x6f%3B%26%23x6f%3B%26%23x67%3B%26%23x6c%3B%26%23x65%3B%26%23x2e%3B%26%23x63%3B%26%23x6f%3B%26%23x6d%3B" class="mail" title="&#x61;&#x72;&#x76;&#x40;&#x67;&#x6f;&#x6f;&#x67;&#x6c;&#x65;&#x2e;&#x63;&#x6f;&#x6d;">Erik Arvidsson</a> 2010/04/08 03:08</em>
</p>

<p>
Agreed &ndash; see <a href="doku.php%3Fid=strawman:object_initialiser_shorthand.html" class="wikilink1" title="strawman:object_initialiser_shorthand" onclick="return svchk()" onkeypress="return svchk()">object initialiser shorthand</a>.
</p>

<p>
 &mdash; <em><a href="mailto:%26%23x62%3B%26%23x72%3B%26%23x65%3B%26%23x6e%3B%26%23x64%3B%26%23x61%3B%26%23x6e%3B%26%23x40%3B%26%23x6d%3B%26%23x6f%3B%26%23x7a%3B%26%23x69%3B%26%23x6c%3B%26%23x6c%3B%26%23x61%3B%26%23x2e%3B%26%23x6f%3B%26%23x72%3B%26%23x67%3B" class="mail" title="&#x62;&#x72;&#x65;&#x6e;&#x64;&#x61;&#x6e;&#x40;&#x6d;&#x6f;&#x7a;&#x69;&#x6c;&#x6c;&#x61;&#x2e;&#x6f;&#x72;&#x67;">Brendan Eich</a> 2010/05/26 21:57</em>
</p>

<p>
A non matching rest pattern is bound to an empty <code>Array</code>. This follows from symmetry with rest params.
</p>
<pre class="code javascript"><span class="br0">&#91;</span>x, ...<span class="me1">xs</span><span class="br0">&#93;</span> = <span class="br0">&#91;</span><span class="nu0">0</span>, <span class="nu0">1</span><span class="br0">&#93;</span>; <span class="co1">// x = 0, xs = [1]</span>
<span class="br0">&#91;</span>y, ...<span class="me1">ys</span> = <span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span>; <span class="co1">// y = 0, ys = []</span>
<span class="br0">&#91;</span>z, ...<span class="me1">zs</span><span class="br0">&#93;</span> = <span class="br0">&#91;</span><span class="br0">&#93;</span>; <span class="co1">// z = undefined, zs = []</span></pre>
<p>
And the rest param symmetry just for reference:
</p>
<pre class="code javascript"><span class="kw2">function</span> f<span class="br0">&#40;</span>x, ...<span class="me1">xs</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
  assertTrue<span class="br0">&#40;</span>Array.<span class="me1">isArray</span><span class="br0">&#40;</span>xs<span class="br0">&#41;</span><span class="br0">&#41;</span>;
<span class="br0">&#125;</span>
f<span class="br0">&#40;</span><span class="br0">&#41;</span>;</pre>
<p>
 &mdash; <em><a href="mailto:%26%23x61%3B%26%23x72%3B%26%23x76%3B%26%23x40%3B%26%23x67%3B%26%23x6f%3B%26%23x6f%3B%26%23x67%3B%26%23x6c%3B%26%23x65%3B%26%23x2e%3B%26%23x63%3B%26%23x6f%3B%26%23x6d%3B" class="mail" title="&#x61;&#x72;&#x76;&#x40;&#x67;&#x6f;&#x6f;&#x67;&#x6c;&#x65;&#x2e;&#x63;&#x6f;&#x6d;">Erik Arvidsson</a> 2010/11/05 22:26</em> 
</p>

</div>

<!-- cachefile /usr/local/www/es-lang.org/wiki/data/cache/b/bdbd5723cd7f041843901bcae4d6035d.xhtml used -->
    <!-- wikipage stop -->
  </div>

  <div class="clearer">&nbsp;</div>

  
  <div class="stylefoot">

    <div class="meta">
      <div class="user">
              </div>
      <div class="doc">
        harmony/destructuring.txt &middot; Last modified: 2013/07/12 00:00 by rwaldron      </div>
    </div>

   
    <div class="bar" id="bar_bottom">
      <div class="bar-left" id="bar_bottomleft">
        <form class="button" method="post" action="index.html" onsubmit="return svchk()"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="" /><input type="hidden" name="id" value="harmony:destructuring" /><input type="submit" value="Show pagesource" class="button" title="ALT+V" accesskey="v" /></form>        <form class="button" method="get" action="index.html" onsubmit="return svchk()"><input type="hidden" name="do" value="revisions" /><input type="hidden" name="id" value="harmony:destructuring" /><input type="submit" value="Old revisions" class="button" title="ALT+O" accesskey="o" /></form>      </div>
      <div class="bar-right" id="bar_bottomright">
                        <form class="button" method="get" action="index.html" onsubmit="return svchk()"><input type="hidden" name="do" value="login" /><input type="hidden" name="id" value="harmony:destructuring" /><input type="submit" value="Login" class="button" /></form>        <form class="button" method="get" action="index.html" onsubmit="return svchk()"><input type="hidden" name="do" value="index" /><input type="hidden" name="id" value="harmony:destructuring" /><input type="submit" value="Index" class="button" title="ALT+X" accesskey="x" /></form>        <a href="doku.php%3Fid=harmony:destructuring.html#top"><input type="button" class="button" value="Back to top" onclick="window.scrollTo(0, 0)" /></a>&nbsp;
      </div>
    </div>

  </div>

</div>

<div align="center" class="footerinc">
  <a target="_blank" href="feed.php" title="Recent changes RSS feed"><img src="lib/tpl/default/images/button-rss.png" width="80" height="15" alt="Recent changes RSS feed" border="0" /></a>

  <a target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/2.0/" rel="license" title="Creative Commons License"><img src="lib/tpl/default/images/button-cc.gif" width="80" height="15" alt="Creative Commons License" border="0" /></a>

  <a target="_blank" href="https://www.paypal.com/xclick/business=andi%40splitbrain.org&amp;item_name=DokuWiki+Donation&amp;no_shipping=1&amp;no_note=1&amp;tax=0&amp;currency_code=EUR&amp;lc=US" title="Donate"><img src="lib/tpl/default/images/button-donate.gif" alt="Donate" border="0" /></a>

  <a target="_blank" href="http://www.php.net" title="Powered by PHP"><img src="lib/tpl/default/images/button-php.gif" width="80" height="15" alt="Powered by PHP" border="0" /></a>

  <a target="_blank" href="http://validator.w3.org/check/referer" title="Valid XHTML 1.0"><img src="lib/tpl/default/images/button-xhtml.png" width="80" height="15" alt="Valid XHTML 1.0" border="0" /></a>

  <a target="_blank" href="http://jigsaw.w3.org/css-validator/check/referer" title="Valid CSS"><img src="lib/tpl/default/images/button-css.png" width="80" height="15" alt="Valid CSS" border="0" /></a>

  <a target="_blank" href="http://wiki.splitbrain.org/wiki:dokuwiki" title="Driven by DokuWiki"><img src="lib/tpl/default/images/button-dw.png" width="80" height="15" alt="Driven by DokuWiki" border="0" /></a>



<!--

<rdf:RDF xmlns="http://web.resource.org/cc/"
    xmlns:dc="http://purl.org/dc/elements/1.1/"
    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
<Work rdf:about="">
   <dc:type rdf:resource="http://purl.org/dc/dcmitype/Text" />
   <license rdf:resource="http://creativecommons.org/licenses/by-nc-sa/2.0/" />
</Work>

<License rdf:about="http://creativecommons.org/licenses/by-nc-sa/2.0/">
   <permits rdf:resource="http://web.resource.org/cc/Reproduction" />
   <permits rdf:resource="http://web.resource.org/cc/Distribution" />
   <requires rdf:resource="http://web.resource.org/cc/Notice" />
   <requires rdf:resource="http://web.resource.org/cc/Attribution" />
   <prohibits rdf:resource="http://web.resource.org/cc/CommercialUse" />
   <permits rdf:resource="http://web.resource.org/cc/DerivativeWorks" />
   <requires rdf:resource="http://web.resource.org/cc/ShareAlike" />
</License>

</rdf:RDF>

-->
</div>

<img src="lib/exe/indexer.php%3Fid=harmony%253Adestructuring&amp;1454275456" width="1" height="1" alt=""  /></body>
</html>
