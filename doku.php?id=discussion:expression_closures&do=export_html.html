<html>
<head>
  <meta name="generator" content="DokuWiki Release 2005-09-22e" />
  <link rel="start" href="index.html" />
  <link rel="contents" href="doku.php%3Fid=discussion:expression_closures&amp;do=index.html" title="" />
  <link rel="alternate" type="application/rss+xml" title="Recent Changes" href="feed.php" />
  <link rel="alternate" type="application/rss+xml" title="Current Namespace" href="feed.php%3Fmode=list&amp;ns=discussion" />
  <link rel="alternate" type="text/html" title="Plain HTML" href="doku.php%3Fid=discussion:expression_closures&amp;do=export_html.html" />
  <link rel="alternate" type="text/plain" title="Wiki Markup" href="doku.php%3Fid=discussion:expression_closures&amp;do=export_raw" />
  <link rel="stylesheet" media="screen" type="text/css" href="lib/styles/style.css" />
  <meta name="robots" content="noindex,nofollow" />
  <script language="javascript" type="text/javascript" charset="utf-8">
    var alertText   = 'Please enter the text you want to format.\nIt will be appended to the end of the document.'
    var notSavedYet = 'Unsaved changes will be lost.\nReally continue?'
    var DOKU_BASE   = '/'
  </script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/script.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/tw-sack.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/ajax.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/domLib.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/domTT.js"></script>
  <link rel="stylesheet" type="text/css" href="lib/plugins/plugin/style.css" />
</head>
<body>
<div class="toc">
<div class="tocheader"> <script type="text/javascript">showTocToggle("+","-")</script>Table of Contents</div>
<div id="tocinside">
<ul class="toc">
<li class="level1"><span class="li"><a href="doku.php%3Fid=discussion:expression_closures&amp;do=export_html.html#alternatives" class="toc">Alternatives</a></span><ul class="toc">
<li class="level2"><span class="li"><a href="doku.php%3Fid=discussion:expression_closures&amp;do=export_html.html#shorter_spelling" class="toc">Shorter spelling</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=discussion:expression_closures&amp;do=export_html.html#use_the_let_syntax" class="toc">Use the let syntax</a></span><ul class="toc">
<li class="level3"><span class="li"><a href="doku.php%3Fid=discussion:expression_closures&amp;do=export_html.html#reactions" class="toc">Reactions</a></span></li>
</ul>
</li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=discussion:expression_closures&amp;do=export_html.html#shorten_the_name" class="toc">Shorten the name</a></span><ul class="toc">
<li class="level3"><span class="li"><a href="doku.php%3Fid=discussion:expression_closures&amp;do=export_html.html#reactions" class="toc">Reactions</a></span></li>
</ul>
</li>
</ul>
</li>
<li class="level1"><span class="li"><a href="doku.php%3Fid=discussion:expression_closures&amp;do=export_html.html#note" class="toc">Note</a></span></li>
<li class="level1"><span class="li"><a href="doku.php%3Fid=discussion:expression_closures&amp;do=export_html.html#discussion" class="toc">Discussion</a></span></li>
</ul>
</div>
</div>

<p>
This is the discussion page for <a href="doku.php%3Fid=proposals:expression_closures.html" class="wikilink1" title="proposals:expression_closures" onclick="return svchk()" onkeypress="return svchk()">expression closures</a>.
</p>

<a name="alternatives"></a><h1>Alternatives</h1>
<div class="level1">

</div>
<!-- SECTION [69-96] -->
<a name="shorter_spelling"></a><h2>Shorter spelling</h2>
<div class="level2">

<p>
 We could use a different spelling for the expression form of <code>function</code>, but then this feature wouldn&rsquo;t be &ldquo;free.&rdquo; Besides, everyone feels that isn&rsquo;t an important use case.
</p>

</div>
<!-- SECTION [97-302] -->
<a name="use_the_let_syntax"></a><h2>Use the let syntax</h2>
<div class="level2">

<p>
 Brendan proposed two new <code>let</code> forms for creating closures. The <strong>declaration</strong> form looks something like:
</p>
<pre class="code ebnf">&quot;let&quot; Identifier Arguments Block
</pre>
<p>
The declaration form binds its function name in the nearest enclosing block, as with other <code>let</code> declarations.
</p>

<p>
And the <strong>expression</strong> form looks something like:
</p>
<pre class="code ebnf">&quot;let&quot; Identifier Arguments Expression
</pre>
<p>
The expression form only binds its function name inside the function body.
</p>

</div>
<!-- SECTION [303-798] -->
<a name="reactions"></a><h3>Reactions</h3>
<div class="level3">

<p>
 <strong>Pro</strong> 
</p>
<ul>
<li class="level1"><div class="li"> Allows for binding the function name purely lexically rather than on the variable object</div>
</li>
</ul>

<p>
 <strong>Con</strong> 
</p>
<ul>
<li class="level1"><div class="li"> Even more <code>let</code> variants &rArr; complicated</div>
</li>
<li class="level1"><div class="li"> Unclear whether the <code>let</code> form is binding only internally or also in its context</div>
</li>
</ul>

</div>
<!-- SECTION [799-1065] -->
<a name="shorten_the_name"></a><h2>Shorten the name</h2>
<div class="level2">

<p>
 We could use a shorter name for <code>function</code> when the body is an expression, such as <code>fun</code> or <code>\</code>.
</p>

</div>
<!-- SECTION [1066-1199] -->
<a name="reactions"></a><h3>Reactions</h3>
<div class="level3">

<p>
 <strong>Con</strong> 
</p>
<ul>
<li class="level1"><div class="li"> not necessary, since this proposal fits in nicely with the existing <code>function</code> forms</div>
</li>
<li class="level1"><div class="li"> &ldquo;false economy&rdquo; &ndash; favor readability over writeability; the few characters&rsquo; difference is not such a big deal</div>
</li>
</ul>

</div>
<!-- SECTION [1200-1435] -->
<a name="note"></a><h1>Note</h1>
<div class="level1">

<p>
 The expression form still doesn&rsquo;t allow completely transparent refactoring from <code>e</code> to <code>(function()e)()</code>, despite solving the problem for <code>return</code>. This is because the closure has a different variable object, and for example the <code>arguments</code> object will be different. For example, <code>arguments[0]</code> is not the same as <code>(function()arguments[0])()</code> if it&rsquo;s called from another function that did receive arguments.
</p>

</div>
<!-- SECTION [1436-1876] -->
<a name="discussion"></a><h1>Discussion</h1>
<div class="level1">

<p>
 I am in favor of this addition, I just want to note that it &ldquo;solves&rdquo; the return-does-not-refactor problem by completely outlawing the use of <code>return</code>.  An alternative solution for refactoring, though not for the FP crowd, would be a labelled return statement (like we have labelled <code>break</code> and <code>continue</code>); I&rsquo;ve proposed this informally before but I seem to remember the reaction was bemusement rather than standing ovation, so I won&rsquo;t propose it again <img src="lib/images/smileys/icon_smile.gif" align="middle" alt=":-)" />
</p>

<p>
Refactoring also breaks in the presence of &ldquo;eval&rdquo;, <acronym title="By the way">BTW</acronym>, which can contain statement forms, introduce variables, etc.
</p>

<p>
 &mdash; <em><a href="mailto:%26%23x6c%3B%26%23x74%3B%26%23x68%3B%26%23x40%3B%26%23x6f%3B%26%23x70%3B%26%23x65%3B%26%23x72%3B%26%23x61%3B%26%23x2e%3B%26%23x63%3B%26%23x6f%3B%26%23x6d%3B" class="mail" title="&#x6c;&#x74;&#x68;&#x40;&#x6f;&#x70;&#x65;&#x72;&#x61;&#x2e;&#x63;&#x6f;&#x6d;">Lars T Hansen</a> 2006/09/22 04:28</em>
</p>

</div>
<!-- SECTION [1877-] -->
<!-- cachefile /usr/local/www/es-lang.org/wiki/data/cache/6/6e4fa66feeeec45bfbc243bf305fe894.xhtml used -->
</body>
</html>
