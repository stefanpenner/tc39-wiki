<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
 lang="en" dir="ltr">
<head>
  <title>harmony:object_literals [ES Wiki]</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <meta name="generator" content="DokuWiki Release 2005-09-22e" />
  <link rel="start" href="index.html" />
  <link rel="contents" href="doku.php%3Fid=harmony:object_literals&amp;do=index.html" title="" />
  <link rel="alternate" type="application/rss+xml" title="Recent Changes" href="feed.php" />
  <link rel="alternate" type="application/rss+xml" title="Current Namespace" href="http://wiki.ecmascript.org/feed.php?mode=list&amp;ns=harmony" />
  <link rel="alternate" type="text/html" title="Plain HTML" href="doku.php%3Fid=harmony:object_literals&amp;do=export_html.html" />
  <link rel="alternate" type="text/plain" title="Wiki Markup" href="doku.php%3Fid=harmony:object_literals&amp;do=export_raw" />
  <link rel="stylesheet" media="screen" type="text/css" href="lib/styles/style.css" />
  <meta name="date" content="2013-07-11T23:58:48+0000" />
  <meta name="robots" content="index,follow" />
  <script language="javascript" type="text/javascript" charset="utf-8">
    var alertText   = 'Please enter the text you want to format.\nIt will be appended to the end of the document.'
    var notSavedYet = 'Unsaved changes will be lost.\nReally continue?'
    var DOKU_BASE   = '/'
  </script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/script.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/tw-sack.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/ajax.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/domLib.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/domTT.js"></script>
  <link rel="stylesheet" type="text/css" href="lib/plugins/plugin/style.css" />

  <link rel="shortcut icon" href="lib/images/favicon.ico" />
  <link rel="stylesheet" media="screen" type="text/css" href="lib/tpl/default/layout.css" />
  <link rel="stylesheet" media="screen" type="text/css" href="lib/tpl/default/design.css" />

  
  <link rel="stylesheet" media="print" type="text/css" href="lib/tpl/default/print.css" />

  <!--[if gte IE 5]>
  <style type="text/css">
    /* that IE 5+ conditional comment makes this only visible in IE 5+ */
    /* IE bugfix for transparent PNGs */
    //DISABLED   img { behavior: url("/lib/scripts/pngbehavior.htc"); }
  </style>
  <![endif]-->

  </head>

<body>
<div class="dokuwiki">
  
  <div class="stylehead">

    <div class="header">
      <div class="pagename">
        [[<a href="doku.php%3Fid=harmony:object_literals&amp;do=backlink.html" onclick="return svchk()" onkeypress="return svchk()">harmony:object_literals</a>]]
      </div>
      <div class="logo">
        <a href="doku.php%3Fid=.html" onclick="return svchk()" onkeypress="return svchk()" name="top" accesskey="h" title="[ALT+H]">ES Wiki</a>      </div>
    </div>
  
    
    <div class="bar" id="bar_top">
      <div class="bar-left" id="bar_topleft">
        <form class="button" method="post" action="index.html" onsubmit="return svchk()"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="" /><input type="hidden" name="id" value="harmony:object_literals" /><input type="submit" value="Show pagesource" class="button" title="ALT+V" accesskey="v" /></form>        <form class="button" method="get" action="index.html" onsubmit="return svchk()"><input type="hidden" name="do" value="revisions" /><input type="hidden" name="id" value="harmony:object_literals" /><input type="submit" value="Old revisions" class="button" title="ALT+O" accesskey="o" /></form>      </div>
  
      <div class="bar-right" id="bar_topright">
        <form class="button" method="get" action="index.html" onsubmit="return svchk()"><input type="hidden" name="do" value="recent" /><input type="hidden" name="id" value="" /><input type="submit" value="Recent changes" class="button" title="ALT+R" accesskey="r" /></form>        <form action="doku.php%3Fid=.html" accept-charset="utf-8" class="search" name="search" onsubmit="return svchk()"><input type="hidden" name="do" value="search" /><input type="text" id="qsearch_in" accesskey="f" name="id" class="edit" onkeyup="ajax_qsearch.call('qsearch_in','qsearch_out')" /><input type="submit" value="Search" class="button" /><div id="qsearch_out" class="ajax_qsearch" onclick="this.style.display='none'"></div></form>&nbsp;
      </div>
    </div>

        <div class="breadcrumbs">
      Trace: <span class="bcsep">&raquo;</span> <a href="doku.php%3Fid=harmony:modules.html" onclick="return svchk()" onkeypress="return svchk()" class="breadcrumbs" title="harmony:modules">modules</a> <span class="bcsep">&raquo;</span> <a href="doku.php%3Fid=harmony:modules_examples.html" onclick="return svchk()" onkeypress="return svchk()" class="breadcrumbs" title="harmony:modules_examples">modules_examples</a> <span class="bcsep">&raquo;</span> <a href="doku.php%3Fid=harmony:module_loaders.html" onclick="return svchk()" onkeypress="return svchk()" class="breadcrumbs" title="harmony:module_loaders">module_loaders</a> <span class="bcsep">&raquo;</span> <a href="doku.php%3Fid=harmony:modules_standard.html" onclick="return svchk()" onkeypress="return svchk()" class="breadcrumbs" title="harmony:modules_standard">modules_standard</a> <span class="bcsep">&raquo;</span> <span class="curid"><a href="doku.php%3Fid=harmony:object_literals.html" onclick="return svchk()" onkeypress="return svchk()" class="breadcrumbs" title="harmony:object_literals">object_literals</a></span>          </div>
    
  </div>
  
  
  <div class="page">
    <!-- wikipage start -->
    <div class="toc">
<div class="tocheader"> <script type="text/javascript">showTocToggle("+","-")</script>Table of Contents</div>
<div id="tocinside">
<ul class="toc">
<li class="level1"><span class="li"><a href="doku.php%3Fid=harmony:object_literals.html#harmonyobject_literal_extensions" class="toc">Harmony: Object Literal Extensions</a></span><ul class="toc">
<li class="level2"><span class="li"><a href="doku.php%3Fid=harmony:object_literals.html#individual_extensions" class="toc">Individual Extensions</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=harmony:object_literals.html#summary_examples" class="toc">Summary Examples</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=harmony:object_literals.html#individual_extension_summary" class="toc">Individual Extension Summary</a></span><ul class="toc">
<li class="level3"><span class="li"><a href="doku.php%3Fid=harmony:object_literals.html#set_literal_prototype_operator" class="toc">Set Literal [[Prototype]] Operator</a></span></li>
<li class="level3"><span class="li"><a href="doku.php%3Fid=harmony:object_literals.html#object_literal_property_shorthands" class="toc">Object Literal Property Shorthands</a></span></li>
<li class="level3"><span class="li"><a href="doku.php%3Fid=harmony:object_literals.html#object_literal_property_value_shorthand" class="toc">Object Literal Property Value Shorthand</a></span></li>
<li class="level3"><span class="li"><a href="doku.php%3Fid=harmony:object_literals.html#object_literal_computed_property_keys" class="toc">Object Literal Computed Property Keys</a></span></li>
<li class="level3"><span class="li"><a href="doku.php%3Fid=harmony:object_literals.html#object_initialiser_super_references" class="toc">Object Initialiser super References</a></span></li>
<li class="level3"><span class="li"><a href="doku.php%3Fid=harmony:object_literals.html#object_extension_literal" class="toc">Object Extension Literal</a></span></li>
</ul>
</li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=harmony:object_literals.html#combined_syntax" class="toc">Combined Syntax</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=harmony:object_literals.html#code_sample" class="toc">Code Sample</a></span><ul class="toc">
<li class="level3"><span class="li"><a href="doku.php%3Fid=harmony:object_literals.html#original_code" class="toc">Original Code</a></span></li>
<li class="level3"><span class="li"><a href="doku.php%3Fid=harmony:object_literals.html#code_rewritten_using_extensions" class="toc">Code Rewritten using Extensions</a></span></li>
</ul>
</li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=harmony:object_literals.html#history" class="toc">History</a></span></li>
</ul>
</li>
</ul>
</div>
</div>

<p>
<strong>This proposal has progressed to the Draft ECMAScript 6 Specification, which is available for review here: <a href="doku.php%3Fid=harmony:specification_drafts.html" class="wikilink1" title="harmony:specification_drafts" onclick="return svchk()" onkeypress="return svchk()">specification_drafts</a>. Any new issues relating to them should be filed as bugs at <a href="http://bugs.ecmascript.org" class="urlextern" target="_blank" title="http://bugs.ecmascript.org" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">http://bugs.ecmascript.org</a>. The content on this page is for historic record only and may no longer reflect the current state of the feature described within.</strong>
</p>

<a name="harmonyobject_literal_extensions"></a><h1>Harmony: Object Literal Extensions</h1>
<div class="level1">

<p>
Allen Wirfs-Brock
</p>

<p>
<em>These proposals were promoted with the caveat that TC39 has yet to achieve consensus on the concrete syntax.  Whatever syntax is ultimately chosen, it needs to be consistent with the syntax chosen for the <a href="doku.php%3Fid=harmony:classes.html" class="wikilink1" title="harmony:classes" onclick="return svchk()" onkeypress="return svchk()"> classes</a> proposal.  </em>
</p>

<p>
Abstraction creation is a central theme of object-based programming and ECMAScript provides many mechanisms  that support patterns for creating object based abstractions.  However, most of these patterns are constructive in nature using procedural code to create the abstractions.  This approach is  powerful in that it allows a wide variety of different technical mechanism to be  used to construct various abstractions. It also allows for programmer defined abstractions with application specific construction semantics. However, this variety can also be problematic. It creates complexity for both readers and writers of ECMAScript program and making it difficult to ECMAScript implementations to recognize common abstraction patterns so they can be optimized.  Most other programming language solve these issues by providing a straightforward declarative mechanism for defining object abstractions based upon a standardize semantics.
</p>

<p>
ECMAScript does provided a basic declarative mechanism for defining object-based abstractions.  Object initialisers provide a declarative mechanism for defining objects that in most situations is more concise, readable, and maintainable  than programmatic object creation using constructor functions and dynamic property insertion. The declarative nature of object initialisers  also makes it easier for implementations to perform various object representation optimization. However, existing ECMAScript object initialisers do not provide declarative solutions for a number of abstraction capabilities that are common used with ECMAScript objects.
</p>

<p>
This strawman proposed ways in which ECMAScript object initialisers  can be extended to make them more useful for building complete object abstractions.  A number of individual extensions are identified. This page summarized the extensions and links to proposals for the specific extensions.
</p>

</div>

<a name="individual_extensions"></a><h2>Individual Extensions</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> <a href="doku.php%3Fid=harmony:proto_operator.html" class="wikilink1" title="harmony:proto_operator" onclick="return svchk()" onkeypress="return svchk()">Set Literal Prototype Operator</a></div>
</li>
<li class="level1"><div class="li"> <span class="curid"><a href="doku.php%3Fid=harmony:object_literals.html#object_literal_property_shorthands" class="wikilink1" title="harmony:object_literals" onclick="return svchk()" onkeypress="return svchk()">Object Literal Property Shorthands</a></span></div>
</li>
<li class="level1"><div class="li"> <a href="doku.php%3Fid=harmony:object_initialiser_shorthand.html" class="wikilink1" title="harmony:object_initialiser_shorthand" onclick="return svchk()" onkeypress="return svchk()">Implicit property initialization expressions</a></div>
</li>
<li class="level1"><div class="li"> <a href="doku.php%3Fid=harmony:object_initialiser_super.html" class="wikilink1" title="harmony:object_initialiser_super" onclick="return svchk()" onkeypress="return svchk()">Object Initialiser super</a></div>
</li>
<li class="level1"><div class="li"> <span class="curid"><a href="doku.php%3Fid=harmony:object_literals.html#object_literal_computed_property_keys" class="wikilink1" title="harmony:object_literals" onclick="return svchk()" onkeypress="return svchk()">Computed Property Keys</a></span></div>
</li>
<li class="level1"><div class="li"> <span class="curid"><a href="doku.php%3Fid=harmony:object_literals.html#object_extension_literal" class="wikilink1" title="harmony:object_literals" onclick="return svchk()" onkeypress="return svchk()">Object Extension Literals</a></span></div>
</li>
</ul>

</div>

<a name="summary_examples"></a><h2>Summary Examples</h2>
<div class="level2">

<p>
 Under ES5 creating a literal object with an explicitly specified prototype, a complex combination of property attributes and conventions, and integrity constraints might be code as: 
</p>
<pre class="code javascript"><span class="kw2">var</span> obj = Object.<span class="me1">create</span><span class="br0">&#40;</span>theProtoObj, <span class="br0">&#123;</span>
          konst: <span class="br0">&#123;</span>value: f<span class="br0">&#40;</span><span class="br0">&#41;</span>, enumerable: <span class="kw2">false</span>, writable: <span class="kw2">false</span><span class="br0">&#125;</span>,
          handler: <span class="br0">&#123;</span>value: defaultHandler, writable: <span class="kw2">true</span>, enumerable: <span class="kw2">true</span>, configurable: <span class="kw2">true</span><span class="br0">&#125;</span>,
          <span class="kw3">name</span>: <span class="br0">&#123;</span>get: <span class="kw2">function</span> <span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><span class="kw1">return</span> theProtoObj.<span class="kw3">name</span>.<span class="me1">call</span><span class="br0">&#40;</span><span class="kw1">this</span><span class="br0">&#41;</span><span class="br0">&#125;</span>,
                 set: <span class="kw2">function</span><span class="br0">&#40;</span>v<span class="br0">&#41;</span> <span class="br0">&#123;</span><span class="kw1">throw</span> Error<span class="br0">&#40;</span><span class="st0">"some message"</span><span class="br0">&#41;</span><span class="br0">&#125;</span>,
                   enumberable: <span class="kw2">false</span>, configurable: <span class="kw2">true</span><span class="br0">&#125;</span>,
         source: <span class="br0">&#123;</span>value: <span class="kw2">function</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><span class="kw1">throw</span> Error<span class="br0">&#40;</span><span class="st0">"another message"</span><span class="br0">&#41;</span><span class="br0">&#125;</span><span class="br0">&#125;</span>,
         toString: <span class="br0">&#123;</span>value: <span class="kw2">function</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><span class="kw1">return</span> <span class="st0">"d "</span>+theProtoObj.<span class="me1">toString</span>.<span class="me1">call</span><span class="br0">&#40;</span><span class="kw1">this</span><span class="br0">&#41;</span><span class="br0">&#125;</span><span class="br0">&#125;</span>
<span class="br0">&#125;</span><span class="br0">&#41;</span>;</pre>
<p>
can be more clearly and concisely expressed as: 
</p>
<pre class="code javascript"><span class="kw2">var</span> obj = theProtoObj &lt;| <span class="br0">&#123;</span>
          konst:= f<span class="br0">&#40;</span><span class="br0">&#41;</span>, 
          handler: defaultHandler, 
          get <span class="kw2">super</span> set <span class="kw3">name</span><span class="br0">&#40;</span>v<span class="br0">&#41;</span> <span class="br0">&#123;</span><span class="kw1">throw</span> Error<span class="br0">&#40;</span><span class="st0">"some message"</span><span class="br0">&#41;</span><span class="br0">&#125;</span>
          source<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><span class="kw1">throw</span> Error<span class="br0">&#40;</span><span class="st0">"another message"</span><span class="br0">&#41;</span><span class="br0">&#125;</span>
          toString<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><span class="kw1">return</span> <span class="st0">"d "</span>+<span class="kw2">super</span>.<span class="me1">toString</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#125;</span>
<span class="br0">&#93;</span>;</pre><hr noshade="noshade" size="1" />

<p>
 Also supported is explicitly setting the [[Prototype]] for array literals and other literal forms: 
</p>
<pre class="code javascript">  <span class="kw2">var</span> enhancedArrayProto = Array.<span class="me1">prototype</span> &lt;| <span class="br0">&#123;</span>
      <span class="kw1">do</span> <span class="br0">&#40;</span>func<span class="br0">&#41;</span> <span class="br0">&#123;</span><span class="kw1">return</span> <span class="kw1">this</span>.<span class="me1">foreach</span><span class="br0">&#40;</span>func<span class="br0">&#41;</span><span class="br0">&#125;</span>,
      search <span class="br0">&#40;</span>key <span class="br0">&#123;</span><span class="kw1">return</span> <span class="kw1">this</span>.<span class="me1">indexOf</span><span class="br0">&#40;</span>key<span class="br0">&#41;</span> &gt;= <span class="nu0">0</span><span class="br0">&#125;</span>
  <span class="br0">&#125;</span>;
  <span class="kw2">var</span> myArray = enhancedArrayProto &lt;| <span class="br0">&#91;</span><span class="nu0">0</span>,<span class="nu0">1</span>,<span class="nu0">2</span>,<span class="nu0">3</span>,<span class="nu0">4</span>,<span class="nu0">5</span><span class="br0">&#93;</span>;
&nbsp;
  setCallback<span class="br0">&#40;</span>callbackFuncExtras &lt;| <span class="kw2">function</span> <span class="br0">&#40;</span>...<span class="me1">arg</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><span class="coMULTI">/* handle call back */</span><span class="br0">&#125;</span><span class="br0">&#41;</span>;</pre>
<p>
 This kinds of &ldquo;subtyping&rdquo; of built-in object kinds is not supported by ES5 but has been frequently requested.  
</p>

</div>

<a name="individual_extension_summary"></a><h2>Individual Extension Summary</h2>
<div class="level2">

</div>

<a name="set_literal_prototype_operator"></a><h3>Set Literal [[Prototype]] Operator</h3>
<div class="level3">

<p>
 The <code>&lt;|</code> operator (pronounced &ldquo;prototype for&rdquo;) is used in conjunction with a literal to create a new object whose [[Prototype]] is set to an explicitly specified value.  It can be used to address several distinct use cases for which separate solutions have been proposed.  Use cases include:
</p>
<ul>
<li class="level1"><div class="li">  Specifying an explicit [[Prototype]] for object literals</div>
</li>
<li class="level1"><div class="li">  Specifying an explicit [[Prototype]] for array literals</div>
</li>
<li class="level1"><div class="li">  &ldquo;Subclassing&rdquo; arrays</div>
</li>
<li class="level1"><div class="li">  Setting the prototype of a function to something other than Function.prototype</div>
</li>
<li class="level1"><div class="li">  Creating a &ldquo;subclass&rdquo; of a constructor function</div>
</li>
<li class="level1"><div class="li">  Setting the prototype of RegExp and other built-in objects.</div>
</li>
<li class="level1"><div class="li">  Replace the most common uses of the mutable __proto__ extension</div>
</li>
</ul>

<p>
 Specifying an explicit [[Prototype]] for object literals 
</p>
<pre class="code javascript">  MyObject.<span class="me1">prototype</span> &lt;| <span class="br0">&#123;</span>a:<span class="nu0">1</span>,b:<span class="nu0">2</span><span class="br0">&#125;</span></pre>
<p>
 Specifying an explicit [[Prototype]] for array literals 
</p>
<pre class="code javascript">  appBehavior &lt;| <span class="br0">&#91;</span><span class="nu0">0</span>,<span class="nu0">1</span>,<span class="nu0">2</span>,<span class="nu0">3</span>,<span class="nu0">4</span>,<span class="nu0">5</span><span class="br0">&#93;</span></pre>
<p>
 Creating a subclass constructor 
</p>
<pre class="code javascript">  let ExtendedDate = Date &lt;| <span class="kw2">function</span> <span class="br0">&#40;</span>...<span class="me1">args</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><span class="kw2">super</span>.<span class="me1">constructor</span><span class="br0">&#40;</span>...<span class="me1">args</span><span class="br0">&#125;</span>;
     <span class="co1">//ExtendedDate inherits from Date</span>
     <span class="co1">//ExtendedDate.prototype inherits from Date.prototype</span></pre>
<p>
See <a href="doku.php%3Fid=harmony:proto_operator.html" class="wikilink1" title="harmony:proto_operator" onclick="return svchk()" onkeypress="return svchk()">Set Literal Prototype Operator</a> for full proposal.
</p>

</div>

<a name="object_literal_property_shorthands"></a><h3>Object Literal Property Shorthands</h3>
<div class="level3">

<p>
 This proposal extends object literals in these four ways:
</p>
<ol>
<li class="level1"><div class="li"> If a data property definition uses <strong><code>:=</code></strong> in place of <strong><code>:</code></strong> the property is non-writable, non-enumerable</div>
</li>
<li class="level1"><div class="li"> If a property definition has the form of a <em>FunctionDeclaration</em> without the keyword <code>function</code> it is a non-enumerable, non-writable, non-configurable data property definition whose name is the function name.  This is called a <em>method definition</em>.</div>
</li>
<li class="level1"><div class="li"> If a property definition is the above form of <em>FunctionDeclaration</em> or is a <em>get</em> or <em>set</em> property definition the comma that separates it from the following property definition may be omitted.</div>
</li>
<li class="level1"><div class="li"> Functions defined via method definitions do not have a [[Construct]] internal method.  This is similar to the built-in methods defined in Chapter 15 which also are not constructors.</div>
</li>
</ol>

<p>
 ES5 permits constructions of objects with arbitrary property attribute setting using the <code>Object.create</code> function. However, this form is verbose and its usage is complicated by the fact that the default attribute values are different than what is used for object literals. This can be see as follow starting with a standard ES5 object literal:
</p>
<pre class="code javascript"><span class="kw2">var</span> obj = <span class="br0">&#123;</span>
   a: x,
   m: <span class="kw2">function</span><span class="br0">&#40;</span>z<span class="br0">&#41;</span> <span class="br0">&#123;</span><span class="kw1">return</span> z+<span class="kw1">this</span>.<span class="me1">a</span>+<span class="kw1">this</span>.<span class="me1">k</span><span class="br0">&#125;</span>,
   k: <span class="nu0">0</span>.<span class="nu0">5</span>,
<span class="br0">&#125;</span>;</pre>
<p>
If the programmer desires for the property <code>k</code> to be non-writable  and non-enumerable and for the method property  <code>m</code>to be a non-enumerable method, non-writable, and non-configurable, they would express like this using <code>Object.create</code>:
</p>
<pre class="code javascript"><span class="kw2">var</span> obj = Object.<span class="me1">create</span><span class="br0">&#40;</span>Object.<span class="me1">prototype</span>,<span class="br0">&#123;</span>
   a: <span class="br0">&#123;</span>value: x, writable: <span class="kw2">true</span>, configurable: <span class="kw2">true</span>, enumerable: <span class="kw2">true</span><span class="br0">&#125;</span>,
   m: <span class="br0">&#123;</span>value: <span class="kw2">function</span><span class="br0">&#40;</span>z<span class="br0">&#41;</span> <span class="br0">&#123;</span><span class="kw1">return</span> z+<span class="kw1">this</span>.<span class="me1">a</span>+<span class="kw1">this</span>.<span class="me1">k</span><span class="br0">&#125;</span><span class="br0">&#125;</span>,
   k: <span class="br0">&#123;</span>value: <span class="nu0">0</span>.<span class="nu0">5</span><span class="br0">&#125;</span>  <span class="co1">//use default false values for all attributes</span>
<span class="br0">&#125;</span>;</pre>
<p>
Using the extensions in this proposal the above could be directly expressed using an object literal as: 
</p>
<pre class="code javascript"><span class="kw2">var</span> obj = <span class="br0">&#123;</span>
   a: x,
   m<span class="br0">&#40;</span>z<span class="br0">&#41;</span> <span class="br0">&#123;</span><span class="kw1">return</span> z+<span class="kw1">this</span>.<span class="me1">a</span>+<span class="kw1">this</span>.<span class="me1">k</span><span class="br0">&#125;</span>
   k:= <span class="nu0">0</span>.<span class="nu0">5</span>,
<span class="br0">&#125;</span>;</pre>
<p>
   See <a href="doku.php%3Fid=harmony:concise_object_literal_extensions.html" class="wikilink1" title="harmony:concise_object_literal_extensions" onclick="return svchk()" onkeypress="return svchk()">Concise Object Literal Extensions</a> for full proposal
</p>

</div>

<a name="object_literal_property_value_shorthand"></a><h3>Object Literal Property Value Shorthand</h3>
<div class="level3">

<p>
 This proposal provide a shorthand for object initialisers whose property keys are initialized by variables of the same name.
</p>

<p>
This extension provides Reversibility or symmetry with the <a href="doku.php%3Fid=harmony:destructuring.html" class="wikilink1" title="harmony:destructuring" onclick="return svchk()" onkeypress="return svchk()">destructuring</a> shorthand object patterns.
</p>

<p>
For example, instead of:
</p>
<pre class="code javascript"><span class="kw2">function</span> f<span class="br0">&#40;</span>x, y<span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="kw1">return</span> <span class="br0">&#123;</span>x: x, y: y<span class="br0">&#125;</span>; <span class="br0">&#125;</span></pre>
<p>
 you can say: 
</p>
<pre class="code javascript"><span class="kw2">function</span> f<span class="br0">&#40;</span>x, y<span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="kw1">return</span> <span class="br0">&#123;</span>x, y<span class="br0">&#125;</span>; <span class="br0">&#125;</span></pre>
<p>
See <a href="doku.php%3Fid=harmony:object_initialiser_shorthand.html" class="wikilink1" title="harmony:object_initialiser_shorthand" onclick="return svchk()" onkeypress="return svchk()">Implicit property initialization expressions</a> for full proposal
</p>

</div>

<a name="object_literal_computed_property_keys"></a><h3>Object Literal Computed Property Keys</h3>
<div class="level3">

<p>
 This proposal provide  for object initialisers with property key values that are determined by evaluating an expression. This is particular useful for defining properties whose property keys are private name objects.  A computed property key is specific by using a bracketed expression in a <em>PropertyName</em> position. If the value of the expression is a <a href="doku.php%3Fid=harmony:private_name_objects.html" class="wikilink1" title="harmony:private_name_objects" onclick="return svchk()" onkeypress="return svchk()">private name object</a>, that object is used as the property key.  Otherwise, ToString is applied to the expression value and that string is used as the property key. 
</p>

<p>
The following example defines an object with three properties.  One has a statically determined key, one has a dynamically computed numeric string key, one has a private name key.
</p>

<p>
For example, instead of:
</p>
<pre class="code javascript"><span class="kw2">const</span> secret = <span class="kw3">Name</span>.<span class="me1">create</span><span class="br0">&#40;</span><span class="br0">&#41;</span>;
let obj = <span class="br0">&#123;</span>
   x: <span class="nu0">0</span>,
   get <span class="br0">&#91;</span>Math.<span class="me1">random</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#93;</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><span class="kw1">return</span> <span class="kw1">this</span>.<span class="me1">x</span> + <span class="kw1">this</span><span class="br0">&#91;</span>secret<span class="br0">&#93;</span><span class="br0">&#125;</span>,
   <span class="br0">&#91;</span>secret<span class="br0">&#93;</span>: <span class="nu0">42</span>
<span class="br0">&#125;</span>;</pre>
</div>

<a name="object_initialiser_super_references"></a><h3>Object Initialiser super References</h3>
<div class="level3">

<p>
 <code>super</code> can be used within object literals to access prototype properties that are over-ridden by the object created by by object literal.  There are two ways that <code>super</code> can be used.
</p>
<ol>
<li class="level1"><div class="li"> When used within a <em>FunctionBody</em> contained within an object literal, <code>super</code> has the same value as <code>this</code> but causes a property lookup to start at the [[Prototype]] of the object defined by the literal.</div>
</li>
<li class="level1"><div class="li"> <code>super</code> can be used in the definition of an accessor property <strong>get</strong> or <strong>set</strong> function to indicate that the corresponding <strong>set</strong> or <strong>get</strong> function should not be reset to the default value and instead should be defined so as to invoke the corresponding <strong>set</strong> or <strong>get</strong> function that would be the result of a property lookup that started at the [[Prototype]] of the object defined by the literal </div>
</li>
</ol>

<p>
 Here is an example of the first use.  Instead of coding: 
</p>
<pre class="code javascript"><span class="kw2">var</span> sub = sup &lt;| <span class="br0">&#123;</span>
   validate<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
       sup.<span class="me1">validate</span>.<span class="me1">call</span><span class="br0">&#40;</span><span class="kw1">this</span><span class="br0">&#41;</span>; <span class="coMULTI">/* validate invariants imposed by prototype */</span>
       <span class="coMULTI">/* validate instance specific invariants */</span>
   <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre>
<p>
You can just code: 
</p>
<pre class="code javascript"><span class="kw2">var</span> sub = sup &lt;| <span class="br0">&#123;</span>
   validate<span class="br0">&#40;</span>...<span class="me1">args</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
       <span class="kw2">super</span>.<span class="me1">validate</span><span class="br0">&#40;</span><span class="br0">&#41;</span>; <span class="coMULTI">/* validate invariants imposed by prototype */</span>
       <span class="coMULTI">/* validate instance specific invariants */</span>
   <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre>
<p>
For the second use case, instead of coding:
</p>
<pre class="code javascript"><span class="kw2">var</span> sub = sup &lt;| <span class="br0">&#123;</span>
   set f<span class="br0">&#40;</span>v<span class="br0">&#41;</span> <span class="br0">&#123;</span>f=v<span class="br0">&#125;</span>,
   get f<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><span class="kw1">return</span> <span class="kw2">super</span>.<span class="me1">f</span><span class="br0">&#125;</span> <span class="co1">//explicitly delegate to prototype's getter because we don't want to over-ride it</span>
<span class="br0">&#125;</span>;</pre>
<p>
We can just code: 
</p>
<pre class="code javascript"><span class="kw2">var</span> sub = sup &lt;| <span class="br0">&#123;</span>
   get <span class="kw2">super</span> set f<span class="br0">&#40;</span>v<span class="br0">&#41;</span> <span class="br0">&#123;</span>f=v<span class="br0">&#125;</span>,
<span class="br0">&#125;</span>;</pre>
<p>
 See <a href="doku.php%3Fid=harmony:object_initialiser_super.html" class="wikilink1" title="harmony:object_initialiser_super" onclick="return svchk()" onkeypress="return svchk()">Object Initialiser super</a> for full proposal
</p>

</div>

<a name="object_extension_literal"></a><h3>Object Extension Literal</h3>
<div class="level3">

<p>
 An Object Extension Literal uses Object Literal syntax to specify a set of properties to be added to an already existing object.  An <em>ObjectLiteral</em> is treated as an Object Extension Literal when it appears immediately to the right of the <strong><code>.</code></strong> in a <em>MemberExpression</em> or a <em>CallExpression</em>.  For example:
</p>
<pre class="code javascript">obj.<span class="br0">&#123;</span>a:<span class="nu0">1</span>,b:<span class="nu0">2</span>,c:<span class="nu0">3</span><span class="br0">&#125;</span>;</pre>
<p>
This is, for the most part, semantically equivalent to: 
</p>
<pre class="code javascript">Object.<span class="me1">defineProperties</span><span class="br0">&#40;</span>obj, <span class="br0">&#123;</span>
   a: <span class="br0">&#123;</span>value: <span class="nu0">1</span>, enumerable: <span class="kw2">true</span>, writable: <span class="kw2">true</span>, configurable: <span class="kw2">true</span><span class="br0">&#125;</span>,
   b: <span class="br0">&#123;</span>value: <span class="nu0">2</span>, enumerable: <span class="kw2">true</span>, writable: <span class="kw2">true</span>, configurable: <span class="kw2">true</span><span class="br0">&#125;</span>,
   c: <span class="br0">&#123;</span>value: <span class="nu0">3</span>, enumerable: <span class="kw2">true</span>, writable: <span class="kw2">true</span>, configurable: <span class="kw2">true</span><span class="br0">&#125;</span>
<span class="br0">&#125;</span>;</pre>
<p>
The value of an Object Extension Literal expression is the LHS object. All object literal property forms are valid in an Object Extension Literal including concise methods. If the LHS object already has an property with the same name as a property defined in the Object extension literal, the existing property is replaced or modified according to the rules of [[DefineOwnProperty]].
</p>

<p>
Note that the object literal on the right of the <strong><code>.</code></strong> is not actually instantiated as a distinct object.  Instead each property in the object literal is directly created on the LHS object.  This is important if the property  is a method or accessor function containing <strong><code>super</code></strong> references because it means that the <strong><code>super</code></strong> binding is made to the [[Prototype]] of the LHS object rather than to <code>Object.prototype</code> which is the [[Prototype]] of normally instantiated object literals.  It also means that any private named properties can be directly created on the LHS object without without requiring private named properties to be exposed to reflection operations that would otherwise be need to copy them from the extension object to the existing object.
</p>

<p>
Object Literal Extensions and the Set Literal Prototype Operator can be used in a pattern for defining class-like definitions. See <a href="doku.php%3Fid=harmony:object_extension_literal_class_pattern.html" class="wikilink1" title="harmony:object_extension_literal_class_pattern" onclick="return svchk()" onkeypress="return svchk()">Object Extension Literal Class Pattern</a>.
</p>

</div>

<a name="combined_syntax"></a><h2>Combined Syntax</h2>
<div class="level2">

<p>
The following provides an integrated syntax definition for all of the individual extensions combined with the ES5 Object initialiser syntax:
</p>

<p>
<strong><em>MemberExpression</em> : ...</strong><br/>
  <em>MemberExpression</em> <strong>&lt;|</strong> <em>ProtoLiteral</em> <br/>
  <em>MemberExpression</em> <strong>.</strong> <em>LiteralObject</em><br/>
 <br/>
 <strong><em>ProtoLiteral</em> : </strong><br/>
 <em>LiteralObject</em>  <br/>
 <em>LiteralValue</em> <br/>
 <br/>
 <strong><em>LiteralObject</em> : </strong><br/>
 <em>RegularExpressionLiteral</em> <br/>
 <em>ArrayLiteral</em> <br/>
 <em>ObjectLiteral</em> <br/>
 <em>FunctionExpression</em> <br/>
 <br/>
 <strong><em>LiteralValue</em> : </strong><br/>
 <em>NumberLiteral</em> <br/>
 <em>StringLiteral</em> <br/>
 <em>BooleanLiteral</em> <br/>
 <br/>
 <strong><em>ObjectLiteral</em></strong> <strong>:</strong><br/>
 <strong>{</strong> <strong>}</strong> <br/>
 <strong>{</strong> <em>PropertyNameAndValueList</em> <strong>}</strong><br/>
 <strong>{</strong> <em>PropertyNameAndValueList</em> <strong>, }</strong><br/>
 <br/>
 <strong><em>PropertyNameAndValueList</em> :</strong><br/>
 <em>PropertyAssignmentList</em> <br/>
 <em>PropertyFunctionList</em> <br/>
 <br/>
 <strong><em>PropertyAssignmentList</em> :</strong><br/>
 <em>PropertyAssignment</em> <br/>
 <em>PropertyAssignmentList</em> <strong>,</strong> <em>PropertyAssignment</em> <br/>
 <em>PropertyFunctionList</em> <em>PropertyAssignment</em> <br/>
 <em>PropertyFunctionList</em> <strong>,</strong> <em>PropertyAssignment</em> <br/>
 <br/>
 <strong><em>PropertyFunctionList</em> :</strong><br/>
 <em>PropertyFunction</em> <br/>
 <em>PropertyAssignmentList</em> <strong>,</strong> <em>PropertyFunction</em> <br/>
 <em>PropertyFunctionList</em> <em>PropertyFunction</em> <br/>
 <em>PropertyFunctionList</em> <strong>,</strong> <em>PropertyFunction</em> <br/>
 <br/>
 <strong><em>PropertyAssignment</em> :</strong><br/>
 <em>Identifier</em><br/>
 <em>PropertyName</em> <strong>:</strong> <em>AssignmentStatement</em>  <br/>
 <em>PropertyName</em> <strong>:=</strong> <em>AssignmentStatement</em>  <br/>
 <br/>
 <strong><em>ProperyFunction</em> :</strong><br/>
 <strong>get</strong>  <em>PropertyName</em> <strong>(</strong> <strong>)</strong> <strong>{</strong> <em>FunctionBody</em>  <strong>}</strong>  <br/>
 <strong>set</strong>  <em>PropertyName</em> <strong>(</strong> <em>PropertySetParameterList</em> <strong>)</strong> <strong>{</strong> <em>FunctionBody</em>  <strong>}</strong>  <br/>
 <strong>set super get</strong> <em>PropertyName</em> <strong>(</strong> <strong>)</strong> <strong>{</strong> <em>FunctionBody</em>  <strong>}</strong>  <br/>
 <strong>get super set</strong>  <em>PropertyName</em> <strong>(</strong> <em>PropertySetParameterList</em> <strong>)</strong> <strong>{</strong> <em>FunctionBody</em>  <strong>}</strong>  <br/>
 <em>PropertyName</em> <strong>(</strong> <em>FormalParameterList</em><sub>opt</sub> <strong>)</strong> <strong>{</strong> <em>FunctionBody</em>  <strong>}</strong>  <br/>

</p>

<p>
<br/>
 <strong><em>PropertyName</em> :</strong><br/>
 <strong>[</strong> <em>Expression</em> <strong>]</strong><br/>
 <em>LiteralPropertyName</em><br/>
 <br/>
 <strong><em>LiteralPropertyName</em></strong> <strong>:</strong><br/>
 <em>IdentifierName</em><br/>
 <em>StringLiteral</em><br/>
 <em>NumericLiteral</em><br/>
 <br/>
 <strong><em>PropertySetParameterList</em> :</strong><br/>
 <em>Identifier</em>
</p>

<p>
<strong><em>PrimaryExpression</em> :</strong> ...<br/>
 <strong><code>super</code></strong> <br/>

</p>

</div>

<a name="code_sample"></a><h2>Code Sample</h2>
<div class="level2">

<p>
The followings shows an example of some actual ES5 code and how the same code can be express used some of these extensions:
</p>

</div>

<a name="original_code"></a><h3>Original Code</h3>
<div class="level3">
<pre class="code javascript"> <span class="kw2">var</span> objMirrorProto = Object.<span class="me1">create</span><span class="br0">&#40;</span>objBasicMirrorProto, <span class="br0">&#123;</span>
      <span class="co1">//Implements objectMirrorInterface</span>
      prototype: <span class="br0">&#123;</span>get: <span class="kw2">function</span>  <span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><span class="kw1">return</span> <span class="kw1">this</span>.__createObjMirrorOn<span class="br0">&#40;</span>Object.<span class="me1">getPrototypeOf</span><span class="br0">&#40;</span><span class="kw1">this</span><span class="br0">&#91;</span>.__obj<span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#125;</span>, enumerable: <span class="kw2">true</span>, configurable: <span class="kw2">true</span><span class="br0">&#125;</span>,
      extensible: <span class="br0">&#123;</span>get: <span class="kw2">function</span> <span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><span class="kw1">return</span> Object.<span class="me1">isExtensible</span><span class="br0">&#40;</span><span class="kw1">this</span>.__obj<span class="br0">&#41;</span><span class="br0">&#125;</span>, enumerable: <span class="kw2">true</span>, configurable: <span class="kw2">true</span><span class="br0">&#125;</span>,
      ownProperties: <span class="br0">&#123;</span>get: <span class="kw2">function</span> <span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
         <span class="kw1">return</span> <span class="kw1">this</span>.<span class="me1">ownPropertyNames</span>.<span class="me1">map</span><span class="br0">&#40;</span><span class="kw2">function</span><span class="br0">&#40;</span>key<span class="br0">&#41;</span> <span class="br0">&#123;</span><span class="kw1">return</span> <span class="kw1">this</span>.<span class="me1">prop</span><span class="br0">&#40;</span>key<span class="br0">&#41;</span><span class="br0">&#125;</span>.<span class="me1">bind</span><span class="br0">&#40;</span><span class="kw1">this</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;
      <span class="br0">&#125;</span>, enumerable: <span class="kw2">true</span>, configurable: <span class="kw2">true</span><span class="br0">&#125;</span>,
      ownPropertyNames: <span class="br0">&#123;</span>get: <span class="kw2">function</span> <span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><span class="kw1">return</span> Object.<span class="me1">getOwnPropertyNames</span><span class="br0">&#40;</span><span class="kw1">this</span>.__obj<span class="br0">&#41;</span><span class="br0">&#125;</span>, enumerable: <span class="kw2">true</span>, configurable: <span class="kw2">true</span><span class="br0">&#125;</span>,
      keys: <span class="br0">&#123;</span>get: <span class="kw2">function</span>  <span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><span class="kw1">return</span> Object.<span class="me1">keys</span><span class="br0">&#40;</span><span class="kw1">this</span>.__obj<span class="br0">&#41;</span><span class="br0">&#125;</span>, enumerable: <span class="kw2">true</span>, configurable: <span class="kw2">true</span><span class="br0">&#125;</span>,
      enumerationOrder: <span class="br0">&#123;</span>get: <span class="kw2">function</span> <span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
         <span class="kw2">var</span> names = <span class="kw1">this</span>.<span class="me1">keys</span>;
         <span class="kw2">var</span> seen = Object.<span class="me1">create</span><span class="br0">&#40;</span><span class="kw2">null</span><span class="br0">&#41;</span>;
         names.<span class="me1">forEach</span><span class="br0">&#40;</span><span class="kw2">function</span><span class="br0">&#40;</span>n<span class="br0">&#41;</span><span class="br0">&#123;</span> seen<span class="br0">&#91;</span>n<span class="br0">&#93;</span>=n<span class="br0">&#125;</span><span class="br0">&#41;</span>;
         <span class="kw2">var</span> obj=<span class="kw1">this</span>.<span class="me1">prototype</span>;
         <span class="kw1">while</span><span class="br0">&#40;</span>obj<span class="br0">&#41;</span> <span class="br0">&#123;</span>
            obj.<span class="me1">keys</span>.<span class="me1">forEach</span><span class="br0">&#40;</span><span class="kw2">function</span><span class="br0">&#40;</span>n<span class="br0">&#41;</span> <span class="br0">&#123;</span><span class="kw1">if</span> <span class="br0">&#40;</span>!seen<span class="br0">&#91;</span>n<span class="br0">&#93;</span><span class="br0">&#41;</span> names.<span class="me1">push</span><span class="br0">&#40;</span>seen<span class="br0">&#91;</span>n<span class="br0">&#93;</span>=n<span class="br0">&#41;</span><span class="br0">&#125;</span><span class="br0">&#41;</span>;
            obj=obj.<span class="me1">prototype</span>;
         <span class="br0">&#125;</span>
         <span class="kw1">return</span> names;
       <span class="br0">&#125;</span>, enumerable: <span class="kw2">true</span>, configurable: <span class="kw2">true</span><span class="br0">&#125;</span>,
      prop: <span class="br0">&#123;</span>value: <span class="kw2">function</span><span class="br0">&#40;</span><span class="kw3">name</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
         <span class="kw2">var</span> obj = <span class="kw1">this</span>.__obj;
         <span class="kw2">var</span> desc = Object.<span class="me1">getOwnPropertyDescriptor</span><span class="br0">&#40;</span>obj,<span class="kw3">name</span><span class="br0">&#41;</span>;
         <span class="kw1">if</span> <span class="br0">&#40;</span>desc===undefined<span class="br0">&#41;</span> <span class="kw1">return</span> undefined;
         <span class="kw1">return</span> <span class="kw1">this</span>.__createPropMirrorOn<span class="br0">&#40;</span><span class="kw1">this</span>,<span class="kw3">name</span><span class="br0">&#41;</span>;
      <span class="br0">&#125;</span><span class="br0">&#125;</span>,
      lookup: <span class="br0">&#123;</span>value: <span class="kw2">function</span><span class="br0">&#40;</span><span class="kw3">name</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
         <span class="kw2">var</span> p=<span class="kw1">this</span>.<span class="me1">prop</span><span class="br0">&#40;</span><span class="kw3">name</span><span class="br0">&#41;</span>;
         <span class="kw1">if</span> <span class="br0">&#40;</span>p<span class="br0">&#41;</span> <span class="kw1">return</span> p;
         <span class="kw2">var</span> parent = <span class="kw1">this</span>.<span class="me1">prototype</span>;
         <span class="kw1">if</span> <span class="br0">&#40;</span>parent<span class="br0">&#41;</span> <span class="kw1">return</span> parent.<span class="me1">lookup</span><span class="br0">&#40;</span><span class="kw3">name</span><span class="br0">&#41;</span>;
         <span class="kw1">return</span> undefined;
      <span class="br0">&#125;</span><span class="br0">&#125;</span>,
      has: <span class="br0">&#123;</span>value: <span class="kw2">function</span><span class="br0">&#40;</span><span class="kw3">name</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><span class="kw1">return</span> <span class="kw1">this</span>.<span class="me1">lookup</span><span class="br0">&#40;</span><span class="kw3">name</span><span class="br0">&#41;</span> !== undefined<span class="br0">&#125;</span><span class="br0">&#125;</span>,
      hasOwn: <span class="br0">&#123;</span>value: <span class="kw2">function</span><span class="br0">&#40;</span><span class="kw3">name</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><span class="kw1">return</span> <span class="kw1">this</span>.<span class="me1">prop</span><span class="br0">&#40;</span><span class="kw3">name</span><span class="br0">&#41;</span> !== undefined<span class="br0">&#125;</span><span class="br0">&#125;</span>,
      specialClass: <span class="br0">&#123;</span>get: <span class="kw2">function</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><span class="kw1">return</span> <span class="br0">&#123;</span><span class="br0">&#125;</span>.<span class="me1">toString</span>.<span class="me1">call</span><span class="br0">&#40;</span><span class="kw1">this</span>.__obj<span class="br0">&#41;</span>.<span class="me1">split</span><span class="br0">&#40;</span><span class="re0">/\s|<span class="br0">&#93;</span>/</span><span class="br0">&#41;</span><span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span><span class="br0">&#125;</span><span class="br0">&#125;</span>,
      toString: <span class="br0">&#123;</span>value: <span class="kw2">function</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><span class="kw1">return</span> <span class="st0">"Object Introspection Mirror #"</span>+<span class="kw1">this</span>.__id<span class="br0">&#125;</span><span class="br0">&#125;</span>
   <span class="br0">&#125;</span><span class="br0">&#41;</span>;
&nbsp;
   <span class="kw2">function</span> mixinFunctionLocalMirror<span class="br0">&#40;</span>proto<span class="br0">&#41;</span> <span class="br0">&#123;</span>
      <span class="kw1">return</span> Object.<span class="me1">create</span><span class="br0">&#40;</span>proto,<span class="br0">&#123;</span>
         <span class="co1">//Implements functionMirrorInterface</span>
         <span class="kw3">name</span>: <span class="br0">&#123;</span>get: <span class="kw2">function</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><span class="kw1">return</span> <span class="kw1">this</span>.__obj.<span class="kw3">name</span><span class="br0">&#125;</span>, enumerable: <span class="kw2">true</span>, configurable: <span class="kw2">true</span><span class="br0">&#125;</span>,
         source: <span class="br0">&#123;</span>get: <span class="kw2">function</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><span class="kw1">return</span> <span class="kw1">this</span>.__obj.<span class="me1">toString</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#125;</span>, enumerable: <span class="kw2">true</span>, configurable: <span class="kw2">true</span><span class="br0">&#125;</span>,
         isBuiltin: <span class="br0">&#123;</span>get: <span class="kw2">function</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><span class="kw1">return</span> <span class="kw1">this</span>.__obj.<span class="me1">toString</span><span class="br0">&#40;</span><span class="br0">&#41;</span>.<span class="me1">match</span><span class="br0">&#40;</span><span class="re0">/\<span class="br0">&#41;</span>\s*\<span class="br0">&#123;</span>\s*\<span class="br0">&#91;</span>native code\<span class="br0">&#93;</span>\s*\<span class="br0">&#125;</span>/</span><span class="br0">&#41;</span>!==<span class="kw2">null</span><span class="br0">&#125;</span>, enumerable: <span class="kw2">true</span>, configurable: <span class="kw2">true</span><span class="br0">&#125;</span>,
         toString: <span class="br0">&#123;</span>value: <span class="kw2">function</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><span class="kw1">return</span> <span class="st0">"Function Introspection Mirror #"</span>+<span class="kw1">this</span>.__id<span class="br0">&#125;</span><span class="br0">&#125;</span>
       <span class="br0">&#125;</span><span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>;
   
   <span class="kw2">var</span> functionMirrorProto = mixinFunctionLocalMirror<span class="br0">&#40;</span>objMirrorProto<span class="br0">&#41;</span>;</pre>
</div>

<a name="code_rewritten_using_extensions"></a><h3>Code Rewritten using Extensions</h3>
<div class="level3">
<pre class="code javascript"> <span class="kw2">const</span> __obj = <span class="kw3">Name</span>.<span class="me1">create</span><span class="br0">&#40;</span><span class="br0">&#41;</span>;
 <span class="kw2">const</span> __id<span class="br0">&#93;</span> = <span class="kw3">Name</span>.<span class="me1">create</span><span class="br0">&#40;</span><span class="br0">&#41;</span>;
 <span class="kw2">const</span> __createObjMirrorOn = <span class="kw3">Name</span>.<span class="me1">create</span><span class="br0">&#40;</span><span class="br0">&#41;</span>;
 <span class="kw2">const</span> __createPropMirrorOn = <span class="kw3">Name</span>.<span class="me1">create</span><span class="br0">&#40;</span><span class="br0">&#41;</span>;
&nbsp;
 <span class="kw2">var</span> objMirrorProto = objBasicMirrorProto &lt;| <span class="br0">&#123;</span>
      <span class="co1">//Implements objectMirrorInterface</span>
      get prototype<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><span class="kw1">return</span> <span class="kw1">this</span><span class="br0">&#91;</span>__createObjMirrorOn<span class="br0">&#40;</span>Object.<span class="me1">getPrototypeOf</span><span class="br0">&#40;</span><span class="kw1">this</span><span class="br0">&#91;</span>__obj<span class="br0">&#93;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#93;</span><span class="br0">&#125;</span>
      get extensible <span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><span class="kw1">return</span> Object.<span class="me1">isExtensible</span><span class="br0">&#40;</span><span class="kw1">this</span><span class="br0">&#91;</span>__obj<span class="br0">&#93;</span><span class="br0">&#41;</span><span class="br0">&#125;</span>
      get ownProperties <span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
         <span class="kw1">return</span> <span class="kw1">this</span>.<span class="me1">ownPropertyNames</span>.<span class="me1">map</span><span class="br0">&#40;</span><span class="kw2">function</span><span class="br0">&#40;</span>key<span class="br0">&#41;</span> <span class="br0">&#123;</span><span class="kw1">return</span> <span class="kw1">this</span>.<span class="me1">prop</span><span class="br0">&#40;</span>key<span class="br0">&#41;</span><span class="br0">&#125;</span>.<span class="me1">bind</span><span class="br0">&#40;</span><span class="kw1">this</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;
      <span class="br0">&#125;</span>
      get ownPropertyNames <span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><span class="kw1">return</span> Object.<span class="me1">getOwnPropertyNames</span><span class="br0">&#40;</span><span class="kw1">this</span><span class="br0">&#91;</span>__obj<span class="br0">&#93;</span><span class="br0">&#41;</span><span class="br0">&#125;</span>
      get keys  <span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><span class="kw1">return</span> Object.<span class="me1">keys</span><span class="br0">&#40;</span><span class="kw1">this</span><span class="br0">&#91;</span>__obj<span class="br0">&#93;</span><span class="br0">&#41;</span><span class="br0">&#125;</span>
      get enumerationOrder <span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
         <span class="kw2">const</span> names = <span class="kw1">this</span>.<span class="me1">keys</span>;
         <span class="kw2">const</span> seen = <span class="kw2">null</span> &lt;| <span class="br0">&#123;</span><span class="br0">&#125;</span>;
         names.<span class="me1">forEach</span><span class="br0">&#40;</span><span class="kw2">function</span><span class="br0">&#40;</span>n<span class="br0">&#41;</span><span class="br0">&#123;</span> seen<span class="br0">&#91;</span>n<span class="br0">&#93;</span>=n<span class="br0">&#125;</span><span class="br0">&#41;</span>;
         <span class="kw2">var</span> obj=<span class="kw1">this</span>.<span class="me1">prototype</span>;
         <span class="kw1">while</span><span class="br0">&#40;</span>obj<span class="br0">&#41;</span> <span class="br0">&#123;</span>
            obj.<span class="me1">keys</span>.<span class="me1">forEach</span><span class="br0">&#40;</span><span class="kw2">function</span><span class="br0">&#40;</span>n<span class="br0">&#41;</span> <span class="br0">&#123;</span><span class="kw1">if</span> <span class="br0">&#40;</span>!seen<span class="br0">&#91;</span>n<span class="br0">&#93;</span><span class="br0">&#41;</span> names.<span class="me1">push</span><span class="br0">&#40;</span>seen<span class="br0">&#91;</span>n<span class="br0">&#93;</span>=n<span class="br0">&#41;</span><span class="br0">&#125;</span><span class="br0">&#41;</span>;
            obj=obj.<span class="me1">prototype</span>;
         <span class="br0">&#125;</span>
         <span class="kw1">return</span> names;
      <span class="br0">&#125;</span>
      prop<span class="br0">&#40;</span><span class="kw3">name</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
         <span class="kw2">const</span> obj = <span class="kw1">this</span><span class="br0">&#91;</span>__obj<span class="br0">&#93;</span>;
         <span class="kw2">const</span> desc = Object.<span class="me1">getOwnPropertyDescriptor</span><span class="br0">&#40;</span>obj,<span class="kw3">name</span><span class="br0">&#41;</span>;
         <span class="kw1">if</span> <span class="br0">&#40;</span>desc===undefined<span class="br0">&#41;</span> <span class="kw1">return</span> undefined;
         <span class="kw1">return</span> <span class="kw1">this</span><span class="br0">&#91;</span>__createPropMirrorOn<span class="br0">&#93;</span><span class="br0">&#40;</span><span class="kw1">this</span>,<span class="kw3">name</span><span class="br0">&#41;</span>;
      <span class="br0">&#125;</span>
      lookup<span class="br0">&#40;</span><span class="kw3">name</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
         <span class="kw2">const</span> p=<span class="kw1">this</span>.<span class="me1">prop</span><span class="br0">&#40;</span><span class="kw3">name</span><span class="br0">&#41;</span>;
         <span class="kw1">if</span> <span class="br0">&#40;</span>p<span class="br0">&#41;</span> <span class="kw1">return</span> p;
         <span class="kw2">const</span> parent = <span class="kw1">this</span>.<span class="me1">prototype</span>;
         <span class="kw1">if</span> <span class="br0">&#40;</span>parent<span class="br0">&#41;</span> <span class="kw1">return</span> parent.<span class="me1">lookup</span><span class="br0">&#40;</span><span class="kw3">name</span><span class="br0">&#41;</span>;
         <span class="kw1">return</span> undefined;
      <span class="br0">&#125;</span>
      has<span class="br0">&#40;</span><span class="kw3">name</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><span class="kw1">return</span> <span class="kw1">this</span>.<span class="me1">lookup</span><span class="br0">&#40;</span><span class="kw3">name</span><span class="br0">&#41;</span> !== undefined<span class="br0">&#125;</span>
      hasOwn<span class="br0">&#40;</span><span class="kw3">name</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><span class="kw1">return</span> <span class="kw1">this</span>.<span class="me1">prop</span><span class="br0">&#40;</span><span class="kw3">name</span><span class="br0">&#41;</span> !== undefined<span class="br0">&#125;</span>
      specialClass<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><span class="kw1">return</span> <span class="br0">&#123;</span><span class="br0">&#125;</span>.<span class="me1">toString</span>.<span class="me1">call</span><span class="br0">&#40;</span><span class="kw1">this</span>.__obj<span class="br0">&#41;</span>.<span class="me1">split</span><span class="br0">&#40;</span><span class="re0">/\s|<span class="br0">&#93;</span>/</span><span class="br0">&#41;</span><span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span><span class="br0">&#125;</span>
      toString<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><span class="kw1">return</span> <span class="st0">"Object Introspection Mirror #"</span>+<span class="kw1">this</span>.__id<span class="br0">&#125;</span>
&nbsp;
   <span class="br0">&#125;</span>;
&nbsp;
   <span class="kw2">function</span> mixinFunctionLocalMirror<span class="br0">&#40;</span>proto<span class="br0">&#41;</span> <span class="br0">&#123;</span>
      <span class="kw1">return</span> proto &lt;| <span class="br0">&#123;</span>
         <span class="co1">//Implements functionMirrorInterface</span>
         get <span class="kw3">name</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><span class="kw1">return</span> <span class="kw1">this</span><span class="br0">&#91;</span>__obj.<span class="kw3">name</span><span class="br0">&#93;</span><span class="br0">&#125;</span>
         get source<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><span class="kw1">return</span> <span class="kw1">this</span><span class="br0">&#91;</span>__obj<span class="br0">&#93;</span>.<span class="me1">toString</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#125;</span>
         get isBuiltin<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><span class="kw1">return</span> <span class="kw1">this</span><span class="br0">&#91;</span>__obj.<span class="me1">toString</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#93;</span>.<span class="me1">match</span><span class="br0">&#40;</span><span class="re0">/\<span class="br0">&#41;</span>\s*\<span class="br0">&#123;</span>\s*\<span class="br0">&#91;</span>native code\<span class="br0">&#93;</span>\s*\<span class="br0">&#125;</span>/</span><span class="br0">&#41;</span>!==<span class="kw2">null</span><span class="br0">&#125;</span>
         toString <span class="kw2">function</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><span class="kw1">return</span> <span class="st0">"Function Introspection Mirror #"</span>+<span class="kw1">this</span><span class="br0">&#91;</span>__id<span class="br0">&#93;</span><span class="br0">&#125;</span>
       <span class="br0">&#125;</span>;
    <span class="br0">&#125;</span>;
   
   <span class="kw2">var</span> functionMirrorProto = mixinFunctionLocalMirror<span class="br0">&#40;</span>objMirrorProto<span class="br0">&#41;</span>;</pre>
</div>

<a name="history"></a><h2>History</h2>
<div class="level2">

<p>
Original Proposal August 10, 2009 <br/>
 <a href="doku.php%3Fid=strawman:object_initialiser_extensions.html" class="wikilink1" title="strawman:object_initialiser_extensions" onclick="return svchk()" onkeypress="return svchk()">Revised Proposal March 2011</a>  <br/>
 Simplified Proposal May 2011 <br/>
 AllenWB Started further simplification Sept. 15, 2011.   eliminated property prefixes for non-configurable and non-enumerable properties<br/>
 Made &lt;| with a RHS function set the proto of the constructed function.prototype object Added bracketed computef property keys<br/>
 Made comma optional after methods and accessor properties.<br/>
 Added Object Extension Literals 
</p>

</div>

<!-- cachefile /usr/local/www/es-lang.org/wiki/data/cache/c/c00982286304d1d34daf26526bb2bae5.xhtml used -->
    <!-- wikipage stop -->
  </div>

  <div class="clearer">&nbsp;</div>

  
  <div class="stylefoot">

    <div class="meta">
      <div class="user">
              </div>
      <div class="doc">
        harmony/object_literals.txt &middot; Last modified: 2013/07/11 23:58 by rwaldron      </div>
    </div>

   
    <div class="bar" id="bar_bottom">
      <div class="bar-left" id="bar_bottomleft">
        <form class="button" method="post" action="index.html" onsubmit="return svchk()"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="" /><input type="hidden" name="id" value="harmony:object_literals" /><input type="submit" value="Show pagesource" class="button" title="ALT+V" accesskey="v" /></form>        <form class="button" method="get" action="index.html" onsubmit="return svchk()"><input type="hidden" name="do" value="revisions" /><input type="hidden" name="id" value="harmony:object_literals" /><input type="submit" value="Old revisions" class="button" title="ALT+O" accesskey="o" /></form>      </div>
      <div class="bar-right" id="bar_bottomright">
                        <form class="button" method="get" action="index.html" onsubmit="return svchk()"><input type="hidden" name="do" value="login" /><input type="hidden" name="id" value="harmony:object_literals" /><input type="submit" value="Login" class="button" /></form>        <form class="button" method="get" action="index.html" onsubmit="return svchk()"><input type="hidden" name="do" value="index" /><input type="hidden" name="id" value="harmony:object_literals" /><input type="submit" value="Index" class="button" title="ALT+X" accesskey="x" /></form>        <a href="doku.php%3Fid=harmony:object_literals.html#top"><input type="button" class="button" value="Back to top" onclick="window.scrollTo(0, 0)" /></a>&nbsp;
      </div>
    </div>

  </div>

</div>

<div align="center" class="footerinc">
  <a target="_blank" href="feed.php" title="Recent changes RSS feed"><img src="lib/tpl/default/images/button-rss.png" width="80" height="15" alt="Recent changes RSS feed" border="0" /></a>

  <a target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/2.0/" rel="license" title="Creative Commons License"><img src="lib/tpl/default/images/button-cc.gif" width="80" height="15" alt="Creative Commons License" border="0" /></a>

  <a target="_blank" href="https://www.paypal.com/xclick/business=andi%40splitbrain.org&amp;item_name=DokuWiki+Donation&amp;no_shipping=1&amp;no_note=1&amp;tax=0&amp;currency_code=EUR&amp;lc=US" title="Donate"><img src="lib/tpl/default/images/button-donate.gif" alt="Donate" border="0" /></a>

  <a target="_blank" href="http://www.php.net" title="Powered by PHP"><img src="lib/tpl/default/images/button-php.gif" width="80" height="15" alt="Powered by PHP" border="0" /></a>

  <a target="_blank" href="http://validator.w3.org/check/referer" title="Valid XHTML 1.0"><img src="lib/tpl/default/images/button-xhtml.png" width="80" height="15" alt="Valid XHTML 1.0" border="0" /></a>

  <a target="_blank" href="http://jigsaw.w3.org/css-validator/check/referer" title="Valid CSS"><img src="lib/tpl/default/images/button-css.png" width="80" height="15" alt="Valid CSS" border="0" /></a>

  <a target="_blank" href="http://wiki.splitbrain.org/wiki:dokuwiki" title="Driven by DokuWiki"><img src="lib/tpl/default/images/button-dw.png" width="80" height="15" alt="Driven by DokuWiki" border="0" /></a>



<!--

<rdf:RDF xmlns="http://web.resource.org/cc/"
    xmlns:dc="http://purl.org/dc/elements/1.1/"
    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
<Work rdf:about="">
   <dc:type rdf:resource="http://purl.org/dc/dcmitype/Text" />
   <license rdf:resource="http://creativecommons.org/licenses/by-nc-sa/2.0/" />
</Work>

<License rdf:about="http://creativecommons.org/licenses/by-nc-sa/2.0/">
   <permits rdf:resource="http://web.resource.org/cc/Reproduction" />
   <permits rdf:resource="http://web.resource.org/cc/Distribution" />
   <requires rdf:resource="http://web.resource.org/cc/Notice" />
   <requires rdf:resource="http://web.resource.org/cc/Attribution" />
   <prohibits rdf:resource="http://web.resource.org/cc/CommercialUse" />
   <permits rdf:resource="http://web.resource.org/cc/DerivativeWorks" />
   <requires rdf:resource="http://web.resource.org/cc/ShareAlike" />
</License>

</rdf:RDF>

-->
</div>

<img src="lib/exe/indexer.php%3Fid=harmony%253Aobject_literals&amp;1454275464" width="1" height="1" alt=""  /></body>
</html>
