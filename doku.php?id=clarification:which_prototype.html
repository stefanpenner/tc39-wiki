<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
 lang="en" dir="ltr">
<head>
  <title>clarification:which_prototype [ES Wiki]</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <meta name="generator" content="DokuWiki Release 2005-09-22e" />
  <link rel="start" href="index.html" />
  <link rel="contents" href="doku.php%3Fid=clarification:which_prototype&amp;do=index.html" title="" />
  <link rel="alternate" type="application/rss+xml" title="Recent Changes" href="feed.php" />
  <link rel="alternate" type="application/rss+xml" title="Current Namespace" href="feed.php%3Fmode=list&amp;ns=clarification" />
  <link rel="alternate" type="text/html" title="Plain HTML" href="doku.php%3Fid=clarification:which_prototype&amp;do=export_html.html" />
  <link rel="alternate" type="text/plain" title="Wiki Markup" href="doku.php%3Fid=clarification:which_prototype&amp;do=export_raw" />
  <link rel="stylesheet" media="screen" type="text/css" href="lib/styles/style.css" />
  <meta name="date" content="2008-06-20T06:30:01+0000" />
  <meta name="robots" content="index,follow" />
  <script language="javascript" type="text/javascript" charset="utf-8">
    var alertText   = 'Please enter the text you want to format.\nIt will be appended to the end of the document.'
    var notSavedYet = 'Unsaved changes will be lost.\nReally continue?'
    var DOKU_BASE   = '/'
  </script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/script.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/tw-sack.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/ajax.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/domLib.js"></script>
  <script language="javascript" type="text/javascript" charset="utf-8" src="lib/scripts/domTT.js"></script>
  <link rel="stylesheet" type="text/css" href="lib/plugins/plugin/style.css" />

  <link rel="shortcut icon" href="lib/images/favicon.ico" />
  <link rel="stylesheet" media="screen" type="text/css" href="lib/tpl/default/layout.css" />
  <link rel="stylesheet" media="screen" type="text/css" href="lib/tpl/default/design.css" />

  
  <link rel="stylesheet" media="print" type="text/css" href="lib/tpl/default/print.css" />

  <!--[if gte IE 5]>
  <style type="text/css">
    /* that IE 5+ conditional comment makes this only visible in IE 5+ */
    /* IE bugfix for transparent PNGs */
    //DISABLED   img { behavior: url("/lib/scripts/pngbehavior.htc"); }
  </style>
  <![endif]-->

  </head>

<body>
<div class="dokuwiki">
  
  <div class="stylehead">

    <div class="header">
      <div class="pagename">
        [[<a href="doku.php%3Fid=clarification:which_prototype&amp;do=backlink.html" onclick="return svchk()" onkeypress="return svchk()">clarification:which_prototype</a>]]
      </div>
      <div class="logo">
        <a href="doku.php%3Fid=.html" onclick="return svchk()" onkeypress="return svchk()" name="top" accesskey="h" title="[ALT+H]">ES Wiki</a>      </div>
    </div>
  
    
    <div class="bar" id="bar_top">
      <div class="bar-left" id="bar_topleft">
        <form class="button" method="post" action="index.html" onsubmit="return svchk()"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="" /><input type="hidden" name="id" value="clarification:which_prototype" /><input type="submit" value="Show pagesource" class="button" title="ALT+V" accesskey="v" /></form>        <form class="button" method="get" action="index.html" onsubmit="return svchk()"><input type="hidden" name="do" value="revisions" /><input type="hidden" name="id" value="clarification:which_prototype" /><input type="submit" value="Old revisions" class="button" title="ALT+O" accesskey="o" /></form>      </div>
  
      <div class="bar-right" id="bar_topright">
        <form class="button" method="get" action="index.html" onsubmit="return svchk()"><input type="hidden" name="do" value="recent" /><input type="hidden" name="id" value="" /><input type="submit" value="Recent changes" class="button" title="ALT+R" accesskey="r" /></form>        <form action="doku.php%3Fid=.html" accept-charset="utf-8" class="search" name="search" onsubmit="return svchk()"><input type="hidden" name="do" value="search" /><input type="text" id="qsearch_in" accesskey="f" name="id" class="edit" onkeyup="ajax_qsearch.call('qsearch_in','qsearch_out')" /><input type="submit" value="Search" class="button" /><div id="qsearch_out" class="ajax_qsearch" onclick="this.style.display='none'"></div></form>&nbsp;
      </div>
    </div>

        <div class="breadcrumbs">
      Trace: <span class="bcsep">&raquo;</span> <a href="doku.php%3Fid=clarification:lexical_scope.html" onclick="return svchk()" onkeypress="return svchk()" class="breadcrumbs" title="clarification:lexical_scope">lexical_scope</a> <span class="bcsep">&raquo;</span> <a href="doku.php%3Fid=clarification:scopes_for_directives_and_definitions.html" onclick="return svchk()" onkeypress="return svchk()" class="breadcrumbs" title="clarification:scopes_for_directives_and_definitions">scopes_for_directives_and_definitions</a> <span class="bcsep">&raquo;</span> <a href="doku.php%3Fid=clarification:dispatch_rules.html" onclick="return svchk()" onkeypress="return svchk()" class="breadcrumbs" title="clarification:dispatch_rules">dispatch_rules</a> <span class="bcsep">&raquo;</span> <a href="doku.php%3Fid=clarification:package_semantics.html" onclick="return svchk()" onkeypress="return svchk()" class="breadcrumbs" title="clarification:package_semantics">package_semantics</a> <span class="bcsep">&raquo;</span> <span class="curid"><a href="doku.php%3Fid=clarification:which_prototype.html" onclick="return svchk()" onkeypress="return svchk()" class="breadcrumbs" title="clarification:which_prototype">which_prototype</a></span>          </div>
    
  </div>
  
  
  <div class="page">
    <!-- wikipage start -->
    <div class="toc">
<div class="tocheader"> <script type="text/javascript">showTocToggle("+","-")</script>Table of Contents</div>
<div id="tocinside">
<ul class="toc">
<li class="level1"><span class="li"><a href="doku.php%3Fid=clarification:which_prototype.html#confusion" class="toc">Confusion</a></span></li>
<li class="level1"><span class="li"><a href="doku.php%3Fid=clarification:which_prototype.html#enumeration" class="toc">Enumeration</a></span><ul class="toc">
<li class="level2"><span class="li"><a href="doku.php%3Fid=clarification:which_prototype.html#11.1.4_array_initialiser" class="toc">11.1.4 Array Initialiser</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=clarification:which_prototype.html#11.1.6_object_initialiser" class="toc">11.1.6 Object Initialiser</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=clarification:which_prototype.html#12.14_the_try_statement" class="toc">12.14 The ''try'' statement</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=clarification:which_prototype.html#13_function_definition" class="toc">13 Function Definition</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=clarification:which_prototype.html#15.4.4.4_array.prototype.concat" class="toc">15.4.4.4 Array.prototype.concat</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=clarification:which_prototype.html#15.4.4.10_array.prototype.slice" class="toc">15.4.4.10 Array.prototype.slice</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=clarification:which_prototype.html#15.4.4.12_array.prototype.splice" class="toc">15.4.4.12 Array.prototype.splice</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=clarification:which_prototype.html#15.5.4.10_string.prototype.match" class="toc">15.5.4.10 String.prototype.match</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=clarification:which_prototype.html#15.5.4.14_string.prototype.split" class="toc">15.5.4.14 String.prototype.split</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=clarification:which_prototype.html#15.9.2.1_date" class="toc">15.9.2.1 Date</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=clarification:which_prototype.html#regexp.prototype.exec" class="toc">RegExp.prototype.exec</a></span></li>
</ul>
</li>
<li class="level1"><span class="li"><a href="doku.php%3Fid=clarification:which_prototype.html#contradiction" class="toc">Contradiction</a></span><ul class="toc">
<li class="level2"><span class="li"><a href="doku.php%3Fid=clarification:which_prototype.html#10.1.8_arguments_object" class="toc">10.1.8 Arguments Object</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=clarification:which_prototype.html#13.2_creating_function_objects" class="toc">13.2 Creating Function Objects</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=clarification:which_prototype.html#13.2.2_construct" class="toc">13.2.2 [[Construct]]</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=clarification:which_prototype.html#15.4.2.1_new_array" class="toc">15.4.2.1 new Array</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=clarification:which_prototype.html#15.4.2.2_new_array" class="toc">15.4.2.2 new Array</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=clarification:which_prototype.html#15.5.2.1_new_string" class="toc">15.5.2.1 new String</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=clarification:which_prototype.html#15.6.2.1_new_boolean" class="toc">15.6.2.1 new Boolean</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=clarification:which_prototype.html#15.7.2.1_new_number" class="toc">15.7.2.1 new Number</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=clarification:which_prototype.html#15.9.3.1_new_date" class="toc">15.9.3.1 new Date</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=clarification:which_prototype.html#15.9.3.2_new_date_value" class="toc">15.9.3.2 new Date (value)</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=clarification:which_prototype.html#15.9.3.3_new_date" class="toc">15.9.3.3 new Date ( )</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=clarification:which_prototype.html#15.10.4.1_new_regexp" class="toc">15.10.4.1 new RegExp</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=clarification:which_prototype.html#15.11.1.1_error" class="toc">15.11.1.1 Error</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=clarification:which_prototype.html#15.11.2.1_new_error" class="toc">15.11.2.1 new Error</a></span></li>
</ul>
</li>
<li class="level1"><span class="li"><a href="doku.php%3Fid=clarification:which_prototype.html#error_subclasses_differ" class="toc">Error Subclasses Differ?</a></span><ul class="toc">
<li class="level2"><span class="li"><a href="doku.php%3Fid=clarification:which_prototype.html#15.11.7.2_nativeerror" class="toc">15.11.7.2 NativeError</a></span></li>
<li class="level2"><span class="li"><a href="doku.php%3Fid=clarification:which_prototype.html#15.11.7.4_new_nativeerror" class="toc">15.11.7.4 New NativeError</a></span></li>
</ul>
</li>
<li class="level1"><span class="li"><a href="doku.php%3Fid=clarification:which_prototype.html#recommendations" class="toc">Recommendations</a></span></li>
</ul>
</div>
</div>

<a name="confusion"></a><h1>Confusion</h1>
<div class="level1">

<p>
 Edition 3 has several variations on how to create new standard objects (instances of the &ldquo;standard&rdquo; or &ldquo;built-in&rdquo; class constructors specified in the monumentally long Section 15).  Some places say, e.g.: 
</p>
<ul>
<li class="level1"><div class="li"> Let A be a new array created as if by the expression new Array().</div>
</li>
</ul>

<p>
 while others say: 
</p>
<ul>
<li class="level1"><div class="li"> Create a new native ECMAScript object and let F be that object.</div>
</li>
<li class="level1"><div class="li"> Set the [[Class]] property of F to &ldquo;Function&rdquo;.</div>
</li>
<li class="level1"><div class="li"> Set the [[Prototype]] property of F to the original Function prototype object as specified in section 15.3.3.1.</div>
</li>
</ul>

<p>
 This came up at the 21 April meeting.  From the minutes: 
</p>
<ul>
<li class="level1"><div class="li"> Doug Crockford’s call for typeof [] == “array” to solve browser cross-window is-array testing needs, but <code>is</code> should satisfy that use-case.</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> What about code that hacks String = Array? Editions 1-3 allow this, but specify “original String.prototype value” be used for automatic constructions, leading to incoherence. Can we make the standard class constructors {RO,DD} in the global object?</div>
</li>
</ul>

<p>
 This gets to the heart of the matter.  I believe the &ldquo;original Object.prototype value&rdquo; or similar language (&rdquo;original Object prototype object&rdquo;, e.g.) was inserted to match one implementation, and it was motivated by performance and coherence concerns about reflecting the current value of the mutable <code>Object</code> binding in the global object.  Yet many other places in Edition 3 do exactly that reflection.
</p>

<p>
Worse, the &ldquo;as if by the expression new Array()&rdquo; spec language requires looking up <code>Array</code> in the scope chain, allowing the global <code>Array</code> binding to be shadowed, possibly maliciously.
</p>

<p>
Note that the <code>prototype</code> properties in the built-in class constructor function objects have attributes {ReadOnly, DontDelete, DontEnum} and so can&rsquo;t change &ndash; it&rsquo;s just the constructor bindings in the global object that can be rebound, removed, or replaced.
</p>

<p>
Here follows a list of the seemingly more natural, &ldquo;reflective&rdquo; construction cases.
</p>

</div>

<a name="enumeration"></a><h1>Enumeration</h1>
<div class="level1">

<p>
 Places in Edition 3 that say &ldquo;Create a new object as if by the expression new Object()&rdquo; or equivalent for a different class, as opposed to those places that talk about creating an object whose prototype is &ldquo;the original Object.prototype value&rdquo;:
</p>

</div>

<a name="11.1.4_array_initialiser"></a><h2>11.1.4 Array Initialiser</h2>
<div class="level2">

</div>

<a name="11.1.6_object_initialiser"></a><h2>11.1.6 Object Initialiser</h2>
<div class="level2">

</div>

<a name="12.14_the_try_statement"></a><h2>12.14 The ''try'' statement</h2>
<div class="level2">

<p>
 The production Catch : catch (Identifier ) Block is evaluated as follows:
</p>

<p>
1. Let C be the parameter that has been passed to this production.
</p>

<p>
2. Create a new object as if by the expression new Object().
</p>

</div>

<a name="13_function_definition"></a><h2>13 Function Definition</h2>
<div class="level2">

<p>
 (Under the semantics for the third production:)
</p>

<p>
The production FunctionExpression : function Identifier ( FormalParameterListopt ) { FunctionBody } is evaluated as follows:
</p>

<p>
1. Create a new object as if by the expression new Object().
</p>

</div>

<a name="15.4.4.4_array.prototype.concat"></a><h2>15.4.4.4 Array.prototype.concat</h2>
<div class="level2">

<p>
 1.       Let A be a new array created as if by the expression new Array().
</p>

</div>

<a name="15.4.4.10_array.prototype.slice"></a><h2>15.4.4.10 Array.prototype.slice</h2>
<div class="level2">

<p>
 1.       Let A be a new array created as if by the expression new Array().
</p>

</div>

<a name="15.4.4.12_array.prototype.splice"></a><h2>15.4.4.12 Array.prototype.splice</h2>
<div class="level2">

<p>
 1.       Let A be a new array created as if by the expression new Array().
</p>

</div>

<a name="15.5.4.10_string.prototype.match"></a><h2>15.5.4.10 String.prototype.match</h2>
<div class="level2">

<p>
 If regexp is not an object whose [[Class]] property is &ldquo;RegExp&rdquo;, it is replaced with the result of the expression new RegExp(regexp). Let string denote the result of converting the this value to a string. Then do one of the following:
</p>

<p>
• If regexp.global is false: Return the result obtained by invoking RegExp.prototype.exec (see section 15.10.6.2) on regexp with string as parameter.
</p>

<p>
• If regexp.global is true: Set the regexp.lastIndex property to 0 and invoke RegExp.prototype.exec repeatedly until there is no match. If there is a match with an empty string (in other words, if the value of regexp.lastIndex is left unchanged), increment regexp.lastIndex by 1. Let n be the number of matches. <strong>The
value returned is an array</strong> with the length property set to n and properties 0 through n–1 corresponding to the first elements of the results of all matching invocations of RegExp.prototype.exec.
</p>

</div>

<a name="15.5.4.14_string.prototype.split"></a><h2>15.5.4.14 String.prototype.split</h2>
<div class="level2">

<p>
 1. Let S = ToString(this).
</p>

<p>
2. Let A be a new array created as if by the expression new Array().
</p>

</div>

<a name="15.9.2.1_date"></a><h2>15.9.2.1 Date</h2>
<div class="level2">

<p>
 All of the arguments are optional; any arguments supplied are accepted but are completely ignored. A string is created and returned as if by the expression (new Date()).toString().
</p>

</div>

<a name="regexp.prototype.exec"></a><h2>RegExp.prototype.exec</h2>
<div class="level2">

<p>
 13. Return a new array with the following properties:
</p>

</div>

<a name="contradiction"></a><h1>Contradiction</h1>
<div class="level1">

<p>
 Ok, here are the places I can find (and &ldquo;find&rdquo; in <acronym title="Portable Document Format">PDF</acronym> and Word seems not always to find all the matches, grrr!) that do it the other way:
</p>

</div>

<a name="10.1.8_arguments_object"></a><h2>10.1.8 Arguments Object</h2>
<div class="level2">

<p>
 When control enters an execution context for function code, an arguments object is created and initialised as follows:
</p>

<p>
• The value of the internal [[Prototype]] property of the arguments object is the original Object prototype object, the one that is the initial value of Object.prototype (section 15.2.3.1).
</p>

</div>

<a name="13.2_creating_function_objects"></a><h2>13.2 Creating Function Objects</h2>
<div class="level2">

<p>
 2. Create a new native ECMAScript object and let F be that object.
</p>

<p>
3. Set the [[Class]] property of F to &ldquo;Function&rdquo;.
</p>

<p>
4. Set the [[Prototype]] property of F to the original Function prototype object as specified in section 15.3.3.1.
</p>

</div>

<a name="13.2.2_construct"></a><h2>13.2.2 [[Construct]]</h2>
<div class="level2">

<p>
 When the [[Construct]] property for a Function object F is called, the following steps are taken:
</p>

<p>
1. Create a new native ECMAScript object.
</p>

<p>
2. Set the [[Class]] property of Result(1) to &ldquo;Object&rdquo;.
</p>

<p>
3. Get the value of the prototype property of the F.
</p>

<p>
4. If Result(3) is an object, set the [[Prototype]] property of Result(1) to Result(3).
</p>

<p>
5. If Result(3) is not an object, set the [[Prototype]] property of Result(1) to the original Object prototype object as described in section 15.2.3.1.
</p>

</div>

<a name="15.4.2.1_new_array"></a><h2>15.4.2.1 new Array</h2>
<div class="level2">

<p>
 The [[Prototype]] property of the newly constructed object is set to the original Array prototype object, the one that is the initial value of Array.prototype (section 15.4.3.1).
</p>

</div>

<a name="15.4.2.2_new_array"></a><h2>15.4.2.2 new Array</h2>
<div class="level2">

<p>
 ditto
</p>

</div>

<a name="15.5.2.1_new_string"></a><h2>15.5.2.1 new String</h2>
<div class="level2">

<p>
 The [[Prototype]] property of the newly constructed object is set to the original String prototype object, the one that is the initial value of String.prototype (section 15.5.3.1).
</p>

</div>

<a name="15.6.2.1_new_boolean"></a><h2>15.6.2.1 new Boolean</h2>
<div class="level2">

<p>
 The [[Prototype]] property of the newly constructed object is set to the original Boolean prototype object, the one that is the initial value of Boolean.prototype (section 15.6.3.1).
</p>

</div>

<a name="15.7.2.1_new_number"></a><h2>15.7.2.1 new Number</h2>
<div class="level2">

<p>
 The [[Prototype]] property of the newly constructed object is set to the original Number prototype object, the one that is the initial value of Number.prototype (section 15.7.3.1).
</p>

</div>

<a name="15.9.3.1_new_date"></a><h2>15.9.3.1 new Date</h2>
<div class="level2">

<p>
 When Date is called with two to seven arguments, it computes the date from year, month, and (optionally) date, hours, minutes, seconds and ms.
</p>

<p>
The [[Prototype]] property of the newly constructed object is set to the original Date prototype object, the one that is the initial value of Date.prototype (section 15.9.4.1).
</p>

</div>

<a name="15.9.3.2_new_date_value"></a><h2>15.9.3.2 new Date (value)</h2>
<div class="level2">

<p>
 ditto
</p>

</div>

<a name="15.9.3.3_new_date"></a><h2>15.9.3.3 new Date ( )</h2>
<div class="level2">

<p>
 ditto
</p>

</div>

<a name="15.10.4.1_new_regexp"></a><h2>15.10.4.1 new RegExp</h2>
<div class="level2">

<p>
 The [[Prototype]] property of the newly constructed object is set to the original RegExp prototype object, the one that is the initial value of RegExp.prototype.
</p>

</div>

<a name="15.11.1.1_error"></a><h2>15.11.1.1 Error</h2>
<div class="level2">

<p>
 The [[Prototype]] property of the newly constructed object is set to the original Error prototype object, the one that is the initial value of Error.prototype (section 15.11.3.1).
</p>

</div>

<a name="15.11.2.1_new_error"></a><h2>15.11.2.1 new Error</h2>
<div class="level2">

<p>
 ditto
</p>

</div>

<a name="error_subclasses_differ"></a><h1>Error Subclasses Differ?</h1>
<div class="level1">

<p>
 For some reason, the subclasses of Error, namely EvalError, RangeError, ReferenceError, SyntaxError, TypeError, and URIError, all seem to reflect on their current prototype property&rsquo;s value to seed new instances&rsquo; [[Prototype]] internal property.  Or do they?  The language is maddingly ambiguous.
</p>

<p>
Note that Edition 3 uses <em>NativeError</em> to stand for each of the concrete subclasses.
</p>

</div>

<a name="15.11.7.2_nativeerror"></a><h2>15.11.7.2 NativeError</h2>
<div class="level2">

<p>
 The [[Prototype]] property of the newly constructed object is set to the prototype object for this error constructor.
</p>

</div>

<a name="15.11.7.4_new_nativeerror"></a><h2>15.11.7.4 New NativeError</h2>
<div class="level2">

<p>
 The [[Prototype]] property of the newly constructed object is set to the prototype object for this <em>NativeError</em> constructor.
</p>

</div>

<a name="recommendations"></a><h1>Recommendations</h1>
<div class="level1">

<p>
 For a user-defined class, an immutable ({ReadOnly, DontDelete} at least &ndash; what about DontEnum?  separate issue...) property is bound in the global object (or something close to the global object in AS3 &ndash; someone please clarify).  Yet the standard class constructor functions in Edition 3 are writable and deletable.  One obvious way to resolve the dilemma: 
</p>
<ul>
<li class="level1"><div class="li"> Edition 4 binds the standard classes immutably, just as if they were user-defined.  The <code>dynamic</code> class qualifier does not alter this fundamental rule for all class name bindings.</div>
</li>
</ul>

<p>
 This may be too incompatible with too much existing web content.  My gut says it is not, as all of the AOP-like wrapping or substituting of standard objects in existing scripts and libraries that I have seen happens to methods on mutable prototype objects, not to the global bindings of the standard class constructors.  What&rsquo;s more, wrapping the constructors doesn&rsquo;t affect all the internal constructions that take the &ldquo;original prototype&rdquo; fork in the road, so it&rsquo;s not likely to be commonly done &ndash; or at least it can&rsquo;t be said to be reliable enough that we couldn&rsquo;t break it <img src="lib/images/smileys/icon_wink.gif" align="middle" alt=";-)" />.  We could try this and see how it flies.
</p>

<p>
If we can&rsquo;t pull of such an incompatible change to the global standard class bindings, then I suggest we unify around &ldquo;the original Object prototype object&rdquo; language, and not use the looser (albeit more natural) reflective formulations listed above under <strong>Enumeration</strong>.
</p>

<p>
Comments?
</p>

<p>
 &mdash; <em><a href="mailto:%26%23x62%3B%26%23x72%3B%26%23x65%3B%26%23x6e%3B%26%23x64%3B%26%23x61%3B%26%23x6e%3B%26%23x40%3B%26%23x6d%3B%26%23x6f%3B%26%23x7a%3B%26%23x69%3B%26%23x6c%3B%26%23x6c%3B%26%23x61%3B%26%23x2e%3B%26%23x6f%3B%26%23x72%3B%26%23x67%3B" class="mail" title="&#x62;&#x72;&#x65;&#x6e;&#x64;&#x61;&#x6e;&#x40;&#x6d;&#x6f;&#x7a;&#x69;&#x6c;&#x6c;&#x61;&#x2e;&#x6f;&#x72;&#x67;">Brendan Eich</a> 2006/04/26 23:04</em>
</p>

<p>
It would be nice to fix the spec in this regard.
</p>

<p>
I think we can get away with the incompatible change.  Opera actually flaunts the standard and interprets &ldquo;as if by <code>new Array()</code>&rdquo; by calling the internal array constructor, not by looking up <code>Array</code> in the global environment.  I&rsquo;ve never received a bug report on this behavior, or seen a bug that could be traced back to this deviation.
</p>

<p>
 &mdash; <em><a href="mailto:%26%23x6c%3B%26%23x74%3B%26%23x68%3B%26%23x40%3B%26%23x6f%3B%26%23x70%3B%26%23x65%3B%26%23x72%3B%26%23x61%3B%26%23x2e%3B%26%23x63%3B%26%23x6f%3B%26%23x6d%3B" class="mail" title="&#x6c;&#x74;&#x68;&#x40;&#x6f;&#x70;&#x65;&#x72;&#x61;&#x2e;&#x63;&#x6f;&#x6d;">Lars T Hansen</a> 2006/05/03 00:46</em>
</p>

<p>
I think you mean &ldquo;flout&rdquo; &ndash; but if you&rsquo;ve got it, flaunt it <img src="lib/images/smileys/icon_wink.gif" align="middle" alt=";-)" />.  In this case, &ldquo;it&rdquo; would be a more consistent way to create objects in native methods.  The further test of &ldquo;it&rdquo;-ness would be if you made the standard class name bindings immutable, and no one complained.
</p>

<p>
 &mdash; <em><a href="mailto:%26%23x62%3B%26%23x72%3B%26%23x65%3B%26%23x6e%3B%26%23x64%3B%26%23x61%3B%26%23x6e%3B%26%23x40%3B%26%23x6d%3B%26%23x6f%3B%26%23x7a%3B%26%23x69%3B%26%23x6c%3B%26%23x6c%3B%26%23x61%3B%26%23x2e%3B%26%23x6f%3B%26%23x72%3B%26%23x67%3B" class="mail" title="&#x62;&#x72;&#x65;&#x6e;&#x64;&#x61;&#x6e;&#x40;&#x6d;&#x6f;&#x7a;&#x69;&#x6c;&#x6c;&#x61;&#x2e;&#x6f;&#x72;&#x67;">Brendan Eich</a> 2006/05/03 14:03</em>
</p>

<p>
With regard to &ldquo;flaunt&rdquo;, I plead support &ndash; however feeble &ndash; from the authorities, in this case <a href="http://www.m-w.com" class="urlextern" target="_blank" title="http://www.m-w.com" onclick="return svchk()" onkeypress="return svchk()" rel="nofollow">http://www.m-w.com</a>: 
</p>
<blockquote>
 Flaunt (vt): 2.  to treat contemptuously &lt;flaunted the rules &ndash; Louis Untermeyer&gt;</blockquote>
<blockquote>
 Usage: Although transitive sense 2 of flaunt undoubtedly arose from confusion with flout, the contexts in which it appears cannot be called substandard &lt;meting out punishment to the occasional mavericks who operate rigged games, tolerate rowdyism, or otherwise flaunt the law &ndash; Oscar Lewis&gt; &lt;observed with horror the flaunting of their authority in the suburbs, where men... put up buildings that had no place at all in a Christian commonwealth &ndash; Marchette Chute&gt; &lt;in our profession...very rarely do we publicly chastise a colleague who has flaunted our most basic principles &ndash; R. T. Blackburn, AAUP Bull.&gt;. If you use it, however, you should be aware that many people will consider it a mistake.</blockquote>

<p>
 Anyhow, yes, there are several levels of &ldquo;it&rdquo;-ness.  Starting with a consistent way of creating objects internally would be good.  In some sense I sense &ldquo;intrinsic&rdquo; in all this; what we&rsquo;re after is &ldquo;new intrinsic::Array&rdquo;.
</p>

<p>
 &mdash; <em><a href="mailto:%26%23x6c%3B%26%23x74%3B%26%23x68%3B%26%23x40%3B%26%23x6f%3B%26%23x70%3B%26%23x65%3B%26%23x72%3B%26%23x61%3B%26%23x2e%3B%26%23x63%3B%26%23x6f%3B%26%23x6d%3B" class="mail" title="&#x6c;&#x74;&#x68;&#x40;&#x6f;&#x70;&#x65;&#x72;&#x61;&#x2e;&#x63;&#x6f;&#x6d;">Lars T Hansen</a> 2006/05/03 21:41</em> 
</p>

</div>

<!-- no cachefile used, but created -->
    <!-- wikipage stop -->
  </div>

  <div class="clearer">&nbsp;</div>

  
  <div class="stylefoot">

    <div class="meta">
      <div class="user">
              </div>
      <div class="doc">
        clarification/which_prototype.txt &middot; Last modified: 2008/06/20 06:30 by brendan      </div>
    </div>

   
    <div class="bar" id="bar_bottom">
      <div class="bar-left" id="bar_bottomleft">
        <form class="button" method="post" action="index.html" onsubmit="return svchk()"><input type="hidden" name="do" value="edit" /><input type="hidden" name="rev" value="" /><input type="hidden" name="id" value="clarification:which_prototype" /><input type="submit" value="Show pagesource" class="button" title="ALT+V" accesskey="v" /></form>        <form class="button" method="get" action="index.html" onsubmit="return svchk()"><input type="hidden" name="do" value="revisions" /><input type="hidden" name="id" value="clarification:which_prototype" /><input type="submit" value="Old revisions" class="button" title="ALT+O" accesskey="o" /></form>      </div>
      <div class="bar-right" id="bar_bottomright">
                        <form class="button" method="get" action="index.html" onsubmit="return svchk()"><input type="hidden" name="do" value="login" /><input type="hidden" name="id" value="clarification:which_prototype" /><input type="submit" value="Login" class="button" /></form>        <form class="button" method="get" action="index.html" onsubmit="return svchk()"><input type="hidden" name="do" value="index" /><input type="hidden" name="id" value="clarification:which_prototype" /><input type="submit" value="Index" class="button" title="ALT+X" accesskey="x" /></form>        <a href="doku.php%3Fid=clarification:which_prototype.html#top"><input type="button" class="button" value="Back to top" onclick="window.scrollTo(0, 0)" /></a>&nbsp;
      </div>
    </div>

  </div>

</div>

<div align="center" class="footerinc">
  <a target="_blank" href="feed.php" title="Recent changes RSS feed"><img src="lib/tpl/default/images/button-rss.png" width="80" height="15" alt="Recent changes RSS feed" border="0" /></a>

  <a target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/2.0/" rel="license" title="Creative Commons License"><img src="lib/tpl/default/images/button-cc.gif" width="80" height="15" alt="Creative Commons License" border="0" /></a>

  <a target="_blank" href="https://www.paypal.com/xclick/business=andi%40splitbrain.org&amp;item_name=DokuWiki+Donation&amp;no_shipping=1&amp;no_note=1&amp;tax=0&amp;currency_code=EUR&amp;lc=US" title="Donate"><img src="lib/tpl/default/images/button-donate.gif" alt="Donate" border="0" /></a>

  <a target="_blank" href="http://www.php.net" title="Powered by PHP"><img src="lib/tpl/default/images/button-php.gif" width="80" height="15" alt="Powered by PHP" border="0" /></a>

  <a target="_blank" href="http://validator.w3.org/check/referer" title="Valid XHTML 1.0"><img src="lib/tpl/default/images/button-xhtml.png" width="80" height="15" alt="Valid XHTML 1.0" border="0" /></a>

  <a target="_blank" href="http://jigsaw.w3.org/css-validator/check/referer" title="Valid CSS"><img src="lib/tpl/default/images/button-css.png" width="80" height="15" alt="Valid CSS" border="0" /></a>

  <a target="_blank" href="http://wiki.splitbrain.org/wiki:dokuwiki" title="Driven by DokuWiki"><img src="lib/tpl/default/images/button-dw.png" width="80" height="15" alt="Driven by DokuWiki" border="0" /></a>



<!--

<rdf:RDF xmlns="http://web.resource.org/cc/"
    xmlns:dc="http://purl.org/dc/elements/1.1/"
    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
<Work rdf:about="">
   <dc:type rdf:resource="http://purl.org/dc/dcmitype/Text" />
   <license rdf:resource="http://creativecommons.org/licenses/by-nc-sa/2.0/" />
</Work>

<License rdf:about="http://creativecommons.org/licenses/by-nc-sa/2.0/">
   <permits rdf:resource="http://web.resource.org/cc/Reproduction" />
   <permits rdf:resource="http://web.resource.org/cc/Distribution" />
   <requires rdf:resource="http://web.resource.org/cc/Notice" />
   <requires rdf:resource="http://web.resource.org/cc/Attribution" />
   <prohibits rdf:resource="http://web.resource.org/cc/CommercialUse" />
   <permits rdf:resource="http://web.resource.org/cc/DerivativeWorks" />
   <requires rdf:resource="http://web.resource.org/cc/ShareAlike" />
</License>

</rdf:RDF>

-->
</div>

<img src="lib/exe/indexer.php%3Fid=clarification%253Awhich_prototype&amp;1454275592" width="1" height="1" alt=""  /></body>
</html>
